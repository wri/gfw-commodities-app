/**
 * @license
 * lodash 3.8.0 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */

/**
 * React v0.13.3
 *
 * Copyright 2013-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 */

// Knockout JavaScript library v3.1.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

define("main/config",{title:"Global Forest Watch Commodities",urls:{gfw:"http://www.globalforestwatch.org/",blog:"http://blog.globalforestwatch.org/tag/commodities/",fires:"http://fires.globalforestwatch.org/#v=home",SPOTT:"http://www.sustainablepalmoil.org/spott/"},corsEnabledServers:["https://api-ssl.bitly.com","http://globalforestwatch.org","http://firms.modaps.eosdis.nasa.gov","http://gis-potico.wri.org","http://gfw-apis.appspot.com","http://50.18.182.188"],homeModeOptions:[{html:"<span class='less-text'>Explore the map</span>",eventName:"goToMap",display:!0,id:0,tooltip:"Explore the Map"},{html:"<span>Check out GFW Fires</span>",eventName:"goToFires",display:!1,id:1,tooltip:"Check out GFW Fires"},{html:"Read recent blogs and news about GFW Commodities",eventName:"goToBlogs",display:!1,id:2,tooltip:"Commodities News & Blogs"},{html:"Check out ZSL's Transparency Toolkit",eventName:"goToZSL",display:!1,id:3,tooltip:"ZSL Transparency Toolkit"}],homeDialog:{html:"<p>GFW Commodities is constantly undergoing site enhancements including interface redesigns based on user feedback and the incorporation of new datasets and new tools you asked for.</p><p>If you'd like to be kept informed of these kinds of updates, please <a href='http://www.wri.org/global-forest-watch-updates-and-newsletter' target='_blank'>join our mailing list</a>.</p><p>We will <strong>NEVER</strong> sell your email address to anyone, ever. We will only use your email address to send you useful newsletters about updates to the site or request your user feedback. You can unsubscribe at any time.</p>"}}),define("utils/Hasher",["dojo/hash","dojo/io-query","dojo/topic","dojo/_base/array","dojo/query"],function(e,t,n,r,i){"use strict";var s,o,u,a,f;return{init:function(){var r=t.queryToObject(e()),i="home",l=this;return r.hasOwnProperty("v")?i=r.v:(r.v="home",e(t.objectToQuery(r))),s=r.v,u=r.x,a=r.y,f=r.l,o=r.f,n.subscribe("/dojo/hashchange",function(e){var i=r;r=t.queryToObject(e),(r.x!==u||r.y!==a)&&r.v=="map"&&n.publish("centerChange",u,a,f);if(r.v===s)return;s=r.v,l.changeView(s)}),i},handleHashChange:function(e,t){var n=this,r=t.x!=e.x||t.y!=e.y||t.y!=e.y;EventsController.centerChange(e),MapController.centerChange()},getHash:function(n){return n?t.queryToObject(e())[n]:t.queryToObject(e())},setHash:function(n,r){var i=t.queryToObject(e());i[n]=r,e(t.objectToQuery(i))},setHashFromState:function(n){var r=this.getHash();r.x&&r.y&&(n.x=r.x,n.y=r.y,n.l=r.l),r.lyrs&&(n.lyrs=r.lyrs),r.wiz&&(n.wiz=r.wiz),r.f&&n.v==="map"&&(n.f=r.f),e(t.objectToQuery(n))},removeKey:function(n){var r=t.queryToObject(e());r[n]&&delete r[n],e(t.objectToQuery(r))},toggleLayers:function(n){var r=t.queryToObject(e()),i,s;i=r.lyrs?r.lyrs.split(","):[],s=i.indexOf(n),s>-1?i.splice(s,1):i.push(n),i.length===0?delete r.lyrs:r.lyrs=i.join(","),e(t.objectToQuery(r))},forceLayer:function(n,r){var i=t.queryToObject(e()),s,o;s=i.lyrs?i.lyrs.split(","):[],o=s.indexOf(n),r?o===-1&&s.push(n):o>-1&&s.splice(o,1),s.length===0?delete i.lyrs:i.lyrs=s.join(","),e(t.objectToQuery(i))},getLayers:function(){var n=t.queryToObject(e()).lyrs;return n?n.split(","):[]},removeLayers:function(n){var r=t.queryToObject(e()),i=r.lyrs.split(",");i.splice(i.indexOf(n),1),r.lyrs=i.join(","),e(t.objectToQuery(r))},changeView:function(e){n.publish("changeView",e)}}}),define("map/config",[],function(){var e="http://gis-gfw.wri.org/arcgis/rest/services/legends/MapServer",t="http://gis-gfw.wri.org/arcgis/rest/services/forest_cover/MapServer",n="http://gis-gfw.wri.org/arcgis/rest/services/commodities/MapServer",r="http://gis-gfw.wri.org/arcgis/rest/services/land_use/MapServer",i="http://50.18.182.188:6080/arcgis/rest/services/ForestGain_2000_2012_map/MapServer",s="http://50.18.182.188:6080/arcgis/rest/services/ForestGain_2000_2012/ImageServer",o="http://50.18.182.188:6080/arcgis/rest/services/ForestCover_lossyear/ImageServer",u="http://gis-gfw.wri.org/arcgis/rest/services/commodities/FORMA50_2015/ImageServer",a="http://gis-potico.wri.org/arcgis/rest/services/Fires/Global_Fires/MapServer",f="http://50.18.182.188:6080/arcgis/rest/services/TreeCover2000/ImageServer",l="http://gis-gfw.wri.org/arcgis/rest/services/wdpa_protected_areas_cached/MapServer",c="http://gis-gfw.wri.org/arcgis/rest/services/conservation/wdpa_protected_areas/MapServer",h="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",p="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/primary_forest_extent/ImageServer",d="http://gis-potico.wri.org/arcgis/rest/services/suitabilitymapper/kpss_mosaic/ImageServer",v="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/oilpalmmills/MapServer",m="http://gis-gfw.wri.org/arcgis/rest/services/conservation/MapServer",g="http://gis-gfw.wri.org/arcgis/rest/services/Utilities/Geometry/GeometryServer",y="http://gis-gfw.wri.org/arcgis/rest/services/country_data/country_data/MapServer";return{geometryServiceUrl:g,mapOptions:{basemap:"gray",centerX:4,centerY:5,zoom:3,sliderPosition:"top-right"},uploadForm:{title:"Upload Shapefile or CSV",shapefileHeader:"Shapefile Upload Instructions",csvHeader:"CSV Upload Instructions",shapefileInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coorsinate System (WGS84).","The shapefile must not exceed 1 MB."],csvInstructions:"Or, select a CSV from your local file system.  The CSV should contain a header row with columns for Name, Latitude, and Longitude."},uploader:{portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate",labelField:"WRI_label",errors:{}},tcdModal:{label:"Adjust the minimum canopy density for tree cover and tree cover loss",densityValue:30},coordinatesDialog:{coordinatesModalHeader:"Enter Point Coordinates",coordinatesEnterButton:"Enter",latitudePlaceholder:"Latitude",longitudePlaceholder:"Longitude",errors:{invalidLatitude:"You did not enter a valid value for Latitude.",invalidLongitude:"You did not enter a valid value for Longitude."}},overlays:{id:"MapOverlaysLayer",url:h,defaultLayers:[1,5,8,11]},road:{layerId:8},river:{layerId:11},settle:{layerId:1},poBounds:{layerId:5},customGraphicsLayer:{id:"CustomFeatures",infoTemplate:{content:"<table><tr><td>Unique ID:</td><td>${WRI_ID:checkAvailable}</td></tr></table>"}},wizardGraphicsLayer:{id:"WizardTempGraphics"},adminUnitsLayer:{id:"WizardDynamicLayer",url:h,whereField:"NAME_0",layerId:7,infoTemplate:{content:"<table><tr><td>Name:</td><td>${NAME_2}</td></tr></table>"}},certificationSchemeLayer:{id:"WizardDynamicLayer",url:h,whereField:"CERT_SCHEME",layerId:13,infoTemplate:{content:"<table><tr><td>Group:</td><td>${GROUP_NAME}</td></tr><tr><td>Type:</td><td>${TYPE}</td></tr></table>"}},millPointsLayer:{id:"WizardMillPointsLayer",url:v,layerId:0,infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${Parent_Com}</td></tr><tr><td>Mill Name:</td><td>${Mill_name}</td></tr></table>"}},commercialEntitiesLayer:{id:"WizardDynamicLayer",url:h,whereField:"TYPE",layerId:13},tcc:{id:"TreeCoverChange"},gain:{id:"Gain",url:i,legendLayerId:1},gainHelper:{id:"GainHelper",url:s},loss:{id:"Loss",url:o,legendLayerId:0,defaultRange:[1,14],colormap:[[1,219,101,152]],toolsNode:"treecover_change_toolbox"},forma:{id:"FormaAlerts",url:u,legendLayerId:3,defaultRange:[1,19],colormap:[[1,255,0,197]],toolsNode:"forma_toolbox"},fires:{id:"ActiveFires",url:a,defaultLayers:[0,1,2,3],toolsNode:"fires_toolbox",infoTemplate:{content:"<table><tr><td>Latitude: </td><td>${LATITUDE}</td></tr><tr><td>Longitude: </td><td>${LONGITUDE}</td></tr><tr><td>Brightness: </td><td>${BRIGHTNESS}</td></tr><tr><td>Confidence: </td><td>${CONFIDENCE}</td></tr><tr><td>Acquisition Date: </td><td>${ACQ_DATE}</td></tr><tr><td>Acquisition Time: </td><td>${ACQ_TIME}</td></tr></table>"}},tcd:{id:"TreeCoverDensity",url:f,legendLayerId:2,colormap:[[50,14,204,14]],outputValue:[50]},primForest:{id:"forestCover_commodities",url:n,infoTemplate:{content:"<div>Area: ${area_ha:NumberFormat(places:0)}</div>"},layerId:8},suit:{id:"CustomSuitability",url:d,legendLayerId:4,toolsNode:"suitability_toolbox"},biomes:{id:"forestCover_commodities",url:n,layerId:9,infoTemplate:{content:"<div>Area: ${area_ha:NumberFormat(places:0)}</div>"}},ifl:{id:"forestCover_forestCover",url:t,layerId:0},peat:{id:"forestCover_commodities",url:n,layerId:22},tfcs:{id:"forestCover_forestCover",url:t,layerId:1},ldcover:{id:"forestCover_commodities",url:n,layerId:11},ldcoverIndo:{id:"forestCover_commodities",url:n,layerId:12},ldcoverAsia:{id:"forestCover_commodities",url:n,layerId:10},legal:{id:"forestCover_commodities",url:n,layerId:13},oilPerm:{id:"forestUse_landUse",url:r,layerId:1,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${Concession Type}</td></tr><tr><td>Country: </td><td>${Country}</td></tr><tr><td>Group: </td><td>${Group:checkAvailable}</td></tr><tr><td>Certification Status: </td><td>${Certification Status:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha): </td><td>${GIS Calculated Area (ha):NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},rspoPerm:{id:"forestUse_commodities",url:n,layerId:4,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${Concession Type:checkAvailable}</td></tr><tr><td>Country:</td><td>${Country:checkAvailable}</td></tr><tr><td>Group:</td><td>${group_comp:checkAvailable}</td></tr><tr><td>Certification Status:</td><td>${cert_schem:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha):</td><td>${GIS Calculated Area (ha):NumberFormat}</td></tr><tr><td>Certificate ID:</td><td>${certificat:checkAvailable}</td></tr><tr><td>Certificate Issue Date:</td><td>${issued:checkAvailable}</td></tr><tr><td>Certificate Expiry Date:</td><td>${expired:checkAvailable}</td></tr><tr><td>Mill name:</td><td>${mill:checkAvailable}</td></tr><tr><td>Mill location:</td><td>${location:checkAvailable}</td></tr><tr><td>Mill capacity (t/hour):</td><td>${capacity:NumberFormat}</td></tr><tr><td>Certified CPO (mt):</td><td>${cpo:NumberFormat}</td></tr><tr><td>Certified PK (mt):</td><td>${pk:NumberFormat}</td></tr><tr><td>Estate Suppliers:</td><td>${estate:checkAvailable}</td></tr><tr><td>Estate Area (ha):</td><td>${estate_1:NumberFormat}</td></tr><tr><td>Outgrower Area (ha):</td><td>${outgrower:NumberFormat}</td></tr><tr><td>Scheme Smallholder area (ha):</td><td>${sh:NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},logPerm:{id:"forestUse_landUse",url:r,layerId:0},minePerm:{id:"forestUse_landUse",url:r,layerId:2},woodPerm:{id:"forestUse_landUse",url:r,layerId:3},moratorium:{id:"forestUse_commodities",url:n,layerId:7},mill:{id:"forestUse_commodities",url:n,layerId:27,query:"certificat = 'RSPO Certified'",infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${group_name}</td></tr><tr><td>Mill Name:</td><td>${mill_name_}</td></tr><tr><td>Certification Status:</td><td>${certificat}</td></tr></table>"}},gfwMill:{id:"forestUse_commodities",url:n,layerId:27,query:"certificat = 'None'",infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${group_name}</td></tr><tr><td>Mill Name:</td><td>${mill_name_}</td></tr><tr><td>Certification Status:</td><td>${certificat}</td></tr></table>"}},pal:{id:"ProtectedAreas",url:l,infoTemplate:{content:"<table><tr><td>Local Name:</td><td>${Local Name}</td></tr><tr><td>Local Designation:</td><td>${Local Designation}</td></tr><tr><td>WDPA ID:</td><td>${WDPA ID}</td></tr><tr><td>Source:</td><td>${Source:checkAvailable}</td></tr></table>"}},biodiversity:{id:"Biodiversity",url:m,layerId:0},palHelper:{id:"ProtectedAreasHelper",url:l,layerId:0},concession:{url:e},responsibleSoy:{id:"productionSuitability",url:n,layerId:28},opsd:{id:"productionSuitability",url:n,layerId:23},cons:{id:"productionSuitability",url:n,layerId:14},elev:{id:"productionSuitability",url:n,layerId:19},slope:{id:"productionSuitability",url:n,layerId:20},rain:{id:"productionSuitability",url:n,layerId:21},soilDr:{id:"productionSuitability",url:n,layerId:16},soilDe:{id:"productionSuitability",url:n,layerId:17},soilAc:{id:"productionSuitability",url:n,layerId:18},soilTy:{id:"productionSuitability",url:n,layerId:15},legendLayer:{id:"LegendLayer",url:e},layersUI:[{id:"tcc",title:"Tree Cover Change",subtitle:"",filter:"forest-change",type:"radio",layerType:"none",children:[{id:"loss",title:"Loss",subtitle:"(annual, 30m, global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-change",type:"check",layerType:"tiled",infoDivClass:"forest-change-tree-cover-loss"},{id:"gain",title:"Gain",subtitle:"(12 years, 30m, global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-change",type:"check",layerType:"image",infoDivClass:"forest-change-tree-cover-gain"}]},{id:"forma",title:"FORMA Alerts",subtitle:"(monthly, 500m, humid tropics)",filter:"forest-change",type:"radio",layerType:"image",forceUnderline:!0,infoDivClass:"forest-change-forma-alerts"},{id:"fires",title:"Active Fires",subtitle:"(past 7 days, 1km, global; NASA)",filter:"forest-change",type:"radio",layerType:"dynamic",infoDivClass:"forest-change-nasa-active-fires"},{id:"tcd",title:"Tree Cover Density",subtitle:"(year 2000, 30m global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-tree-cover-density"},{id:"ifl",title:"Intact Forest Landscapes",subtitle:"(year 2013, 30m global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-intact-forest-landscape"},{id:"peat",title:"Peat Lands",subtitle:"(year 2011, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-peat-lands"},{id:"tfcs",title:"Tropical Carbon Stocks",subtitle:"(early 2000s, 1km, tropics)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-carbon-stocks"},{id:"biomes",title:"Brazil Biomes",subtitle:"(year 2004, Brazil)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-brazil-biomes"},{id:"primForest",title:"Primary Forests",subtitle:"(2000, 30m, Indonesia)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-primary-forest"},{id:"ldcover",title:"Land Cover",subtitle:"(mid 2000s, global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-global"},{id:"ldcoverIndo",title:"Land Cover Indonesia",subtitle:"(mid 2000s, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-indonesia"},{id:"ldcoverAsia",title:"Land Cover Southeast Asia",subtitle:"(mid 2000s, Southeast Asia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-south-east-asia"},{id:"legal",title:"Legal Classifications",subtitle:"(year 2010, select countries)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-legal-classifications"},{kids:["oilPerm","rspoPerm","woodPerm","minePerm","logPerm"],id:"newConcessions",title:"Concessions",filter:"forest-use",type:"check",layerType:"dynamic"},{id:"oilPerm",title:"Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-oil-palm",parent:"newConcessions"},{id:"rspoPerm",title:"RSPO Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-rspo-consessions",parent:"newConcessions"},{id:"logPerm",title:"Wood Fiber",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-logging",parent:"newConcessions"},{id:"minePerm",title:"Mining",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mining",parent:"newConcessions"},{id:"woodPerm",title:"Managed Forests",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-wood-fiber-plantation",parent:"newConcessions",endChild:!0},{kids:["mill","gfwMill"],id:"newInfrastructure",title:"Infrastructure",filter:"forest-use",type:"check",layerType:"dynamic"},{id:"mill",title:"RSPO Palm Oil Mills",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mill-points",parent:"newInfrastructure"},{id:"gfwMill",title:"Palm Oil Mills",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-gfw-mill-points",parent:"newInfrastructure",endChild:!0},{kids:["moratorium"],id:"newOther",title:"Other",filter:"forest-use",type:"check",layerType:"dynamic"},{id:"moratorium",title:"Indonesia Moratorium Areas",subtitle:"(IMM V7/V6, 2014, Indonesia)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-moratorium-areas",parent:"newOther",endChild:!0},{id:"pal",title:"Protected Areas",subtitle:"(varies, global)",filter:"conservation",type:"check",layerType:"tiled",infoDivClass:"conservation-protected-areas"},{id:"biodiversity",title:"Biodiversity Hotspots",subtitle:"(year 2011, global)",filter:"conservation",type:"check",layerType:"dynamic",infoDivClass:"conservation-biodiversity-hotspots"},{kids:["responsibleSoy"],id:"soyBean",title:"Soybean",filter:"agro-suitability",type:"check",layerType:"dynamic"},{id:"responsibleSoy",title:"RTRS Guides for Responsible Soy Expansion",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"image",parent:"soyBean",infoDivClass:"suitability-soy-layer"},{kids:["suit","opsd","cons","elev","slope","rain","soilDr","soilDe","soilAc","soilTy"],id:"oilPalm",title:"Oil Palm",filter:"agro-suitability",type:"check",layerType:"dynamic"},{id:"suit",title:"Custom Suitability Map",subtitle:"",filter:"agro-suitability",type:"check",parent:"oilPalm",layerType:"image",infoDivClass:"suitability-custom-suitability-mapper"},{id:"opsd",title:"WRI Suitability Standard - Oil Palm",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-wri-standard-suitability"},{id:"cons",title:"Conservation Areas",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-conservation-areas"},{id:"elev",title:"Elevation",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-elevation"},{id:"slope",title:"Slope",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-slope"},{id:"rain",title:"Rainfall",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-rainfall"},{id:"soilDr",title:"Soil Drainage",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-drainage"},{id:"soilDe",title:"Soil Depth",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-depth"},{id:"soilAc",title:"Soil Acidity",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-acidity"},{id:"soilTy",title:"Soil Type",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-type"}],treeCoverLossSlider:{baseYear:2e3,numYears:12},customSuitabilityDefaults:{computeBinaryRaster:[{id:0,values:"2,3,5,8,9,11,15,17,18",classCount:32,operator:"in",name:"LCInpR"},{id:1,values:"0",classCount:32,operator:"in",name:"PeatInpR"},{id:2,values:"30",operator:"lt",name:"SlopeInpR"},{id:3,values:"1000",operator:"gt",name:"ConsInpR"},{id:4,values:"100",operator:"gt",name:"WaterInpR"},{id:5,values:"1000",operator:"lt",name:"ElevInpR"},{id:6,values:"1500,6000",operator:"between",name:"RainfallInpR"},{id:7,values:"2,3,4,99",classCount:32,operator:"in",name:"SDrainInpR"},{id:8,values:"3,4,5,6,7,99",classCount:32,operator:"in",name:"SDepthInpR"},{id:9,values:"1,2,3,4,5,6,7,99",classCount:32,operator:"in",name:"SAcidInpR"},{id:10,values:"0,1,2,3,5,6,7,8,9",classCount:32,operator:"in",name:"STypeInpR"}]},checkboxItems:[{node:"shrub-check",name:"landcover-checkbox",value:"2",checked:!0},{node:"bareland-check",name:"landcover-checkbox",value:"3",checked:!0},{node:"secondary-forest-check",name:"landcover-checkbox",value:"4",checked:!1},{node:"dryland-agro-check",name:"landcover-checkbox",value:"5",checked:!0},{node:"water-check",name:"landcover-checkbox",value:"6",checked:!1},{node:"mining-check",name:"landcover-checkbox",value:"7",checked:!1},{node:"plantation-forest-check",name:"landcover-checkbox",value:"8",checked:!0},{node:"estate-crop-check",name:"landcover-checkbox",value:"9",checked:!0},{node:"swamp-shrub-check",name:"landcover-checkbox",value:"10",checked:!1},{node:"primary-swamp-check",name:"landcover-checkbox",value:"12",checked:!1},{node:"secondary-swamp-check",name:"landcover-checkbox",value:"13",checked:!1},{node:"settlement-check",name:"landcover-checkbox",value:"14",checked:!1},{node:"grassland-check",name:"landcover-checkbox",value:"15",checked:!0},{node:"secondary-mangrove-check",name:"landcover-checkbox",value:"16",checked:!1},{node:"dryland-check",name:"landcover-checkbox",value:"17",checked:!0},{node:"rice-check",name:"landcover-checkbox",value:"18",checked:!0},{node:"fish-check",name:"landcover-checkbox",value:"19",checked:!1},{node:"transmigration-check",name:"landcover-checkbox",value:"20",checked:!1},{node:"swamp-check",name:"landcover-checkbox",value:"21",checked:!1},{node:"primary-mangrove-check",name:"landcover-checkbox",value:"22",checked:!1},{node:"airport-check",name:"landcover-checkbox",value:"23",checked:!1},{node:"inceptisol-check",name:"soil-type-checkbox",value:"1",checked:!0},{node:"oxisol-check",name:"soil-type-checkbox",value:"7",checked:!0},{node:"alfisol-check",name:"soil-type-checkbox",value:"5",checked:!0},{node:"ultisol-check",name:"soil-type-checkbox",value:"2",checked:!0},{node:"spodosol-check",name:"soil-type-checkbox",value:"8",checked:!0},{node:"entisol-check",name:"soil-type-checkbox",value:"3",checked:!0},{node:"histosol-check",name:"soil-type-checkbox",value:"4",checked:!1},{node:"mollisol-check",name:"soil-type-checkbox",value:"9",checked:!0},{node:"rock-check",name:"soil-type-checkbox",value:"10",checked:!1}],suitabilitySliderTooltips:{peat:{0:"0 cm",1:"Less than 50 cm",2:"50 - 100 cm",3:"100- 200 cm"},rainfall:{label:"mm/yr"},drainage:{1:"very poor",2:"poor, imperfect",3:"well, moderately well",4:"excessive, slightly excessive"},depth:{1:"none, very shallow (0-10 cm)",2:"shallow (11-25 cm)",3:"mod shallow (26-50 cm)",4:"mod deep (51-75 cm)",5:"deep (76-100 cm)",6:"very deep (101-150 cm)",7:"extremely deep (> 150 cm)"},acidity:{1:"excessively acid (< 4.0)",2:"extremely acid (4.0 - 4.5)",3:"very strongly acid (4.6 - 5.0)",4:"strongly acid (5.1 - 5.5)",5:"moderately acid (5.6 - 6.0)",6:"slightly acid (6.1 - 6.5)",7:"neutral (6.6 - 7.3)",8:"slightly alkaline (7.4 - 7.8)"},treeCover:{0:"2001",1:"2002",2:"2003",3:"2004",4:"2005",5:"2006",6:"2007",7:"2008",8:"2009",9:"2010",10:"2011",11:"2012"}},firesConfidenceDialog:{title:"High Confidence Fires",text:"GFW employs a recommendation for detecting forest clearing fires (described in Morton and Defries, 2008), identifying fires with a Brightness value greater than or equal to 330 Kelvin and a Confidence value greater than or equal to 30% to indicate fires that have a higher confidence for being forest-clearing fires. Low confidence fires are lower intensity fires that could either be from non-forest-clearing fire activity (clearing fields or grass burning), or could be older fires that have decreased in intensity (smoldering rather than flaming fires). The use of this classification establishes a higher standard for fire detection than using all fire alerts equally."},suitabilityExportDialog:{title:"Export Suitability Settings and GeoTiff",instruction:"The resolution downloaded for the Suitability Map is based on your current zoom extent. For a higher resolution download, zoom in closer to your area of interest."},simpleLegends:{concessions:{url:h+"/legend?f=json",parentId:"legend-content",title:"Concessions",id:"concessions-legend",layers:[{id:13}]},road:{url:h+"/legend?f=json",parentId:"legend-content",id:"roads-legend",title:"Roads",layers:[{id:9,labels:["Primary"]},{id:10,labels:["Secondary"]}]},settle:{url:h+"/legend?f=json",parentId:"legend-content",id:"settle-legend",title:"Settlements",layers:[{id:2},{id:3,labels:["Cities and Towns"]}]},poBounds:{url:h+"/legend?f=json",parentId:"legend-content",id:"po-bounds-legend",title:"Political Boundaries",layers:[{id:6,labels:["Admin Level 1"]},{id:7,labels:["Admin Level 2"]}]}}}}),define("map/Symbols",["esri/Color","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(e,t,n,r){"use strict";var i={getPolygonSymbol:function(){return new t(t.STYLE_SOLID,new n(n.STYLE_SOLID,new e([255,0,0]),2),new e([103,200,255,0]))},getPointSymbol:function(){return new r(r.STYLE_CIRCLE,10,new n(n.STYLE_SOLID,new e([255,0,0]),1),new e([0,0,0,.25]))},getHighlightPolygonSymbol:function(){return new t(t.STYLE_SOLID,new n(n.STYLE_SOLID,new e([0,255,255]),2),new e([103,200,255,0]))},getHighlightPointSymbol:function(){return new r(r.STYLE_CIRCLE,10,new n(n.STYLE_SOLID,new e([0,255,255]),1),new e([0,0,0,.25]))}};return i}),define("utils/assert",[],function(){"use strict";return function(e,t){if(e)return;throw new Error(["Assertion Error:",t].join(" "))}}),define("utils/GeoHelper",["map/config","map/Symbols","esri/units","esri/graphic","esri/geometry/Point","esri/geometry/Circle","esri/SpatialReference","esri/tasks/GeometryService","esri/geometry/webMercatorUtils","dojo/Deferred","dojo/_base/array","utils/assert"],function(e,t,n,r,i,s,o,u,a,f,l,c){var h,p;return{getSpatialReference:function(){return p=p||new o(102100)},generatePointGraphicFromGeometric:function(e,n,s){return new r(a.geographicToWebMercator(new i(e,n)),t.getPointSymbol(),s)},preparePointAsPolygon:function(e,o){var u=new s(new i(e.geometry),{radius:o||50,radiusUnit:n.KILOMETERS});return new r(u,t.getPolygonSymbol(),e.attributes)},applySelectionSymbolToFeature:function(e){var n=e.geometry.type==="point"?t.getHighlightPointSymbol():t.getHighlightPolygonSymbol();return new r(e.geometry,n,e.attributes)},zoomToFeature:function(e){e.geometry.x?app.map.centerAndZoom(e.geometry,9):e.geometry.center?app.map.centerAndZoom(e.geometry.center,9):app.map.setExtent(e.geometry.getExtent(),!0)},nextCustomFeatureId:function(){var t=app.map.getLayer(e.customGraphicsLayer.id),n=t.graphics,r=n.length,i=0,s,o;for(s=0;s<r;s++)o=parseInt(n[s].attributes.WRI_ID),isNaN(o)||(i=Math.max(i,o));return i+1},convertGeometryToGeometric:function(e){function u(e,t){var n=!1;return l.forEach(e,function(e){e[0]===t[0]&&e[1]===t[1]&&(n=!0)}),n}var t=[],n=[],r,s,o=this;return l.forEach(e.rings,function(e){l.forEach(e,function(e){s=new i(e,o.getSpatialReference()),r=a.xyToLngLat(s.x,s.y),u(n,r)?(n.push(r),t.push(n),n=[]):n.push(r)})}),{geom:t.length>1?t:t[0],type:t.length>1?"MultiPolygon":"Polygon"}},union:function(t){if(Object.prototype.toString.call(t)!=="[object Array]")throw new Error("Method expects polygons paramter to be of type Array");var n=new f,r=r||new u(e.geometryServiceUrl);return t.length===1?n.resolve(t[0]):r.union(t,n.resolve,n.resolve),n},removeGraphicByField:function(e,t,n){c(e&&t&&n,"Invalid Parameters for 'GeoHelper.removeGraphicByField'");var r=app.map.getLayer(e);r&&l.some(r.graphics,function(e){if(e.attributes[t]===n)return r.remove(e),!0})}}}),function(){function e(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||e===w&&r)return 1;if(e<t||!r||t===w&&n)return-1}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return h(e,n);n-=1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function r(e){return typeof e=="function"||!1}function i(e){return typeof e=="string"?e:null==e?"":e+""}function s(e){return e.charCodeAt(0)}function o(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function u(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function a(t,n){return e(t.a,n.a)||t.b-n.b}function f(e){return Bt[e]}function l(e){return jt[e]}function c(e){return"\\"+qt[e]}function h(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var i=e[t];if(i!==i)return t}return-1}function p(e){return!!e&&typeof e=="object"}function d(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function v(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;)e[n]===t&&(e[n]=I,s[++i]=n);return s}function m(e){for(var t=-1,n=e.length;++t<n&&d(e.charCodeAt(t)););return t}function g(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function y(e){return Ft[e]}function b(d){function Bt(e){if(p(e)&&!(gu(e)||e instanceof It)){if(e instanceof Ft)return e;if(Ds.call(e,"__chain__")&&Ds.call(e,"__wrapped__"))return Si(e)}return new Ft(e)}function jt(){}function Ft(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function It(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ho,this.__views__=null}function qt(){this.__data__={}}function Rt(e){var t=e?e.length:0;for(this.data={hash:no(null),set:new Js};t--;)this.push(e[t])}function Ut(e,t){var n=e.data;return(typeof t=="string"||Ki(t)?n.set.has(t):n.hash[t])?0:-1}function zt(e,t){var n=-1,r=e.length;for(t||(t=ys(r));++n<r;)t[n]=e[n];return t}function Wt(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function Xt(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Jt(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function Kt(e,t){for(var n=-1,r=e.length,i=ys(r);++n<r;)i[n]=t(e[n],n,e);return i}function Qt(e,t,n,r){var i=-1,s=e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Gt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Yt(e,t){return e===w?t:e}function Zt(e,t,n,r){return e!==w&&Ds.call(r,n)?e:t}function Ln(e,t,n){var r=Au(t);Xs.apply(r,Do(t));for(var i=-1,s=r.length;++i<s;){var o=r[i],u=e[o],a=n(u,t[o],o,e,t);(a===a?a===u:u!==u)&&(u!==w||o in e)||(e[o]=a)}return e}function Mn(e,t){for(var n=-1,r=null==e,i=!r&&ai(e),s=i&&e.length,o=t.length,u=ys(o);++n<o;){var a=t[n];u[n]=i?fi(a,s)?e[a]:w:r?w:e[a]}return u}function Dn(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var s=t[r];n[s]=e[s]}return n}function Pn(e,t,n){var r=typeof e;return"function"==r?t===w?e:xr(e,t,n):null==e?ps:"object"==r?ir(e):t===w?gs(e):sr(e,t)}function Hn(e,t,n,r,i,s,o){var u;if(n&&(u=i?n(e,r,i):n(e)),u!==w)return u;if(!Ki(e))return e;if(r=gu(e)){if(u=ii(e),!t)return zt(e,u)}else{var a=Hs.call(e),f=a==X;if(a!=$&&a!=q&&(!f||i))return Pt[a]?oi(e,a,t):i?e:{};if(u=si(f?{}:e),!t)return So(u,e)}for(s||(s=[]),o||(o=[]),i=s.length;i--;)if(s[i]==e)return o[i];return s.push(e),o.push(u),(r?Wt:Kn)(e,function(r,i){u[i]=Hn(r,t,n,i,e,s,o)}),u}function Bn(e,t,n){if(typeof e!="function")throw new ks(F);return Ks(function(){e.apply(w,n)},t)}function qn(e,t){var r=e?e.length:0,i=[];if(!r)return i;var s=-1,o=ri(),u=o==n,a=u&&200<=t.length?Ao(t):null,f=t.length;a&&(o=Ut,u=!1,t=a);e:for(;++s<r;)if(a=e[s],u&&a===a){for(var l=f;l--;)if(t[l]===a)continue e;i.push(a)}else 0>o(t,a,0)&&i.push(a);return i}function zn(e,t){var n=!0;return To(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Xn(e,t){var n=[];return To(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Vn(e,t,n,r){var i;return n(e,function(e,n,s){return t(e,n,s)?(i=r?n:e,!1):void 0}),i}function $n(e,t,n){for(var r=-1,i=e.length,s=-1,o=[];++r<i;){var u=e[r];if(p(u)&&ai(u)&&(n||gu(u)||Vi(u))){t&&(u=$n(u,t,n));for(var a=-1,f=u.length;++a<f;)o[++s]=u[a]}else n||(o[++s]=u)}return o}function Jn(e,t){Co(e,t,rs)}function Kn(e,t){return Co(e,t,Au)}function Qn(e,t){return ko(e,t,Au)}function Gn(e,t){for(var n=-1,r=t.length,i=-1,s=[];++n<r;){var o=t[n];bu(e[o])&&(s[++i]=o)}return s}function er(e,t,n){if(null!=e){n!==w&&n in wi(e)&&(t=[n]),n=-1;for(var r=t.length;null!=e&&++n<r;)e=e[t[n]];return n&&n==r?e:w}}function tr(e,t,n,r,i,s){if(e===t)return!0;var o=typeof e,u=typeof t;if("function"!=o&&"object"!=o&&"function"!=u&&"object"!=u||null==e||null==t)e=e!==e&&t!==t;else e:{var o=tr,u=gu(e),a=gu(t),f=R,l=R;u||(f=Hs.call(e),f==q?f=$:f!=$&&(u=es(e))),a||(l=Hs.call(t),l==q?l=$:l!=$&&es(t));var c=f==$,a=l==$,l=f==l;if(!l||u||c){if(!r&&(f=c&&Ds.call(e,"__wrapped__"),a=a&&Ds.call(t,"__wrapped__"),f||a)){e=o(f?e.value():e,a?t.value():t,n,r,i,s);break e}if(l){for(i||(i=[]),s||(s=[]),f=i.length;f--;)if(i[f]==e){e=s[f]==t;break e}i.push(e),s.push(t),e=(u?Yr:ei)(e,t,o,n,r,i,s),i.pop(),s.pop()}else e=!1}else e=Zr(e,t,f)}return e}function nr(e,t,n,r,i){for(var s=-1,o=t.length,u=!i;++s<o;)if(u&&r[s]?n[s]!==e[t[s]]:!(t[s]in e))return!1;for(s=-1;++s<o;){var a=t[s],f=e[a],l=n[s];if(u&&r[s]?a=f!==w||a in e:(a=i?i(f,l,a):w,a===w&&(a=tr(l,f,i,!0))),!a)return!1}return!0}function rr(e,t){var n=-1,r=ai(e)?ys(e.length):[];return To(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function ir(e){var t=Au(e),n=t.length;if(!n)return hs(!0);if(1==n){var r=t[0],i=e[r];if(di(i))return function(e){return null==e?!1:e[r]===i&&(i!==w||r in wi(e))}}for(var s=ys(n),o=ys(n);n--;)i=e[t[n]],s[n]=i,o[n]=di(i);return function(e){return null!=e&&nr(wi(e),t,s,o)}}function sr(e,t){var n=gu(e),r=ci(e)&&di(t),i=e+"";return e=Ei(e),function(s){if(null==s)return!1;var o=i;if(s=wi(s),!(!n&&r||o in s)){if(s=1==e.length?s:er(s,hr(e,0,-1)),null==s)return!1;o=ki(e),s=wi(s)}return s[o]===t?t!==w||o in s:tr(t,s[o],null,!0)}}function or(e,t,n,r,i){if(!Ki(e))return e;var s=ai(t)&&(gu(t)||es(t));if(!s){var o=Au(t);Xs.apply(o,Do(t))}return Wt(o||t,function(u,a){if(o&&(a=u,u=t[a]),p(u)){r||(r=[]),i||(i=[]);e:{for(var f=a,l=r,c=i,h=l.length,d=t[f];h--;)if(l[h]==d){e[f]=c[h];break e}var h=e[f],v=n?n(h,d,f,e,t):w,m=v===w;m&&(v=d,ai(d)&&(gu(d)||es(d))?v=gu(h)?h:ai(h)?zt(h):[]:wu(d)||Vi(d)?v=Vi(h)?ts(h):wu(h)?h:{}:m=!1),l.push(d),c.push(v),m?e[f]=or(v,d,n,l,c):(v===v?v!==h:h===h)&&(e[f]=v)}}else f=e[a],l=n?n(f,u,a,e,t):w,(c=l===w)&&(l=u),!s&&l===w||!c&&(l===l?l===f:f!==f)||(e[a]=l)}),e}function ur(e){return function(t){return null==t?w:t[e]}}function ar(e){var t=e+"";return e=Ei(e),function(n){return er(n,e,t)}}function fr(e,t){for(var n=e?t.length:0;n--;){var r=parseFloat(t[n]);if(r!=i&&fi(r)){var i=r;Qs.call(e,r,1)}}}function lr(e,t){return e+Us(lo()*(t-e+1))}function cr(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function hr(e,t,n){var r=-1,i=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===w||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=ys(i);++r<i;)n[r]=e[r+t];return n}function pr(e,t){var n;return To(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function dr(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function vr(t,n,r){var i=ni(),s=-1;return n=Kt(n,function(e){return i(e)}),t=rr(t,function(e){return{a:Kt(n,function(t){return t(e)}),b:++s,c:e}}),dr(t,function(t,n){var i;e:{i=-1;for(var s=t.a,o=n.a,u=s.length,a=r.length;++i<u;){var f=e(s[i],o[i]);if(f){i=i<a?f*(r[i]?1:-1):f;break e}}i=t.b-n.b}return i})}function mr(e,t){var n=0;return To(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function gr(e,t){var r=-1,i=ri(),s=e.length,o=i==n,u=o&&200<=s,a=u?Ao():null,f=[];a?(i=Ut,o=!1):(u=!1,a=t?[]:f);e:for(;++r<s;){var l=e[r],c=t?t(l,r,e):l;if(o&&l===l){for(var h=a.length;h--;)if(a[h]===c)continue e;t&&a.push(c),f.push(l)}else 0>i(a,c,0)&&((t||u)&&a.push(c),f.push(l))}return f}function yr(e,t){for(var n=-1,r=t.length,i=ys(r);++n<r;)i[n]=e[t[n]];return i}function br(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?hr(e,r?0:s,r?s+1:i):hr(e,r?s+1:0,r?i:s)}function wr(e,t){var n=e;n instanceof It&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var n=[n],s=t[r];Xs.apply(n,s.args),n=s.func.apply(s.thisArg,n)}return n}function Er(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=mo){for(;r<i;){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)?r=s+1:i=s}return i}return Sr(e,t,ps,n)}function Sr(e,t,n,r){t=n(t);for(var i=0,s=e?e.length:0,o=t!==t,u=t===w;i<s;){var a=Us((i+s)/2),f=n(e[a]),l=f===f;(o?l||r:u?l&&(r||f!==w):r?f<=t:f<t)?i=a+1:s=a}return oo(s,vo)}function xr(e,t,n){if(typeof e!="function")return ps;if(t===w)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}function Tr(e){return Is.call(e,0)}function Nr(e,t,n){for(var r=n.length,i=-1,s=so(e.length-r,0),o=-1,u=t.length,a=ys(s+u);++o<u;)a[o]=t[o];for(;++i<r;)a[n[i]]=e[i];for(;s--;)a[o++]=e[i++];return a}function Cr(e,t,n){for(var r=-1,i=n.length,s=-1,o=so(e.length-i,0),u=-1,a=t.length,f=ys(o+a);++s<o;)f[s]=e[s];for(o=s;++u<a;)f[o+u]=t[u];for(;++r<i;)f[o+n[r]]=e[s++];return f}function kr(e,t){return function(n,r,i){var s=t?t():{};if(r=ni(r,i,3),gu(n)){i=-1;for(var o=n.length;++i<o;){var u=n[i];e(s,u,r(u,i,n),n)}}else To(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function Lr(e){return Xi(function(t,n){var r=-1,i=null==t?0:n.length,s=2<i&&n[i-2],o=2<i&&n[2],u=1<i&&n[i-1];for(typeof s=="function"?(s=xr(s,u,5),i-=2):(s=typeof u=="function"?u:null,i-=s?1:0),o&&li(n[0],n[1],o)&&(s=3>i?null:s,i=1);++r<i;)(o=n[r])&&e(t,o,s);return t})}function Ar(e,t){return function(n,r){var i=n?_o(n):0;if(!pi(i))return e(n,r);for(var s=t?i:-1,o=wi(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Or(e){return function(t,n,r){var i=wi(t);r=r(t);for(var s=r.length,o=e?s:-1;e?o--:++o<s;){var u=r[o];if(!1===n(i[u],u,i))break}return t}}function Mr(e,t){function n(){return(this&&this!==Vt&&this instanceof n?r:e).apply(t,arguments)}var r=Dr(e);return n}function _r(e){return function(t){var n=-1;t=ls(ss(t));for(var r=t.length,i="";++n<r;)i=e(i,t[n],n);return i}}function Dr(e){return function(){var t=xo(e.prototype),n=e.apply(t,arguments);return Ki(n)?n:t}}function Pr(e){function t(n,r,i){return i&&li(n,r,i)&&(r=null),n=Gr(n,e,null,null,null,null,null,r),n.placeholder=t.placeholder,n}return t}function Hr(e,t){return function(n,r,i){i&&li(n,r,i)&&(r=null);var o=ni(),u=null==r;if(o===Pn&&u||(u=!1,r=o(r,i,3)),u){if(r=gu(n),r||!Zi(n))return e(r?n:bi(n));r=s}return ti(n,r,t)}}function Br(e,n){return function(r,i,s){return i=ni(i,s,3),gu(r)?(i=t(r,i,n),-1<i?r[i]:w):Vn(r,i,e)}}function jr(e){return function(n,r,i){return n&&n.length?(r=ni(r,i,3),t(n,r,e)):-1}}function Fr(e){return function(t,n,r){return n=ni(n,r,3),Vn(t,n,e,!0)}}function Ir(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var n,r=e?t:-1,i=0,s=ys(t);e?r--:++r<t;){var o=s[i++]=arguments[r];if(typeof o!="function")throw new ks(F);var u=n?"":Mo(o);n="wrapper"==u?new Ft([]):n}for(r=n?-1:t;++r<t;)o=s[r],u=Mo(o),n=(i="wrapper"==u?Oo(o):null)&&hi(i[0])&&i[1]==(A|N|k|O)&&!i[4].length&&1==i[9]?n[Mo(i[0])].apply(n,i[3]):1==o.length&&hi(o)?n[u]():n.thru(o);return function(){var e=arguments;if(n&&1==e.length&&gu(e[0]))return n.plant(e[0]).value();for(var r=0,e=s[r].apply(this,e);++r<t;)e=s[r].call(this,e);return e}}}function qr(e,t){return function(n,r,i){return typeof r=="function"&&i===w&&gu(n)?e(n,r):t(n,xr(r,i,3))}}function Rr(e){return function(t,n,r){return(typeof n!="function"||r!==w)&&(n=xr(n,r,3)),e(t,n,rs)}}function Ur(e){return function(t,n,r){return(typeof n!="function"||r!==w)&&(n=xr(n,r,3)),e(t,n)}}function zr(e){return function(t,n,r){var i={};return n=ni(n,r,3),Kn(t,function(t,r,s){s=n(t,r,s),r=e?s:r,t=e?t:s,i[r]=t}),i}}function Wr(e){return function(t,n,r){return t=i(t),(e?t:"")+Jr(t,n,r)+(e?"":t)}}function Xr(e){var t=Xi(function(n,r){var i=v(r,t.placeholder);return Gr(n,e,null,r,i)});return t}function Vr(e,t){return function(n,r,i,s){var o=3>arguments.length;return typeof r=="function"&&s===w&&gu(n)?e(n,r,i,o):cr(n,ni(r,s,4),i,o,t)}}function $r(e,t,n,r,i,s,o,u,a,f){function l(){for(var E=arguments.length,T=E,N=ys(E);T--;)N[T]=arguments[T];if(r&&(N=Nr(N,r,i)),s&&(N=Cr(N,s,o)),d||g){var T=l.placeholder,C=v(N,T),E=E-C.length;if(E<f){var A=u?zt(u):null,E=so(f-E,0),O=d?C:null,C=d?null:C,M=d?N:null,N=d?null:N;return t|=d?k:L,t&=~(d?L:k),m||(t&=~(S|x)),N=[e,t,n,M,O,N,C,A,a,E],A=$r.apply(w,N),hi(e)&&Po(A,N),A.placeholder=T,A}}if(T=h?n:this,p&&(e=T[b]),u)for(A=N.length,E=oo(u.length,A),O=zt(N);E--;)C=u[E],N[E]=fi(C,A)?O[C]:w;return c&&a<N.length&&(N.length=a),(this&&this!==Vt&&this instanceof l?y||Dr(e):e).apply(T,N)}var c=t&A,h=t&S,p=t&x,d=t&N,m=t&T,g=t&C,y=!p&&Dr(e),b=e;return l}function Jr(e,t,n){return e=e.length,t=+t,e<t&&ro(t)?(t-=e,n=null==n?" ":n+"",as(n,qs(t/n.length)).slice(0,t)):""}function Kr(e,t,n,r){function i(){for(var t=-1,u=arguments.length,a=-1,f=r.length,l=ys(u+f);++a<f;)l[a]=r[a];for(;u--;)l[a++]=arguments[++t];return(this&&this!==Vt&&this instanceof i?o:e).apply(s?n:this,l)}var s=t&S,o=Dr(e);return i}function Qr(e){return function(t,n,r,i){var s=ni(r);return s===Pn&&null==r?Er(t,n,e):Sr(t,n,s(r,i,1),e)}}function Gr(e,t,n,r,i,s,o,u){var a=t&x;if(!a&&typeof e!="function")throw new ks(F);var f=r?r.length:0;if(f||(t&=~(k|L),r=i=null),f-=i?i.length:0,t&L){var l=r,c=i;r=i=null}var h=a?null:Oo(e);return n=[e,t,n,r,i,l,c,s,o,u],h&&(r=n[1],t=h[1],u=r|t,i=t==A&&r==N||t==A&&r==O&&n[7].length<=h[8]||t==(A|O)&&r==N,(u<A||i)&&(t&S&&(n[2]=h[2],u|=r&S?0:T),(r=h[3])&&(i=n[3],n[3]=i?Nr(i,r,h[4]):zt(r),n[4]=i?v(n[3],I):zt(h[4])),(r=h[5])&&(i=n[5],n[5]=i?Cr(i,r,h[6]):zt(r),n[6]=i?v(n[5],I):zt(h[6])),(r=h[7])&&(n[7]=zt(r)),t&A&&(n[8]=null==n[8]?h[8]:oo(n[8],h[8])),null==n[9]&&(n[9]=h[9]),n[0]=h[0],n[1]=u),t=n[1],u=n[9]),n[9]=null==u?a?0:e.length:so(u-f,0)||0,(h?Lo:Po)(t==S?Mr(n[0],n[2]):t!=k&&t!=(S|k)||n[4].length?$r.apply(w,n):Kr.apply(w,n),n)}function Yr(e,t,n,r,i,s,o){var u=-1,a=e.length,f=t.length,l=!0;if(a!=f&&(!i||f<=a))return!1;for(;l&&++u<a;){var c=e[u],h=t[u],l=w;if(r&&(l=i?r(h,c,u):r(c,h,u)),l===w)if(i)for(var p=f;p--&&(h=t[p],!(l=c&&c===h||n(c,h,r,i,s,o))););else l=c&&c===h||n(c,h,r,i,s,o)}return!!l}function Zr(e,t,n){switch(n){case U:case z:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case V:return e!=+e?t!=+t:e==+t;case J:case K:return e==t+""}return!1}function ei(e,t,n,r,i,s,o){var u=Au(e),a=u.length,f=Au(t).length;if(a!=f&&!i)return!1;for(var f=i,l=-1;++l<a;){var c=u[l],h=i?c in t:Ds.call(t,c);if(h){var p=e[c],d=t[c],h=w;r&&(h=i?r(d,p,c):r(p,d,c)),h===w&&(h=p&&p===d||n(p,d,r,i,s,o))}if(!h)return!1;f||(f="constructor"==c)}return f||(n=e.constructor,r=t.constructor,!(n!=r&&"constructor"in e&&"constructor"in t)||typeof n=="function"&&n instanceof n&&typeof r=="function"&&r instanceof r)?!0:!1}function ti(e,t,n){var r=n?ho:co,i=r,s=i;return To(e,function(e,o,u){o=t(e,o,u),((n?o<i:o>i)||o===r&&o===s)&&(i=o,s=e)}),s}function ni(e,t,n){var r=Bt.callback||cs,r=r===cs?Pn:r;return n?r(e,t,n):r}function ri(e,t,r){var i=Bt.indexOf||Ci,i=i===Ci?n:i;return e?i(e,t,r):i}function ii(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ds.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function si(e){return e=e.constructor,typeof e=="function"&&e instanceof e||(e=Ts),new e}function oi(e,t,n){var r=e.constructor;switch(t){case Q:return Tr(e);case U:case z:return new r(+e);case G:case Y:case Z:case et:case tt:case nt:case rt:case it:case st:return t=e.buffer,new r(n?Tr(t):t,e.byteOffset,e.length);case V:case K:return new r(e);case J:var i=new r(e.source,Tt.exec(e));i.lastIndex=e.lastIndex}return i}function ui(e,t,n){return null==e||ci(t,e)||(t=Ei(t),e=1==t.length?e:er(e,hr(t,0,-1)),t=ki(t)),t=null==e?e:e[t],null==t?w:t.apply(e,n)}function ai(e){return null!=e&&pi(_o(e))}function fi(e,t){return e=+e,t=null==t?yo:t,-1<e&&0==e%1&&e<t}function li(e,t,n){if(!Ki(n))return!1;var r=typeof t;return("number"==r?ai(n)&&fi(t,n.length):"string"==r&&t in n)?(t=n[t],e===e?e===t:t!==t):!1}function ci(e,t){var n=typeof e;return"string"==n&&gt.test(e)||"number"==n?!0:gu(e)?!1:!mt.test(e)||null!=t&&e in wi(t)}function hi(e){var t=Mo(e);return!!t&&e===Bt[t]&&t in It.prototype}function pi(e){return typeof e=="number"&&-1<e&&0==e%1&&e<=yo}function di(e){return e===e&&!Ki(e)}function vi(e,t){e=wi(e);for(var n=-1,r=t.length,i={};++n<r;){var s=t[n];s in e&&(i[s]=e[s])}return i}function mi(e,t){var n={};return Jn(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function gi(e){var t;if(!p(e)||Hs.call(e)!=$||!(Ds.call(e,"constructor")||(t=e.constructor,typeof t!="function"||t instanceof t)))return!1;var n;return Jn(e,function(e,t){n=t}),n===w||Ds.call(e,n)}function yi(e){for(var t=rs(e),n=t.length,r=n&&e.length,i=Bt.support,i=r&&pi(r)&&(gu(e)||i.nonEnumArgs&&Vi(e)),s=-1,o=[];++s<n;){var u=t[s];(i&&fi(u,r)||Ds.call(e,u))&&o.push(u)}return o}function bi(e){return null==e?[]:ai(e)?Ki(e)?e:Ts(e):is(e)}function wi(e){return Ki(e)?e:Ts(e)}function Ei(e){if(gu(e))return e;var t=[];return i(e).replace(yt,function(e,n,r,i){t.push(r?i.replace(St,"$1"):n||e)}),t}function Si(e){return e instanceof It?e.clone():new Ft(e.__wrapped__,e.__chain__,zt(e.__actions__))}function xi(e,t,n){return e&&e.length?((n?li(e,t,n):null==t)&&(t=1),hr(e,0>t?0:t)):[]}function Ti(e,t,n){var r=e?e.length:0;return r?((n?li(e,t,n):null==t)&&(t=1),t=r-(+t||0),hr(e,0,0>t?0:t)):[]}function Ni(e){return e?e[0]:w}function Ci(e,t,r){var i=e?e.length:0;if(!i)return-1;if(typeof r=="number")r=0>r?so(i+r,0):r;else if(r)return r=Er(e,t),e=e[r],(t===t?t===e:e!==e)?r:-1;return n(e,t,r||0)}function ki(e){var t=e?e.length:0;return t?e[t-1]:w}function Li(e){return xi(e,1)}function Ai(e,t,r,i){if(!e||!e.length)return[];null!=t&&typeof t!="boolean"&&(i=r,r=li(e,t,i)?null:t,t=!1);var s=ni();if((s!==Pn||null!=r)&&(r=s(r,i,3)),t&&ri()==n){t=r;var o;r=-1,i=e.length;for(var s=-1,u=[];++r<i;){var a=e[r],f=t?t(a,r,e):a;r&&o===f||(o=f,u[++s]=a)}e=u}else e=gr(e,r);return e}function Oi(e){if(!e||!e.length)return[];var t=-1,n=0;e=Jt(e,function(e){return ai(e)?(n=so(e.length,n),!0):void 0});for(var r=ys(n);++t<n;)r[t]=Kt(e,ur(t));return r}function Mi(e,t,n){return e&&e.length?(e=Oi(e),null==t?e:(t=xr(t,n,4),Kt(e,function(e){return Qt(e,t,w,!0)}))):[]}function _i(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||gu(e[0])||(t=[]);++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Di(e){return e=Bt(e),e.__chain__=!0,e}function Pi(e,t,n){return t.call(n,e)}function Hi(e,t,n){var r=gu(e)?Xt:zn;return n&&li(e,t,n)&&(t=null),(typeof t!="function"||n!==w)&&(t=ni(t,n,3)),r(e,t)}function Bi(e,t,n){var r=gu(e)?Jt:Xn;return t=ni(t,n,3),r(e,t)}function ji(e,t,n,r){var i=e?_o(e):0;return pi(i)||(e=is(e),i=e.length),i?(n=typeof n!="number"||r&&li(t,n,r)?0:0>n?so(i+n,0):n||0,typeof e=="string"||!gu(e)&&Zi(e)?n<i&&-1<e.indexOf(t,n):-1<ri(e,t,n)):!1}function Fi(e,t,n){var r=gu(e)?Kt:rr;return t=ni(t,n,3),r(e,t)}function Ii(e,t,n){return(n?li(e,t,n):null==t)?(e=bi(e),t=e.length,0<t?e[lr(0,t-1)]:w):(e=qi(e),e.length=oo(0>t?0:+t||0,e.length),e)}function qi(e){e=bi(e);for(var t=-1,n=e.length,r=ys(n);++t<n;){var i=lr(0,t);t!=i&&(r[t]=r[i]),r[i]=e[t]}return r}function Ri(e,t,n){var r=gu(e)?Gt:pr;return n&&li(e,t,n)&&(t=null),(typeof t!="function"||n!==w)&&(t=ni(t,n,3)),r(e,t)}function Ui(e,t){var n;if(typeof t!="function"){if(typeof e!="function")throw new ks(F);var r=e;e=t,t=r}return function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function zi(e,t,n){function r(){var n=t-(iu()-f);0>=n||n>t?(u&&Rs(u),n=h,u=c=h=w,n&&(p=iu(),a=e.apply(l,o),c||u||(o=l=null))):c=Ks(r,n)}function i(){c&&Rs(c),u=c=h=w,(v||d!==t)&&(p=iu(),a=e.apply(l,o),c||u||(o=l=null))}function s(){if(o=arguments,f=iu(),l=this,h=v&&(c||!m),!1===d)var n=m&&!c;else{u||m||(p=f);var s=d-(f-p),g=0>=s||s>d;g?(u&&(u=Rs(u)),p=f,a=e.apply(l,o)):u||(u=Ks(i,s))}return g&&c?c=Rs(c):c||t===d||(c=Ks(r,t)),n&&(g=!0,a=e.apply(l,o)),!g||c||u||(o=l=null),a}var o,u,a,f,l,c,h,p=0,d=!1,v=!0;if(typeof e!="function")throw new ks(F);if(t=0>t?0:+t||0,!0===n)var m=!0,v=!1;else Ki(n)&&(m=n.leading,d="maxWait"in n&&so(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return s.cancel=function(){c&&Rs(c),u&&Rs(u),u=c=h=w},s}function Wi(e,t){function n(){var r=arguments,i=n.cache,s=t?t.apply(this,r):r[0];return i.has(s)?i.get(s):(r=e.apply(this,r),i.set(s,r),r)}if(typeof e!="function"||t&&typeof t!="function")throw new ks(F);return n.cache=new Wi.Cache,n}function Xi(e,t){if(typeof e!="function")throw new ks(F);return t=so(t===w?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=so(n.length-t,0),s=ys(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}for(i=ys(t+1),r=-1;++r<t;)i[r]=n[r];return i[t]=s,e.apply(this,i)}}function Vi(e){return p(e)&&ai(e)&&Hs.call(e)==q}function $i(e){return!!e&&1===e.nodeType&&p(e)&&-1<Hs.call(e).indexOf("Element")}function Ji(e){return p(e)&&typeof e.message=="string"&&Hs.call(e)==W}function Ki(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function Qi(e){return null==e?!1:Hs.call(e)==X?js.test(_s.call(e)):p(e)&&Ct.test(e)}function Gi(e){return typeof e=="number"||p(e)&&Hs.call(e)==V}function Yi(e){return p(e)&&Hs.call(e)==J}function Zi(e){return typeof e=="string"||p(e)&&Hs.call(e)==K}function es(e){return p(e)&&pi(e.length)&&!!Dt[Hs.call(e)]}function ts(e){return Dn(e,rs(e))}function ns(e){return Gn(e,rs(e))}function rs(e){if(null==e)return[];Ki(e)||(e=Ts(e));for(var t=e.length,t=t&&pi(t)&&(gu(e)||Eo.nonEnumArgs&&Vi(e))&&t||0,n=e.constructor,r=-1,n=typeof n=="function"&&n.prototype===e,i=ys(t),s=0<t;++r<t;)i[r]=r+"";for(var o in e)s&&fi(o,t)||"constructor"==o&&(n||!Ds.call(e,o))||i.push(o);return i}function is(e){return yr(e,Au(e))}function ss(e){return(e=i(e))&&e.replace(kt,f).replace(Et,"")}function os(e){return(e=i(e))&&wt.test(e)?e.replace(bt,"\\$&"):e}function us(e,t,n){return n&&li(e,t,n)&&(t=0),fo(e,t)}function as(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!ro(t))return n;do t%2&&(n+=e),t=Us(t/2),e+=e;while(t);return n}function fs(e,t,n){var r=e;return(e=i(e))?(n?li(r,t,n):null==t)?e.slice(m(e),g(e)+1):(t+="",e.slice(o(e,t),u(e,t)+1)):e}function ls(e,t,n){return n&&li(e,t,n)&&(t=null),e=i(e),e.match(t||Ot)||[]}function cs(e,t,n){return n&&li(e,t,n)&&(t=null),p(e)?ds(e):Pn(e,t)}function hs(e){return function(){return e}}function ps(e){return e}function ds(e){return ir(Hn(e,!0))}function vs(e,t,n){if(null==n){var r=Ki(t),i=r&&Au(t);((i=i&&i.length&&Gn(t,i))?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=Gn(t,Au(t)));var s=!0,r=-1,o=bu(e),u=i.length;!1===n?s=!1:Ki(n)&&"chain"in n&&(s=n.chain);for(;++r<u;){n=i[r];var a=t[n];e[n]=a,o&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(s||n){var r=e(this.__wrapped__);return(r.__actions__=zt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return n=[this.value()],Xs.apply(n,arguments),t.apply(e,n)}}(a))}return e}function ms(){}function gs(e){return ci(e)?ur(e):ar(e)}d=d?$t.defaults(Vt.Object(),d,$t.pick(Vt,_t)):Vt;var ys=d.Array,bs=d.Date,ws=d.Error,Es=d.Function,Ss=d.Math,xs=d.Number,Ts=d.Object,Ns=d.RegExp,Cs=d.String,ks=d.TypeError,Ls=ys.prototype,As=Ts.prototype,Os=Cs.prototype,Ms=(Ms=d.window)&&Ms.document,_s=Es.prototype.toString,Ds=As.hasOwnProperty,Ps=0,Hs=As.toString,Bs=d._,js=Ns("^"+os(Hs).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fs=Qi(Fs=d.ArrayBuffer)&&Fs,Is=Qi(Is=Fs&&(new Fs(0)).slice)&&Is,qs=Ss.ceil,Rs=d.clearTimeout,Us=Ss.floor,zs=Qi(zs=Ts.getOwnPropertySymbols)&&zs,Ws=Qi(Ws=Ts.getPrototypeOf)&&Ws,Xs=Ls.push,Vs=Qi(Vs=Ts.preventExtensions)&&Vs,$s=As.propertyIsEnumerable,Js=Qi(Js=d.Set)&&Js,Ks=d.setTimeout,Qs=Ls.splice,Gs=Qi(Gs=d.Uint8Array)&&Gs,Ys=Qi(Ys=d.WeakMap)&&Ys,Zs=function(){try{var e=Qi(e=d.Float64Array)&&e,t=new e(new Fs(10),0,1)&&e}catch(n){}return t}(),eo=function(){var e=Vs&&Qi(e=Ts.assign)&&e;try{if(e){var t=Vs({1:0});t[0]=1}}catch(n){try{e(t,"xo")}catch(r){}return!t[1]&&e}return!1}(),to=Qi(to=ys.isArray)&&to,no=Qi(no=Ts.create)&&no,ro=d.isFinite,io=Qi(io=Ts.keys)&&io,so=Ss.max,oo=Ss.min,uo=Qi(uo=bs.now)&&uo,ao=Qi(ao=xs.isFinite)&&ao,fo=d.parseInt,lo=Ss.random,co=xs.NEGATIVE_INFINITY,ho=xs.POSITIVE_INFINITY,po=Ss.pow(2,32)-1,vo=po-1,mo=po>>>1,go=Zs?Zs.BYTES_PER_ELEMENT:0,yo=Ss.pow(2,53)-1,bo=Ys&&new Ys,wo={},Eo=Bt.support={};!function(e){function t(){this.x=e}var n=arguments,r=[];t.prototype={valueOf:e,y:e};for(var i in new t)r.push(i);Eo.funcDecomp=/\bthis\b/.test(function(){return this}),Eo.funcNames=typeof Es.name=="string";try{Eo.dom=11===Ms.createDocumentFragment().nodeType}catch(s){Eo.dom=!1}try{Eo.nonEnumArgs=!$s.call(n,1)}catch(o){Eo.nonEnumArgs=!0}}(1,0),Bt.templateSettings={escape:pt,evaluate:dt,interpolate:vt,variable:"",imports:{_:Bt}};var So=eo||function(e,t){return null==t?e:Dn(t,Do(t),Dn(t,Au(t),e))},xo=function(){function e(){}return function(t){if(Ki(t)){e.prototype=t;var n=new e;e.prototype=null}return n||d.Object()}}(),To=Ar(Kn),No=Ar(Qn,!0),Co=Or(),ko=Or(!0),Lo=bo?function(e,t){return bo.set(e,t),e}:ps;Is||(Tr=Fs&&Gs?function(e){var t=e.byteLength,n=Zs?Us(t/go):0,r=n*go,i=new Fs(t);if(n){var s=new Zs(i,0,n);s.set(new Zs(e,0,n))}return t!=r&&(s=new Gs(i,r),s.set(new Gs(e,r))),i}:hs(null));var Ao=no&&Js?function(e){return new Rt(e)}:hs(null),Oo=bo?function(e){return bo.get(e)}:ms,Mo=function(){return Eo.funcNames?"constant"==hs.name?ur("name"):function(e){for(var t=e.name,n=wo[t],r=n?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}:hs("")}(),_o=ur("length"),Do=zs?function(e){return zs(wi(e))}:hs([]),Po=function(){var e=0,t=0;return function(n,r){var i=iu(),s=P-(i-t);if(t=i,0<s){if(++e>=D)return n}else e=0;return Lo(n,r)}}(),Ho=Xi(function(e,t){return ai(e)?qn(e,$n(t,!1,!0)):[]}),Bo=jr(),jo=jr(!0),Fo=Xi(function(t,n){n=$n(n);var r=Mn(t,n);return fr(t,n.sort(e)),r}),Io=Qr(),qo=Qr(!0),Ro=Xi(function(e){return gr($n(e,!1,!0))}),Uo=Xi(function(e,t){return ai(e)?qn(e,t):[]}),zo=Xi(Oi),Wo=Xi(function(e){var t=e.length,n=e[t-2],r=e[t-1];return 2<t&&typeof n=="function"?t-=2:(n=1<t&&typeof r=="function"?(--t,r):w,r=w),e.length=t,Mi(e,n,r)}),Xo=Xi(function(e,t){return Mn(e,$n(t))}),Vo=kr(function(e,t,n){Ds.call(e,n)?++e[n]:e[n]=1}),$o=Br(To),Jo=Br(No,!0),Ko=qr(Wt,To),Qo=qr(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},No),Go=kr(function(e,t,n){Ds.call(e,n)?e[n].push(t):e[n]=[t]}),Yo=kr(function(e,t,n){e[n]=t}),Zo=Xi(function(e,t,n){var r=-1,i=typeof t=="function",s=ci(t),o=ai(e)?ys(e.length):[];return To(e,function(e){var u=i?t:s&&null!=e&&e[t];o[++r]=u?u.apply(e,n):ui(e,t,n)}),o}),eu=kr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),tu=Vr(Qt,To),nu=Vr(function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n},No),ru=Xi(function(e,t){if(null==e)return[];var n=t[2];return n&&li(t[0],t[1],n)&&(t.length=1),vr(e,$n(t),[])}),iu=uo||function(){return(new bs).getTime()},su=Xi(function(e,t,n){var r=S;if(n.length)var i=v(n,su.placeholder),r=r|k;return Gr(e,r,t,n,i)}),ou=Xi(function(e,t){t=t.length?$n(t):ns(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Gr(e[i],S,e)}return e}),uu=Xi(function(e,t,n){var r=S|x;if(n.length)var i=v(n,uu.placeholder),r=r|k;return Gr(t,r,e,n,i)}),au=Pr(N),fu=Pr(C),lu=Xi(function(e,t){return Bn(e,1,t)}),cu=Xi(function(e,t,n){return Bn(e,t,n)}),hu=Ir(),pu=Ir(!0),du=Xr(k),vu=Xr(L),mu=Xi(function(e,t){return Gr(e,O,null,null,null,$n(t))}),gu=to||function(e){return p(e)&&pi(e.length)&&Hs.call(e)==R};Eo.dom||($i=function(e){return!!e&&1===e.nodeType&&p(e)&&!wu(e)});var yu=ao||function(e){return typeof e=="number"&&ro(e)},bu=r(/x/)||Gs&&!r(Gs)?function(e){return Hs.call(e)==X}:r,wu=Ws?function(e){if(!e||Hs.call(e)!=$)return!1;var t=e.valueOf,n=Qi(t)&&(n=Ws(t))&&Ws(n);return n?e==n||Ws(e)==n:gi(e)}:gi,Eu=Lr(function(e,t,n){return n?Ln(e,t,n):So(e,t)}),Su=Xi(function(e){var t=e[0];return null==t?t:(e.push(Yt),Eu.apply(w,e))}),xu=Fr(Kn),Tu=Fr(Qn),Nu=Rr(Co),Cu=Rr(ko),ku=Ur(Kn),Lu=Ur(Qn),Au=io?function(e){var t=null!=e&&e.constructor;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&ai(e)?yi(e):Ki(e)?io(e):[]}:yi,Ou=zr(!0),Mu=zr(),_u=Lr(or),Du=Xi(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Kt($n(t),Cs),vi(e,qn(rs(e),t));var n=xr(t[0],t[1],3);return mi(e,function(e,t,r){return!n(e,t,r)})}),Pu=Xi(function(e,t){return null==e?{}:"function"==typeof t[0]?mi(e,xr(t[0],t[1],3)):vi(e,$n(t))}),Hu=_r(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Bu=_r(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ju=Wr(),Fu=Wr(!0);8!=fo(Mt+"08")&&(us=function(e,t,n){return(n?li(e,t,n):null==t)?t=0:t&&(t=+t),e=fs(e),fo(e,t||(Nt.test(e)?16:10))});var Iu=_r(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),qu=_r(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ru=Xi(function(e,t){try{return e.apply(w,t)}catch(n){return Ji(n)?n:new ws(n)}}),Uu=Xi(function(e,t){return function(n){return ui(n,e,t)}}),zu=Xi(function(e,t){return function(n){return ui(e,n,t)}}),Wu=Hr(function(e){for(var t=-1,n=e.length,r=co;++t<n;){var i=e[t];i>r&&(r=i)}return r}),Xu=Hr(function(e){for(var t=-1,n=e.length,r=ho;++t<n;){var i=e[t];i<r&&(r=i)}return r},!0);return Bt.prototype=jt.prototype,Ft.prototype=xo(jt.prototype),Ft.prototype.constructor=Ft,It.prototype=xo(jt.prototype),It.prototype.constructor=It,qt.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},qt.prototype.get=function(e){return"__proto__"==e?w:this.__data__[e]},qt.prototype.has=function(e){return"__proto__"!=e&&Ds.call(this.__data__,e)},qt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Rt.prototype.push=function(e){var t=this.data;typeof e=="string"||Ki(e)?t.set.add(e):t.hash[e]=!0},Wi.Cache=qt,Bt.after=function(e,t){if(typeof t!="function"){if(typeof e!="function")throw new ks(F);var n=e;e=t,t=n}return e=ro(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},Bt.ary=function(e,t,n){return n&&li(e,t,n)&&(t=null),t=e&&null==t?e.length:so(+t||0,0),Gr(e,A,null,null,null,null,t)},Bt.assign=Eu,Bt.at=Xo,Bt.before=Ui,Bt.bind=su,Bt.bindAll=ou,Bt.bindKey=uu,Bt.callback=cs,Bt.chain=Di,Bt.chunk=function(e,t,n){t=(n?li(e,t,n):null==t)?1:so(+t||1,1),n=0;for(var r=e?e.length:0,i=-1,s=ys(qs(r/t));n<r;)s[++i]=hr(e,n,n+=t);return s},Bt.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var s=e[t];s&&(i[++r]=s)}return i},Bt.constant=hs,Bt.countBy=Vo,Bt.create=function(e,t,n){var r=xo(e);return n&&li(e,t,n)&&(t=null),t?So(r,t):r},Bt.curry=au,Bt.curryRight=fu,Bt.debounce=zi,Bt.defaults=Su,Bt.defer=lu,Bt.delay=cu,Bt.difference=Ho,Bt.drop=xi,Bt.dropRight=Ti,Bt.dropRightWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3),!0,!0):[]},Bt.dropWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3),!0):[]},Bt.fill=function(e,t,n,r){var i=e?e.length:0;if(!i)return[];for(n&&typeof n!="number"&&li(e,t,n)&&(n=0,r=i),i=e.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===w||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e},Bt.filter=Bi,Bt.flatten=function(e,t,n){var r=e?e.length:0;return n&&li(e,t,n)&&(t=!1),r?$n(e,t):[]},Bt.flattenDeep=function(e){return e&&e.length?$n(e,!0):[]},Bt.flow=hu,Bt.flowRight=pu,Bt.forEach=Ko,Bt.forEachRight=Qo,Bt.forIn=Nu,Bt.forInRight=Cu,Bt.forOwn=ku,Bt.forOwnRight=Lu,Bt.functions=ns,Bt.groupBy=Go,Bt.indexBy=Yo,Bt.initial=function(e){return Ti(e,1)},Bt.intersection=function(){for(var e=[],t=-1,r=arguments.length,i=[],s=ri(),o=s==n,u=[];++t<r;){var a=arguments[t];ai(a)&&(e.push(a),i.push(o&&120<=a.length?Ao(t&&a):null))}if(r=e.length,2>r)return u;var o=e[0],f=-1,l=o?o.length:0,c=i[0];e:for(;++f<l;)if(a=o[f],0>(c?Ut(c,a):s(u,a,0))){for(t=r;--t;){var h=i[t];if(0>(h?Ut(h,a):s(e[t],a,0)))continue e}c&&c.push(a),u.push(a)}return u},Bt.invert=function(e,t,n){n&&li(e,t,n)&&(t=null),n=-1;for(var r=Au(e),i=r.length,s={};++n<i;){var o=r[n],u=e[o];t?Ds.call(s,u)?s[u].push(o):s[u]=[o]:s[u]=o}return s},Bt.invoke=Zo,Bt.keys=Au,Bt.keysIn=rs,Bt.map=Fi,Bt.mapKeys=Ou,Bt.mapValues=Mu,Bt.matches=ds,Bt.matchesProperty=function(e,t){return sr(e,Hn(t,!0))},Bt.memoize=Wi,Bt.merge=_u,Bt.method=Uu,Bt.methodOf=zu,Bt.mixin=vs,Bt.negate=function(e){if(typeof e!="function")throw new ks(F);return function(){return!e.apply(this,arguments)}},Bt.omit=Du,Bt.once=function(e){return Ui(2,e)},Bt.pairs=function(e){for(var t=-1,n=Au(e),r=n.length,i=ys(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},Bt.partial=du,Bt.partialRight=vu,Bt.partition=eu,Bt.pick=Pu,Bt.pluck=function(e,t){return Fi(e,gs(t))},Bt.property=gs,Bt.propertyOf=function(e){return function(t){return er(e,Ei(t),t+"")}},Bt.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=ri(),i=e.length;++n<i;)for(var s=0,o=e[n];-1<(s=r(t,o,s));)Qs.call(t,s,1);return t},Bt.pullAt=Fo,Bt.range=function(e,t,n){n&&li(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var r=-1;t=so(qs((t-e)/(n||1)),0);for(var i=ys(t);++r<t;)i[r]=e,e+=n;return i},Bt.rearg=mu,Bt.reject=function(e,t,n){var r=gu(e)?Jt:Xn;return t=ni(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},Bt.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,s=[],o=e.length;for(t=ni(t,n,3);++i<o;)n=e[i],t(n,i,e)&&(r.push(n),s.push(i));return fr(e,s),r},Bt.rest=Li,Bt.restParam=Xi,Bt.set=function(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||ci(t,e)?[r]:Ei(t);for(var r=-1,i=t.length,s=i-1,o=e;null!=o&&++r<i;){var u=t[r];Ki(o)&&(r==s?o[u]=n:null==o[u]&&(o[u]=fi(t[r+1])?[]:{})),o=o[u]}return e},Bt.shuffle=qi,Bt.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&li(e,t,n)&&(t=0,n=r),hr(e,t,n)):[]},Bt.sortBy=function(e,t,n){if(null==e)return[];n&&li(e,t,n)&&(t=null);var r=-1;return t=ni(t,n,3),e=rr(e,function(e,n,i){return{a:t(e,n,i),b:++r,c:e}}),dr(e,a)},Bt.sortByAll=ru,Bt.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&li(t,n,r)&&(n=null),gu(t)||(t=null==t?[]:[t]),gu(n)||(n=null==n?[]:[n]),vr(e,t,n))},Bt.spread=function(e){if(typeof e!="function")throw new ks(F);return function(t){return e.apply(this,t)}},Bt.take=function(e,t,n){return e&&e.length?((n?li(e,t,n):null==t)&&(t=1),hr(e,0,0>t?0:t)):[]},Bt.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?li(e,t,n):null==t)&&(t=1),t=r-(+t||0),hr(e,0>t?0:t)):[]},Bt.takeRightWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3),!1,!0):[]},Bt.takeWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3)):[]},Bt.tap=function(e,t,n){return t.call(n,e),e},Bt.throttle=function(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new ks(F);return!1===n?r=!1:Ki(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ht.leading=r,Ht.maxWait=+t,Ht.trailing=i,zi(e,t,Ht)},Bt.thru=Pi,Bt.times=function(e,t,n){if(e=Us(e),1>e||!ro(e))return[];var r=-1,i=ys(oo(e,po));for(t=xr(t,n,1);++r<e;)r<po?i[r]=t(r):t(r);return i},Bt.toArray=function(e){var t=e?_o(e):0;return pi(t)?t?zt(e):[]:is(e)},Bt.toPlainObject=ts,Bt.transform=function(e,t,n,r){var i=gu(e)||es(e);return t=ni(t,r,4),null==n&&(i||Ki(e)?(r=e.constructor,n=i?gu(e)?new r:[]:xo(bu(r)&&r.prototype)):n={}),(i?Wt:Kn)(e,function(e,r,i){return t(n,e,r,i)}),n},Bt.union=Ro,Bt.uniq=Ai,Bt.unzip=Oi,Bt.unzipWith=Mi,Bt.values=is,Bt.valuesIn=function(e){return yr(e,rs(e))},Bt.where=function(e,t){return Bi(e,ir(t))},Bt.without=Uo,Bt.wrap=function(e,t){return t=null==t?ps:t,Gr(t,k,null,[e],[])},Bt.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(ai(n))var r=r?qn(r,n).concat(qn(n,r)):n}return r?gr(r):[]},Bt.zip=zo,Bt.zipObject=_i,Bt.zipWith=Wo,Bt.backflow=pu,Bt.collect=Fi,Bt.compose=pu,Bt.each=Ko,Bt.eachRight=Qo,Bt.extend=Eu,Bt.iteratee=cs,Bt.methods=ns,Bt.object=_i,Bt.select=Bi,Bt.tail=Li,Bt.unique=Ai,vs(Bt,Bt),Bt.add=function(e,t){return(+e||0)+(+t||0)},Bt.attempt=Ru,Bt.camelCase=Hu,Bt.capitalize=function(e){return(e=i(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Bt.clone=function(e,t,n,r){return t&&typeof t!="boolean"&&li(e,t,n)?t=!1:typeof t=="function"&&(r=n,n=t,t=!1),n=typeof n=="function"&&xr(n,r,1),Hn(e,t,n)},Bt.cloneDeep=function(e,t,n){return t=typeof t=="function"&&xr(t,n,1),Hn(e,!0,t)},Bt.deburr=ss,Bt.endsWith=function(e,t,n){e=i(e),t+="";var r=e.length;return n=n===w?r:oo(0>n?0:+n||0,r),n-=t.length,0<=n&&e.indexOf(t,n)==n},Bt.escape=function(e){return(e=i(e))&&ht.test(e)?e.replace(lt,l):e},Bt.escapeRegExp=os,Bt.every=Hi,Bt.find=$o,Bt.findIndex=Bo,Bt.findKey=xu,Bt.findLast=Jo,Bt.findLastIndex=jo,Bt.findLastKey=Tu,Bt.findWhere=function(e,t){return $o(e,ir(t))},Bt.first=Ni,Bt.get=function(e,t,n){return e=null==e?w:er(e,Ei(t),t+""),e===w?n:e},Bt.has=function(e,t){if(null==e)return!1;var n=Ds.call(e,t);return n||ci(t)||(t=Ei(t),e=1==t.length?e:er(e,hr(t,0,-1)),t=ki(t),n=null!=e&&Ds.call(e,t)),n},Bt.identity=ps,Bt.includes=ji,Bt.indexOf=Ci,Bt.inRange=function(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=oo(t,n)&&e<so(t,n)},Bt.isArguments=Vi,Bt.isArray=gu,Bt.isBoolean=function(e){return!0===e||!1===e||p(e)&&Hs.call(e)==U},Bt.isDate=function(e){return p(e)&&Hs.call(e)==z},Bt.isElement=$i,Bt.isEmpty=function(e){return null==e?!0:ai(e)&&(gu(e)||Zi(e)||Vi(e)||p(e)&&bu(e.splice))?!e.length:!Au(e).length},Bt.isEqual=function(e,t,n,r){return n=typeof n=="function"&&xr(n,r,3),!n&&di(e)&&di(t)?e===t:(r=n?n(e,t):w,r===w?tr(e,t,n):!!r)},Bt.isError=Ji,Bt.isFinite=yu,Bt.isFunction=bu,Bt.isMatch=function(e,t,n,r){var i=Au(t),s=i.length;if(!s)return!0;if(null==e)return!1;if(n=typeof n=="function"&&xr(n,r,3),e=wi(e),!n&&1==s){var o=i[0];if(r=t[o],di(r))return r===e[o]&&(r!==w||o in e)}for(var o=ys(s),u=ys(s);s--;)r=o[s]=t[i[s]],u[s]=di(r);return nr(e,i,o,u,n)},Bt.isNaN=function(e){return Gi(e)&&e!=+e},Bt.isNative=Qi,Bt.isNull=function(e){return null===e},Bt.isNumber=Gi,Bt.isObject=Ki,Bt.isPlainObject=wu,Bt.isRegExp=Yi,Bt.isString=Zi,Bt.isTypedArray=es,Bt.isUndefined=function(e){return e===w},Bt.kebabCase=Bu,Bt.last=ki,Bt.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(typeof n=="number")i=(0>n?so(r+n,0):oo(n||0,r-1))+1;else if(n)return i=Er(e,t,!0)-1,e=e[i],(t===t?t===e:e!==e)?i:-1;if(t!==t)return h(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},Bt.max=Wu,Bt.min=Xu,Bt.noConflict=function(){return d._=Bs,this},Bt.noop=ms,Bt.now=iu,Bt.pad=function(e,t,n){e=i(e),t=+t;var r=e.length;return r<t&&ro(t)?(r=(t-r)/2,t=Us(r),r=qs(r),n=Jr("",r,n),n.slice(0,t)+e+n):e},Bt.padLeft=ju,Bt.padRight=Fu,Bt.parseInt=us,Bt.random=function(e,t,n){n&&li(e,t,n)&&(t=n=null);var r=null==e,i=null==t;return null==n&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=lo(),oo(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):lr(e,t)},Bt.reduce=tu,Bt.reduceRight=nu,Bt.repeat=as,Bt.result=function(e,t,n){var r=null==e?w:e[t];return r===w&&(null==e||ci(t,e)||(t=Ei(t),e=1==t.length?e:er(e,hr(t,0,-1)),r=null==e?w:e[ki(t)]),r=r===w?n:r),bu(r)?r.call(e):r},Bt.runInContext=b,Bt.size=function(e){var t=e?_o(e):0;return pi(t)?t:Au(e).length},Bt.snakeCase=Iu,Bt.some=Ri,Bt.sortedIndex=Io,Bt.sortedLastIndex=qo,Bt.startCase=qu,Bt.startsWith=function(e,t,n){return e=i(e),n=null==n?0:oo(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Bt.sum=function(e,t,n){n&&li(e,t,n)&&(t=null);var r=ni(),i=null==t;if(r===Pn&&i||(i=!1,t=r(t,n,3)),i){for(e=gu(e)?e:bi(e),t=e.length,n=0;t--;)n+=+e[t]||0;e=n}else e=mr(e,t);return e},Bt.template=function(e,t,n){var r=Bt.templateSettings;n&&li(e,t,n)&&(t=n=null),e=i(e),t=Ln(So({},n||t),r,Zt),n=Ln(So({},t.imports),r.imports,Zt);var s,o,u=Au(n),a=yr(n,u),f=0;n=t.interpolate||Lt;var l="__p+='";n=Ns((t.escape||Lt).source+"|"+n.source+"|"+(n===vt?xt:Lt).source+"|"+(t.evaluate||Lt).source+"|$","g");var h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,i,u,a){return r||(r=i),l+=e.slice(f,a).replace(At,c),n&&(s=!0,l+="'+__e("+n+")+'"),u&&(o=!0,l+="';"+u+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),f=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(o?l.replace(ot,""):l).replace(ut,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Ru(function(){return Es(u,h+"return "+l).apply(w,a)}),t.source=l,Ji(t))throw t;return t},Bt.trim=fs,Bt.trimLeft=function(e,t,n){var r=e;return(e=i(e))?e.slice((n?li(r,t,n):null==t)?m(e):o(e,t+"")):e},Bt.trimRight=function(e,t,n){var r=e;return(e=i(e))?(n?li(r,t,n):null==t)?e.slice(0,g(e)+1):e.slice(0,u(e,t+"")+1):e},Bt.trunc=function(e,t,n){n&&li(e,t,n)&&(t=null);var r=M;if(n=_,null!=t)if(Ki(t)){var s="separator"in t?t.separator:s,r="length"in t?+t.length||0:r;n="omission"in t?i(t.omission):n}else r=+t||0;if(e=i(e),r>=e.length)return e;if(r-=n.length,1>r)return n;if(t=e.slice(0,r),null==s)return t+n;if(Yi(s)){if(e.slice(r).search(s)){var o,u=e.slice(0,r);for(s.global||(s=Ns(s.source,(Tt.exec(s)||"")+"g")),s.lastIndex=0;e=s.exec(u);)o=e.index;t=t.slice(0,null==o?r:o)}}else e.indexOf(s,r)!=r&&(s=t.lastIndexOf(s),-1<s&&(t=t.slice(0,s)));return t+n},Bt.unescape=function(e){return(e=i(e))&&ct.test(e)?e.replace(ft,y):e},Bt.uniqueId=function(e){var t=++Ps;return i(e)+t},Bt.words=ls,Bt.all=Hi,Bt.any=Ri,Bt.contains=ji,Bt.detect=$o,Bt.foldl=tu,Bt.foldr=nu,Bt.head=Ni,Bt.include=ji,Bt.inject=tu,vs(Bt,function(){var e={};return Kn(Bt,function(t,n){Bt.prototype[n]||(e[n]=t)}),e}(),!1),Bt.sample=Ii,Bt.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Ii(t,e)}):Ii(this.value())},Bt.VERSION=E,Wt("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Bt[e].placeholder=Bt}),Wt(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=j,r=t==H;It.prototype[e]=function(e,i){var s=this.__filtered__,o=s&&r?new It(this):this.clone();return(o.__iteratees__||(o.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:ni(e,i,1),limit:-1,type:t}),o.__filtered__=s||n,o}}),Wt(["drop","take"],function(e,t){var n=e+"While";It.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();return n=null==n?1:so(Us(n)||0,0),r?t?i.__takeCount__=oo(i.__takeCount__,n):ki(i.__iteratees__).limit=n:(i.__views__||(i.__views__=[])).push({size:n,type:e+(0>i.__dir__?"Right":"")}),i},It.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},It.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),Wt(["first","last"],function(e,t){var n="take"+(t?"Right":"");It.prototype[e]=function(){return this[n](1).value()[0]}}),Wt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");It.prototype[e]=function(){return this[n](1)}}),Wt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?ir:gs;It.prototype[e]=function(e){return this[n](r(e))}}),It.prototype.compact=function(){return this.filter(ps)},It.prototype.reject=function(e,t){return e=ni(e,t,1),this.filter(function(t){return!e(t)})},It.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return 0>e?n=this.takeRight(-e):e&&(n=this.drop(e)),t!==w&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},It.prototype.toArray=function(){return this.drop(0)},Kn(It.prototype,function(e,t){var n=Bt[t];if(n){var r=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);Bt.prototype[t]=function(){function t(e){return e=[e],Xs.apply(e,s),n.apply(Bt,e)}var s=arguments,o=this.__chain__,u=this.__wrapped__,a=!!this.__actions__.length,f=u instanceof It,l=s[0],c=f||gu(u);return c&&r&&typeof l=="function"&&1!=l.length&&(f=c=!1),f=f&&!a,i&&!o?f?e.call(u):n.call(Bt,this.value()):c?(u=e.apply(f?u:new It(this),s),i||!a&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Pi,args:[t],thisArg:Bt}),new Ft(u,o)):this.thru(t)}}}),Wt("concat join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?Os:Ls)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Bt.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Kn(It.prototype,function(e,t){var n=Bt[t];if(n){var r=n.name;(wo[r]||(wo[r]=[])).push({name:t,func:n})}}),wo[$r(null,x).name]=[{name:"wrapper",func:null}],It.prototype.clone=function(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new It(this.__wrapped__);return r.__actions__=e?zt(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?zt(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?zt(n):null,r},It.prototype.reverse=function(){if(this.__filtered__){var e=new It(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},It.prototype.value=function(){var e=this.__wrapped__.value();if(!gu(e))return wr(e,this.__actions__);var t,n=this.__dir__,r=0>n;t=e.length;for(var i=this.__views__,s=0,o=-1,u=i?i.length:0;++o<u;){var a=i[o],f=a.size;switch(a.type){case"drop":s+=f;break;case"dropRight":t-=f;break;case"take":t=oo(t,s+f);break;case"takeRight":s=so(s,t-f)}}t={start:s,end:t},i=t.start,s=t.end,t=s-i,i=r?s:i-1,s=oo(t,this.__takeCount__),u=(o=this.__iteratees__)?o.length:0,a=0,f=[];e:for(;t--&&a<s;){for(var i=i+n,l=-1,c=e[i];++l<u;){var h=o[l],p=h.iteratee,d=h.type;if(d==H){if(h.done&&(r?i>h.index:i<h.index)&&(h.count=0,h.done=!1),h.index=i,!(h.done||(d=h.limit,h.done=-1<d?h.count++>=d:!p(c))))continue e}else if(h=p(c),d==j)c=h;else if(!h){if(d==B)continue e;break e}}f[a++]=c}return f},Bt.prototype.chain=function(){return Di(this)},Bt.prototype.commit=function(){return new Ft(this.value(),this.__chain__)},Bt.prototype.plant=function(e){for(var t,n=this;n instanceof jt;){var r=Si(n);t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},Bt.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof It?(this.__actions__.length&&(e=new It(this)),new Ft(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})},Bt.prototype.toString=function(){return this.value()+""},Bt.prototype.run=Bt.prototype.toJSON=Bt.prototype.valueOf=Bt.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},Bt.prototype.collect=Bt.prototype.map,Bt.prototype.head=Bt.prototype.first,Bt.prototype.select=Bt.prototype.filter,Bt.prototype.tail=Bt.prototype.rest,Bt}var w,E="3.8.0",S=1,x=2,T=4,N=8,C=16,k=32,L=64,A=128,O=256,M=30,_="...",D=150,P=16,H=0,B=1,j=2,F="Expected a function",I="__lodash_placeholder__",q="[object Arguments]",R="[object Array]",U="[object Boolean]",z="[object Date]",W="[object Error]",X="[object Function]",V="[object Number]",$="[object Object]",J="[object RegExp]",K="[object String]",Q="[object ArrayBuffer]",G="[object Float32Array]",Y="[object Float64Array]",Z="[object Int8Array]",et="[object Int16Array]",tt="[object Int32Array]",nt="[object Uint8Array]",rt="[object Uint8ClampedArray]",it="[object Uint16Array]",st="[object Uint32Array]",ot=/\b__p\+='';/g,ut=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ft=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,ct=RegExp(ft.source),ht=RegExp(lt.source),pt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,gt=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,bt=/[.*+?^${}()|[\]\/\\]/g,wt=RegExp(bt.source),Et=/[\u0300-\u036f\ufe20-\ufe23]/g,St=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tt=/\w*$/,Nt=/^0[xX]/,Ct=/^\[object .+?Constructor\]$/,kt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Lt=/($^)/,At=/['\n\r\u2028\u2029\\]/g,Ot=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Mt=" 	\f\n\r\u2028\u2029",_t="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Dt={};Dt[G]=Dt[Y]=Dt[Z]=Dt[et]=Dt[tt]=Dt[nt]=Dt[rt]=Dt[it]=Dt[st]=!0,Dt[q]=Dt[R]=Dt[Q]=Dt[U]=Dt[z]=Dt[W]=Dt[X]=Dt["[object Map]"]=Dt[V]=Dt[$]=Dt[J]=Dt["[object Set]"]=Dt[K]=Dt["[object WeakMap]"]=!1;var Pt={};Pt[q]=Pt[R]=Pt[Q]=Pt[U]=Pt[z]=Pt[G]=Pt[Y]=Pt[Z]=Pt[et]=Pt[tt]=Pt[V]=Pt[$]=Pt[J]=Pt[K]=Pt[nt]=Pt[rt]=Pt[it]=Pt[st]=!0,Pt[W]=Pt[X]=Pt["[object Map]"]=Pt["[object Set]"]=Pt["[object WeakMap]"]=!1;var Ht={leading:!1,maxWait:0,trailing:!1},Bt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ft={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},It={"function":!0,object:!0},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rt=It[typeof exports]&&exports&&!exports.nodeType&&exports,Ut=It[typeof module]&&module&&!module.nodeType&&module,zt=It[typeof self]&&self&&self.Object&&self,Wt=It[typeof window]&&window&&window.Object&&window,Xt=Ut&&Ut.exports===Rt&&Rt,Vt=Rt&&Ut&&typeof global=="object"&&global&&global.Object&&global||Wt!==(this&&this.window)&&Wt||zt||this,$t=b();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Vt._=$t,define("lodash",[],function(){return $t})):Rt&&Ut?Xt?(Ut.exports=$t)._=$t:Rt._=$t:Vt._=$t}.call(this),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e(19),i=e(32),s=e(34),o=e(33),u=e(38),a=e(39),f=e(55),l=(e(56),e(40)),c=e(51),h=e(54),p=e(64),d=e(68),v=e(73),m=e(76),g=e(79),y=e(82),b=e(27),w=e(115),E=e(142);h.inject();var S=f.createElement,x=f.createFactory,T=f.cloneElement,N=v.measure("React","render",d.render),C={Children:{map:i.map,forEach:i.forEach,count:i.count,only:E},Component:s,DOM:l,PropTypes:m,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:o.createClass,createElement:S,cloneElement:T,createFactory:x,createMixin:function(e){return e},constructAndRenderComponent:d.constructAndRenderComponent,constructAndRenderComponentByID:d.constructAndRenderComponentByID,findDOMNode:w,render:N,renderToString:y.renderToString,renderToStaticMarkup:y.renderToStaticMarkup,unmountComponentAtNode:d.unmountComponentAtNode,isValidElement:f.isValidElement,withContext:u.withContext,__spread:b};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:a,InstanceHandles:p,Mount:d,Reconciler:g,TextComponent:c}),C.version="0.13.3",t.exports=C},{115:115,142:142,19:19,27:27,32:32,33:33,34:34,38:38,39:39,40:40,51:51,54:54,55:55,56:56,64:64,68:68,73:73,76:76,79:79,82:82}],2:[function(e,t,n){"use strict";var r=e(117),i={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=i},{117:117}],3:[function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function i(e){return(e.ctrlKey||e.altKey||e.metaKey)&&(!e.ctrlKey||!e.altKey)}function s(e){switch(e){case L.topCompositionStart:return A.compositionStart;case L.topCompositionEnd:return A.compositionEnd;case L.topCompositionUpdate:return A.compositionUpdate}}function o(e,t){return e===L.topKeyDown&&t.keyCode===E}function u(e,t){switch(e){case L.topKeyUp:return-1!==w.indexOf(t.keyCode);case L.topKeyDown:return t.keyCode!==E;case L.topKeyPress:case L.topMouseDown:case L.topBlur:return!0;default:return!1}}function a(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function f(e,t,n,r){var i,f;if(S?i=s(e):M?u(e,r)&&(i=A.compositionEnd):o(e,r)&&(i=A.compositionStart),!i)return null;N&&(M||i!==A.compositionStart?i===A.compositionEnd&&M&&(f=M.getData()):M=m.getPooled(t));var l=g.getPooled(i,n,r);if(f)l.data=f;else{var c=a(r);null!==c&&(l.data=c)}return d.accumulateTwoPhaseDispatches(l),l}function l(e,t){switch(e){case L.topCompositionEnd:return a(t);case L.topKeyPress:var n=t.which;return n!==C?null:(O=!0,k);case L.topTextInput:var r=t.data;return r===k&&O?null:r;default:return null}}function c(e,t){if(M){if(e===L.topCompositionEnd||u(e,t)){var n=M.getData();return m.release(M),M=null,n}return null}switch(e){case L.topPaste:return null;case L.topKeyPress:return t.which&&!i(t)?String.fromCharCode(t.which):null;case L.topCompositionEnd:return N?null:t.data;default:return null}}function h(e,t,n,r){var i;if(i=T?l(e,r):c(e,r),!i)return null;var s=y.getPooled(A.beforeInput,n,r);return s.data=i,d.accumulateTwoPhaseDispatches(s),s}var p=e(15),d=e(20),v=e(21),m=e(22),g=e(91),y=e(95),b=e(139),w=[9,13,27,32],E=229,S=v.canUseDOM&&"CompositionEvent"in window,x=null;v.canUseDOM&&"documentMode"in document&&(x=document.documentMode);var T=v.canUseDOM&&"TextEvent"in window&&!x&&!r(),N=v.canUseDOM&&(!S||x&&x>8&&11>=x),C=32,k=String.fromCharCode(C),L=p.topLevelTypes,A={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[L.topCompositionEnd,L.topKeyPress,L.topTextInput,L.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[L.topBlur,L.topCompositionEnd,L.topKeyDown,L.topKeyPress,L.topKeyUp,L.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[L.topBlur,L.topCompositionStart,L.topKeyDown,L.topKeyPress,L.topKeyUp,L.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[L.topBlur,L.topCompositionUpdate,L.topKeyDown,L.topKeyPress,L.topKeyUp,L.topMouseDown]}},O=!1,M=null,_={eventTypes:A,extractEvents:function(e,t,n,r){return[f(e,t,n,r),h(e,t,n,r)]}};t.exports=_},{139:139,15:15,20:20,21:21,22:22,91:91,95:95}],4:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var i={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},s=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){s.forEach(function(t){i[r(t,e)]=i[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},u={isUnitlessNumber:i,shorthandPropertyExpansions:o};t.exports=u},{}],5:[function(e,t,n){"use strict";var r=e(4),i=e(21),s=(e(106),e(111)),o=e(131),u=e(141),a=(e(150),u(function(e){return o(e)})),f="cssFloat";i.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(f="styleFloat");var l={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t+=a(n)+":",t+=s(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var i in t)if(t.hasOwnProperty(i)){var o=s(i,t[i]);if("float"===i&&(i=f),o)n[i]=o;else{var u=r.shorthandPropertyExpansions[i];if(u)for(var a in u)n[a]="";else n[i]=""}}}};t.exports=l},{106:106,111:111,131:131,141:141,150:150,21:21,4:4}],6:[function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var i=e(28),s=e(27),o=e(133);s(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){o(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},{133:133,27:27,28:28}],7:[function(e,t,n){"use strict";function r(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function i(e){var t=x.getPooled(L.change,O,e);w.accumulateTwoPhaseDispatches(t),S.batchedUpdates(s,t)}function s(e){b.enqueueEvents(e),b.processEventQueue()}function o(e,t){A=e,O=t,A.attachEvent("onchange",i)}function u(){A&&(A.detachEvent("onchange",i),A=null,O=null)}function a(e,t,n){return e===k.topChange?n:void 0}function f(e,t,n){e===k.topFocus?(u(),o(t,n)):e===k.topBlur&&u()}function l(e,t){A=e,O=t,M=e.value,_=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(A,"value",H),A.attachEvent("onpropertychange",h)}function c(){A&&(delete A.value,A.detachEvent("onpropertychange",h),A=null,O=null,M=null,_=null)}function h(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==M&&(M=t,i(e))}}function p(e,t,n){return e===k.topInput?n:void 0}function d(e,t,n){e===k.topFocus?(c(),l(t,n)):e===k.topBlur&&c()}function v(e,t,n){return e!==k.topSelectionChange&&e!==k.topKeyUp&&e!==k.topKeyDown||!A||A.value===M?void 0:(M=A.value,O)}function m(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function g(e,t,n){return e===k.topClick?n:void 0}var y=e(15),b=e(17),w=e(20),E=e(21),S=e(85),x=e(93),T=e(134),N=e(136),C=e(139),k=y.topLevelTypes,L={change:{phasedRegistrationNames:{bubbled:C({onChange:null}),captured:C({onChangeCapture:null})},dependencies:[k.topBlur,k.topChange,k.topClick,k.topFocus,k.topInput,k.topKeyDown,k.topKeyUp,k.topSelectionChange]}},A=null,O=null,M=null,_=null,D=!1;E.canUseDOM&&(D=T("change")&&(!("documentMode"in document)||document.documentMode>8));var P=!1;E.canUseDOM&&(P=T("input")&&(!("documentMode"in document)||document.documentMode>9));var H={get:function(){return _.get.call(this)},set:function(e){M=""+e,_.set.call(this,e)}},B={eventTypes:L,extractEvents:function(e,t,n,i){var s,o;if(r(t)?D?s=a:o=f:N(t)?P?s=p:(s=v,o=d):m(t)&&(s=g),s){var u=s(e,t,n);if(u){var l=x.getPooled(L.change,u,i);return w.accumulateTwoPhaseDispatches(l),l}}o&&o(e,t,n)}};t.exports=B},{134:134,136:136,139:139,15:15,17:17,20:20,21:21,85:85,93:93}],8:[function(e,t,n){"use strict";var r=0,i={createReactRootIndex:function(){return r++}};t.exports=i},{}],9:[function(e,t,n){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var i=e(12),s=e(70),o=e(145),u=e(133),a={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:o,processUpdates:function(e,t){for(var n,a=null,f=null,l=0;l<e.length;l++)if(n=e[l],n.type===s.MOVE_EXISTING||n.type===s.REMOVE_NODE){var c=n.fromIndex,h=n.parentNode.childNodes[c],p=n.parentID;u(h),a=a||{},a[p]=a[p]||[],a[p][c]=h,f=f||[],f.push(h)}var d=i.dangerouslyRenderMarkup(t);if(f)for(var v=0;v<f.length;v++)f[v].parentNode.removeChild(f[v]);for(var m=0;m<e.length;m++)switch(n=e[m],n.type){case s.INSERT_MARKUP:r(n.parentNode,d[n.markupIndex],n.toIndex);break;case s.MOVE_EXISTING:r(n.parentNode,a[n.parentID][n.fromIndex],n.toIndex);break;case s.TEXT_CONTENT:o(n.parentNode,n.textContent);break;case s.REMOVE_NODE:}}};t.exports=a},{12:12,133:133,145:145,70:70}],10:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var i=e(133),s={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},a=e.DOMMutationMethods||{};e.isCustomAttribute&&u._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var f in t){i(!u.isStandardName.hasOwnProperty(f)),u.isStandardName[f]=!0;var l=f.toLowerCase();if(u.getPossibleStandardName[l]=f,n.hasOwnProperty(f)){var c=n[f];u.getPossibleStandardName[c]=f,u.getAttributeName[f]=c}else u.getAttributeName[f]=l;u.getPropertyName[f]=o.hasOwnProperty(f)?o[f]:f,a.hasOwnProperty(f)?u.getMutationMethod[f]=a[f]:u.getMutationMethod[f]=null;var h=t[f];u.mustUseAttribute[f]=r(h,s.MUST_USE_ATTRIBUTE),u.mustUseProperty[f]=r(h,s.MUST_USE_PROPERTY),u.hasSideEffects[f]=r(h,s.HAS_SIDE_EFFECTS),u.hasBooleanValue[f]=r(h,s.HAS_BOOLEAN_VALUE),u.hasNumericValue[f]=r(h,s.HAS_NUMERIC_VALUE),u.hasPositiveNumericValue[f]=r(h,s.HAS_POSITIVE_NUMERIC_VALUE),u.hasOverloadedBooleanValue[f]=r(h,s.HAS_OVERLOADED_BOOLEAN_VALUE),i(!u.mustUseAttribute[f]||!u.mustUseProperty[f]),i(u.mustUseProperty[f]||!u.hasSideEffects[f]),i(!!u.hasBooleanValue[f]+!!u.hasNumericValue[f]+!!u.hasOverloadedBooleanValue[f]<=1)}}},o={},u={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<u._isCustomAttributeFunctions.length;t++){var n=u._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=o[e];return r||(o[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:s};t.exports=u},{133:133}],11:[function(e,t,n){"use strict";function r(e,t){return null==t||i.hasBooleanValue[e]&&!t||i.hasNumericValue[e]&&isNaN(t)||i.hasPositiveNumericValue[e]&&1>t||i.hasOverloadedBooleanValue[e]&&t===!1}var i=e(10),s=e(143),o=(e(150),{createMarkupForID:function(e){return i.ID_ATTRIBUTE_NAME+"="+s(e)},createMarkupForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(e)&&i.isStandardName[e]){if(r(e,t))return"";var n=i.getAttributeName[e];return i.hasBooleanValue[e]||i.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+s(t)}return i.isCustomAttribute(e)?null==t?"":e+"="+s(t):null},setValueForProperty:function(e,t,n){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var s=i.getMutationMethod[t];if(s)s(e,n);else if(r(t,n))this.deleteValueForProperty(e,t);else if(i.mustUseAttribute[t])e.setAttribute(i.getAttributeName[t],""+n);else{var o=i.getPropertyName[t];i.hasSideEffects[t]&&""+e[o]==""+n||(e[o]=n)}}else i.isCustomAttribute(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){if(i.isStandardName.hasOwnProperty(t)&&i.isStandardName[t]){var n=i.getMutationMethod[t];if(n)n(e,void 0);else if(i.mustUseAttribute[t])e.removeAttribute(i.getAttributeName[t]);else{var r=i.getPropertyName[t],s=i.getDefaultValueForProperty(e.nodeName,r);i.hasSideEffects[t]&&""+e[r]===s||(e[r]=s)}}else i.isCustomAttribute(t)&&e.removeAttribute(t)}});t.exports=o},{10:10,143:143,150:150}],12:[function(e,t,n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var i=e(21),s=e(110),o=e(112),u=e(125),a=e(133),f=/^(<[^ \/>]+)/,l="data-danger-index",c={dangerouslyRenderMarkup:function(e){a(i.canUseDOM);for(var t,n={},c=0;c<e.length;c++)a(e[c]),t=r(e[c]),t=u(t)?t:"*",n[t]=n[t]||[],n[t][c]=e[c];var h=[],p=0;for(t in n)if(n.hasOwnProperty(t)){var d,v=n[t];for(d in v)if(v.hasOwnProperty(d)){var m=v[d];v[d]=m.replace(f,"$1 "+l+'="'+d+'" ')}for(var g=s(v.join(""),o),y=0;y<g.length;++y){var b=g[y];b.hasAttribute&&b.hasAttribute(l)&&(d=+b.getAttribute(l),b.removeAttribute(l),a(!h.hasOwnProperty(d)),h[d]=b,p+=1)}}return a(p===h.length),a(h.length===e.length),h},dangerouslyReplaceNodeWithMarkup:function(e,t){a(i.canUseDOM),a(t),a("html"!==e.tagName.toLowerCase());var n=s(t,o)[0];e.parentNode.replaceChild(n,e)}};t.exports=c},{110:110,112:112,125:125,133:133,21:21}],13:[function(e,t,n){"use strict";var r=e(139),i=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=i},{139:139}],14:[function(e,t,n){"use strict";var r=e(15),i=e(20),s=e(97),o=e(68),u=e(139),a=r.topLevelTypes,f=o.getFirstReactDOM,l={mouseEnter:{registrationName:u({onMouseEnter:null}),dependencies:[a.topMouseOut,a.topMouseOver]},mouseLeave:{registrationName:u({onMouseLeave:null}),dependencies:[a.topMouseOut,a.topMouseOver]}},c=[null,null],h={eventTypes:l,extractEvents:function(e,t,n,r){if(e===a.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==a.topMouseOut&&e!==a.topMouseOver)return null;var u;if(t.window===t)u=t;else{var h=t.ownerDocument;u=h?h.defaultView||h.parentWindow:window}var d,v;if(e===a.topMouseOut?(d=t,v=f(r.relatedTarget||r.toElement)||u):(d=u,v=t),d===v)return null;var m=d?o.getID(d):"",g=v?o.getID(v):"",y=s.getPooled(l.mouseLeave,m,r);y.type="mouseleave",y.target=d,y.relatedTarget=v;var b=s.getPooled(l.mouseEnter,g,r);return b.type="mouseenter",b.target=v,b.relatedTarget=d,i.accumulateEnterLeaveDispatches(y,b,m,g),c[0]=y,c[1]=b,c}};t.exports=h},{139:139,15:15,20:20,68:68,97:97}],15:[function(e,t,n){"use strict";var r=e(138),i=r({bubbled:null,captured:null}),s=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:i};t.exports=o},{138:138}],16:[function(e,t,n){var r=e(112),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=i},{112:112}],17:[function(e,t,n){"use strict";var r=e(18),i=e(19),s=e(103),o=e(118),u=e(133),a={},f=null,l=function(e){if(e){var t=i.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),i.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},c=null,h={injection:{injectMount:i.injection.injectMount,injectInstanceHandle:function(e){c=e},getInstanceHandle:function(){return c},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){u(!n||"function"==typeof n);var r=a[t]||(a[t]={});r[e]=n},getListener:function(e,t){var n=a[t];return n&&n[e]},deleteListener:function(e,t){var n=a[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in a)delete a[t][e]},extractEvents:function(e,t,n,i){for(var o,u=r.plugins,a=0,f=u.length;f>a;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,n,i);c&&(o=s(o,c))}}return o},enqueueEvents:function(e){e&&(f=s(f,e))},processEventQueue:function(){var e=f;f=null,o(e,l),u(!f)},__purge:function(){a={}},__getListenerBank:function(){return a}};t.exports=h},{103:103,118:118,133:133,18:18,19:19}],18:[function(e,t,n){"use strict";function r(){if(u)for(var e in a){var t=a[e],n=u.indexOf(e);if(o(n>-1),!f.plugins[n]){o(t.extractEvents),f.plugins[n]=t;var r=t.eventTypes;for(var s in r)o(i(r[s],t,s))}}}function i(e,t,n){o(!f.eventNameDispatchConfigs.hasOwnProperty(n)),f.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var i in r)if(r.hasOwnProperty(i)){var u=r[i];s(u,t,n)}return!0}return e.registrationName?(s(e.registrationName,t,n),!0):!1}function s(e,t,n){o(!f.registrationNameModules[e]),f.registrationNameModules[e]=t,f.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=e(133),u=null,a={},f={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){o(!u),u=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];a.hasOwnProperty(n)&&a[n]===i||(o(!a[n]),a[n]=i,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return f.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=f.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){u=null;for(var e in a)a.hasOwnProperty(e)&&delete a[e];f.plugins.length=0;var t=f.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=f.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=f},{133:133}],19:[function(e,t,n){"use strict";function r(e){return e===m.topMouseUp||e===m.topTouchEnd||e===m.topTouchCancel}function i(e){return e===m.topMouseMove||e===m.topTouchMove}function s(e){return e===m.topMouseDown||e===m.topTouchStart}function o(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)t(e,n[i],r[i]);else n&&t(e,n,r)}function u(e,t,n){e.currentTarget=v.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function a(e,t){o(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function f(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function l(e){var t=f(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;d(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function h(e){return!!e._dispatchListeners}var p=e(15),d=e(133),v={Mount:null,injectMount:function(e){v.Mount=e}},m=p.topLevelTypes,g={isEndish:r,isMoveish:i,isStartish:s,executeDirectDispatch:c,executeDispatch:u,executeDispatchesInOrder:a,executeDispatchesInOrderStopAtTrue:l,hasDispatches:h,injection:v,useTouchEvents:!1};t.exports=g},{133:133,15:15}],20:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return m(e,r)}function i(e,t,n){var i=t?v.bubbled:v.captured,s=r(e,n,i);s&&(n._dispatchListeners=p(n._dispatchListeners,s),n._dispatchIDs=p(n._dispatchIDs,e))}function s(e){e&&e.dispatchConfig.phasedRegistrationNames&&h.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,i,e)}function o(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=m(e,r);i&&(n._dispatchListeners=p(n._dispatchListeners,i),n._dispatchIDs=p(n._dispatchIDs,e))}}function u(e){e&&e.dispatchConfig.registrationName&&o(e.dispatchMarker,null,e)}function a(e){d(e,s)}function f(e,t,n,r){h.injection.getInstanceHandle().traverseEnterLeave(n,r,o,e,t)}function l(e){d(e,u)}var c=e(15),h=e(17),p=e(103),d=e(118),v=c.PropagationPhases,m=h.getListener,g={accumulateTwoPhaseDispatches:a,accumulateDirectDispatches:l,accumulateEnterLeaveDispatches:f};t.exports=g},{103:103,118:118,15:15,17:17}],21:[function(e,t,n){"use strict";var r="undefined"!=typeof window&&!!window.document&&!!window.document.createElement,i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&(!!window.addEventListener||!!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},{}],22:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var i=e(28),s=e(27),o=e(128);s(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,i=this.getText(),s=i.length;for(e=0;r>e&&n[e]===i[e];e++);var o=r-e;for(t=1;o>=t&&n[r-t]===i[s-t];t++);var u=t>1?1-t:void 0;return this._fallbackText=i.slice(e,u),this._fallbackText}}),i.addPoolingTo(r),t.exports=r},{128:128,27:27,28:28}],23:[function(e,t,n){"use strict";var r,i=e(10),s=e(21),o=i.injection.MUST_USE_ATTRIBUTE,u=i.injection.MUST_USE_PROPERTY,a=i.injection.HAS_BOOLEAN_VALUE,f=i.injection.HAS_SIDE_EFFECTS,l=i.injection.HAS_NUMERIC_VALUE,c=i.injection.HAS_POSITIVE_NUMERIC_VALUE,h=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(s.canUseDOM){var p=document.implementation;r=p&&p.hasFeature&&p.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var d={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|a,allowTransparency:o,alt:null,async:a,autoComplete:null,autoPlay:a,cellPadding:null,cellSpacing:null,charSet:o,checked:u|a,classID:o,className:r?o:u,cols:o|c,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:u|a,coords:null,crossOrigin:null,data:null,dateTime:o,defer:a,dir:null,disabled:o|a,download:h,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:a,formTarget:o,frameBorder:o,headers:null,height:o,hidden:o|a,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:u,label:null,lang:null,list:o,loop:u|a,low:null,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:u|a,muted:u|a,name:null,noValidate:a,open:a,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:u|a,rel:null,required:a,role:o,rows:o|c,rowSpan:null,sandbox:null,scope:null,scoped:a,scrolling:null,seamless:o|a,selected:u|a,shape:null,size:o|c,sizes:o,span:c,spellCheck:null,src:null,srcDoc:u,srcSet:o,start:l,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:u|f,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|a,itemType:o,itemID:o,itemRef:o,property:null,unselectable:o},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=d},{10:10,21:21}],24:[function(e,t,n){"use strict";function r(e){f(null==e.props.checkedLink||null==e.props.valueLink)}function i(e){r(e),f(null==e.props.value&&null==e.props.onChange)}function s(e){r(e),f(null==e.props.checked&&null==e.props.onChange)}function o(e){this.props.valueLink.requestChange(e.target.value)}function u(e){this.props.checkedLink.requestChange(e.target.checked)}var a=e(76),f=e(133),l={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},c={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||l[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:a.func}},getValue:function(e){return e.props.valueLink?(i(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(s(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(i(e),o):e.props.checkedLink?(s(e),u):e.props.onChange}};t.exports=c},{133:133,76:76}],25:[function(e,t,n){"use strict";function r(e){e.remove()}var i=e(30),s=e(103),o=e(118),u=e(133),a={trapBubbledEvent:function(e,t){u(this.isMounted());var n=this.getDOMNode();u(n);var r=i.trapBubbledEvent(e,t,n);this._localEventListeners=s(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,r)}};t.exports=a},{103:103,118:118,133:133,30:30}],26:[function(e,t,n){"use strict";var r=e(15),i=e(112),s=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===s.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=i)}}};t.exports=o},{112:112,15:15}],27:[function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s){var o=Object(s);for(var u in o)r.call(o,u)&&(n[u]=o[u])}}return n}t.exports=r},{}],28:[function(e,t,n){"use strict";var r=e(133),i=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},u=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},a=function(e){var t=this;r(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},f=10,l=i,c=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||l,n.poolSize||(n.poolSize=f),n.release=a,n},h={addPoolingTo:c,oneArgumentPooler:i,twoArgumentPooler:s,threeArgumentPooler:o,fiveArgumentPooler:u};t.exports=h},{133:133}],29:[function(e,t,n){"use strict";var r=e(115),i={getDOMNode:function(){return r(this)}};t.exports=i},{115:115}],30:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=p++,c[e[v]]={}),c[e[v]]}var i=e(15),s=e(17),o=e(18),u=e(59),a=e(102),f=e(27),l=e(134),c={},h=!1,p=0,d={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),m=f({},u,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=e}},setEnabled:function(e){m.ReactEventListener&&m.ReactEventListener.setEnabled(e)},isEnabled:function(){return!!m.ReactEventListener&&!!m.ReactEventListener.isEnabled()},listenTo:function(e,t){for(var n=t,s=r(n),u=o.registrationNameDependencies[e],a=i.topLevelTypes,f=0,c=u.length;c>f;f++){var h=u[f];s.hasOwnProperty(h)&&s[h]||(h===a.topWheel?l("wheel")?m.ReactEventListener.trapBubbledEvent(a.topWheel,"wheel",n):l("mousewheel")?m.ReactEventListener.trapBubbledEvent(a.topWheel,"mousewheel",n):m.ReactEventListener.trapBubbledEvent(a.topWheel,"DOMMouseScroll",n):h===a.topScroll?l("scroll",!0)?m.ReactEventListener.trapCapturedEvent(a.topScroll,"scroll",n):m.ReactEventListener.trapBubbledEvent(a.topScroll,"scroll",m.ReactEventListener.WINDOW_HANDLE):h===a.topFocus||h===a.topBlur?(l("focus",!0)?(m.ReactEventListener.trapCapturedEvent(a.topFocus,"focus",n),m.ReactEventListener.trapCapturedEvent(a.topBlur,"blur",n)):l("focusin")&&(m.ReactEventListener.trapBubbledEvent(a.topFocus,"focusin",n),m.ReactEventListener.trapBubbledEvent(a.topBlur,"focusout",n)),s[a.topBlur]=!0,s[a.topFocus]=!0):d.hasOwnProperty(h)&&m.ReactEventListener.trapBubbledEvent(h,d[h],n),s[h]=!0)}},trapBubbledEvent:function(e,t,n){return m.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return m.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!h){var e=a.refreshScrollValues;m.ReactEventListener.monitorScrollValue(e),h=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners});t.exports=m},{102:102,134:134,15:15,17:17,18:18,27:27,59:59}],31:[function(e,t,n){"use strict";var r=e(79),i=e(116),s=e(132),o=e(147),u={instantiateChildren:function(e,t,n){var r=i(e);for(var o in r)if(r.hasOwnProperty(o)){var u=r[o],a=s(u,null);r[o]=a}return r},updateChildren:function(e,t,n,u){var f=i(t);if(!f&&!e)return null;var l;for(l in f)if(f.hasOwnProperty(l)){var c=e&&e[l],h=c&&c._currentElement,p=f[l];if(o(h,p))r.receiveComponent(c,p,n,u),f[l]=c;else{c&&r.unmountComponent(c,l);var d=s(p,null);f[l]=d}}for(l in e)!e.hasOwnProperty(l)||f&&f.hasOwnProperty(l)||r.unmountComponent(e[l]);return f},unmountChildren:function(e){for(var t in e){var n=e[t];r.unmountComponent(n)}}};t.exports=u},{116:116,132:132,147:147,79:79}],32:[function(e,t,n){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function i(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function s(e,t,n){if(null==e)return e;var s=r.getPooled(t,n);p(e,i,s),r.release(s)}function o(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function u(e,t,n,r){var i=e,s=i.mapResult,o=!s.hasOwnProperty(n);if(o){var u=i.mapFunction.call(i.mapContext,t,r);s[n]=u}}function a(e,t,n){if(null==e)return e;var r={},i=o.getPooled(r,t,n);return p(e,u,i),o.release(i),h.create(r)}function f(e,t,n,r){return null}function l(e,t){return p(e,f,null)}var c=e(28),h=e(61),p=e(149),d=(e(150),c.twoArgumentPooler),v=c.threeArgumentPooler;c.addPoolingTo(r,d),c.addPoolingTo(o,v);var m={forEach:s,map:a,count:l};t.exports=m},{149:149,150:150,28:28,61:61}],33:[function(e,t,n){"use strict";function r(e,t){var n=T.hasOwnProperty(t)?T[t]:null;C.hasOwnProperty(t)&&y(n===S.OVERRIDE_BASE),e.hasOwnProperty(t)&&y(n===S.DEFINE_MANY||n===S.DEFINE_MANY_MERGED)}function i(e,t){if(t){y("function"!=typeof t),y(!h.isValidElement(t));var n=e.prototype;t.hasOwnProperty(E)&&N.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==E){var s=t[i];if(r(n,i),N.hasOwnProperty(i))N[i](e,s);else{var o=T.hasOwnProperty(i),f=n.hasOwnProperty(i),l=s&&s.__reactDontBind,c="function"==typeof s,p=c&&!o&&!f&&!l;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=s,n[i]=s;else if(f){var d=T[i];y(o&&(d===S.DEFINE_MANY_MERGED||d===S.DEFINE_MANY)),d===S.DEFINE_MANY_MERGED?n[i]=u(n[i],s):d===S.DEFINE_MANY&&(n[i]=a(n[i],s))}else n[i]=s}}}}function s(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in N;y(!i);var s=n in e;y(!s),e[n]=r}}}function o(e,t){y(e&&t&&"object"==typeof e&&"object"==typeof t);for(var n in t)t.hasOwnProperty(n)&&(y(void 0===e[n]),e[n]=t[n]);return e}function u(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return o(i,n),o(i,r),i}}function a(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function f(e,t){var n=t.bind(e);return n}function l(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=f(e,p.guard(n,e.constructor.displayName+"."+t))}}var c=e(34),h=(e(39),e(55)),p=e(58),d=e(65),v=e(66),m=(e(75),e(74),e(84)),g=e(27),y=e(133),b=e(138),w=e(139),E=(e(150),w({mixins:null})),S=b({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),x=[],T={mixins:S.DEFINE_MANY,statics:S.DEFINE_MANY,propTypes:S.DEFINE_MANY,contextTypes:S.DEFINE_MANY,childContextTypes:S.DEFINE_MANY,getDefaultProps:S.DEFINE_MANY_MERGED,getInitialState:S.DEFINE_MANY_MERGED,getChildContext:S.DEFINE_MANY_MERGED,render:S.DEFINE_ONCE,componentWillMount:S.DEFINE_MANY,componentDidMount:S.DEFINE_MANY,componentWillReceiveProps:S.DEFINE_MANY,shouldComponentUpdate:S.DEFINE_ONCE,componentWillUpdate:S.DEFINE_MANY,componentDidUpdate:S.DEFINE_MANY,componentWillUnmount:S.DEFINE_MANY,updateComponent:S.OVERRIDE_BASE},N={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)i(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=g({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=g({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=u(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=g({},e.propTypes,t)},statics:function(e,t){s(e,t)}},C={replaceState:function(e,t){m.enqueueReplaceState(this,e),t&&m.enqueueCallback(this,t)},isMounted:function(){var e=d.get(this);return e&&e!==v.currentlyMountingInstance},setProps:function(e,t){m.enqueueSetProps(this,e),t&&m.enqueueCallback(this,t)},replaceProps:function(e,t){m.enqueueReplaceProps(this,e),t&&m.enqueueCallback(this,t)}},k=function(){};g(k.prototype,c.prototype,C);var L={createClass:function(e){var t=function(e,t){this.__reactAutoBindMap&&l(this),this.props=e,this.context=t,this.state=null;var n=this.getInitialState?this.getInitialState():null;y("object"==typeof n&&!Array.isArray(n)),this.state=n};t.prototype=new k,t.prototype.constructor=t,x.forEach(i.bind(null,t)),i(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),y(t.prototype.render);for(var n in T)t.prototype[n]||(t.prototype[n]=null);return t.type=t,t},injection:{injectMixin:function(e){x.push(e)}}};t.exports=L},{133:133,138:138,139:139,150:150,27:27,34:34,39:39,55:55,58:58,65:65,66:66,74:74,75:75,84:84}],34:[function(e,t,n){"use strict";function r(e,t){this.props=e,this.context=t}var i=e(84),s=e(133);e(150),r.prototype.setState=function(e,t){s("object"==typeof e||"function"==typeof e||null==e),i.enqueueSetState(this,e),t&&i.enqueueCallback(this,t)},r.prototype.forceUpdate=function(e){i.enqueueForceUpdate(this),e&&i.enqueueCallback(this,e)},t.exports=r},{133:133,150:150,84:84}],35:[function(e,t,n){"use strict";var r=e(44),i=e(68),s={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){i.purgeID(e)}};t.exports=s},{44:44,68:68}],36:[function(e,t,n){"use strict";var r=e(133),i=!1,s={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r(!i),s.unmountIDFromEnvironment=e.unmountIDFromEnvironment,s.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,s.processChildrenUpdates=e.processChildrenUpdates,i=!0}}};t.exports=s},{133:133}],37:[function(e,t,n){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var i=e(36),s=e(38),o=e(39),u=e(55),a=(e(56),e(65)),f=e(66),l=e(71),c=e(73),h=e(75),p=(e(74),e(79)),d=e(85),v=e(27),m=e(113),g=e(133),y=e(147),b=(e(150),1),w={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=b++,this._rootNodeID=e;var r=this._processProps(this._currentElement.props),i=this._processContext(this._currentElement._context),s=l.getComponentClassForElement(this._currentElement),o=new s(r,i);o.props=r,o.context=i,o.refs=m,this._instance=o,a.set(o,this);var u=o.state;void 0===u&&(o.state=u=null),g("object"==typeof u&&!Array.isArray(u)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var c,h,d=f.currentlyMountingInstance;f.currentlyMountingInstance=this;try{o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),c=this._getValidatedChildContext(n),h=this._renderValidatedComponent(c)}finally{f.currentlyMountingInstance=d}this._renderedComponent=this._instantiateReactComponent(h,this._currentElement.type);var v=p.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,c));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),v},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=f.currentlyUnmountingInstance;f.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{f.currentlyUnmountingInstance=t}}p.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,a.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=u.cloneAndReplaceProps(n,v({},n.props,e)),d.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return m;var n=this._currentElement.type.contextTypes;if(!n)return m;t={};for(var r in n)t[r]=e[r];return t},_processContext:function(e){var t=this._maskContext(e);return t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){g("object"==typeof t.constructor.childContextTypes);for(var r in n)g(r in t.constructor.childContextTypes);return n}return null},_mergeChildContext:function(e,t){return t?v({},e,t):e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var i=this.getName();for(var s in e)if(e.hasOwnProperty(s)){var o;try{g("function"==typeof e[s]),o=e[s](t,s,i,n)}catch(u){o=u}o instanceof Error&&(r(this),n===h.prop)}},receiveComponent:function(e,t,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,r,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&p.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),r=(this.getName()||"ReactCompositeComponent",0);r<n.length;r++)n[r]},updateComponent:function(e,t,n,r,i){var s=this._instance,o=s.context,u=s.props;t!==n&&(o=this._processContext(n._context),u=this._processProps(n.props),s.componentWillReceiveProps&&s.componentWillReceiveProps(u,o));var a=this._processPendingState(u,o),f=this._pendingForceUpdate||!s.shouldComponentUpdate||s.shouldComponentUpdate(u,a,o);f?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,u,a,o,e,i)):(this._currentElement=n,this._context=i,s.props=u,s.state=a,s.context=o)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var s=v({},i?r[0]:n.state),o=i?1:0;o<r.length;o++){var u=r[o];v(s,"function"==typeof u?u.call(n,s,e,t):u)}return s},_performComponentUpdate:function(e,t,n,r,i,s){var o=this._instance,u=o.props,a=o.state,f=o.context;o.componentWillUpdate&&o.componentWillUpdate(t,n,r),this._currentElement=e,this._context=s,o.props=t,o.state=n,o.context=r,this._updateRenderedComponent(i,s),o.componentDidUpdate&&i.getReactMountReady().enqueue(o.componentDidUpdate.bind(o,u,a,f),o)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,i=this._getValidatedChildContext(),s=this._renderValidatedComponent(i);if(y(r,s))p.receiveComponent(n,s,e,this._mergeChildContext(t,i));else{var o=this._rootNodeID,u=n._rootNodeID;p.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(s,this._currentElement.type);var a=p.mountComponent(this._renderedComponent,o,e,this._mergeChildContext(t,i));this._replaceNodeWithMarkupByID(u,a)}},_replaceNodeWithMarkupByID:function(e,t){i.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(e){var t,n=s.current;s.current=this._mergeChildContext(this._currentElement._context,e),o.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{s.current=n,o.current=null}return g(null===t||t===!1||u.isValidElement(t)),t},attachRef:function(e,t){var n=this.getPublicInstance(),r=n.refs===m?n.refs={}:n.refs;r[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};c.measureMethods(w,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var E={Mixin:w};t.exports=E},{113:113,133:133,147:147,150:150,27:27,36:36,38:38,39:39,55:55,56:56,65:65,66:66,71:71,73:73,74:74,75:75,79:79,85:85}],38:[function(e,t,n){"use strict";var r=e(27),i=e(113),s=(e(150),{current:i,withContext:function(e,t){var n,i=s.current;s.current=r({},i,e);try{n=t()}finally{s.current=i}return n}});t.exports=s},{113:113,150:150,27:27}],39:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],40:[function(e,t,n){"use strict";function r(e){return i.createFactory(e)}var i=e(55),s=(e(56),e(140)),o=s({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul","var":"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=o},{140:140,55:55,56:56}],41:[function(e,t,n){"use strict";var r=e(2),i=e(29),s=e(33),o=e(55),u=e(138),a=o.createFactory("button"),f=u({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),l=s.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,i],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&f[t]||(e[t]=this.props[t]);return a(e,this.props.children)}});t.exports=l},{138:138,2:2,29:29,33:33,55:55}],42:[function(e,t,n){"use strict";function r(e){e&&(null!=e.dangerouslySetInnerHTML&&(g(null==e.children),g("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML)),g(null==e.style||"object"==typeof e.style))}function i(e,t,n,r){var i=h.findReactContainerForID(e);if(i){var s=i.nodeType===T?i.ownerDocument:i;w(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function s(e){A.call(L,e)||(g(k.test(e)),L[e]=!0)}function o(e){s(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var u=e(5),a=e(10),f=e(11),l=e(30),c=e(35),h=e(68),p=e(69),d=e(73),v=e(27),m=e(114),g=e(133),y=(e(134),e(139)),b=(e(150),l.deleteListener),w=l.listenTo,E=l.registrationNameModules,S={string:!0,number:!0},x=y({style:null}),T=1,N=null,C={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},k=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,L={},A={}.hasOwnProperty;o.displayName="ReactDOMComponent",o.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,r(this._currentElement.props);var i=C[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+i},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];if(null!=s)if(E.hasOwnProperty(r))i(this._rootNodeID,r,s,e);else{r===x&&(s&&(s=this._previousStyleCopy=v({},t.style)),s=u.createMarkupForStyles(s));var o=f.createMarkupForProperty(r,s);o&&(n+=" "+o)}}if(e.renderToStaticMarkup)return n+">";var a=f.createMarkupForID(this._rootNodeID);return n+" "+a+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,i=r.dangerouslySetInnerHTML;if(null!=i){if(null!=i.__html)return n+i.__html}else{var s=S[typeof r.children]?r.children:null,o=null!=s?null:r.children;if(null!=s)return n+m(s);if(null!=o){var u=this.mountChildren(o,e,t);return n+u.join("")}}return n},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,i){r(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,i)},_updateDOMProperties:function(e,t){var n,r,s,o=this._currentElement.props;for(n in e)if(!o.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===x){var u=this._previousStyleCopy;for(r in u)u.hasOwnProperty(r)&&(s=s||{},s[r]="");this._previousStyleCopy=null}else E.hasOwnProperty(n)?b(this._rootNodeID,n):(a.isStandardName[n]||a.isCustomAttribute(n))&&N.deletePropertyByID(this._rootNodeID,n);for(n in o){var f=o[n],l=n===x?this._previousStyleCopy:e[n];if(o.hasOwnProperty(n)&&f!==l)if(n===x)if(f?f=this._previousStyleCopy=v({},f):this._previousStyleCopy=null,l){for(r in l)!l.hasOwnProperty(r)||f&&f.hasOwnProperty(r)||(s=s||{},s[r]="");for(r in f)f.hasOwnProperty(r)&&l[r]!==f[r]&&(s=s||{},s[r]=f[r])}else s=f;else E.hasOwnProperty(n)?i(this._rootNodeID,n,f,t):(a.isStandardName[n]||a.isCustomAttribute(n))&&N.updatePropertyByID(this._rootNodeID,n,f)}s&&N.updateStylesByID(this._rootNodeID,s)},_updateDOMChildren:function(e,t,n){var r=this._currentElement.props,i=S[typeof e.children]?e.children:null,s=S[typeof r.children]?r.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,u=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,a=null!=i?null:e.children,f=null!=s?null:r.children,l=null!=i||null!=o,c=null!=s||null!=u;null!=a&&null==f?this.updateChildren(null,t,n):l&&!c&&this.updateTextContent(""),null!=s?i!==s&&this.updateTextContent(""+s):null!=u?o!==u&&N.updateInnerHTMLByID(this._rootNodeID,u):null!=f&&this.updateChildren(f,t,n)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),c.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},d.measureMethods(o,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),v(o.prototype,o.Mixin,p.Mixin),o.injection={injectIDOperations:function(e){o.BackendIDOperations=N=e}},t.exports=o},{10:10,11:11,114:114,133:133,134:134,139:139,150:150,27:27,30:30,35:35,5:5,68:68,69:69,73:73}],43:[function(e,t,n){"use strict";var r=e(15),i=e(25),s=e(29),o=e(33),u=e(55),a=u.createFactory("form"),f=o.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=f},{15:15,25:25,29:29,33:33,55:55}],44:[function(e,t,n){"use strict";var r=e(5),i=e(9),s=e(11),o=e(68),u=e(73),a=e(133),f=e(144),l={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},c={updatePropertyByID:function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t)),null!=n?s.setValueForProperty(r,t,n):s.deleteValueForProperty(r,t)},deletePropertyByID:function(e,t,n){var r=o.getNode(e);a(!l.hasOwnProperty(t)),s.deleteValueForProperty(r,t,n)},updateStylesByID:function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=o.getNode(e);f(n,t)},updateTextContentByID:function(e,t){var n=o.getNode(e);i.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=o.getNode(e);i.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);i.processUpdates(e,t)}};u.measureMethods(c,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=c},{11:11,133:133,144:144,5:5,68:68,73:73,9:9}],45:[function(e,t,n){"use strict";var r=e(15),i=e(25),s=e(29),o=e(33),u=e(55),a=u.createFactory("iframe"),f=o.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});t.exports=f},{15:15,25:25,29:29,33:33,55:55}],46:[function(e,t,n){"use strict";var r=e(15),i=e(25),s=e(29),o=e(33),u=e(55),a=u.createFactory("img"),f=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[s,i],render:function(){return a(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=f},{15:15,25:25,29:29,33:33,55:55}],47:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e(2),s=e(11),o=e(24),u=e(29),a=e(33),f=e(55),l=e(68),c=e(85),h=e(27),p=e(133),d=f.createFactory("input"),v={},m=a.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[i,o.Mixin,u],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=h({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=o.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=o.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,d(e,this.props.children)},componentDidMount:function(){var e=l.getID(this.getDOMNode());v[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=l.getID(e);delete v[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();null!=this.props.checked&&s.setValueForProperty(r,"checked",this.props.checked||!1);var i=o.getValue(this);null!=i&&s.setValueForProperty(r,"value",""+i)},_handleChange:function(e){var t,n=o.getOnChange(this);n&&(t=n.call(this,e)),c.asap(r,this);var i=this.props.name;if("radio"===this.props.type&&null!=i){for(var s=this.getDOMNode(),u=s;u.parentNode;)u=u.parentNode;for(var a=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),f=0,h=a.length;h>f;f++){var d=a[f];if(d!==s&&d.form===s.form){var m=l.getID(d);p(m);var g=v[m];p(g),c.asap(r,g)}}}return t}});t.exports=m},{11:11,133:133,2:2,24:24,27:27,29:29,33:33,55:55,68:68,85:85}],48:[function(e,t,n){"use strict";var r=e(29),i=e(33),s=e(55),o=(e(150),s.createFactory("option")),u=i.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){},render:function(){return o(this.props,this.props.children)}});t.exports=u},{150:150,29:29,33:33,55:55}],49:[function(e,t,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=u.getValue(this);null!=e&&this.isMounted()&&s(this,e)}}function i(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function s(e,t){var n,r,i,s=e.getDOMNode().options;if(e.props.multiple){for(n={},r=0,i=t.length;i>r;r++)n[""+t[r]]=!0;for(r=0,i=s.length;i>r;r++){var o=n.hasOwnProperty(s[r].value);s[r].selected!==o&&(s[r].selected=o)}}else{for(n=""+t,r=0,i=s.length;i>r;r++)if(s[r].value===n)return void (s[r].selected=!0);s.length&&(s[0].selected=!0)}}var o=e(2),u=e(24),a=e(29),f=e(33),l=e(55),c=e(85),h=e(27),p=l.createFactory("select"),d=f.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[o,u.Mixin,a],propTypes:{defaultValue:i,value:i},render:function(){var e=h({},this.props);return e.onChange=this._handleChange,e.value=null,p(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=u.getValue(this);null!=e?s(this,e):null!=this.props.defaultValue&&s(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=u.getValue(this);null!=t?(this._pendingUpdate=!1,s(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?s(this,this.props.defaultValue):s(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=u.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,c.asap(r,this),t}});t.exports=d},{2:2,24:24,27:27,29:29,33:33,55:55,85:85}],50:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function i(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function s(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,i=t.anchorOffset,s=t.focusNode,o=t.focusOffset,u=t.getRangeAt(0),a=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),f=a?0:u.toString().length,l=u.cloneRange();l.selectNodeContents(e),l.setEnd(u.startContainer,u.startOffset);var c=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=c?0:l.toString().length,p=h+f,d=document.createRange();d.setStart(n,i),d.setEnd(s,o);var v=d.collapsed;return{start:v?p:h,end:v?h:p}}function o(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function u(e,t){if(window.getSelection){var n=window.getSelection(),r=e[l()].length,i=Math.min(t.start,r),s="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>s){var o=s;s=i,i=o}var u=f(e,i),a=f(e,s);if(u&&a){var c=document.createRange();c.setStart(u.node,u.offset),n.removeAllRanges(),i>s?(n.addRange(c),n.extend(a.node,a.offset)):(c.setEnd(a.node,a.offset),n.addRange(c))}}}var a=e(21),f=e(126),l=e(128),c=a.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:c?i:s,setOffsets:c?o:u};t.exports=h},{126:126,128:128,21:21}],51:[function(e,t,n){"use strict";var r=e(11),i=e(35),s=e(42),o=e(27),u=e(114),a=function(e){};o(a.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var i=u(this._stringText);return t.renderToStaticMarkup?i:"<span "+r.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,s.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){i.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=a},{11:11,114:114,27:27,35:35,42:42}],52:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var i=e(2),s=e(11),o=e(24),u=e(29),a=e(33),f=e(55),l=e(85),c=e(27),h=e(133),p=(e(150),f.createFactory("textarea")),d=a.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[i,o.Mixin,u],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(h(null==e),Array.isArray(t)&&(h(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=o.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=c({},this.props);return h(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,p(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=o.getValue(this);if(null!=r){var i=this.getDOMNode();s.setValueForProperty(i,"value",""+r)}},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),l.asap(r,this),t}});t.exports=d},{11:11,133:133,150:150,2:2,24:24,27:27,29:29,33:33,55:55,85:85}],53:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var i=e(85),s=e(101),o=e(27),u=e(112),a={initialize:u,close:function(){h.isBatchingUpdates=!1}},f={initialize:u,close:i.flushBatchedUpdates.bind(i)},l=[f,a];o(r.prototype,s.Mixin,{getTransactionWrappers:function(){return l}});var c=new r,h={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,i){var s=h.isBatchingUpdates;h.isBatchingUpdates=!0,s?e(t,n,r,i):c.perform(e,null,t,n,r,i)}};t.exports=h},{101:101,112:112,27:27,85:85}],54:[function(e,t,n){"use strict";function r(e){return d.createClass({tagName:e.toUpperCase(),render:function(){return new L(e,null,null,null,null,this.props)}})}function i(){O.EventEmitter.injectReactEventListener(A),O.EventPluginHub.injectEventPluginOrder(a),O.EventPluginHub.injectInstanceHandle(M),O.EventPluginHub.injectMount(_),O.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:B,EnterLeaveEventPlugin:f,ChangeEventPlugin:o,MobileSafariClickEventPlugin:h,SelectEventPlugin:P,BeforeInputEventPlugin:s}),O.NativeComponent.injectGenericComponentClass(g),O.NativeComponent.injectTextComponentClass(k),O.NativeComponent.injectAutoWrapper(r),O.Class.injectMixin(p),O.NativeComponent.injectComponentClasses({button:y,form:b,iframe:S,img:w,input:x,option:T,select:N,textarea:C,html:F("html"),head:F("head"),body:F("body")}),O.DOMProperty.injectDOMPropertyConfig(c),O.DOMProperty.injectDOMPropertyConfig(j),O.EmptyComponent.injectEmptyComponent("noscript"),O.Updates.injectReconcileTransaction(D),O.Updates.injectBatchingStrategy(m),O.RootIndex.injectCreateReactRootIndex(l.canUseDOM?u.createReactRootIndex:H.createReactRootIndex),O.Component.injectEnvironment(v),O.DOMComponent.injectIDOperations(E)}var s=e(3),o=e(7),u=e(8),a=e(13),f=e(14),l=e(21),c=e(23),h=e(26),p=e(29),d=e(33),v=e(35),m=e(53),g=e(42),y=e(41),b=e(43),w=e(46),E=e(44),S=e(45),x=e(47),T=e(48),N=e(49),C=e(52),k=e(51),L=e(55),A=e(60),O=e(62),M=e(64),_=e(68),D=e(78),P=e(87),H=e(88),B=e(89),j=e(86),F=e(109);t.exports={inject:i}},{109:109,13:13,14:14,21:21,23:23,26:26,29:29,3:3,33:33,35:35,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,51:51,52:52,53:53,55:55,60:60,62:62,64:64,68:68,7:7,78:78,8:8,86:86,87:87,88:88,89:89}],55:[function(e,t,n){"use strict";var r=e(38),i=e(39),s=e(27),o=(e(150),{key:!0,ref:!0}),u=function(e,t,n,r,i,s){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=i,this.props=s};u.prototype={_isReactElement:!0},u.createElement=function(e,t,n){var s,f={},l=null,c=null;if(null!=t){c=void 0===t.ref?null:t.ref,l=void 0===t.key?null:""+t.key;for(s in t)t.hasOwnProperty(s)&&!o.hasOwnProperty(s)&&(f[s]=t[s])}var h=arguments.length-2;if(1===h)f.children=n;else if(h>1){for(var p=Array(h),d=0;h>d;d++)p[d]=arguments[d+2];f.children=p}if(e&&e.defaultProps){var v=e.defaultProps;for(s in v)"undefined"==typeof f[s]&&(f[s]=v[s])}return new u(e,l,c,i.current,r.current,f)},u.createFactory=function(e){var t=u.createElement.bind(null,e);return t.type=e,t},u.cloneAndReplaceProps=function(e,t){var n=new u(e.type,e.key,e.ref,e._owner,e._context,t);return n},u.cloneElement=function(e,t,n){var r,f=s({},e.props),l=e.key,c=e.ref,h=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,h=i.current),void 0!==t.key&&(l=""+t.key);for(r in t)t.hasOwnProperty(r)&&!o.hasOwnProperty(r)&&(f[r]=t[r])}var p=arguments.length-2;if(1===p)f.children=n;else if(p>1){for(var d=Array(p),v=0;p>v;v++)d[v]=arguments[v+2];f.children=d}return new u(e.type,l,c,h,e._context,f)},u.isValidElement=function(e){var t=!!e&&!!e._isReactElement;return t},t.exports=u},{150:150,27:27,38:38,39:39}],56:[function(e,t,n){"use strict";function r(){if(y.current){var e=y.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(e){var t=e&&e.getPublicInstance();if(!t)return void 0;var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}function s(){var e=y.current;return e&&i(e)||void 0}function o(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,a('Each child in an array or iterator should have a unique "key" prop.',e,t))}function u(e,t,n){T.test(e)&&a("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function a(e,t,n){var r=s(),o="string"==typeof n?n:n.displayName||n.name,u=r||o,a=S[e]||(S[e]={});if(!a.hasOwnProperty(u)){a[u]=!0;var f="";if(t&&t._owner&&t._owner!==y.current){var l=i(t._owner);f=" It was passed a child from "+l+"."}}}function f(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];v.isValidElement(r)&&o(r,t)}else if(v.isValidElement(e))e._store.validated=!0;else if(e){var i=w(e);if(i){if(i!==e.entries)for(var s,a=i.call(e);!(s=a.next()).done;)v.isValidElement(s.value)&&o(s.value,t)}else if("object"==typeof e){var f=m.extractIfFragment(e);for(var l in f)f.hasOwnProperty(l)&&u(l,f[l],t)}}}function l(e,t,n,i){for(var s in t)if(t.hasOwnProperty(s)){var o;try{E("function"==typeof t[s]),o=t[s](n,s,e,i)}catch(u){o=u}o instanceof Error&&!(o.message in x)&&(x[o.message]=!0,r(this))}}function c(e,t){var n=t.type,r="string"==typeof n?n:n.displayName,i=t._owner?t._owner.getPublicInstance().constructor.displayName:null,s=e+"|"+r+"|"+i;if(!N.hasOwnProperty(s)){N[s]=!0;var o="";r&&(o=" <"+r+" />");var u="";i&&(u=" The element was created by "+i+".")}}function h(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function p(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&h(t[r],n[r])||(c(r,e),t[r]=n[r]))}}function d(e){if(null!=e.type){var t=b.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&l(n,t.propTypes,e.props,g.prop),"function"==typeof t.getDefaultProps}}var v=e(55),m=e(61),g=e(75),y=(e(74),e(39)),b=e(71),w=e(124),E=e(133),S=(e(150),{}),x={},T=/^\d+$/,N={},C={checkAndWarnForMutatedProps:p,createElement:function(e,t,n){var r=v.createElement.apply(this,arguments);if(null==r)return r;for(var i=2;i<arguments.length;i++)f(arguments[i],e);return d(r),r},createFactory:function(e){var t=C.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var r=v.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)f(arguments[i],r.type);return d(r),r}};t.exports=C},{124:124,133:133,150:150,39:39,55:55,61:61,71:71,74:74,75:75}],57:[function(e,t,n){"use strict";function r(e){l[e]=!0}function i(e){delete l[e]}function s(e){return!!l[e]}var o,u=e(55),a=e(65),f=e(133),l={},c={injectEmptyComponent:function(e){o=u.createFactory(e)}},h=function(){};h.prototype.componentDidMount=function(){var e=a.get(this);e&&r(e._rootNodeID)},h.prototype.componentWillUnmount=function(){var e=a.get(this);e&&i(e._rootNodeID)},h.prototype.render=function(){return f(o),o()};var p=u.createElement(h),d={emptyElement:p,injection:c,isNullComponentID:s};t.exports=d},{133:133,55:55,65:65}],58:[function(e,t,n){"use strict";var r={guard:function(e,t){return e}};t.exports=r},{}],59:[function(e,t,n){"use strict";function r(e){i.enqueueEvents(e),i.processEventQueue()}var i=e(17),s={handleTopLevel:function(e,t,n,s){var u=i.extractEvents(e,t,n,s);r(u)}};t.exports=s},{17:17}],60:[function(e,t,n){"use strict";function r(e){var t=c.getID(e),n=l.getReactRootIDFromNodeID(t),r=c.findReactContainerForID(n),i=c.getFirstReactDOM(r);return i}function i(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function s(e){for(var t=c.getFirstReactDOM(d(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var i=0,s=e.ancestors.length;s>i;i++){t=e.ancestors[i];var o=c.getID(t)||"";m._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function o(e){var t=v(window);e(t)}var u=e(16),a=e(21),f=e(28),l=e(64),c=e(68),h=e(85),p=e(27),d=e(123),v=e(129);p(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),f.addPoolingTo(i,f.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:a.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?u.listen(r,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?u.capture(r,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);u.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=i.getPooled(e,t);try{h.batchedUpdates(s,n)}finally{i.release(n)}}}};t.exports=m},{123:123,129:129,16:16,21:21,27:27,28:28,64:64,68:68,85:85}],61:[function(e,t,n){"use strict";var r=(e(55),e(150),{create:function(e){return e},extract:function(e){return e},extractIfFragment:function(e){return e}});t.exports=r},{150:150,55:55}],62:[function(e,t,n){"use strict";var r=e(10),i=e(17),s=e(36),o=e(33),u=e(57),a=e(30),f=e(71),l=e(42),c=e(73),h=e(81),p=e(85),d={Component:s.injection,Class:o.injection,DOMComponent:l.injection,DOMProperty:r.injection,EmptyComponent:u.injection,EventPluginHub:i.injection,EventEmitter:a.injection,NativeComponent:f.injection,Perf:c.injection,RootIndex:h.injection,Updates:p.injection};t.exports=d},{10:10,17:17,30:30,33:33,36:36,42:42,57:57,71:71,73:73,81:81,85:85}],63:[function(e,t,n){"use strict";function r(e){return s(document.documentElement,e)}var i=e(50),s=e(107),o=e(117),u=e(119),a={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=u();return{focusedElem:e,selectionRange:a.hasSelectionCapabilities(e)?a.getSelection(e):null}},restoreSelection:function(e){var t=u(),n=e.focusedElem,i=e.selectionRange;t!==n&&r(n)&&(a.hasSelectionCapabilities(n)&&a.setSelection(n,i),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=i.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",r-n),s.select()}else i.setOffsets(e,t)}};t.exports=a},{107:107,117:117,119:119,50:50}],64:[function(e,t,n){"use strict";function r(e){return p+e.toString(36)}function i(e,t){return e.charAt(t)===p||t===e.length}function s(e){return""===e||e.charAt(0)===p&&e.charAt(e.length-1)!==p}function o(e,t){return 0===t.indexOf(e)&&i(t,e.length)}function u(e){return e?e.substr(0,e.lastIndexOf(p)):""}function a(e,t){if(h(s(e)&&s(t)),h(o(e,t)),e===t)return e;var n,r=e.length+d;for(n=r;n<t.length&&!i(t,n);n++);return t.substr(0,n)}function f(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,o=0;n>=o;o++)if(i(e,o)&&i(t,o))r=o;else if(e.charAt(o)!==t.charAt(o))break;var u=e.substr(0,r);return h(s(u)),u}function l(e,t,n,r,i,s){e=e||"",t=t||"",h(e!==t);var f=o(t,e);h(f||o(e,t));for(var l=0,c=f?u:a,p=e;;p=c(p,t)){var d;if(i&&p===e||s&&p===t||(d=n(p,f,r)),d===!1||p===t)break;h(l++<v)}}var c=e(81),h=e(133),p=".",d=p.length,v=100,m={createReactRootID:function(){return r(c.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===p&&e.length>1){var t=e.indexOf(p,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=f(e,t);s!==e&&l(e,s,n,r,!1,!0),s!==t&&l(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(l("",e,t,n,!0,!1),l(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){l("",e,t,n,!0,!1)},_getFirstCommonAncestorID:f,_getNextDescendantID:a,isAncestorIDOf:o,SEPARATOR:p};t.exports=m},{133:133,81:81}],65:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],66:[function(e,t,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=r},{}],67:[function(e,t,n){"use strict";var r=e(104),i={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+i.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(i.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=r(e);return s===n}};t.exports=i},{104:104}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function i(e){var t=A(e);return t&&z.getID(t)}function s(e){var t=o(e);if(t)if(B.hasOwnProperty(t)){var n=B[t];n!==e&&(M(!l(n,t)),B[t]=e)}else B[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(H)||""}function u(e,t){var n=o(e);n!==t&&delete B[n],e.setAttribute(H,t),B[t]=e}function a(e){return B.hasOwnProperty(e)&&l(B[e],e)||(B[e]=z.findReactNodeByID(e)),B[e]}function f(e){var t=E.get(e)._rootNodeID;return b.isNullComponentID(t)?null:(B.hasOwnProperty(t)&&l(B[t],t)||(B[t]=z.findReactNodeByID(t)),B[t])}function l(e,t){if(e){M(o(e)===t);var n=z.findReactContainerForID(t);if(n&&L(n,e))return!0}return!1}function c(e){delete B[e]}function h(e){var t=B[e];return t&&l(t,e)?void (U=t):!1}function p(e){U=null,w.traverseAncestors(e,h);var t=U;return U=null,t}function d(e,t,n,r,i){var s=T.mountComponent(e,t,r,k);e._isTopLevel=!0,z._mountImageIntoNode(s,n,i)}function v(e,t,n,r){var i=C.ReactReconcileTransaction.getPooled();i.perform(d,null,e,t,n,i,r),C.ReactReconcileTransaction.release(i)}var m=e(10),g=e(30),y=(e(39),e(55)),b=(e(56),e(57)),w=e(64),E=e(65),S=e(67),x=e(73),T=e(79),N=e(84),C=e(85),k=e(113),L=e(107),A=e(127),O=e(132),M=e(133),_=e(144),D=e(147),P=(e(150),w.SEPARATOR),H=m.ID_ATTRIBUTE_NAME,B={},j=1,F=9,I={},q={},R=[],U=null,z={_instancesByReactRootID:I,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return z.scrollMonitor(n,function(){N.enqueueElementInternal(e,t),r&&N.enqueueCallbackInternal(e,r)}),e},_registerComponent:function(e,t){M(t&&(t.nodeType===j||t.nodeType===F)),g.ensureScrollValueMonitoring();var n=z.registerContainer(t);return I[n]=e,n},_renderNewRootComponent:function(e,t,n){var r=O(e,null),i=z._registerComponent(r,t);return C.batchedUpdates(v,r,i,t,n),r},render:function(e,t,n){M(y.isValidElement(e));var r=I[i(t)];if(r){var s=r._currentElement;if(D(s,e))return z._updateRootComponent(r,e,t,n).getPublicInstance();z.unmountComponentAtNode(t)}var o=A(t),u=o&&z.isRenderedByReact(o),a=u&&!r,f=z._renderNewRootComponent(e,t,a).getPublicInstance();return n&&n.call(f),f},constructAndRenderComponent:function(e,t,n){var r=y.createElement(e,t);return z.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return M(r),z.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=i(e);return t&&(t=w.getReactRootIDFromNodeID(t)),t||(t=w.createReactRootID()),q[t]=e,t},unmountComponentAtNode:function(e){M(e&&(e.nodeType===j||e.nodeType===F));var t=i(e),n=I[t];return n?(z.unmountComponentFromNode(n,e),delete I[t],delete q[t],!0):!1},unmountComponentFromNode:function(e,t){for(T.unmountComponent(e),t.nodeType===F&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=w.getReactRootIDFromNodeID(e),n=q[t];return n},findReactNodeByID:function(e){var t=z.findReactContainerForID(e);return z.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=z.getID(e);return t?t.charAt(0)===P:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(z.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=R,r=0,i=p(t)||e;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var s,o=n[r++];o;){var u=z.getID(o);u?t===u?s=o:w.isAncestorIDOf(u,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(s)return n.length=0,s}n.length=0,M(!1)},_mountImageIntoNode:function(e,t,n){if(M(t&&(t.nodeType===j||t.nodeType===F)),n){var i=A(t);if(S.canReuseMarkup(e,i))return;var s=i.getAttribute(S.CHECKSUM_ATTR_NAME);i.removeAttribute(S.CHECKSUM_ATTR_NAME);var o=i.outerHTML;i.setAttribute(S.CHECKSUM_ATTR_NAME,s);var u=r(e,o);" (client) "+e.substring(u-20,u+20)+"\n (server) "+o.substring(u-20,u+20),M(t.nodeType!==F)}M(t.nodeType!==F),_(t,e)},getReactRootID:i,getID:s,setID:u,getNode:a,getNodeFromInstance:f,purgeID:c};x.measureMethods(z,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=z},{10:10,107:107,113:113,127:127,132:132,133:133,144:144,147:147,150:150,30:30,39:39,55:55,56:56,57:57,64:64,65:65,67:67,73:73,79:79,84:84,85:85}],69:[function(e,t,n){"use strict";function r(e,t,n){d.push({parentID:e,parentNode:null,type:l.INSERT_MARKUP,markupIndex:v.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function i(e,t,n){d.push({parentID:e,parentNode:null,type:l.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function s(e,t){d.push({parentID:e,parentNode:null,type:l.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){d.push({parentID:e,parentNode:null,type:l.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function u(){d.length&&(f.processChildrenUpdates(d,v),a())}function a(){d.length=0,v.length=0}var f=e(36),l=e(70),c=e(79),h=e(31),p=0,d=[],v=[],m={Mixin:{mountChildren:function(e,t,n){var r=h.instantiateChildren(e,t,n);this._renderedChildren=r;var i=[],s=0;for(var o in r)if(r.hasOwnProperty(o)){var u=r[o],a=this._rootNodeID+o,f=c.mountComponent(u,a,t,n);u._mountIndex=s,i.push(f),s++}return i},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;h.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{p--,p||(t?a():u())}},updateChildren:function(e,t,n){p++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{p--,p||(r?a():u())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,i=h.updateChildren(r,e,t,n);if(this._renderedChildren=i,i||r){var s,o=0,u=0;for(s in i)if(i.hasOwnProperty(s)){var a=r&&r[s],f=i[s];a===f?(this.moveChild(a,u,o),o=Math.max(a._mountIndex,o),a._mountIndex=u):(a&&(o=Math.max(a._mountIndex,o),this._unmountChildByName(a,s)),this._mountChildByNameAtIndex(f,s,u,t,n)),u++}for(s in r)!r.hasOwnProperty(s)||i&&i.hasOwnProperty(s)||this._unmountChildByName(r[s],s)}},unmountChildren:function(){var e=this._renderedChildren;h.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&i(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){s(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,i){var s=this._rootNodeID+t,o=c.mountComponent(e,s,r,i);e._mountIndex=n,this.createChild(e,o)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=m},{31:31,36:36,70:70,79:79}],70:[function(e,t,n){"use strict";var r=e(138),i=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=i},{138:138}],71:[function(e,t,n){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=c[t];return null==n&&(c[t]=n=f(t)),n}function i(e){return a(l),new l(e.type,e.props)}function s(e){return new h(e)}function o(e){return e instanceof h}var u=e(27),a=e(133),f=null,l=null,c={},h=null,p={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){h=e},injectComponentClasses:function(e){u(c,e)},injectAutoWrapper:function(e){f=e}},d={getComponentClassForElement:r,createInternalComponent:i,createInstanceForText:s,isTextComponent:o,injection:p};t.exports=d},{133:133,27:27}],72:[function(e,t,n){"use strict";var r=e(133),i={isValidOwner:function(e){return!!e&&"function"==typeof e.attachRef&&"function"==typeof e.detachRef},addComponentAsRefTo:function(e,t,n){r(i.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(i.isValidOwner(n)),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=i},{133:133}],73:[function(e,t,n){"use strict";function r(e,t,n){return n}var i={enableMeasure:!1,storedMeasure:r,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){i.storedMeasure=e}}};t.exports=i},{}],74:[function(e,t,n){"use strict";var r={};t.exports=r},{}],75:[function(e,t,n){"use strict";var r=e(138),i=r({prop:null,context:null,childContext:null});t.exports=i},{138:138}],76:[function(e,t,n){"use strict";function r(e){function t(t,n,r,i,s){if(i=i||E,null==n[r]){var o=b[s];return t?new Error("Required "+o+" `"+r+"` was not specified in "+("`"+i+"`.")):null}return e(n,r,i,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function i(e){function t(t,n,r,i){var s=t[n],o=v(s);if(o!==e){var u=b[i],a=m(s);return new Error("Invalid "+u+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}return null}return r(t)}function s(){return r(w.thatReturns(null))}function o(e){function t(t,n,r,i){var s=t[n];if(!Array.isArray(s)){var o=b[i],u=v(s);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var a=0;a<s.length;a++){var f=e(s,a,r,i);if(f instanceof Error)return f}return null}return r(t)}function u(){function e(e,t,n,r){if(!g.isValidElement(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(e)}function a(e){function t(t,n,r,i){if(t[n]instanceof e)return null;var s=b[i],o=e.name||E;return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+o+"`."))}return r(t)}function f(e){function t(t,n,r,i){for(var s=t[n],o=0;o<e.length;o++)if(s===e[o])return null;var u=b[i],a=JSON.stringify(e);return new Error("Invalid "+u+" `"+n+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+a+"."))}return r(t)}function l(e){function t(t,n,r,i){var s=t[n],o=v(s);if("object"!==o){var u=b[i];return new Error("Invalid "+u+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an object."))}for(var a in s)if(s.hasOwnProperty(a)){var f=e(s,a,r,i);if(f instanceof Error)return f}return null}return r(t)}function c(e){function t(t,n,r,i){for(var s=0;s<e.length;s++){var o=e[s];if(null==o(t,n,r,i))return null}var u=b[i];return new Error("Invalid "+u+" `"+n+"` supplied to "+("`"+r+"`."))}return r(t)}function h(){function e(e,t,n,r){if(!d(e[t])){var i=b[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function p(e){function t(t,n,r,i){var s=t[n],o=v(s);if("object"!==o){var u=b[i];return new Error("Invalid "+u+" `"+n+"` of type `"+o+"` "+("supplied to `"+r+"`, expected `object`."))}for(var a in e){var f=e[a];if(f){var l=f(s,a,r,i);if(l)return l}}return null}return r(t)}function d(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(d);if(null===e||g.isValidElement(e))return!0;e=y.extractIfFragment(e);for(var t in e)if(!d(e[t]))return!1;return!0;default:return!1}}function v(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function m(e){var t=v(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var g=e(55),y=e(61),b=e(74),w=e(112),E="<<anonymous>>",S=u(),x=h(),T={array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),any:s(),arrayOf:o,element:S,instanceOf:a,node:x,objectOf:l,oneOf:f,oneOfType:c,shape:p};t.exports=T},{112:112,55:55,61:61,74:74}],77:[function(e,t,n){"use strict";function r(){this.listenersToPut=[]}var i=e(28),s=e(30),o=e(27);o(r.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];s.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),i.addPoolingTo(r),t.exports=r},{27:27,28:28,30:30}],78:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=i.getPooled(null),this.putListenerQueue=a.getPooled()}var i=e(6),s=e(28),o=e(30),u=e(63),a=e(77),f=e(101),l=e(27),c={initialize:u.getSelectionInformation,close:u.restoreSelection},h={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},p={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},d={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},v=[d,c,h,p],m={getTransactionWrappers:function(){return v},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,a.release(this.putListenerQueue),this.putListenerQueue=null}};l(r.prototype,f.Mixin,m),s.addPoolingTo(r),t.exports=r},{101:101,27:27,28:28,30:30,6:6,63:63,77:77}],79:[function(e,t,n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=e(80),s=(e(56),{mountComponent:function(e,t,n,i){var s=e.mountComponent(t,n,i);return n.getReactMountReady().enqueue(r,e),s},unmountComponent:function(e){i.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,s){var u=e._currentElement;if(t!==u||null==t._owner){var a=i.shouldUpdateRefs(u,t);a&&i.detachRefs(e,u),e.receiveComponent(t,n,s),a&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}});t.exports=s},{56:56,80:80}],80:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):s.addComponentAsRefTo(t,e,n)}function i(e,t,n){"function"==typeof e?e(null):s.removeComponentAsRefFrom(t,e,n)}var s=e(72),o={};o.attachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},o.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){var n=t.ref;null!=n&&i(n,e,t._owner)},t.exports=o},{72:72}],81:[function(e,t,n){"use strict";var r={injectCreateReactRootIndex:function(e){i.createReactRootIndex=e}},i={createReactRootIndex:null,injection:r};t.exports=i},{}],82:[function(e,t,n){"use strict";function r(e){c(s.isValidElement(e));var t;try{var n=o.createReactRootID();return t=a.getPooled(!1),t.perform(function(){var r=l(e,null),i=r.mountComponent(n,t,f);return u.addChecksumToMarkup(i)},null)}finally{a.release(t)}}function i(e){c(s.isValidElement(e));var t;try{var n=o.createReactRootID();return t=a.getPooled(!0),t.perform(function(){var r=l(e,null);return r.mountComponent(n,t,f)},null)}finally{a.release(t)}}var s=e(55),o=e(64),u=e(67),a=e(83),f=e(113),l=e(132),c=e(133);t.exports={renderToString:r,renderToStaticMarkup:i}},{113:113,132:132,133:133,55:55,64:64,67:67,83:83}],83:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=s.getPooled(null),this.putListenerQueue=o.getPooled()}var i=e(28),s=e(6),o=e(77),u=e(101),a=e(27),f=e(112),l={initialize:function(){this.reactMountReady.reset()},close:f},c={initialize:function(){this.putListenerQueue.reset()},close:f},h=[c,l],p={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};a(r.prototype,u.Mixin,p),i.addPoolingTo(r),t.exports=r},{101:101,112:112,27:27,28:28,6:6,77:77}],84:[function(e,t,n){"use strict";function r(e){e!==s.currentlyMountingInstance&&f.enqueueUpdate(e)}function i(e,t){c(null==o.current);var n=a.get(e);return n?n===s.currentlyUnmountingInstance?null:n:null}var s=e(66),o=e(39),u=e(55),a=e(65),f=e(85),l=e(27),c=e(133),h=(e(150),{enqueueCallback:function(e,t){c("function"==typeof t);var n=i(e);return n&&n!==s.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void r(n)):null},enqueueCallbackInternal:function(e,t){c("function"==typeof t),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=i(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=i(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=i(e,"setState");if(n){var s=n._pendingStateQueue||(n._pendingStateQueue=[]);s.push(t),r(n)}},enqueueSetProps:function(e,t){var n=i(e,"setProps");if(n){c(n._isTopLevel);var s=n._pendingElement||n._currentElement,o=l({},s.props,t);n._pendingElement=u.cloneAndReplaceProps(s,o),r(n)}},enqueueReplaceProps:function(e,t){var n=i(e,"replaceProps");if(n){c(n._isTopLevel);var s=n._pendingElement||n._currentElement;n._pendingElement=u.cloneAndReplaceProps(s,t),r(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}});t.exports=h},{133:133,150:150,27:27,39:39,55:55,65:65,66:66,85:85}],85:[function(e,t,n){"use strict";function r(){m(C.ReactReconcileTransaction&&w)}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=l.getPooled(),this.reconcileTransaction=C.ReactReconcileTransaction.getPooled()}function s(e,t,n,i,s){r(),w.batchedUpdates(e,t,n,i,s)}function o(e,t){return e._mountOrder-t._mountOrder}function u(e){var t=e.dirtyComponentsLength;m(t===g.length),g.sort(o);for(var n=0;t>n;n++){var r=g[n],i=r._pendingCallbacks;if(r._pendingCallbacks=null,p.performUpdateIfNecessary(r,e.reconcileTransaction),i)for(var s=0;s<i.length;s++)e.callbackQueue.enqueue(i[s],r.getPublicInstance())}}function a(e){return r(),w.isBatchingUpdates?void g.push(e):void w.batchedUpdates(a,e)}function f(e,t){m(w.isBatchingUpdates),y.enqueue(e,t),b=!0}var l=e(6),c=e(28),h=(e(39),e(73)),p=e(79),d=e(101),v=e(27),m=e(133),g=(e(150),[]),y=l.getPooled(),b=!1,w=null,E={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),T()):g.length=0}},S={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},x=[E,S];v(i.prototype,d.Mixin,{getTransactionWrappers:function(){return x},destructor:function(){this.dirtyComponentsLength=null,l.release(this.callbackQueue),this.callbackQueue=null,C.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return d.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),c.addPoolingTo(i);var T=function(){for(;g.length||b;){if(g.length){var e=i.getPooled();e.perform(u,null,e),i.release(e)}if(b){b=!1;var t=y;y=l.getPooled(),t.notifyAll(),l.release(t)}}};T=h.measure("ReactUpdates","flushBatchedUpdates",T);var N={injectReconcileTransaction:function(e){m(e),C.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){m(e),m("function"==typeof e.batchedUpdates),m("boolean"==typeof e.isBatchingUpdates),w=e}},C={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:a,flushBatchedUpdates:T,injection:N,asap:f};t.exports=C},{101:101,133:133,150:150,27:27,28:28,39:39,6:6,73:73,79:79}],86:[function(e,t,n){"use strict";var r=e(10),i=r.injection.MUST_USE_ATTRIBUTE,s={Properties:{clipPath:i,cx:i,cy:i,d:i,dx:i,dy:i,fill:i,fillOpacity:i,fontFamily:i,fontSize:i,fx:i,fy:i,gradientTransform:i,gradientUnits:i,markerEnd:i,markerMid:i,markerStart:i,offset:i,opacity:i,patternContentUnits:i,patternUnits:i,points:i,preserveAspectRatio:i,r:i,rx:i,ry:i,spreadMethod:i,stopColor:i,stopOpacity:i,stroke:i,strokeDasharray:i,strokeLinecap:i,strokeOpacity:i,strokeWidth:i,textAnchor:i,transform:i,version:i,viewBox:i,x1:i,x2:i,x:i,y1:i,y2:i,y:i},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=s},{10:10}],87:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(e){if(y||null==v||v!==f())return null;var t=r(v);if(!g||!h(g,t)){g=t;var n=a.getPooled(d.select,m,e);return n.type="select",n.target=v,o.accumulateTwoPhaseDispatches(n),n}}var s=e(15),o=e(20),u=e(63),a=e(93),f=e(119),l=e(136),c=e(139),h=e(146),p=s.topLevelTypes,d={select:{phasedRegistrationNames:{bubbled:c({onSelect:null}),captured:c({onSelectCapture:null})},dependencies:[p.topBlur,p.topContextMenu,p.topFocus,p.topKeyDown,p.topMouseDown,p.topMouseUp,p.topSelectionChange]}},v=null,m=null,g=null,y=!1,b={eventTypes:d,extractEvents:function(e,t,n,r){switch(e){case p.topFocus:(l(t)||"true"===t.contentEditable)&&(v=t,m=n,g=null);break;case p.topBlur:v=null,m=null,g=null;break;case p.topMouseDown:y=!0;break;case p.topContextMenu:case p.topMouseUp:return y=!1,i(r);case p.topSelectionChange:case p.topKeyDown:case p.topKeyUp:return i(r)}}};t.exports=b},{119:119,136:136,139:139,146:146,15:15,20:20,63:63,93:93}],88:[function(e,t,n){"use strict";var r=Math.pow(2,53),i={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=i},{}],89:[function(e,t,n){"use strict";var r=e(15),i=e(19),s=e(20),o=e(90),u=e(93),a=e(94),f=e(96),l=e(97),c=e(92),h=e(98),p=e(99),d=e(100),v=e(120),m=e(133),g=e(139),y=(e(150),r.topLevelTypes),b={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},w={topBlur:b.blur,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topReset:b.reset,topScroll:b.scroll,topSubmit:b.submit,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topWheel:b.wheel};for(var E in w)w[E].dependencies=[E];var S={eventTypes:b,executeDispatch:function(e,t,n){var r=i.executeDispatch(e,t,n);r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var i=w[e];if(!i)return null;var g;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:g=u;break;case y.topKeyPress:if(0===v(r))return null;case y.topKeyDown:case y.topKeyUp:g=f;break;case y.topBlur:case y.topFocus:g=a;break;case y.topClick:if(2===r.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:g=l;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:g=c;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:g=h;break;case y.topScroll:g=p;break;case y.topWheel:g=d;break;case y.topCopy:case y.topCut:case y.topPaste:g=o}m(g);var b=g.getPooled(i,n,r);return s.accumulateTwoPhaseDispatches(b),b}};t.exports=S},{100:100,120:120,133:133,139:139,15:15,150:150,19:19,20:20,90:90,92:92,93:93,94:94,96:96,97:97,98:98,99:99}],90:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};i.augmentClass(r,s),t.exports=r},{93:93}],91:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s={data:null};i.augmentClass(r,s),t.exports=r},{93:93}],92:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(97),s={dataTransfer:null};i.augmentClass(r,s),t.exports=r},{97:97}],93:[function(e,t,n){"use strict";function r(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s?this[i]=s(n):this[i]=n[i]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;u?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var i=e(28),s=e(27),o=e(112),u=e(123),a={type:null,target:u,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};s(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=o.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=a,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);s(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=s({},n.Interface,t),e.augmentClass=n.augmentClass,i.addPoolingTo(e,i.threeArgumentPooler)},i.addPoolingTo(r,i.threeArgumentPooler),t.exports=r},{112:112,123:123,27:27,28:28}],94:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s={relatedTarget:null};i.augmentClass(r,s),t.exports=r},{99:99}],95:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s={data:null};i.augmentClass(r,s),t.exports=r},{93:93}],96:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s=e(120),o=e(121),u=e(122),a={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:u,charCode:function(e){return"keypress"===e.type?s(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?s(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};i.augmentClass(r,a),t.exports=r},{120:120,121:121,122:122,99:99}],97:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s=e(102),o=e(122),u={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+s.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+s.currentScrollTop}};i.augmentClass(r,u),t.exports=r},{102:102,122:122,99:99}],98:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(99),s=e(122),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};i.augmentClass(r,o),t.exports=r},{122:122,99:99}],99:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(93),s=e(123),o={view:function(e){if(e.view)return e.view;var t=s(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};i.augmentClass(r,o),t.exports=r},{123:123,93:93}],100:[function(e,t,n){"use strict";function r(e,t,n){i.call(this,e,t,n)}var i=e(97),s={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,s),t.exports=r},{97:97}],101:[function(e,t,n){"use strict";var r=e(133),i={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,i,s,o,u,a){r(!this.isInTransaction());var f,l;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),l=e.call(t,n,i,s,o,u,a),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(i){}}}},closeAll:function(e){r(this.isInTransaction());for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i,o=t[n],u=this.wrapperInitData[n];try{i=!0,u!==s.OBSERVED_ERROR&&o.close&&o.close.call(this,u),i=!1}finally{if(i)try{this.closeAll(n+1)}catch(a){}}}this.wrapperInitData.length=0}},s={Mixin:i,OBSERVED_ERROR:{}};t.exports=s},{133:133}],102:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e,t){if(i(null!=t),null==e)return t;var n=Array.isArray(e),r=Array.isArray(t);return n&&r?(e.push.apply(e,t),e):n?(e.push(t),e):r?[e].concat(t):[e,t]}var i=e(133);t.exports=r},{133:133}],104:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%i,n=(n+t)%i;return t|n<<16}var i=65521;t.exports=r},{}],105:[function(e,t,n){function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;t.exports=r},{}],106:[function(e,t,n){"use strict";function r(e){return i(e.replace(s,"ms-"))}var i=e(105),s=/^-ms-/;t.exports=r},{105:105}],107:[function(e,t,n){function r(e,t){return e&&t?e===t?!0:i(e)?!1:i(t)?r(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var i=e(137);t.exports=r},{137:137}],108:[function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function i(e){return r(e)?Array.isArray(e)?e.slice():s(e):[e]}var s=e(148);t.exports=i},{148:148}],109:[function(e,t,n){"use strict";function r(e){var t=s.createFactory(e),n=i.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){o(!1)},render:function(){return t(this.props)}});return n}var i=e(33),s=e(55),o=e(133);t.exports=r},{133:133,33:33,55:55}],110:[function(e,t,n){function r(e){var t=e.match(l);return t&&t[1].toLowerCase()}function i(e,t){var n=f;a(!!f);var i=r(e),s=i&&u(i);if(s){n.innerHTML=s[1]+e+s[2];for(var l=s[0];l--;)n=n.lastChild}else n.innerHTML=e;var c=n.getElementsByTagName("script");c.length&&(a(t),o(c).forEach(t));for(var h=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return h}var s=e(21),o=e(108),u=e(125),a=e(133),f=s.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;t.exports=i},{108:108,125:125,133:133,21:21}],111:[function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||s.hasOwnProperty(e)&&s[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var i=e(4),s=i.isUnitlessNumber;t.exports=r},{4:4}],112:[function(e,t,n){function r(e){return function(){return e}}function i(){}i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},t.exports=i},{}],113:[function(e,t,n){"use strict";var r={};t.exports=r},{}],114:[function(e,t,n){"use strict";function r(e){return s[e]}function i(e){return(""+e).replace(o,r)}var s={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=i},{}],115:[function(e,t,n){"use strict";function r(e){return null==e?null:u(e)?e:i.has(e)?s.getNodeFromInstance(e):(o(null==e.render||"function"!=typeof e.render),void o(!1))}var i=(e(39),e(65)),s=e(68),o=e(133),u=e(135);e(150),t.exports=r},{133:133,135:135,150:150,39:39,65:65,68:68}],116:[function(e,t,n){"use strict";function r(e,t,n){var r=e,i=!r.hasOwnProperty(n);i&&null!=t&&(r[n]=t)}function i(e){if(null==e)return e;var t={};return s(e,r,t),t}var s=e(149);e(150),t.exports=i},{149:149,150:150}],117:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(t){}}t.exports=r},{}],118:[function(e,t,n){"use strict";var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],119:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],120:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=r},{}],121:[function(e,t,n){"use strict";function r(e){if(e.key){var t=s[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=i(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var i=e(120),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{120:120}],122:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=s[e];return r?!!n[r]:!1}function i(e){return r}var s={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=i},{}],123:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=r},{}],124:[function(e,t,n){"use strict";function r(e){var t=e&&(i&&e[i]||e[s]);return"function"==typeof t?t:void 0}var i="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";t.exports=r},{}],125:[function(e,t,n){function r(e){return s(!!o),h.hasOwnProperty(e)||(e="*"),u.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",u[e]=!o.firstChild),u[e]?h[e]:null}var i=e(21),s=e(133),o=i.canUseDOM?document.createElement("div"):null,u={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},a=[1,'<select multiple="true">',"</select>"],f=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],c=[1,"<svg>","</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:a,option:a,caption:f,colgroup:f,tbody:f,tfoot:f,thead:f,td:l,th:l,circle:c,clipPath:c,defs:c,ellipse:c,g:c,line:c,linearGradient:c,path:c,polygon:c,polyline:c,radialGradient:c,rect:c,stop:c,text:c};t.exports=r},{133:133,21:21}],126:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function i(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function s(e,t){for(var n=r(e),s=0,u=0;n;){if(3===n.nodeType){if(u=s+n.textContent.length,t>=s&&u>=t)return{node:n,offset:t-s};s=u}n=r(i(n))}}t.exports=s},{}],127:[function(e,t,n){"use strict";function r(e){return e?e.nodeType===i?e.documentElement:e.firstChild:null}var i=9;t.exports=r},{}],128:[function(e,t,n){"use strict";function r(){return!s&&i.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var i=e(21),s=null;t.exports=r},{21:21}],129:[function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],130:[function(e,t,n){function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;t.exports=r},{}],131:[function(e,t,n){"use strict";function r(e){return i(e).replace(s,"-ms-")}var i=e(130),s=/^ms-/;t.exports=r},{130:130}],132:[function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function i(e,t){var n;if((null===e||e===!1)&&(e=o.emptyElement),"object"==typeof e){var i=e;n=t===i.type&&"string"==typeof i.type?u.createInternalComponent(i):r(i.type)?new i.type(i):new l}else"string"==typeof e||"number"==typeof e?n=u.createInstanceForText(e):f(!1);return n.construct(e),n._mountIndex=0,n._mountImage=null,n}var s=e(37),o=e(57),u=e(71),a=e(27),f=e(133),l=(e(150),function(){});a(l.prototype,s.Mixin,{_instantiateReactComponent:i}),t.exports=i},{133:133,150:150,27:27,37:37,57:57,71:71}],133:[function(e,t,n){"use strict";var r=function(e,t,n,r,i,s,o,u){if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,i,s,o,u],l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}throw a.framesToPop=1,a}};t.exports=r},{}],134:[function(e,t,n){"use strict";function r(e,t){if(!s.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var u=document.createElement("div");u.setAttribute(n,"return;"),r="function"==typeof u[n]}return!r&&i&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,s=e(21);s.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},{21:21}],135:[function(e,t,n){function r(e){return!!e&&("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){return e&&("INPUT"===e.nodeName&&i[e.type]||"TEXTAREA"===e.nodeName)}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],137:[function(e,t,n){function r(e){return i(e)&&3==e.nodeType}var i=e(135);t.exports=r},{135:135}],138:[function(e,t,n){"use strict";var r=e(133),i=function(e){var t,n={};r(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=i},{133:133}],139:[function(e,t,n){var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var s in e)i.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e){return s(i.isValidElement(e)),e}var i=e(55),s=e(133);t.exports=r},{133:133,55:55}],143:[function(e,t,n){"use strict";function r(e){return'"'+i(e)+'"'}var i=e(114);t.exports=r},{114:114}],144:[function(e,t,n){"use strict";var r=e(21),i=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(o=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var u=document.createElement("div");u.innerHTML=" ",""===u.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),i.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=""+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{21:21}],145:[function(e,t,n){"use strict";var r=e(21),i=e(114),s=e(144),o=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){s(e,i(t))})),t.exports=o},{114:114,144:144,21:21}],146:[function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],147:[function(e,t,n){"use strict";function r(e,t){if(null!=e&&null!=t){var n=typeof e,r=typeof t;if("string"===n||"number"===n)return"string"===r||"number"===r;if("object"===r&&e.type===t.type&&e.key===t.key){var i=e._owner===t._owner;return i}}return!1}e(150),t.exports=r},{150:150}],148:[function(e,t,n){function r(e){var t=e.length;if(i(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),i("number"==typeof t),i(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var r=Array(t),s=0;t>s;s++)r[s]=e[s];return r}var i=e(133);t.exports=r},{133:133}],149:[function(e,t,n){"use strict";function r(e){return m[e]}function i(e,t){return e&&null!=e.key?o(e.key):t.toString(36)}function s(e){return(""+e).replace(g,r)}function o(e){return"$"+s(e)}function u(e,t,n,r,s){var a=typeof e;if(("undefined"===a||"boolean"===a)&&(e=null),null===e||"string"===a||"number"===a||f.isValidElement(e))return r(s,e,""===t?d+i(e,0):t,n),1;var c,m,g,y=0;if(Array.isArray(e))for(var b=0;b<e.length;b++)c=e[b],m=(""!==t?t+v:d)+i(c,b),g=n+y,y+=u(c,m,g,r,s);else{var w=h(e);if(w){var E,S=w.call(e);if(w!==e.entries)for(var x=0;!(E=S.next()).done;)c=E.value,m=(""!==t?t+v:d)+i(c,x++),g=n+y,y+=u(c,m,g,r,s);else for(;!(E=S.next()).done;){var T=E.value;T&&(c=T[1],m=(""!==t?t+v:d)+o(T[0])+v+i(c,0),g=n+y,y+=u(c,m,g,r,s))}}else if("object"===a){p(1!==e.nodeType);var N=l.extract(e);for(var C in N)N.hasOwnProperty(C)&&(c=N[C],m=(""!==t?t+v:d)+o(C)+v+i(c,0),g=n+y,y+=u(c,m,g,r,s))}}return y}function a(e,t,n){return null==e?0:u(e,"",0,t,n)}var f=e(55),l=e(61),c=e(64),h=e(124),p=e(133),d=(e(150),c.SEPARATOR),v=":",m={"=":"=0",".":"=1",":":"=2"},g=/[=.:]/g;t.exports=a},{124:124,133:133,150:150,55:55,61:61,64:64}],150:[function(e,t,n){"use strict";var r=e(112),i=r;t.exports=i},{112:112}]},{},[1])(1)}),define("analysis/WizardStore",["lodash"],function(e){"use strict";var t={},n={},r={get:function(e){return n[e]},clone:function(t){return e.cloneDeep(n[t])},set:function(e,t,r){n[e]=t,r||this.updateSubscribers(e)},registerCallback:function(e,n){t[e]?t[e].push(n):(t[e]=[],t[e].push(n))},updateSubscribers:function(e){var n=t[e];n&&n.forEach(function(e){e()})},debug:function(){console.dir(n)}};return r}),define("analysis/config",[],function(){var e="customAreaOption",t="adminUnitOption",n="commercialEntityOption",r="certifiedAreaOption",i="millPointOption",s="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",o="http://gis-gfw.wri.org/arcgis/rest/services/commodities/MapServer";return{noNameField:"No Group Information Available",wizard:{breadcrumbs:["Select Area","Refine Area","Select Analysis"]},intro:{beginningText:"Create custom analysis of your area of interest  such as a commodity concession or group of concessions -- considering factors such as:",firstList:["Tree cover change","Fire activity","Primary or intact forest areas","Protected areas","Legal classification of land"],secondaryText:"You can also: ",secondList:["Upload your own shapefiles for analysis","Draw an area of interest","Sign up for alerts for clearance activity"]},stepOne:{title:"Step 1: Select Area of interest",description:"Set the area to analyze using one of the following options.",option1:{id:e,label:"Create custom area",description:"Draw a polygon or upload a shapefile to analyze."},option2:{id:t,label:"Administrative unit",description:"Analyze provinces, districts, and other subnational areas."},option3:{id:n,label:"Concession area",description:"Analyze an individual concession or a group of concessions."},option4:{id:r,label:"Certified area",description:"Analyze RSPO certified palm oil concessions."},option5:{id:i,label:"Palm oil mill points",description:"Analyze deforestation-related risks for a mill or set of mills."}},stepTwo:{title:"Step 2: Refine area",customArea:e,adminUnit:t,commArea:n,certArea:r,millPoint:i,currentFeatureText:"Current selection: ",labelField:"WRI_label"},stepThree:{title:"Step 3: Select a variable to analyze",description:'Select which types of analysis you would like to perform and then click "Perform Analysis".  You must select at least one option.',currentFeatureText:"Current selection: ",millPoint:i,customArea:e,pointRadiusDescription:"Choose a buffer for your points:",knownMillsDisclaimer:"(Analysis based on 50km buffer)",pointRadiusOptions:[{label:"50km",value:50},{label:"40km",value:40},{label:"30km",value:30},{label:"20km",value:20},{label:"10km",value:10}],cb1:{label:"Forest Change",value:"forest"},cb2:{label:"Tree cover loss and fires",value:"loss"},cb3:{label:"FORMA clearance alerts",value:"forma"},cb4:{label:"Suitability",value:"suit"},cb5:{label:"Risk Assessment",value:"risk"},checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Forest Carbon Stocks",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - SE Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"},{label:"Tree Cover Loss",value:"treeCoverLoss"},{label:"Indonesia Moratorium",value:"indonesiaMoratorium",noInfoIcon:!0}],suit:{label:"Oil Palm Suitability",value:"suit",description:"Analyze Areas potentially suitable and unsuitable for palm oil development using WRI's methodology."},rspo:{label:"RSPO Land Use Change Analysis",value:"rspo",description:"Analyze tree cover loss according to the RSPO compensation procedure and New Planting Procedure guidelines."},mill:{label:"Mill Point Risk Assessment",value:"mill",description:"Analyze deforestation-related risks for a mill or set of mills."},forestChange:{label:"Forest Change Analysis",description:"Analyze tree cover loss and fire activity according to the selected variable(s)."}},stepFour:{title:"Step 4: Refine Analysis",description:'Select which data sets you would like to include in your analysis and then click "Perform Analysis".  You must select at least one data set.',checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Forest Carbon Stocks",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - Southeast Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"}]},customArea:{instructions:'Select the "Freehand" or "Polygon" options below to draw an area of interest on the map, or choose "Upload" to upload a zipped shapefile of polygons or points or a list of point coordinates to analyze.',instructionsPartTwo:'Select an area from the list below and click "Next" to proceed.',freehandLabel:"Freehand",uploadLabel:"Upload",polyLabel:"Polygon",uploadInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coordinate System (WGS84).","The shapefile must be of POLYGON geometry type.","The shapefile must not exceed 1 Megabyte."],incorrectFileTypeError:"Your shapefile must be of type .zip, please choose another file.",portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate"},adminUnit:{instructions:"Select a country to view it's first or second level administrative units:",instructionsPartTwo:'Select a province or district from the list below and click "Next" to proceed.',countriesQuery:{url:s+"/7",where:"NAME_0 IS NOT NULL",outFields:["NAME_0"],orderBy:["NAME_0"],groupBy:["NAME_0"],statistic:{statisticType:"count",onStatisticField:"OBJECTID",outStatisticFieldName:"OBJECTID"},labelValueField:"NAME_0"},lowLevelUnitsQuery:{url:s+"/7",whereField:"NAME_0",requiredField:"NAME_1",outFields:["NAME_0","NAME_1","NAME_2","OBJECTID"],orderBy:["NAME_1","NAME_2"],labelField:"NAME_2",valueField:"OBJECTID"},countryBoundaries:{url:s+"/6",whereField:"NAME_0",requiredField:"NAME_1"}},commercialEntity:{instructions:"Select a commodity type:",instructionsPartTwo:'Select a concession or group from the list below and click "Next" to proceed.',commodityOptions:[{label:"None",value:"NONE"},{label:"Logging concession",value:"Logging concession"},{label:"Mining concession",value:"Mining concession"},{label:"Oil palm concession",value:"Oil palm concession"},{label:"Wood fiber plantation",value:"Wood fiber plantation"}],commodityQuery:{url:s+"/13",whereField:"TYPE",outFields:["GROUP_NAME","Name","TYPE","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:s+"/27",requiredField:"GROUP_NAME"}},certifiedArea:{instructions:"Select a commodity type:",instructionsPartTwo:"Select a Certification Scheme:",instructionsPartThree:'Select a concession or group from the list below and click "Next" to proceed',commodityOptions:[{label:"Oil palm concession",value:"Oil palm concession"}],certificationOptions:[{label:"None",value:"NONE"},{label:"RSPO",value:"RSPO"}],schemeQuery:{url:s+"/13",whereField:"CERT_SCHEME",secondaryWhereField:"TYPE",outFields:["GROUP_NAME","Name","CERT_SCHEME","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:s+"/28",requiredField:"GROUP_NAME"}},millPoints:{instructions:"Select a method for choosing or creating mill points to analyze.",selectInstructions:"Select a commodity type:",listInstructions:'Select mill(s) from the list below and click "Next" to proceed.',selectFromListButton:"Select from List",selectFromCustomListButton:"Select from my features",enterCoordinatesButton:"Enter Coordinates",uploadButton:"Upload",commodityOptions:[{label:"Oil palm",value:"Oil palm concession"}],url:o+"/27",api:"http://wip.risk-api.appspot.com/",outFields:["group_name","mill_name_","wri_id"],orderBy:["group_name","mill_name_"],labelField:"mill_name_",valueField:"wri_id",requiredField:"group_name"},STORE_KEYS:{customFeatures:"customFeatures",removedCustomFeatures:"removedCustomFeatures",selectedCustomFeatures:"selectedCustomFeatures",selectedPresetFeature:"selectedPresetFeature",userStep:"userStep",areaOfInterest:"areaOfInterest",analysisSets:"analysisSets",analysisPointRadius:"analysisPointRadius",alertsDialogActive:"alertsDialogActive"}}}),define("components/alertsForm/config",["analysis/config"],function(e){return{stepTwo:{labelField:e.stepTwo.labelField},customArea:{instructions:e.customArea.instructions,freehandLabel:e.customArea.freehandLabel,polyLabel:e.customArea.polyLabel,uploadLabel:e.customArea.uploadLabel},STORE_KEYS:e.STORE_KEYS,MODAL_ID:"subscription-modal",TEXT:{title:"Alerts Subscription",selection:"Current selection:",noSelection:"none",modalTitle:"Subscribe to Alerts",subscribe:"Subscribe"}}}),define("components/featureList/config",["analysis/config"],function(e){return{stepTwo:{labelField:e.stepTwo.labelField},STORE_KEYS:e.STORE_KEYS,TEXT:{instruction:"Select areas of interest using the left checkboxes.",noAreas:"No current areas of interest, please draw or upload some.",clear:"Clear Selection",headers:["Type","Area Name","RSPO"]}}}),define("components/featureList/FeatureList",["react","lodash","components/featureList/config","analysis/WizardStore","utils/GeoHelper","map/config"],function(e,t,n,r,i,s){var o,u,a=n.TEXT,f=n.STORE_KEYS,l=this;return e.createClass({propTypes:{features:e.PropTypes.array.isRequired,selectedFeatures:e.PropTypes.array.isRequired,rspoChecks:e.PropTypes.bool,showClear:e.PropTypes.bool},render:function(){var n=!1,r,i,s,o,u="";return this.props.selectedFeatures&&(r=this.props.features.map(this._featuresIdMapper),i=this.props.selectedFeatures.map(function(e){return e.attributes.WRI_ID}),n=r.length>0&&t.difference(r,i).length===0),this.props.rspoChecks&&(s=this.props.features.length>0?t.every(this.props.features,function(e){return e.attributes.isRSPO===!0}):!1,u=e.createElement("th",null,e.createElement("label",null,e.createElement("input",{type:"checkbox",onChange:this._toggleAllFeaturesRSPO,checked:s,disabled:this.props.features.length===0}),a.headers[2]))),this.props.selectedFeatures.length===0||this.props.showClear!==undefined&&this.props.showClear===!1?o="":o=e.createElement("button",{className:"button-link float-right margin__right no-padding__right",onClick:this._removeFeatureSelection},a.clear),e.createElement("div",{className:"feature-list"},o,e.createElement("div",{className:"padding__wide margin__bottom instructions"},a.instruction),e.createElement("table",{className:"feature-list__table no-border-spacing fill__wide border-box border-orange"},e.createElement("thead",null,e.createElement("tr",{className:"text-white text-center back-orange"},e.createElement("th",null,e.createElement("input",{type:"checkbox",onChange:this._toggleAllFeaturesSelection,checked:n,disabled:this.props.features.length===0})),e.createElement("th",null,a.headers[0]),e.createElement("th",null,a.headers[1]),u)),e.createElement("tbody",null,this._noFeatures(),this.props.features.map(this._featuresMapper,this))))},_featuresMapper:function(r,i){var s=t.find(this.props.selectedFeatures,function(e){return r.attributes.WRI_ID===e.attributes.WRI_ID})||!1,o=i%2===0?"back-light-gray":"",o=s?"text-white back-medium-gray":o,u=this.props.rspoChecks?e.createElement("td",{className:"text-center"},e.createElement("input",{type:"checkbox",onChange:this._toggleFeatureRSPO,checked:r.attributes.isRSPO,"data-feature-id":r.attributes.WRI_ID})):"",a="app/css/images/icon_"+(r.geometry.type==="polygon"?"polygon_":"circle_")+(s?"white":"gray")+".png";return e.createElement("tr",{key:i,className:o},e.createElement("td",{className:"text-center"},e.createElement("input",{type:"checkbox",onChange:this._toggleFeatureSelection,checked:s,"data-feature-index":i,"data-feature-id":r.attributes.WRI_ID})),e.createElement("td",{className:"text-center"},e.createElement("img",{className:"vertical-middle",width:"15px",height:"15px",src:a})),e.createElement("td",null,e.createElement("input",{className:"custom-feature-label text-inherit-color vertical-middle feedback-outline-orange",type:"text",onChange:this._renameFeature,value:r.attributes[n.stepTwo.labelField],"data-feature-index":i,"data-feature-id":r.attributes.WRI_ID})),u)},_noFeatures:function(){var t=this.props.rspoChecks?"4":"3";return this.props.features.length>0?e.createElement("tr",{className:"text-center"}):e.createElement("tr",null,e.createElement("td",{className:"text-center text-medium-gray",colSpan:t},e.createElement("i",null,a.noAreas)))},_toggleFeatureSelection:function(e){var n,i,s;e.target.checked?(n=parseInt(e.target.dataset?e.target.dataset.featureIndex:e.target.getAttribute("data-feature-index")),s=this.props.selectedFeatures.concat(this.props.features[n])):(i=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),s=t.filter(this.props.selectedFeatures,function(e){return e.attributes.WRI_ID!==i})),this.addHighlightFeatures(s),r.set(f.selectedCustomFeatures,s)},_toggleAllFeaturesSelection:function(e){var n=this.props.features,i=n.map(this._featuresIdMapper),s,o,u;e.target.checked?(s=this.props.selectedFeatures.map(this._featuresIdMapper),o=t.difference(i,s).map(function(e){return t.find(n,function(t){return t.attributes.WRI_ID===e})}),u=r.get(f.selectedCustomFeatures).concat(o)):u=r.get(f.selectedCustomFeatures).filter(function(e){return i.indexOf(e.attributes.WRI_ID)<0}),this.addHighlightFeatures(u),r.set(f.selectedCustomFeatures,u)},addHighlightFeatures:function(e){var t=app.map.getLayer(s.wizardGraphicsLayer.id);t&&(t.clear(),e.forEach(function(e){e=i.applySelectionSymbolToFeature(e),t.add(e)}))},_toggleAllFeaturesRSPO:function(){if(this.props.features.length===0)return;var e,n=r.get(f.customFeatures),i=this.props.features.map(this._featuresIdMapper),s=t.every(this.props.features,function(e){return e.attributes.isRSPO===!0}),o=!s;i.forEach(function(r){e=t.find(n,function(e){return e.attributes.WRI_ID===r}),e&&(e.attributes.isRSPO=o)}),r.set(f.customFeatures,n)},_toggleFeatureRSPO:function(e){var n=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),i=r.get(f.customFeatures),s=t.find(i,function(e){return e.attributes.WRI_ID===n});if(!s)throw new Error("Could not find feature to update rspo based on id");s.attributes.isRSPO=!s.attributes.isRSPO,r.set(f.customFeatures,i)},_removeFeatureSelection:function(){var e=this.props.selectedFeatures.map(this._featuresIdMapper),n=function(t){return e.indexOf(t.attributes.WRI_ID)<0},i=t.filter(r.get(f.customFeatures),n),o=t.filter(r.get(f.selectedCustomFeatures),n),u=t.reject(r.get(f.selectedCustomFeatures),n),a;r.set(f.removedCustomFeatures,u),r.set(f.customFeatures,i),r.set(f.selectedCustomFeatures,o),a=app.map.getLayer(s.wizardGraphicsLayer.id),a&&a.clear()},_renameFeature:function(e){var t=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),i=r.get(f.customFeatures),s=i.filter(function(e){return e.attributes.WRI_ID===t});if(!s)throw new Error("Undefined: Could not identify feature to rename.");i.some(function(r,s){var o=r.attributes.WRI_ID===t;return o&&(i[s].attributes[n.stepTwo.labelField]=e.target.value),o}),r.set(f.customFeatures,i),e.target.parentNode.className.split(" ").indexOf("active")>-1&&r.set(f.selectedCustomFeatures,feature)},_featuresIdMapper:function(e){return e.attributes.WRI_ID}})}),function(){(function(p){var A=this||(0,eval)("this"),w=A.document,K=A.navigator,t=A.jQuery,C=A.JSON;(function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):"function"==typeof define&&define.amd?define("knockout",["exports"],e):e(A.ko={})})(function(e){function n(e,t){return null===e||typeof e in u?e===t:!1}function r(e,t){var n;return function(){n||(n=setTimeout(function(){n=p,e()},t))}}function i(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function s(e,t,n,r){o.d[e]={init:function(e,i,s,u,a){var f,l;return o.ba(function(){var s=o.a.c(i()),u=!n!=!s,c=!l;if(c||t||u!==f)c&&o.ca.fa()&&(l=o.a.lb(o.e.childNodes(e),!0)),u?(c||o.e.U(e,o.a.lb(l)),o.gb(r?r(a,s):a,e)):o.e.da(e),f=u},null,{G:e}),{controlsDescendantBindings:!0}}},o.g.aa[e]=!1,o.e.Q[e]=!0}var o="undefined"!=typeof e?e:{};o.b=function(e,t){for(var n=e.split("."),r=o,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},o.s=function(e,t,n){e[t]=n},o.version="3.1.0",o.b("version",o.version),o.a=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(e,t){return e.__proto__=t,e}var i={__proto__:[]}instanceof Array,s={},u={};s[K&&/Firefox\/2/i.test(K.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],s.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(s,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)u[t[n]]=e});var a={propertychange:!0},f=w&&function(){for(var e=3,t=w.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return 4<e?e:p}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},l:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hb:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r))return e[r];return null},ma:function(e,t){var n=o.a.l(e,t);0<n?e.splice(n,1):0===n&&e.shift()},ib:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)0>o.a.l(t,e[n])&&t.push(e[n]);return t},ya:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r],r));return n},la:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},$:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},Y:function(e,t,n){var r=o.a.l(o.a.Sa(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},na:i,extend:n,ra:r,sa:i?r:n,A:e,Oa:function(e,t){if(!e)return e;var n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},Fa:function(e){for(;e.firstChild;)o.removeNode(e.firstChild)},ec:function(e){e=o.a.R(e);for(var t=w.createElement("div"),n=0,r=e.length;n<r;n++)t.appendChild(o.M(e[n]));return t},lb:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var s=e[n].cloneNode(!0);i.push(t?o.M(s):s)}return i},U:function(e,t){o.a.Fa(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Bb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,s=0,u=t.length;s<u;s++)i.insertBefore(t[s],r);s=0;for(u=n.length;s<u;s++)o.removeNode(n[s])}},ea:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)if(e.push(n),n=n.nextSibling,!n)return;e.push(r)}}return e},Db:function(e,t){7>f?e.setAttribute("selected",t):e.selected=t},ta:function(e){return null===e||e===p?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(e,t){for(var n=[],r=(e||"").split(t),i=0,s=r.length;i<s;i++){var u=o.a.ta(r[i]);""!==u&&n.push(u)}return n},kc:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},Sb:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(e)&16);for(;e&&e!=t;)e=e.parentNode;return!!e},Ea:function(e){return o.a.Sb(e,e.ownerDocument.documentElement)},eb:function(e){return!!o.a.hb(e,o.a.Ea)},B:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},q:function(e,n,r){var i=f&&a[n];if(!i&&t)t(e).bind(n,r);else if(i||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var s=function(t){r.call(e,t)},u="on"+n;e.attachEvent(u,s),o.a.u.ja(e,function(){e.detachEvent(u,s)})}else e.addEventListener(n,r,!1)},ha:function(e,n){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;"input"===o.a.B(e)&&e.type&&"click"==n.toLowerCase()?(r=e.type,r="checkbox"==r||"radio"==r):r=!1;if(t&&!r)t(e).trigger(n);else if("function"==typeof w.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");r=w.createEvent(u[n]||"HTMLEvents"),r.initEvent(n,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+n)}},c:function(e){return o.v(e)?e():e},Sa:function(e){return o.v(e)?e.o():e},ua:function(e,t,n){if(t){var r=/\S+/g,i=e.className.match(r)||[];o.a.r(t.match(r),function(e){o.a.Y(i,e,n)}),e.className=i.join(" ")}},Xa:function(e,t){var n=o.a.c(t);if(null===n||n===p)n="";var r=o.e.firstChild(e);!r||3!=r.nodeType||o.e.nextSibling(r)?o.e.U(e,[e.ownerDocument.createTextNode(n)]):r.data=n,o.a.Vb(e)},Cb:function(e,t){e.name=t;if(7>=f)try{e.mergeAttributes(w.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},Vb:function(e){9<=f&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Tb:function(e){if(f){var t=e.style.width;e.style.width=0,e.style.width=t}},ic:function(e,t){e=o.a.c(e),t=o.a.c(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},R:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},mc:6===f,nc:7===f,oa:f,ob:function(e,t){for(var n=o.a.R(e.getElementsByTagName("input")).concat(o.a.R(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],s=n.length-1;0<=s;s--)r(n[s])&&i.push(n[s]);return i},fc:function(e){return"string"==typeof e&&(e=o.a.ta(e))?C&&C.parse?C.parse(e):(new Function("return "+e))():null},Ya:function(e,t,n){if(!C||!C.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return C.stringify(o.a.c(e),t,n)},gc:function(t,n,r){r=r||{};var i=r.params||{},s=r.includeFields||this.mb,u=t;if("object"==typeof t&&"form"===o.a.B(t))for(var u=t.action,a=s.length-1;0<=a;a--)for(var f=o.a.ob(t,s[a]),l=f.length-1;0<=l;l--)i[f[l].name]=f[l].value;n=o.a.c(n);var c=w.createElement("form");c.style.display="none",c.action=u,c.method="post";for(var h in n)t=w.createElement("input"),t.name=h,t.value=o.a.Ya(o.a.c(n[h])),c.appendChild(t);e(i,function(e,t){var n=w.createElement("input");n.name=e,n.value=t,c.appendChild(n)}),w.body.appendChild(c),r.submitter?r.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),o.b("utils",o.a),o.b("utils.arrayForEach",o.a.r),o.b("utils.arrayFirst",o.a.hb),o.b("utils.arrayFilter",o.a.la),o.b("utils.arrayGetDistinctValues",o.a.ib),o.b("utils.arrayIndexOf",o.a.l),o.b("utils.arrayMap",o.a.ya),o.b("utils.arrayPushAll",o.a.$),o.b("utils.arrayRemoveItem",o.a.ma),o.b("utils.extend",o.a.extend),o.b("utils.fieldsIncludedWithJsonPost",o.a.mb),o.b("utils.getFormFields",o.a.ob),o.b("utils.peekObservable",o.a.Sa),o.b("utils.postJson",o.a.gc),o.b("utils.parseJson",o.a.fc),o.b("utils.registerEventHandler",o.a.q),o.b("utils.stringifyJson",o.a.Ya),o.b("utils.range",o.a.ic),o.b("utils.toggleDomNodeCssClass",o.a.ua),o.b("utils.triggerEvent",o.a.ha),o.b("utils.unwrapObservable",o.a.c),o.b("utils.objectForEach",o.a.A),o.b("utils.addOrRemoveItem",o.a.Y),o.b("unwrap",o.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),o.a.f=new function(){function e(e,i){var s=e[n];if(!s||"null"===s||!r[s]){if(!i)return p;s=e[n]="ko"+t++,r[s]={}}return r[s]}var t=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(t,n){var r=e(t,!1);return r===p?p:r[n]},set:function(t,n,r){if(r!==p||e(t,!1)!==p)e(t,!0)[n]=r},clear:function(e){var t=e[n];return t?(delete r[t],e[n]=null,!0):!1},L:function(){return t++ +n}}},o.b("utils.domData",o.a.f),o.b("utils.domData.clear",o.a.f.clear),o.a.u=new function(){function e(e,t){var n=o.a.f.get(e,r);return n===p&&t&&(n=[],o.a.f.set(e,r,n)),n}function n(t){var r=e(t,!1);if(r)for(var r=r.slice(0),i=0;i<r.length;i++)r[i](t);o.a.f.clear(t),o.a.u.cleanExternalData(t);if(s[t.nodeType])for(r=t.firstChild;t=r;)r=t.nextSibling,8===t.nodeType&&n(t)}var r=o.a.f.L(),i={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{ja:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},Ab:function(t,n){var i=e(t,!1);i&&(o.a.ma(i,n),0==i.length&&o.a.f.set(t,r,p))},M:function(e){if(i[e.nodeType]&&(n(e),s[e.nodeType])){var t=[];o.a.$(t,e.getElementsByTagName("*"));for(var r=0,u=t.length;r<u;r++)n(t[r])}return e},removeNode:function(e){o.M(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){t&&"function"==typeof t.cleanData&&t.cleanData([e])}}},o.M=o.a.u.M,o.removeNode=o.a.u.removeNode,o.b("cleanNode",o.M),o.b("removeNode",o.removeNode),o.b("utils.domNodeDisposal",o.a.u),o.b("utils.domNodeDisposal.addDisposeCallback",o.a.u.ja),o.b("utils.domNodeDisposal.removeDisposeCallback",o.a.u.Ab),function(){o.a.Qa=function(e){var n;if(t){if(t.parseHTML)n=t.parseHTML(e)||[];else if((n=t.clean([e]))&&n[0]){for(e=n[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var r=o.a.ta(e).toLowerCase();n=w.createElement("div"),r=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+r[1]+e+r[2]+"</div>";for("function"==typeof A.innerShiv?n.appendChild(A.innerShiv(e)):n.innerHTML=e;r[0]--;)n=n.lastChild;n=o.a.R(n.lastChild.childNodes)}return n},o.a.Va=function(e,n){o.a.Fa(e),n=o.a.c(n);if(null!==n&&n!==p)if("string"!=typeof n&&(n=n.toString()),t)t(e).html(n);else for(var r=o.a.Qa(n),i=0;i<r.length;i++)e.appendChild(r[i])}}(),o.b("utils.parseHtmlFragment",o.a.Qa),o.b("utils.setHtml",o.a.Va),o.w=function(){function e(t,n){if(t)if(8==t.nodeType){var r=o.w.xb(t.nodeValue);null!=r&&n.push({Rb:t,cc:r})}else if(1==t.nodeType)for(var r=0,i=t.childNodes,s=i.length;r<s;r++)e(i[r],n)}var t={};return{Na:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[n]=e,"<!--[ko_memo:"+n+"]-->"},Hb:function(e,n){var r=t[e];if(r===p)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete t[e]}},Ib:function(t,n){var r=[];e(t,r);for(var i=0,s=r.length;i<s;i++){var u=r[i].Rb,a=[u];n&&o.a.$(a,n),o.w.Hb(r[i].cc,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},xb:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),o.b("memoization",o.w),o.b("memoization.memoize",o.w.Na),o.b("memoization.unmemoize",o.w.Hb),o.b("memoization.parseMemoText",o.w.xb),o.b("memoization.unmemoizeDomNodeAndDescendants",o.w.Ib),o.Ga={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return o.h({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,s,o;"number"==typeof t?n=t:(n=t.timeout,s=t.method),o="notifyWhenChangesStop"==s?i:r,e.Ma(function(e){return o(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:n}};var u={"undefined":1,"boolean":1,number:1,string:1};o.b("extenders",o.Ga),o.Fb=function(e,t,n){this.target=e,this.za=t,this.Qb=n,this.sb=!1,o.s(this,"dispose",this.F)},o.Fb.prototype.F=function(){this.sb=!0,this.Qb()},o.N=function(){o.a.sa(this,o.N.fn),this.H={}};var a="change";e={V:function(e,t,n){var r=this;n=n||a;var i=new o.Fb(r,t?e.bind(t):e,function(){o.a.ma(r.H[n],i)});return r.o&&r.o(),r.H[n]||(r.H[n]=[]),r.H[n].push(i),i},notifySubscribers:function(e,t){t=t||a;if(this.qb(t))try{o.k.jb();for(var n=this.H[t].slice(0),r=0,i;i=n[r];++r)i.sb||i.za(e)}finally{o.k.end()}},Ma:function(e){var t=this,n=o.v(t),r,i,s;t.ia||(t.ia=t.notifySubscribers,t.notifySubscribers=function(e,n){n&&n!==a?"beforeChange"===n?t.bb(e):t.ia(e,n):t.cb(e)});var u=e(function(){n&&s===t&&(s=t()),r=!1,t.Ka(i,s)&&t.ia(i=s)});t.cb=function(e){r=!0,s=e,u()},t.bb=function(e){r||(i=e,t.ia(e,"beforeChange"))}},qb:function(e){return this.H[e]&&this.H[e].length},Wb:function(){var e=0;return o.a.A(this.H,function(t,n){e+=n.length}),e},Ka:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&o.a.A(e,function(e,n){var r=o.Ga[e];"function"==typeof r&&(t=r(t,n)||t)}),t}},o.s(e,"subscribe",e.V),o.s(e,"extend",e.extend),o.s(e,"getSubscriptionsCount",e.Wb),o.a.na&&o.a.ra(e,Function.prototype),o.N.fn=e,o.tb=function(e){return null!=e&&"function"==typeof e.V&&"function"==typeof e.notifySubscribers},o.b("subscribable",o.N),o.b("isSubscribable",o.tb),o.ca=o.k=function(){function e(e){n.push(r),r=e}function t(){r=n.pop()}var n=[],r,i=0;return{jb:e,end:t,zb:function(e){if(r){if(!o.tb(e))throw Error("Only subscribable things can act as dependencies");r.za(e,e.Kb||(e.Kb=++i))}},t:function(n,r,i){try{return e(),n.apply(r,i||[])}finally{t()}},fa:function(){if(r)return r.ba.fa()},pa:function(){if(r)return r.pa}}}(),o.b("computedContext",o.ca),o.b("computedContext.getDependenciesCount",o.ca.fa),o.b("computedContext.isInitial",o.ca.pa),o.m=function(e){function t(){return 0<arguments.length?(t.Ka(n,arguments[0])&&(t.P(),n=arguments[0],t.O()),this):(o.k.zb(t),n)}var n=e;return o.N.call(t),o.a.sa(t,o.m.fn),t.o=function(){return n},t.O=function(){t.notifySubscribers(n)},t.P=function(){t.notifySubscribers(n,"beforeChange")},o.s(t,"peek",t.o),o.s(t,"valueHasMutated",t.O),o.s(t,"valueWillMutate",t.P),t},o.m.fn={equalityComparer:n};var f=o.m.hc="__ko_proto__";o.m.fn[f]=o.m,o.a.na&&o.a.ra(o.m.fn,o.N.fn),o.Ha=function(e,t){return null===e||e===p||e[f]===p?!1:e[f]===t?!0:o.Ha(e[f],t)},o.v=function(e){return o.Ha(e,o.m)},o.ub=function(e){return"function"==typeof e&&e[f]===o.m||"function"==typeof e&&e[f]===o.h&&e.Yb?!0:!1},o.b("observable",o.m),o.b("isObservable",o.v),o.b("isWriteableObservable",o.ub),o.T=function(e){e=e||[];if("object"==typeof e&&"length"in e)return e=o.m(e),o.a.sa(e,o.T.fn),e.extend({trackArrayChanges:!0});throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},o.T.fn={remove:function(e){for(var t=this.o(),n=[],r="function"!=typeof e||o.v(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.P(),n.push(s),t.splice(i,1),i--)}return n.length&&this.O(),n},removeAll:function(e){if(e===p){var t=this.o(),n=t.slice(0);return this.P(),t.splice(0,t.length),this.O(),n}return e?this.remove(function(t){return 0<=o.a.l(e,t)}):[]},destroy:function(e){var t=this.o(),n="function"!=typeof e||o.v(e)?function(t){return t===e}:e;this.P();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.O()},destroyAll:function(e){return e===p?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=o.a.l(e,t)}):[]},indexOf:function(e){var t=this();return o.a.l(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.P(),this.o()[n]=t,this.O())}},o.a.r("pop push reverse shift sort splice unshift".split(" "),function(e){o.T.fn[e]=function(){var t=this.o();return this.P(),this.kb(t,e,arguments),t=t[e].apply(t,arguments),this.O(),t}}),o.a.r(["slice"],function(e){o.T.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),o.a.na&&o.a.ra(o.T.fn,o.m.fn),o.b("observableArray",o.T);var l="arrayChange";o.Ga.trackArrayChanges=function(e){function t(){if(!n){n=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==a||++i,t.apply(this,arguments)};var s=[].concat(e.o()||[]);r=null,e.V(function(t){t=[].concat(t||[]);if(e.qb(l)){var n;if(!r||1<i)r=o.a.Aa(s,t,{sparse:!0});n=r,n.length&&e.notifySubscribers(n,l)}s=t,r=null,i=0})}}if(!e.kb){var n=!1,r=null,i=0,s=e.V;e.V=e.subscribe=function(e,n,r){return r===l&&t(),s.apply(this,arguments)},e.kb=function(e,t,s){function u(e,t,n){return a[a.length]={status:e,value:t,index:n}}if(n&&!i){var a=[],f=e.length,l=s.length,c=0;switch(t){case"push":c=f;case"unshift":for(t=0;t<l;t++)u("added",s[t],c+t);break;case"pop":c=f-1;case"shift":f&&u("deleted",e[c],c);break;case"splice":t=Math.min(Math.max(0,0>s[0]?f+s[0]:s[0]),f);for(var f=1===l?f:Math.min(t+(s[1]||0),f),l=t+l-2,c=Math.max(f,l),h=[],p=[],v=2;t<c;++t,++v)t<f&&p.push(u("deleted",e[t],t)),t<l&&h.push(u("added",s[v],t));o.a.nb(p,h);break;default:return}r=a}}}},o.ba=o.h=function(e,t,n){function r(){p=!0,o.a.A(w,function(e,t){t.F()}),w={},E=0,l=!1}function i(){var e=u.throttleEvaluation;e&&0<=e?(clearTimeout(S),S=setTimeout(s,e)):u.wa?u.wa():s()}function s(){if(!c&&!p){if(y&&y()){if(!h){b();return}}else h=!1;c=!0;try{var e=w,n=E;o.k.jb({za:function(t,r){p||(n&&e[r]?(w[r]=e[r],++E,delete e[r],--n):w[r]||(w[r]=t.V(i),++E))},ba:u,pa:!E}),w={},E=0;try{var r=t?d.call(t):d()}finally{o.k.end(),n&&o.a.A(e,function(e,t){t.F()}),l=!1}u.Ka(f,r)&&(u.notifySubscribers(f,"beforeChange"),f=r,u.wa&&!u.throttleEvaluation||u.notifySubscribers(f))}finally{c=!1}E||b()}}function u(){if(0<arguments.length){if("function"!=typeof v)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return v.apply(t,arguments),this}return l&&s(),o.k.zb(u),f}function a(){return l||0<E}var f,l=!0,c=!1,h=!1,p=!1,d=e;d&&"object"==typeof d?(n=d,d=n.read):(n=n||{},d||(d=n.read));if("function"!=typeof d)throw Error("Pass a function that returns the value of the ko.computed");var v=n.write,m=n.disposeWhenNodeIsRemoved||n.G||null,g=n.disposeWhen||n.Da,y=g,b=r,w={},E=0,S=null;t||(t=n.owner),o.N.call(u),o.a.sa(u,o.h.fn),u.o=function(){return l&&!E&&s(),f},u.fa=function(){return E},u.Yb="function"==typeof n.write,u.F=function(){b()},u.ga=a;var x=u.Ma;return u.Ma=function(e){x.call(u,e),u.wa=function(){u.bb(f),l=!0,u.cb(u)}},o.s(u,"peek",u.o),o.s(u,"dispose",u.F),o.s(u,"isActive",u.ga),o.s(u,"getDependenciesCount",u.fa),m&&(h=!0,m.nodeType&&(y=function(){return!o.a.Ea(m)||g&&g()})),!0!==n.deferEvaluation&&s(),m&&a()&&m.nodeType&&(b=function(){o.a.u.Ab(m,b),r()},o.a.u.ja(m,b)),u},o.$b=function(e){return o.Ha(e,o.h)},e=o.m.hc,o.h[e]=o.m,o.h.fn={equalityComparer:n},o.h.fn[e]=o.h,o.a.na&&o.a.ra(o.h.fn,o.N.fn),o.b("dependentObservable",o.h),o.b("computed",o.h),o.b("isComputed",o.$b),function(){function e(r,i,s){s=s||new n,r=i(r);if("object"!=typeof r||null===r||r===p||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var o=r instanceof Array?[]:{};return s.save(r,o),t(r,function(t){var n=i(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":o[t]=n;break;case"object":case"undefined":var u=s.get(n);o[t]=u!==p?u:e(n,i,s)}}),o}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function n(){this.keys=[],this.ab=[]}o.Gb=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;o.v(e)&&10>t;t++)e=e();return e})},o.toJSON=function(e,t,n){return e=o.Gb(e),o.a.Ya(e,t,n)},n.prototype={save:function(e,t){var n=o.a.l(this.keys,e);0<=n?this.ab[n]=t:(this.keys.push(e),this.ab.push(t))},get:function(e){return e=o.a.l(this.keys,e),0<=e?this.ab[e]:p}}}(),o.b("toJS",o.Gb),o.b("toJSON",o.toJSON),function(){o.i={p:function(e){switch(o.a.B(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?o.a.f.get(e,o.d.options.Pa):7>=o.a.oa?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?o.i.p(e.options[e.selectedIndex]):p;default:return e.value}},X:function(e,t,n){switch(o.a.B(e)){case"option":switch(typeof t){case"string":o.a.f.set(e,o.d.options.Pa,p),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:o.a.f.set(e,o.d.options.Pa,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":if(""===t||null===t)t=p;for(var r=-1,i=0,s=e.options.length,u;i<s;++i)if(u=o.i.p(e.options[i]),u==t||""==u&&t===p){r=i;break}if(n||0<=r||t===p&&1<e.size)e.selectedIndex=r;break;default:if(null===t||t===p)t="";e.value=t}}}}(),o.b("selectExtensions",o.i),o.b("selectExtensions.readValue",o.i.p),o.b("selectExtensions.writeValue",o.i.X),o.g=function(){function e(e){e=o.a.ta(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t=[],n=e.match(r),u,a,f=0;if(n){n.push(",");for(var l=0,c;c=n[l];++l){var h=c.charCodeAt(0);if(44===h){if(0>=f){u&&t.push(a?{key:u,value:a.join("")}:{unknown:u}),u=a=f=0;continue}}else if(58===h){if(!a)continue}else if(47===h&&l&&1<c.length)(h=n[l-1].match(i))&&!s[h[0]]&&(e=e.substr(e.indexOf(c)+1),n=e.match(r),n.push(","),l=-1,c="/");else if(40===h||123===h||91===h)++f;else if(41===h||125===h||93===h)--f;else if(!u&&!a){u=34===h||39===h?c.slice(1,-1):c;continue}a?a.push(c):a=[c]}}return t}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,s={"in":1,"return":1,"typeof":1},u={};return{aa:[],W:u,Ra:e,qa:function(r,i){function s(e,r){var i,c=o.getBindingHandler(e);if(c&&c.preprocess?r=c.preprocess(r,e,s):1){if(c=u[e])i=r,0<=o.a.l(t,i)?i=!1:(c=i.match(n),i=null===c?!1:c[1]?"Object("+c[1]+")"+c[2]:i),c=i;c&&f.push("'"+e+"':function(_z){"+i+"=_z}"),l&&(r="function(){return "+r+" }"),a.push("'"+e+"':"+r)}}i=i||{};var a=[],f=[],l=i.valueAccessors,c="string"==typeof r?e(r):r;return o.a.r(c,function(e){s(e.key||e.unknown,e.value)}),f.length&&s("_ko_property_writers","{"+f.join(",")+" }"),a.join(",")},bc:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},va:function(e,t,n,r,i){e&&o.v(e)?!o.ub(e)||i&&e.o()===r||e(r):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](r)}}}(),o.b("expressionRewriting",o.g),o.b("expressionRewriting.bindingRewriteValidators",o.g.aa),o.b("expressionRewriting.parseObjectLiteral",o.g.Ra),o.b("expressionRewriting.preProcessBindings",o.g.qa),o.b("expressionRewriting._twoWayBindings",o.g.W),o.b("jsonExpressionRewriting",o.g),o.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.g.qa),function(){function e(e){return 8==e.nodeType&&s.test(i?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&u.test(i?e.text:e.nodeValue)}function n(n,r){for(var i=n,s=1,o=[];i=i.nextSibling;){if(t(i)&&(s--,0===s))return o;o.push(i),e(i)&&s++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var r=n(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:null}var i=w&&"<!--test-->"===w.createComment("test").text,s=i?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,u=i?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,a={ul:!0,ol:!0};o.e={Q:{},childNodes:function(t){return e(t)?n(t):t.childNodes},da:function(t){if(e(t)){t=o.e.childNodes(t);for(var n=0,r=t.length;n<r;n++)o.removeNode(t[n])}else o.a.Fa(t)},U:function(t,n){if(e(t)){o.e.da(t);for(var r=t.nextSibling,i=0,s=n.length;i<s;i++)r.parentNode.insertBefore(n[i],r)}else o.a.U(t,n)},yb:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},rb:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):o.e.yb(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},Xb:e,lc:function(e){return(e=(i?e.text:e.nodeValue).match(s))?e[1]:null},wb:function(n){if(a[o.a.B(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var s;s=i.firstChild;var u=null;if(s)do if(u)u.push(s);else if(e(s)){var f=r(s,!0);f?s=f:u=[s]}else t(s)&&(u=[s]);while(s=s.nextSibling);if(s=u)for(u=i.nextSibling,f=0;f<s.length;f++)u?n.insertBefore(s[f],u):n.appendChild(s[f])}while(i=i.nextSibling)}}}}(),o.b("virtualElements",o.e),o.b("virtualElements.allowedBindings",o.e.Q),o.b("virtualElements.emptyNode",o.e.da),o.b("virtualElements.insertAfter",o.e.rb),o.b("virtualElements.prepend",o.e.yb),o.b("virtualElements.setDomNodeChildren",o.e.U),function(){o.J=function(){this.Nb={}},o.a.extend(o.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind");case 8:return o.e.Xb(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return o.e.lc(e);default:return null}},parseBindingsString:function(e,t,n,r){try{var i=this.Nb,s=e+(r&&r.valueAccessors||""),u;if(!(u=i[s])){var a,f="with($context){with($data||{}){return{"+o.g.qa(e,r)+"}}}";a=new Function("$context","$element",f),u=i[s]=a}return u(t,n)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+l.message,l}}}),o.J.instance=new o.J}(),o.b("bindingProvider",o.J),function(){function e(e){return function(){return e}}function n(e){return e()}function r(e){return o.a.Oa(o.k.t(e),function(t,n){return function(){return e()[n]}})}function i(e,t){return r(this.getBindings.bind(this,e,t))}function s(e,t,n){var r,i=o.e.firstChild(t),s=o.J.instance,a=s.preprocessNode;if(a){for(;r=i;)i=o.e.nextSibling(r),a.call(s,r);i=o.e.firstChild(t)}for(;r=i;)i=o.e.nextSibling(r),u(e,r,n)}function u(e,t,n){var r=!0,i=1===t.nodeType;i&&o.e.wb(t);if(i&&n||o.J.instance.nodeHasBindings(t))r=f(t,null,e,n).shouldBindDescendants;r&&!c[o.a.B(t)]&&s(e,t,!i)}function a(e){var t=[],n={},r=[];return o.a.A(e,function i(s){if(!n[s]){var u=o.getBindingHandler(s);u&&(u.after&&(r.push(s),o.a.r(u.after,function(t){if(e[t]){if(-1!==o.a.l(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.length--),t.push({key:s,pb:u})),n[s]=!0}}),t}function f(e,t,r,s){var u=o.a.f.get(e,h);if(!t){if(u)throw Error("You cannot apply bindings multiple times to the same element.");o.a.f.set(e,h,!0)}!u&&s&&o.Eb(e,r);var f;if(t&&"function"!=typeof t)f=t;else{var l=o.J.instance,c=l.getBindingAccessors||i,d=o.h(function(){return(f=t?t(r,e):c.call(l,e,r))&&r.D&&r.D(),f},null,{G:e});f&&d.ga()||(d=null)}var v;if(f){var m=d?function(e){return function(){return n(d()[e])}}:function(e){return f[e]},y=function(){return o.a.Oa(d?d():f,n)};y.get=function(e){return f[e]&&n(m(e))},y.has=function(e){return e in f},s=a(f),o.a.r(s,function(t){var n=t.pb.init,i=t.pb.update,s=t.key;if(8===e.nodeType&&!o.e.Q[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof n&&o.k.t(function(){var t=n(e,m(s),y,r.$data,r);if(t&&t.controlsDescendantBindings){if(v!==p)throw Error("Multiple bindings ("+v+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=s}}),"function"==typeof i&&o.h(function(){i(e,m(s),y,r.$data,r)},null,{G:e})}catch(u){throw u.message='Unable to process binding "'+s+": "+f[s]+'"\nMessage: '+u.message,u}})}return{shouldBindDescendants:v===p}}function l(e){return e&&e instanceof o.I?e:new o.I(e)}o.d={};var c={script:!0};o.getBindingHandler=function(e){return o.d[e]},o.I=function(e,t,n,r){var i=this,s="function"==typeof e&&!o.v(e),u,a=o.h(function(){var u=s?e():e,f=o.a.c(u);return t?(t.D&&t.D(),o.a.extend(i,t),a&&(i.D=a)):(i.$parents=[],i.$root=f,i.ko=o),i.$rawData=u,i.$data=f,n&&(i[n]=f),r&&r(i,t,f),i.$data},null,{Da:function(){return u&&!o.a.eb(u)},G:!0});a.ga()&&(i.D=a,a.equalityComparer=null,u=[],a.Jb=function(e){u.push(e),o.a.u.ja(e,function(e){o.a.ma(u,e),u.length||(a.F(),i.D=a=p)})})},o.I.prototype.createChildContext=function(e,t,n){return new o.I(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},o.I.prototype.extend=function(e){return new o.I(this.D||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,o.a.extend(t,"function"==typeof e?e():e)})};var h=o.a.f.L(),d=o.a.f.L();o.Eb=function(e,t){if(2!=arguments.length)return o.a.f.get(e,d);o.a.f.set(e,d,t),t.D&&t.D.Jb(e)},o.xa=function(e,t,n){return 1===e.nodeType&&o.e.wb(e),f(e,t,l(n),!0)},o.Lb=function(t,n,i){return i=l(i),o.xa(t,"function"==typeof n?r(n.bind(null,i,t)):o.a.Oa(n,e),i)},o.gb=function(e,t){1!==t.nodeType&&8!==t.nodeType||s(l(e),t,!0)},o.fb=function(e,n){!t&&A.jQuery&&(t=A.jQuery);if(n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||A.document.body,u(l(e),n,!0)},o.Ca=function(e){switch(e.nodeType){case 1:case 8:var t=o.Eb(e);if(t)return t;if(e.parentNode)return o.Ca(e.parentNode)}return p},o.Pb=function(e){return(e=o.Ca(e))?e.$data:p},o.b("bindingHandlers",o.d),o.b("applyBindings",o.fb),o.b("applyBindingsToDescendants",o.gb),o.b("applyBindingAccessorsToNode",o.xa),o.b("applyBindingsToNode",o.Lb),o.b("contextFor",o.Ca),o.b("dataFor",o.Pb)}();var c={"class":"className","for":"htmlFor"};o.d.attr={update:function(e,t){var n=o.a.c(t())||{};o.a.A(n,function(t,n){n=o.a.c(n);var r=!1===n||null===n||n===p;r&&e.removeAttribute(t),8>=o.a.oa&&t in c?(t=c[t],r?e.removeAttribute(t):e[t]=n):r||e.setAttribute(t,n.toString()),"name"===t&&o.a.Cb(e,r?"":n.toString())})}},function(){o.d.checked={after:["value","attr"],init:function(e,t,n){function r(){return n.has("checkedValue")?o.a.c(n.get("checkedValue")):e.value}function i(){var i=e.checked,s=c?r():i;if(!o.ca.pa()&&(!a||i)){var u=o.k.t(t);f?l!==s?(i&&(o.a.Y(u,s,!0),o.a.Y(u,l,!1)),l=s):o.a.Y(u,s,i):o.g.va(u,n,"checked",s,!0)}}function s(){var n=o.a.c(t());e.checked=f?0<=o.a.l(n,r()):u?n:r()===n}var u="checkbox"==e.type,a="radio"==e.type;if(u||a){var f=u&&o.a.c(t())instanceof Array,l=f?r():p,c=a||f;a&&!e.name&&o.d.uniqueName.init(e,function(){return!0}),o.ba(i,null,{G:e}),o.a.q(e,"click",i),o.ba(s,null,{G:e})}}},o.g.W.checked=!0,o.d.checkedValue={update:function(e,t){e.value=o.a.c(t())}}}(),o.d.css={update:function(e,t){var n=o.a.c(t());"object"==typeof n?o.a.A(n,function(t,n){n=o.a.c(n),o.a.ua(e,t,n)}):(n=String(n||""),o.a.ua(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,o.a.ua(e,n,!0))}},o.d.enable={update:function(e,t){var n=o.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},o.d.disable={update:function(e,t){o.d.enable.update(e,function(){return!o.a.c(t())})}},o.d.event={init:function(e,t,n,r,i){var s=t()||{};o.a.A(s,function(s){"string"==typeof s&&o.a.q(e,s,function(e){var u,a=t()[s];if(a){try{var f=o.a.R(arguments);r=i.$data,f.unshift(r),u=a.apply(r,f)}finally{!0!==u&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(s+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},o.d.foreach={vb:function(e){return function(){var t=e(),n=o.a.Sa(t);return!n||"number"==typeof n.length?{foreach:t,templateEngine:o.K.Ja}:(o.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:o.K.Ja})}},init:function(e,t){return o.d.template.init(e,o.d.foreach.vb(t))},update:function(e,t,n,r,i){return o.d.template.update(e,o.d.foreach.vb(t),n,r,i)}},o.g.aa.foreach=!1,o.e.Q.foreach=!0,o.d.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var s;try{s=i.activeElement}catch(u){s=i.body}r=s===e}i=t(),o.g.va(i,n,"hasfocus",r,!0),e.__ko_hasfocusLastValue=r,e.__ko_hasfocusUpdating=!1}var i=r.bind(null,!0),s=r.bind(null,!1);o.a.q(e,"focus",i),o.a.q(e,"focusin",i),o.a.q(e,"blur",s),o.a.q(e,"focusout",s)},update:function(e,t){var n=!!o.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),o.k.t(o.a.ha,null,[e,n?"focusin":"focusout"]))}},o.g.W.hasfocus=!0,o.d.hasFocus=o.d.hasfocus,o.g.W.hasFocus=!0,o.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){o.a.Va(e,t())}},s("if"),s("ifnot",!1,!0),s("with",!0,!1,function(e,t){return e.createChildContext(t)});var h={};o.d.options={init:function(e){if("select"!==o.a.B(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function r(){return o.a.la(e.options,function(e){return e.selected})}function i(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function s(t,n){if(c.length){var r=0<=o.a.l(c,o.i.p(n[0]));o.a.Db(n[0],r),d&&!r&&o.k.t(o.a.ha,null,[e,"change"])}}var u=0!=e.length&&e.multiple?e.scrollTop:null,a=o.a.c(t()),f=n.get("optionsIncludeDestroyed");t={};var l,c;c=e.multiple?o.a.ya(r(),o.i.p):0<=e.selectedIndex?[o.i.p(e.options[e.selectedIndex])]:[],a&&("undefined"==typeof a.length&&(a=[a]),l=o.a.la(a,function(e){return f||e===p||null===e||!o.a.c(e._destroy)}),n.has("optionsCaption")&&(a=o.a.c(n.get("optionsCaption")),null!==a&&a!==p&&l.unshift(h)));var d=!1;t.beforeRemove=function(t){e.removeChild(t)},a=s,n.has("optionsAfterRender")&&(a=function(e,t){s(0,t),o.k.t(n.get("optionsAfterRender"),null,[t[0],e!==h?e:p])}),o.a.Ua(e,l,function(t,r,s){return s.length&&(c=s[0].selected?[o.i.p(s[0])]:[],d=!0),r=e.ownerDocument.createElement("option"),t===h?(o.a.Xa(r,n.get("optionsCaption")),o.i.X(r,p)):(s=i(t,n.get("optionsValue"),t),o.i.X(r,o.a.c(s)),t=i(t,n.get("optionsText"),s),o.a.Xa(r,t)),[r]},t,a),o.k.t(function(){n.get("valueAllowUnset")&&n.has("value")?o.i.X(e,o.a.c(n.get("value")),!0):(e.multiple?c.length&&r().length<c.length:c.length&&0<=e.selectedIndex?o.i.p(e.options[e.selectedIndex])!==c[0]:c.length||0<=e.selectedIndex)&&o.a.ha(e,"change")}),o.a.Tb(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},o.d.options.Pa=o.a.f.L(),o.d.selectedOptions={after:["options","foreach"],init:function(e,t,n){o.a.q(e,"change",function(){var r=t(),i=[];o.a.r(e.getElementsByTagName("option"),function(e){e.selected&&i.push(o.i.p(e))}),o.g.va(r,n,"selectedOptions",i)})},update:function(e,t){if("select"!=o.a.B(e))throw Error("values binding applies only to SELECT elements");var n=o.a.c(t());n&&"number"==typeof n.length&&o.a.r(e.getElementsByTagName("option"),function(e){var t=0<=o.a.l(n,o.i.p(e));o.a.Db(e,t)})}},o.g.W.selectedOptions=!0,o.d.style={update:function(e,t){var n=o.a.c(t()||{});o.a.A(n,function(t,n){n=o.a.c(n),e.style[t]=n||""})}},o.d.submit={init:function(e,t,n,r,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");o.a.q(e,"submit",function(n){var r,s=t();try{r=s.call(i.$data,e)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},o.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){o.a.Xa(e,t())}},o.e.Q.text=!0,o.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++o.d.uniqueName.Ob;o.a.Cb(e,n)}}},o.d.uniqueName.Ob=0,o.d.value={after:["options","foreach"],init:function(e,t,n){function r(){u=!1;var r=t(),i=o.i.p(e);o.g.va(r,n,"value",i)}var i=["change"],s=n.get("valueUpdate"),u=!1;s&&("string"==typeof s&&(s=[s]),o.a.$(i,s),i=o.a.ib(i)),!o.a.oa||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=o.a.l(i,"propertychange")||(o.a.q(e,"propertychange",function(){u=!0}),o.a.q(e,"focus",function(){u=!1}),o.a.q(e,"blur",function(){u&&r()})),o.a.r(i,function(t){var n=r;o.a.kc(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5)),o.a.q(e,t,n)})},update:function(e,t,n){var r=o.a.c(t());t=o.i.p(e);if(r!==t)if("select"===o.a.B(e)){var i=n.get("valueAllowUnset");n=function(){o.i.X(e,r,i)},n(),i||r===o.i.p(e)?setTimeout(n,0):o.k.t(o.a.ha,null,[e,"change"])}else o.i.X(e,r)}},o.g.W.value=!0,o.d.visible={update:function(e,t){var n=o.a.c(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},function(e){o.d[e]={init:function(t,n,r,i,s){return o.d.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,i,s)}}}("click"),o.C=function(){},o.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},o.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},o.C.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||w;var n=t.getElementById(e);if(!n)throw Error("Cannot find template with ID "+e);return new o.n.j(n)}if(1==e.nodeType||8==e.nodeType)return new o.n.Z(e);throw Error("Unknown template type: "+e)},o.C.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n)},o.C.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")},o.C.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},o.b("templateEngine",o.C),o.Za=function(){function e(e,t,n,r){e=o.g.Ra(e);for(var i=o.g.aa,s=0;s<e.length;s++){var u=e[s].key;if(i.hasOwnProperty(u)){var a=i[u];if("function"==typeof a){if(u=a(e[s].value))throw Error(u)}else if(!a)throw Error("This template engine does not support the '"+u+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+o.g.qa(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return o.Za.dc(e,t)},n)},dc:function(r,i){return r.replace(t,function(t,n,r,s,o){return e(o,n,r,i)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",i)})},Mb:function(e,t){return o.w.Na(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&o.xa(i,e,r)})}}}(),o.b("__tr_ambtns",o.Za.Mb),function(){o.n={},o.n.j=function(e){this.j=e},o.n.j.prototype.text=function(){var e=o.a.B(this.j),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.j[e];var t=arguments[0];"innerHTML"===e?o.a.Va(this.j,t):this.j[e]=t};var e=o.a.f.L()+"_";o.n.j.prototype.data=function(t){if(1===arguments.length)return o.a.f.get(this.j,e+t);o.a.f.set(this.j,e+t,arguments[1])};var t=o.a.f.L();o.n.Z=function(e){this.j=e},o.n.Z.prototype=new o.n.j,o.n.Z.prototype.text=function(){if(0==arguments.length){var e=o.a.f.get(this.j,t)||{};return e.$a===p&&e.Ba&&(e.$a=e.Ba.innerHTML),e.$a}o.a.f.set(this.j,t,{$a:arguments[0]})},o.n.j.prototype.nodes=function(){if(0==arguments.length)return(o.a.f.get(this.j,t)||{}).Ba;o.a.f.set(this.j,t,{Ba:arguments[0]})},o.b("templateSources",o.n),o.b("templateSources.domElement",o.n.j),o.b("templateSources.anonymousTemplate",o.n.Z)}(),function(){function e(e,t,n){var r;for(t=o.e.nextSibling(t);e&&(r=e)!==t;)e=o.e.nextSibling(r),n(r,e)}function t(t,n){if(t.length){var r=t[0],i=t[t.length-1],s=r.parentNode,u=o.J.instance,a=u.preprocessNode;if(a){e(r,i,function(e,t){var n=e.previousSibling,s=a.call(u,e);s&&(e===r&&(r=s[0]||t),e===i&&(i=s[s.length-1]||n))}),t.length=0;if(!r)return;r===i?t.push(r):(t.push(r,i),o.a.ea(t,s))}e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||o.fb(n,e)}),e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||o.w.Ib(e,[n])}),o.a.ea(t,s)}}function n(e){return e.nodeType?e:0<e.length?e[0]:null}function r(e,r,s,u,a){a=a||{};var f=e&&n(e),f=f&&f.ownerDocument,l=a.templateEngine||i;o.Za.Ub(s,l,f),s=l.renderTemplate(s,u,a,f);if("number"!=typeof s.length||0<s.length&&"number"!=typeof s[0].nodeType)throw Error("Template engine must return an array of DOM nodes");f=!1;switch(r){case"replaceChildren":o.e.U(e,s),f=!0;break;case"replaceNode":o.a.Bb(e,s),f=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+r)}return f&&(t(s,u),a.afterRender&&o.k.t(a.afterRender,null,[s,u.$data])),s}var i;o.Wa=function(e){if(!(e==p||e instanceof o.C))throw Error("templateEngine must inherit from ko.templateEngine");i=e},o.Ta=function(e,t,s,u,a){s=s||{};if((s.templateEngine||i)==p)throw Error("Set a template engine before calling renderTemplate");a=a||"replaceChildren";if(u){var f=n(u);return o.h(function(){var i=t&&t instanceof o.I?t:new o.I(o.a.c(t)),l=o.v(e)?e():"function"==typeof e?e(i.$data,i):e,i=r(u,a,l,i,s);"replaceNode"==a&&(u=i,f=n(u))},null,{Da:function(){return!f||!o.a.Ea(f)},G:f&&"replaceNode"==a?f.parentNode:f})}return o.w.Na(function(n){o.Ta(e,t,s,n,"replaceNode")})},o.jc=function(e,n,i,s,u){function a(e,n){t(n,l),i.afterRender&&i.afterRender(n,e)}function f(t,n){l=u.createChildContext(t,i.as,function(e){e.$index=n});var s="function"==typeof e?e(t,l):e;return r(null,"ignoreTargetNode",s,l,i)}var l;return o.h(function(){var e=o.a.c(n)||[];"undefined"==typeof e.length&&(e=[e]),e=o.a.la(e,function(e){return i.includeDestroyed||e===p||null===e||!o.a.c(e._destroy)}),o.k.t(o.a.Ua,null,[s,e,f,i,a])},null,{G:s})};var s=o.a.f.L();o.d.template={init:function(e,t){var n=o.a.c(t());return"string"==typeof n||n.name?o.e.da(e):(n=o.e.childNodes(e),n=o.a.ec(n),(new o.n.Z(e)).nodes(n)),{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var u=t(),a;t=o.a.c(u),n=!0,r=null,"string"==typeof t?t={}:(u=t.name,"if"in t&&(n=o.a.c(t["if"])),n&&"ifnot"in t&&(n=!o.a.c(t.ifnot)),a=o.a.c(t.data)),"foreach"in t?r=o.jc(u||e,n&&t.foreach||[],t,e,i):n?(i="data"in t?i.createChildContext(a,t.as):i,r=o.Ta(u||e,i,t,e)):o.e.da(e),i=r,(a=o.a.f.get(e,s))&&"function"==typeof a.F&&a.F(),o.a.f.set(e,s,i&&i.ga()?i:p)}},o.g.aa.template=function(e){return e=o.g.Ra(e),1==e.length&&e[0].unknown||o.g.bc(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.e.Q.template=!0}(),o.b("setTemplateEngine",o.Wa),o.b("renderTemplate",o.Ta),o.a.nb=function(e,t,n){if(e.length&&t.length){var r,i,s,o,u;for(r=i=0;(!n||r<n)&&(o=e[i]);++i){for(s=0;u=t[s];++s)if(o.value===u.value){o.moved=u.index,u.moved=o.index,t.splice(s,1),r=s=0;break}r+=s}}},o.a.Aa=function(){function e(e,t,n,r,i){var s=Math.min,u=Math.max,a=[],f,l=e.length,c,h=t.length,p=h-l||1,d=l+h+1,v,m,g;for(f=0;f<=l;f++)for(m=v,a.push(v=[]),g=s(h,f+p),c=u(0,f-1);c<=g;c++)v[c]=c?f?e[f-1]===t[c-1]?m[c-1]:s(m[c]||d,v[c-1]||d)+1:c+1:f+1;s=[],u=[],p=[],f=l;for(c=h;f||c;)h=a[f][c]-1,c&&h===a[f][c-1]?u.push(s[s.length]={status:n,value:t[--c],index:c}):f&&h===a[f-1][c]?p.push(s[s.length]={status:r,value:e[--f],index:f}):(--c,--f,i.sparse||s.push({status:"retained",value:t[c]}));return o.a.nb(u,p,10*l),s.reverse()}return function(t,n,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],n=n||[],t.length<=n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}(),o.b("utils.compareArrays",o.a.Aa),function(){function e(e,t,n,r,i){var s=[],u=o.h(function(){var u=t(n,i,o.a.ea(s,e))||[];0<s.length&&(o.a.Bb(s,u),r&&o.k.t(r,null,[n,u,i])),s.length=0,o.a.$(s,u)},null,{G:e,Da:function(){return!o.a.eb(s)}});return{S:s,h:u.ga()?u:p}}var t=o.a.f.L();o.a.Ua=function(n,r,i,s,u){function a(e,t){S=c[t],g!==t&&(E[e]=S),S.Ia(g++),o.a.ea(S.S,n),v.push(S),w.push(S)}function f(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&o.a.r(t[n].S,function(r){e(r,n,t[n].ka)})}r=r||[],s=s||{};var l=o.a.f.get(n,t)===p,c=o.a.f.get(n,t)||[],h=o.a.ya(c,function(e){return e.ka}),d=o.a.Aa(h,r,s.dontLimitMoves),v=[],m=0,g=0,y=[],w=[];r=[];for(var E=[],h=[],S,x=0,T,N;T=d[x];x++)switch(N=T.moved,T.status){case"deleted":N===p&&(S=c[m],S.h&&S.h.F(),y.push.apply(y,o.a.ea(S.S,n)),s.beforeRemove&&(r[x]=S,w.push(S))),m++;break;case"retained":a(x,m++);break;case"added":N!==p?a(x,N):(S={ka:T.value,Ia:o.m(g++)},v.push(S),w.push(S),l||(h[x]=S))}f(s.beforeMove,E),o.a.r(y,s.beforeRemove?o.M:o.removeNode);for(var x=0,l=o.e.firstChild(n),C;S=w[x];x++){S.S||o.a.extend(S,e(n,i,S.ka,u,S.Ia));for(m=0;d=S.S[m];l=d.nextSibling,C=d,m++)d!==l&&o.e.rb(n,d,C);!S.Zb&&u&&(u(S.ka,S.S,S.Ia),S.Zb=!0)}f(s.beforeRemove,r),f(s.afterMove,E),f(s.afterAdd,h),o.a.f.set(n,t,v)}}(),o.b("utils.setDomNodeChildrenFromArrayMapping",o.a.Ua),o.K=function(){this.allowTemplateRewriting=!1},o.K.prototype=new o.C,o.K.prototype.renderTemplateSource=function(e){var t=(9>o.a.oa?0:e.nodes)?e.nodes():null;return t?o.a.R(t.cloneNode(!0).childNodes):(e=e.text(),o.a.Qa(e))},o.K.Ja=new o.K,o.Wa(o.K.Ja),o.b("nativeTemplateEngine",o.K),function(){o.La=function(){var e=this.ac=function(){if(!t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,i){i=i||{};if(2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=n.data("precompiled");return s||(s=n.text()||"",s=t.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),n.data("precompiled",s)),n=[r.$data],r=t.extend({koBindingContext:r},i.templateOptions),r=t.tmpl(s,n,r),r.appendTo(w.createElement("div")),t.fragments={},r},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){w.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.La.prototype=new o.C;var e=new o.La;0<e.ac&&o.Wa(e),o.b("jqueryTmplTemplateEngine",o.La)}()})})()}(),define("map/MapModel",["dojo/_base/declare","main/config","map/config","knockout"],function(e,t,n,r){var i=e(null,{constructor:function(e){i.vm={},i.root=e,i.vm.showDMSInputs=r.observable(!0),i.vm.showLatLongInputs=r.observable(!1),i.vm.showBasemapGallery=r.observable(!1),i.vm.showLocatorOptions=r.observable(!1),i.vm.showSharingOptions=r.observable(!1),i.vm.showClearPinsOption=r.observable(!1),i.vm.currentLatitude=r.observable(),i.vm.currentLongitude=r.observable(),i.vm.suitabilitySettings=r.observable(n.customSuitabilityDefaults),i.vm.uploadModalHeader=r.observable(n.uploadForm.title),i.vm.shapefileUploadInstructionHeader=r.observable(n.uploadForm.shapefileHeader),i.vm.csvUploadInstructionHeader=r.observable(n.uploadForm.csvHeader),i.vm.shapefileInstructions=r.observableArray(n.uploadForm.shapefileInstructions),i.vm.csvInstructions=r.observable(n.uploadForm.csvInstructions),i.vm.coordinatesModalHeader=r.observable(n.coordinatesDialog.coordinatesModalHeader),i.vm.coordinatesEnterButton=r.observable(n.coordinatesDialog.coordinatesEnterButton),i.vm.latitudePlaceholder=r.observable(n.coordinatesDialog.latitudePlaceholder),i.vm.longitudePlaceholder=r.observable(n.coordinatesDialog.longitudePlaceholder),i.vm.tcdModalLabel=r.observable(n.tcdModal.label),i.vm.tcdDensityValue=r.observable(n.tcdModal.densityValue),i.vm.allCountries=r.observableArray([]),i.vm.lowerLevelAdminUnits=r.observableArray([]),i.vm.drawToolsEnabled=r.observable(!1),r.applyBindings(i.vm,document.getElementById(e))}});return i.get=function(e){return e==="model"?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.applyTo=function(e){r.applyBindings(i.vm,document.getElementById(e))},i.initialize=function(e){return i.instance||(i.instance=new i(e)),i.instance},i}),define("utils/Analytics",[],function(){"use strict";return{sendEvent:function(e,t,n,r){var i={hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,eventValue:r||1};ga&&(ga("A.send",i),ga("B.send",i),ga("C.send",i))},sendPageview:function(e,t){var n={hitType:"pageview"};e&&(n.page=e),t&&(n.title=t),ga&&(ga("A.send",n),ga("B.send",n),ga("C.send",n))}}}),define("map/Uploader",["map/config","map/Symbols","utils/GeoHelper","analysis/config","analysis/WizardStore","utils/Analytics","dojo/on","dojo/sniff","dojo/dom-class","dijit/registry","dojo/store/Memory","dojo/dom-construct","dijit/form/ComboBox","dojox/data/CsvStore","esri/request","esri/graphic","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/geometry/scaleUtils","esri/geometry/webMercatorUtils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){"use strict";var E,S=r.STORE_KEYS,x={toggle:function(){a.toggle("upload-modal","active"),E?(E.remove(),E=undefined):E=o.once(document.querySelector("#upload-modal .close-icon"),"click",this.toggle)},close:function(){return E&&(E.remove(),E=undefined),a.remove("upload-modal","active")},beginUpload:function(e){if(e.target.value==="")return;var t=e.target.value.toLowerCase();if(u("ie")){var n=t.split("\\");t=n[n.length-1]}t.indexOf(".zip")<0?this.uploadCSV(e):this.uploadShapefile(t,e)},uploadCSV:function(e){var t=e.target.files[0],n=new FileReader,r=[],i=this,o,u,a;o=function(){a=new p({data:n.result,separator:","}),a.fetch({onComplete:function(e){if(e.length<1)throw new Error("No items found in CSV file.");s.sendEvent("Event","Upload Data","User uploaded CSV.",e),u=a.getAttributes(e[0]),u.forEach(function(e){r.push({name:e,id:e})}),i.generateDropdown(r,function(t){t&&i.formatCSVDataForStore(a,e,t)})},onError:i.uploadError})},n.onload=o,n.readAsText(t)},uploadShapefile:function(t,n){var r,i;t=t.split("."),t=t[0].replace("c:\\fakepath\\",""),r={name:t,targetSR:app.map.spatialReference,generalize:!0,maxRecordCount:1e3,reducePrecision:!0,numberOfDigitsAfterDecimal:0,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},i=b.getExtentForScale(app.map,4e4),r.maxAllowableOffset=i.getWidth()/app.map.width,d({url:e.uploader.portalUrl,content:{f:"json",filetype:"shapefile","callback.html":"callback",publishParameters:JSON.stringify(r)},form:document.getElementById("upload-form"),handleAs:"json",load:this.uploadSuccess.bind(this),error:this.uploadError})},uploadError:function(e){console.error("Error uplaoding data: ",e)},uploadSuccess:function(e,t){var n=e.featureCollection,r=[],i=this;s.sendEvent("Event","Upload Data","User uploaded zip file.",e),n.layers[0].layerDefinition.fields.forEach(function(e){r.push({name:e.name,id:e.alias})}),i.generateDropdown(r,function(e){e&&i.formatFeaturesToStore(n.layers[0].featureSet,e)})},formatCSVDataForStore:function(t,r,s){var o=n.nextCustomFeatureId(),u=[],a,f,l,c,h,p;r.forEach(function(r,i){a={},l=t.getAttributes(r),l.forEach(function(e){c=t.getValue(r,e),a[e]=isNaN(c)?c:parseFloat(c)}),a[e.uploader.labelField]="ID - "+(o+i)+": "+a[s],a.WRI_ID=o+i,a.isRSPO=!1,h=a.Latitude?a.Latitude:a.latitude,p=a.Longitude?a.Longitude:a.longitude,f=n.generatePointGraphicFromGeometric(p,h,a),u.push(f)}),i.set(S.customFeatures,i.get(S.customFeatures).concat(u))},formatFeaturesToStore:function(r,s){var o=n.nextCustomFeatureId(),u=[],a,f,l,c,h;r.features.forEach(function(n,r){n.attributes[e.uploader.labelField]="ID - "+(o+r)+": "+n.attributes[s],n.attributes.WRI_ID=o+r,n.geometry.x?(c=t.getPointSymbol(),a=new m(n.geometry),h=new g(a.x,a.y,a.x,a.y,a.spatialReference),l=l?l.union(h):h,n.attributes.isRSPO=!1):(c=t.getPolygonSymbol(),a=new y(n.geometry),l=l?l.union(a.getExtent()):a.getExtent()),f=new v(a,c,n.attributes),u.push(f)}),i.set(S.customFeatures,i.get(S.customFeatures).concat(u))},resetForm:function(){var e=document.getElementById("uploadNameField");f.byId("uploadNameFieldWidget")&&f.byId("uploadNameFieldWidget").destroy(),e&&c.destroy(e.id),document.getElementById("upload-form").reset()},generateDropdown:function(e,t){var n=document.getElementById("postUploadOptions"),r=this,i;c.create("div",{id:"uploadNameField",innerHTML:'<div id="uploadNameFieldWidget"></div>'},n,"last"),i=new l({data:e}),new h({id:"uploadNameFieldWidget",value:"-- Choose name field --",store:i,searchAttr:"name",onChange:function(e){r.resetForm(),r.toggle(),t(e)}},"uploadNameFieldWidget")}};return x}),define("components/alertsForm/AlertsForm",["react","lodash","analysis/WizardStore","components/alertsForm/config","components/featureList/FeatureList","map/config","map/MapModel","map/Uploader","map/Symbols","utils/GeoHelper","esri/graphic","esri/geometry/Polygon","esri/toolbars/draw","dojo/topic","dojo/dom","dojo/query","dojo/dom-class","dojo/Deferred","dojo/promise/all","dojo/request/xhr","dojox/validate/web"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E,S,x,T=r.TEXT,N=r.STORE_KEYS,C,k=this;return C=function(){return{features:n.get(N.customFeatures),selectedFeatures:n.get(N.selectedCustomFeatures)}},E=e.createClass({getInitialState:C,componentDidMount:function(){S=new h(app.map),S.on("draw-end",this._drawComplete),n.registerCallback(N.customFeatures,function(){this.setState({features:n.get(N.customFeatures)})}.bind(this)),n.registerCallback(N.selectedCustomFeatures,function(){this.setState({selectedFeatures:n.get(N.selectedCustomFeatures)})}.bind(this)),this.setState(C())},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(C()),this._deactivateToolbar(),this._removeActiveClass())},render:function(){var t=n.get(N.selectedCustomFeatures),s=t.length>0?t.map(function(e){return e.attributes.WRI_label}).join(", "):T.noSelection,o=this;return e.DOM.div({className:"relative fill"},e.DOM.div({className:"alerts-form__header"},e.DOM.div({className:"alerts-form__header__title inline-block fill__long border-box padding__long vertical-middle"},T.title),e.DOM.button({onClick:this._toggle,className:"alerts-form__header__exit back-white absolute no-top no-right no-padding fill__long pointer"},e.DOM.img({className:"vertical-middle",src:"app/css/images/close_symbol.png"}))),e.DOM.div({className:"alerts-form__body"},e.DOM.div({className:"padding__wide padding__top"},e.DOM.div({className:"margin__bottom"},r.customArea.instructions),e.DOM.div({className:"text-center margin__bottom"},e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:this._activateToolbar,"data-geometry-type":h.FREEHAND_POLYGON},r.customArea.freehandLabel),e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:this._activateToolbar,"data-geometry-type":h.POLYGON},r.customArea.polyLabel),e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:u.toggle.bind(u),id:"alerts-draw-upload"},r.customArea.uploadLabel))),new i({features:this.state.features,selectedFeatures:this.state.selectedFeatures})),e.DOM.div({className:"alerts-form__footer"},e.DOM.div({className:"inline-block padding__left"},T.selection),e.DOM.div({className:"alerts-form__footer__selection absolute inline-block padding__wide text-gold ellipsis border-box",title:s},s),e.DOM.button({className:"text-white back-orange no-border fill__long pointer absolute no-right no-top",onClick:this._subscribeToAlerts,disabled:this.state.selectedFeatures.length===0},T.subscribe)))},_toggle:function(){p.publish("toggleAlerts")},_activateToolbar:function(e){var t;t=e.target.dataset?e.target.dataset.geometryType:e.target.getAttribute("data-geometry-type"),this._removeActiveClass();if(x===t){this._deactivateToolbar();return}x=t,S.activate(t),m.add(e.target,"active"),o.set("drawToolsEnabled",!0)},_deactivateToolbar:function(){S.deactivate(),x=undefined,o.set("drawToolsEnabled",!1)},_drawComplete:function(e){this._removeActiveClass(),this._deactivateToolbar();if(!e.geometry)return;var t=f.nextCustomFeatureId(),i={WRI_ID:t},s=new l(e.geometry,a.getPolygonSymbol(),i);i[r.stepTwo.labelField]="ID - "+t+": Custom drawn feature",n.set(N.customFeatures,n.get(N.customFeatures).concat([s]))},_removeActiveClass:function(){v(".alerts-form__body .alerts-form__drawing-tool").forEach(function(e){m.remove(e,"active")})},_subscribeToAlerts:function(){n.set(N.alertsDialogActive,!n.get(N.alertsDialogActive))}}),function(t,n){return e.renderComponent(new E(t),document.getElementById(n))}}),define("components/alertsDialog/config",["analysis/config"],function(e){return{STORE_KEYS:e.STORE_KEYS,MAX_INPUT_CHARS:70,IDS:{mount:"subscription-modal",forma:"alerts-forma",fires:"alerts-fires",buffer:"alerts-buffer",email:"alerts-email",subscription:"alerts-subscription"},TEXT:{title:"Subscribe to Alerts",forma:"Monthly Clearance Alerts",fires:"Fire Alerts",selectionLabel:"Selection:",noSelection:"none",subscriptionPlaceholder:"Subscription name",subscriptionDefaultLabel:"Use default name",emailPlaceholder:"your_email@example.com",subscribe:"Subscribe",bufferLabel:"Point data selected - buffer area(s) required.",bufferOptionsLabel:"Buffer radius:",bufferOptions:[["50","50km"],["40","40km"],["30","30km"],["20","20km"],["10","10km"]],messagesLabel:"Please fill in the following:\n",messages:{invalidEmail:"You must provide a valid email in the form.",noAreaSelection:"You must select at least one area from the list.",noSelection:"You must select at least one checkbox from the form.",noSelectionName:"You must provide a name for your subscription area.",formaSuccess:"Thank you for subscribing to Forma Alerts.  You should receive a confirmation email soon.",formaFail:"There was an error with your request to subscribe to Forma alerts.  Please try again later.",fireSuccess:"Thank you for subscribing to Fires Alerts.  You should receive a confirmation email soon.",fireFail:"There was an error with your request to subscribe to Fires alerts.  Please try again later."},requiredLabels:{alerts:"* Please select an alert type.",subscription:"* Please name this alert.",email:"* Please enter a valid email."}},requests:{fires:{url:"https://gfw-fires.wri.org/subscribe_by_polygon",options:{method:"POST",handleAs:"json",headers:{"X-Requested-With":null},data:{msg_type:"email",msg_addr:null,area_name:null,features:null}},successMessage:"subscription successful"},forma:{url:"http://gfw-apis.appspot.com/subscribe",options:{method:"POST",data:{topic:"updates/forma",geom:null,email:null}}}}}}),define("components/alertsDialog/alertsDialog",["react","lodash","components/alertsDialog/config","analysis/WizardStore","utils/GeoHelper","utils/Analytics","esri/geometry/Polygon","dojo/dom","dojo/dom-class","dojo/Deferred","dojo/promise/all","dojo/request/xhr","dojox/validate/web"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d,v=n.STORE_KEYS,m=n.IDS,g=n.TEXT,y=this,b,w,E,S=t.uniqueId(m.forma),x=t.uniqueId(m.fires),T=t.uniqueId(m.buffer),N=t.uniqueId(m.email),C=t.uniqueId(m.subscrpition);return d=function(){return{forma:!1,fires:!1,email:"",subscriptionName:"",features:r.get(v.selectedCustomFeatures),presetFeature:r.get(v.selectedPresetFeature)}},p=e.createClass({displayName:"AlertsDialog",getInitialState:d,componentDidMount:function(){r.registerCallback(v.alertsDialogActive,function(){r.get(v.alertsDialogActive)?a.add(m.mount,"active"):a.remove(m.mount,"active")}.bind(this)),r.registerCallback(v.customFeatures,function(){this.setState({features:r.get(v.selectedCustomFeatures)})}.bind(this)),r.registerCallback(v.selectedCustomFeatures,function(){this.setState({features:r.get(v.selectedCustomFeatures)}),r.set(v.selectedPresetFeature,null)}.bind(this)),r.registerCallback(v.selectedPresetFeature,function(){this.setState({presetFeature:r.get(v.selectedPresetFeature)})}.bind(this)),r.get(v.alertsDialogActive)===!0&&a.add(m.mount,"active")},render:function(){var r=this.state.features,i=this.state.presetFeature,s,o,u,a,f;return i!==null?(o=i.geometry.type==="point",s=i.attributes.WRI_label||i.attributes.Name||i.attributes.NAME||i.attributes.Mill_name||g.noSelection):(o=t.find(r,function(e){return e.geometry.type==="point"})?!0:!1,s=r.length>0?r.map(function(e){return e.attributes.WRI_label}).join(", "):g.noSelection),o&&(f=e.createElement("div",{className:"margin__bottom"},e.createElement("div",{className:"margin--small__left"},g.bufferLabel),e.createElement("span",{className:"margin--small__left"},g.bufferOptionsLabel),e.createElement("select",{id:T,className:"margin__left"},g.bufferOptions.map(function(t){return e.createElement("option",{value:t[0]},t[1])})))),a=[r.length===0&&i===null,this.state.subscriptionName.trim().length===0,this.state.email.trim().length===0,!h.isEmailAddress(this.state.email),this.state.forma!==!0&&this.state.fires!==!0],disabled=a.indexOf(!0)>-1,w="pb_"+t.random(1,100).toString(),E="pb_"+t.random(1,100).toString(),b=b||w+E,e.createElement("div",{className:"alerts-dialog"},e.createElement("div",{className:"close-icon",onClick:this._close}),e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"alerts-form__form no-wide border-box"},e.createElement("div",{className:"modal-header"},g.title),e.createElement("div",{className:"margin__bottom margin--small__left"},e.createElement("span",null,g.selectionLabel),e.createElement("span",{className:"padding__left"+(a[0]?" text-red":" text-gold"),title:s},s.substr(0,75),s.length>75?"...":"")),e.createElement("div",{className:"margin--small__wide"},e.createElement("div",{className:"font-12px text-red margin__top",style:{visibility:a[4]?"visible":"hidden"}},g.requiredLabels.alerts)),e.createElement("div",{className:"margin__bottom"},e.createElement("label",{className:"vertical-middle"},e.createElement("input",{id:S,className:"vertical-middle",type:"checkbox",onChange:this._formChange,checked:this.state.forma}),g.forma)),e.createElement("div",{className:""},e.createElement("label",{className:"margin--small__bottom vertical-middle"},e.createElement("input",{id:x,className:"vertical-middle",type:"checkbox",onChange:this._formChange,checked:this.state.fires}),g.fires)),e.createElement("div",{className:"pooh-bear text-center"},e.createElement("div",{className:"pooh-bear"},"Please leave this blank"),e.createElement("input",{id:w,className:"pooh-bear",type:"text",name:"name"})),e.createElement("div",{className:"margin--small__wide font-12px text-red margin__top",style:{visibility:a[1]?"visible":"hidden"}},g.requiredLabels.subscription),e.createElement("div",{className:"text-left margin__bottom margin--small__wide"},e.createElement("input",{id:C,className:"border-medium-gray border-radius",maxLength:toString(n.MAX_INPUT_CHARS),type:"text",onChange:this._formChange,value:this.state.subscriptionName,placeholder:g.subscriptionPlaceholder}),e.createElement("button",{className:"margin__left font-16px text-white back-orange no-border border-radius",onClick:this._setDefaultSubscriptionName,disabled:a[0]},g.subscriptionDefaultLabel)),e.createElement("div",{className:"margin--small__wide font-12px text-red margin__top",style:{visibility:a[3]?"visible":"hidden"}},g.requiredLabels.email),e.createElement("div",{className:"text-left margin__bottom margin--small__wide"},e.createElement("input",{id:N,className:"border-medium-gray border-radius",maxLength:toString(n.MAX_INPUT_CHARS),type:"text",onChange:this._formChange,value:this.state.email,placeholder:g.emailPlaceholder})),e.createElement("div",{className:"pooh-bear text-center"},e.createElement("div",{className:"pooh-bear"},"Please do not change this field"),e.createElement("input",{id:E,className:"pooh-bear",type:"text",name:"address",defaultValue:b})),f,e.createElement("div",{className:"text-center margin__bottom"},e.createElement("button",{className:"text-white back-orange no-border border-radius font-16px",onClick:this._subscribe,disabled:disabled},e.createElement("img",{className:"vertical-sub",width:"21px",height:"19px",src:"app/css/images/alert_symbol_"+(disabled?"gray":"white")+".png"}),e.createElement("span",{className:"padding__left"},g.subscribe))))))},_close:function(){r.set(v.alertsDialogActive,!r.get(v.alertsDialogActive))},_formChange:function(e){var t={forma:u.byId(S).checked,fires:u.byId(x).checked,subscriptionName:u.byId(C).value,email:u.byId(N).value};this.setState(t)},_subscribeToFires:function(e,r,i){var o=new f,u=g.messages,a=n.requests.fires,l=a.url,h=t.cloneDeep(a.options);return h.data.features=JSON.stringify({rings:e.rings,spatialReference:e.spatialReference}),h.data.msg_addr=i,h.data.area_name=r,c(l,h).then(function(e){o.resolve(e.message&&e.message===a.successMessage?u.fireSuccess:u.fireFail)}),s.sendEvent("Subscribe","Fire Alerts","User is subscribing to Fire Alerts."),o.promise},_subscribeToForma:function(e,r,i){var o=new f,u=g.messages,a=n.requests.forma.url,l=t.cloneDeep(n.requests.forma.options),c=JSON.stringify({topic:l.data.topic,email:i,geom:'{"type": "'+e.type+'", "coordinates":['+JSON.stringify(e.geom)+"]}"}),h=new XMLHttpRequest;return y=this,h.onreadystatechange=function(){h.readyState===4&&o.resolve(JSON.parse(h.response).subscribe?u.formaSuccess:u.formaFail)},h.addEventListener("error",function(){o.resolve(!1)},!1),h.open(l.method,a,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(c),s.sendEvent("Subscribe","Monthly Clearance Alerts","User is subscribing to Monthly Clearance Alerts."),o.promise},_subscribe:function(){if(u.byId(w)==null||u.byId(E)==null||u.byId(w).value.length>0||u.byId(E).value!==b)return;var e=this.state.features,n=this.state.presetFeature,r,s,a,f,c=[];n!==null?(e=[n],r=e[0].geometry.type==="point"):r=t.find(e,function(e){return e.geometry.type==="point"})?!0:!1,r?(f=parseInt(u.byId(T).value),a=t.filter(e,function(e){return e.geometry.type==="point"}),a=a.map(function(e){return i.preparePointAsPolygon(e,f)}),a=a.map(function(e){return(new o(i.getSpatialReference())).addRing(e.geometry.rings[e.geometry.rings.length-1])}),e=t.filter(e,function(e){return e.geometry.type!=="point"}),s=e.map(function(e){var t=new o(i.getSpatialReference());return t.rings=e.geometry.rings,t}),s=s.concat(a)):s=e.map(function(e){var t=new o(i.getSpatialReference());return t.rings=e.geometry.rings,t}),i.union(s).then(function(e){this.state.forma===!0&&c.push(this._subscribeToForma(i.convertGeometryToGeometric(e),this.state.subscriptionName.trim(),this.state.email.trim())),this.state.fires===!0&&c.push(this._subscribeToFires(e,this.state.subscriptionName.trim(),this.state.email.trim())),l(c).then(function(e){alert(e.join("\n"))})}.bind(this)),this._close()},_setDefaultSubscriptionName:function(){var e=this.state.presetFeature!==null?this.state.presetFeature:this.state.features[0],t=e.attributes.WRI_label||e.attributes.Name||e.attributes.NAME||e.attributes.Mill_name||"";this.setState({subscriptionName:t.substr(0,n.MAX_INPUT_CHARS)})}}),function(){return e.render(e.createElement(p,null),u.byId(m.mount))}}),define("analysis/Query",["dojo/Deferred","dojo/_base/array","esri/tasks/query","esri/graphicsUtils","esri/tasks/QueryTask","esri/tasks/StatisticDefinition","analysis/config","map/MapModel"],function(e,t,n,r,i,s,o,u){"use strict";return{getSetupData:function(){this.getAdminUnitData()},getAdminUnitData:function(){function a(e){var n=[];n.push({label:"None",value:"NONE"}),t.forEach(e.features,function(e){n.push({label:e.attributes[r.labelValueField],value:e.attributes[r.labelValueField]})}),u.set("allCountries",n)}var e=new n,r=o.adminUnit.countriesQuery,i;i=new s,i.statisticType=r.statistic.statisticType,i.onStatisticField=r.statistic.onStatisticField,i.outStatisticFieldName=r.statistic.outStatisticFieldName,e.where=r.where,e.returnGeometry=!1,e.outFields=r.outFields,e.orderByFields=r.orderBy,e.outStatistics=[i],e.groupByFieldsForStatistics=r.groupBy,this._query(r.url,e,a,this._queryErrorHandler)},getLowLevelAdminUnitData:function(t){function c(e){e.features.length>0&&(f=a._formatData(s,e.features),r.resolve(f))}var r=new e,i=new n,s=o.adminUnit.lowLevelUnitsQuery,u={},a=this,f=[],l;return i.where=s.whereField+" = '"+t+"' AND "+s.requiredField+" IS NOT NULL",i.returnGeometry=!1,i.outFields=s.outFields,i.orderByFields=s.orderBy,this._query(s.url,i,c,function(e){r.resolve([]),a._queryErrorHandler(e)}),r.promise},getFeaturesByGroupName:function(t,r){var i=new e,s=new n,o=this;return s.where=t.requiredField+" = '"+r+"'",s.geometryPrecision=0,s.returnGeometry=!0,s.outFields=["*"],this._query(t.url,s,function(e){e.features.length>0?i.resolve(e.features):i.resolve([])},function(e){i.resolve([]),o._queryErrorHandler(e)}),i.promise},getFeaturesByGroupNameAndCountry:function(t,r,i){var s=new e,o=new n,u=this;return o.where=t.requiredField+" = '"+r+"'"+" AND NAME_0 = '"+i+"'",o.geometryPrecision=0,o.returnGeometry=!0,o.outFields=["*"],this._query(t.url,o,function(e){e.features.length>0?s.resolve(e.features):s.resolve([])},function(e){s.resolve([]),u._queryErrorHandler(e)}),s.promise},getMillByEntityId:function(t){var r=new e,i=new n,s=this;return i.where="Entity_ID = '"+t+"'",i.geometryPrecision=2,i.returnGeometry=!0,i.outFields=["*"],this._query(o.millPoints.url,i,function(e){e.features.length===1?r.resolve(e.features[0]):r.resolve(!1)},function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getMillByWriId:function(t){var r=new e,i=new n,s=this;return i.where="wri_id = '"+t+"'",i.geometryPrecision=2,i.returnGeometry=!0,i.outFields=["*"],this._query(o.millPoints.url,i,function(e){e.features.length===1?r.resolve(e.features[0]):r.resolve(!1)},function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getFeatureById:function(t,r){var i=new e,s=new n,o=this;return s.objectIds=[r],s.geometryPrecision=0,s.returnGeometry=!0,s.outFields=["*"],this._query(t,s,function(e){e.features.length===1&&i.resolve(e.features[0])},function(e){i.resolve(!1),o._queryErrorHandler(e)}),i.promise},getFeaturesByScheme:function(t,r){function l(e){e.features.length>0&&(f=a._formatData(i,e.features),s.resolve(f))}var i=o.certifiedArea.schemeQuery,s=new e,u=new n,a=this,f=[];return u.where=i.whereField+" = '"+t+"' AND "+i.secondaryWhereField+" = '"+r+"'",u.returnGeometry=!1,u.outFields=i.outFields,u.orderByFields=i.orderBy,this._query(i.url,u,l,function(e){s.resolve(!1),a._queryErrorHandler(e)}),s.promise},getMillPointData:function(){function a(e){e.features.length>0&&(u=s._formatData(t,e.features),r.resolve(u))}var t=o.millPoints,r=new e,i=new n,s=this,u=[];return i.where="mill_name_ <> 'Unknown'",i.returnGeometry=!1,i.outFields=t.outFields,i.orderByFields=t.orderBy,this._query(t.url,i,a,function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getFeaturesByCommodity:function(t){function l(e){e.features.length>0&&(a=u._formatData(r,e.features),i.resolve(a))}var r=o.commercialEntity.commodityQuery,i=new e,s=new n,u=this,a=[],f;return f=t==="Mining concession"?r.whereField+" = '"+t+"'":r.whereField+" = '"+t+"'",s.where=f,s.returnGeometry=!1,s.outFields=r.outFields,s.orderByFields=r.orderBy,this._query(r.url,s,l,function(e){i.resolve(!1),u._queryErrorHandler(e)}),i.promise},zoomToFeatures:function(e,t){var i=new n,s;i.where=e.whereField+" = '"+t+"'",i.maxAllowableOffset=3e3,i.returnGeometry=!0,i.geometryPrecision=0,this._query(e.url,i,function(e){e.features.length>0&&(s=r.graphicsExtent(e.features),app.map.setExtent(s,!0))},this._queryErrorHandler)},_formatData:function(e,n){var r={},i=[],s,u;t.forEach(n,function(t){u=t.attributes,s=u[e.requiredField]||o.noNameField,r.hasOwnProperty(s)?r[s].children.push({label:u[e.labelField],value:u[e.valueField]}):(r[s]={label:s,value:u[e.valueField],children:[]},r[s].children.push({label:u[e.labelField],value:u[e.valueField]}))});for(var a in r)a!==o.noNameField&&i.push(r[a]);return r[o.noNameField]&&i.push(r[o.noNameField]),i},_query:function(e,t,n,r){var s=new i(e);s.execute(t,n,r)},_queryErrorHandler:function(e){console.error(e)}}}),define("utils/AlertsHelper",["lodash","dojo/fx","dojo/_base/fx","dojo/Deferred","components/alertsForm/AlertsForm","components/alertsDialog/alertsDialog","analysis/WizardStore","analysis/Query","analysis/config","map/config"],function(e,t,n,r,i,s,o,u,a,f){var l,c,h=a.STORE_KEYS,p={"Logging concession":10,"Mining concession":26,"Wood fiber plantation":28,"Oil palm concession":32,"RSPO Oil palm concession":27},d=!1,v,m,g,y,b=this;return v=function(){c=c||new s},m=function(e){var t,r=app.map.extent.getCenter();return e=e||0,duration=500,n.animateProperty({node:document.getElementById("alerts-form-container"),properties:{width:e},duration:duration,onEnd:function(){d=!d}})},_toggle=function(){return o.set(h.selectedCustomFeatures,[]),d?m(0):m(460)},_getFeatureFromPopup=function(t){var n,i=t.target,s=i.dataset?i.dataset.type:i.getAttribute("data-type"),o=i.dataset?i.dataset.label:i.getAttribute("data-label"),a=i.dataset?i.dataset.id:i.getAttribute("data-id"),l,c,h=this;s==="AdminBoundary"?(c=f.adminUnitsLayer.layerId,l=f.adminUnitsLayer.url+"/"+c):s==="CertScheme"?(c=f.commercialEntitiesLayer.layerId,l=f.commercialEntitiesLayer.url+"/"+c):s==="MillPoint"?n=u.getMillByWriId(a):s==="WDPA"?(c=f.palHelper.layerId,l=f.palHelper.url+"/"+c):s==="CustomGraphic"?(n=new r,c=app.map.getLayer(f.customGraphicsLayer.id),n.resolve(e.find(c.graphics,function(e){return e.attributes.WRI_ID===parseInt(a)})||!1)):p[s]!==undefined&&(c=p[s],l=f.oilPerm.url+"/"+c);if(n===undefined&&l!==undefined)n=u.getFeatureById(l,a);else if(n===undefined)throw new Error("Could not identify feature from event data.");return n},o.registerCallback(h.alertsDialogActive,v),{toggleAlertsForm:function(){return l=l||new i({},"alerts-form"),_toggle()},isOpen:function(){return d},subscribeFromPopup:function(e){var t=e.target,n=(t.dataset?t.dataset.type:t.getAttribute("data-type"))==="CustomGraphic";b._getFeatureFromPopup(e).then(function(e){if(!e)throw new Error("Could not identify feature from event data.");o.set(h.alertsDialogActive,!0),o.set(h.selectedCustomFeatures,n?[e]:[]),o.set(h.selectedPresetFeature,n?null:e)}),app.map.infoWindow.hide()}}}),define("actions/WizardActions",["utils/assert","analysis/config","analysis/WizardStore"],function(e,t,n){"use strict";var r=t.STORE_KEYS;return{removeSelectedFeatureByField:function(t,i){e(t&&i,"Invalid Parameters for 'WizardActions.removeSelectedFeatureByField'");var s=n.get(r.selectedCustomFeatures),o,u;o=s.some(function(e,n){if(e.attributes[t]===i)return s.splice(n,1),!0}),o&&n.set(r.selectedCustomFeatures,s)},addSelectedFeatures:function(t){e(t!==undefined,"Invalid Parameters for 'WizardActions.addSelectedFeature'");var i=n.get(r.selectedCustomFeatures);i=i.concat(t),n.set(r.selectedCustomFeatures,i)},addCustomFeatures:function(t){e(t!==undefined,"Invalid Parameters for 'WizardActions.addCustomFeatures'");var i=n.get(r.customFeatures);i=i.concat(t),n.set(r.customFeatures,i)},clearSelectedCustomFeatures:function(){n.set(r.selectedCustomFeatures,[])},proceedToNextStep:function(){n.set(r.userStep,n.get(r.userStep)+1)},setAreaOfInterest:function(t){e(t!==undefined,"Invalid Parameters for 'WizardActions.setAreaOfInterest'."),n.set(r.areaOfInterest,t)}}}),define("components/wizard/StepOne",["react","analysis/config","analysis/WizardStore","actions/WizardActions"],function(e,t,n,r){function c(){return{completed:!0,selectedOption:n.get(l.areaOfInterest)||u.id,previousAreaOfInterest:undefined}}var i=t.stepOne,s=i.option1,o=i.option2,u=i.option3,a=i.option4,f=i.option5,l=t.STORE_KEYS;return e.createClass({getInitialState:function(){return c()},componentDidMount:function(){r.setAreaOfInterest(u.id),n.registerCallback(l.areaOfInterest,this.areaOfInterestUpdated)},areaOfInterestUpdated:function(){var e=n.get(l.areaOfInterest);this.setState({selectedOption:e})},componentWillReceiveProps:function(e){if(e.isResetting){var t=c();this.replaceState(t)}},render:function(){return e.createElement("div",{className:"step"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-title"},i.title),e.createElement("p",{className:"step-one-main-description"},i.description),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:s.id,checked:this.state.selectedOption===s.id}),e.createElement("label",{htmlFor:s.id},s.label),e.createElement("p",{className:"step-one-option-description"},s.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:o.id,checked:this.state.selectedOption===o.id}),e.createElement("label",{htmlFor:o.id},o.label),e.createElement("p",{className:"step-one-option-description"},o.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:u.id,checked:this.state.selectedOption===u.id}),e.createElement("label",{htmlFor:u.id},u.label),e.createElement("p",{className:"step-one-option-description"},u.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:a.id,checked:this.state.selectedOption===a.id}),e.createElement("label",{htmlFor:a.id},a.label),e.createElement("p",{className:"step-one-option-description"},a.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:f.id,checked:this.state.selectedOption===f.id}),e.createElement("label",{htmlFor:f.id},f.label),e.createElement("p",{className:"step-one-option-description"},f.description))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"next-button-container",onClick:this.proceed},e.createElement("span",{className:"next-button"},"Next"))))},changeSelection:function(e){r.setAreaOfInterest(e.target.id)},resetSelectedFeatures:function(){var e=this.state.previousAreaOfInterest||!1,t=n.get(l.areaOfInterest);e&&e!==t?r.clearSelectedCustomFeatures():this.setState({previousAreaOfInterest:t})},proceed:function(){this.resetSelectedFeatures(),r.proceedToNextStep()}})}),define("map/CoordinatesModal",["map/config","map/Symbols","utils/GeoHelper","analysis/config","analysis/WizardStore","actions/WizardActions","dojo/on","dojo/dom-class","esri/graphic","esri/geometry/Point"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l,c=r.STORE_KEYS,h={toggle:function(){u.toggle("coordinates-modal","active"),l?(l.remove(),l=undefined):l=o.once(document.querySelector("#coordinates-modal .close-icon"),"click",this.toggle)},close:function(){return l&&(l.remove(),l=undefined),u.remove("coordinates-modal","active")},resetForm:function(){document.getElementById("coordsModalLatitiude").value="",document.getElementById("coordsModalLongitude").value=""},savePoint:function(){var t=parseFloat(document.getElementById("coordsModalLatitiude").value),r=parseFloat(document.getElementById("coordsModalLongitude").value),i=e.coordinatesDialog.errors,o=n.nextCustomFeatureId(),u={},a=[],f;(t===""||isNaN(t)||t>90||t<-90)&&a.push(i.invalidLatitude),(r===""||isNaN(r)||r>180||r<-180)&&a.push(i.invalidLongitude);if(a.length>0){alert(a.join("\n"));return}u[e.uploader.labelField]="ID - "+o,u.WRI_ID=o,u.isRSPO=!1,f=n.generatePointGraphicFromGeometric(r,t,u),s.addCustomFeatures([f]),app.map.centerAndZoom(f.geometry,7),this.resetForm(),this.close()}};return h}),define("components/wizard/NestedList",["react"],function(e){function n(){return{filter:""}}var t=e.createClass({displayName:"ListItem",propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.number.isRequired,click:e.PropTypes.func.isRequired,filter:e.PropTypes.string.isRequired},render:function(){var t=this.props.activeListGroupValue!==undefined&&this.props.activeListGroupValue==this.props.value,n;return this.props.filter===""||this._searchChildrenForMatches(this.props.children,this.props.filter)?(n=t?"active":"",e.createElement("div",{className:"wizard-list-item"},e.createElement("span",{"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label),this.props.children?this.props.children.map(this._childrenMapper.bind(this,t)):undefined)):(n="wizard-list-item"+(this.props.label.toLowerCase().search(this.props.filter)>-1?"":" hidden")+(t?" active":""),e.createElement("div",{className:n},e.createElement("span",{"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label)))},_childrenMapper:function(t,n,r){var i=n.label.toLowerCase(),s="wizard-list-child-item"+(i.search(this.props.filter)>-1?"":" hidden");if(this.props.activeListItemValues.indexOf(n.value)!=-1||t)s+=" active";return e.createElement("div",{className:s,key:r},e.createElement("span",{"data-value":n.value,"data-type":"individual",onClick:this._click},n.label))},_searchChildrenForMatches:function(e,t){return e.some(function(e){return e.label.toLowerCase().search(t)>-1?!0:!1})},_click:function(e){this.props.click(e.target)}}),r=e.createClass({displayName:"NestedList",getInitialState:function(){return n()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(n())},render:function(){return e.createElement("div",{className:"nested-list"},e.createElement("div",{className:"searchBox relative"+(this.props.data.length>0?"":" hidden")},e.createElement("div",{className:"nested-list-search-icon"}),e.createElement("input",{placeholder:this.props.placeholder,type:"text",value:this.state.filter,onChange:this._setFilter})),e.createElement("div",{className:"list-container"+(this.state.filter!==""?" filtered":"")},this.props.data.map(this._mapper,this)))},_mapper:function(n,r){return e.createElement(t,{key:r,label:n.label||"No Name",value:n.value,click:this.props.click,children:n.children,activeListItemValues:this.props.activeListItemValues,activeListGroupValue:this.props.activeListGroupValue,filter:this.state.filter})},_setFilter:function(e){this.setState({filter:e.target.value.toLowerCase()})}});return r}),define("components/wizard/MillPoint",["react","map/config","dojo/topic","dojo/query","map/Uploader","dojo/dom-class","dojo/_base/array","analysis/Query","analysis/config","utils/GeoHelper","map/CoordinatesModal","analysis/WizardStore","components/wizard/NestedList","components/featureList/FeatureList"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=a.millPoints,v=a.STORE_KEYS,m,g=function(){return{nestedListData:[],activeListItemValues:[],selectedCommodity:d.commodityOptions[0].value,showCustomFeaturesList:!1,selectedCustomFeatures:c.get(v.selectedCustomFeatures),customFeatures:y()}},y=function(){var e=c.get(v.customFeatures);return e.filter(function(e){return e.geometry.type==="point"})};return e.createClass({getInitialState:function(){return g()},componentDidMount:function(){m=c.get(v.userStep),c.registerCallback(v.userStep,this.userChangedSteps),c.registerCallback(v.customFeatures,this.customFeaturesUpdated),c.registerCallback(v.selectedCustomFeatures,this.selectedCustomFeaturesUpdated)},shouldComponentUpdate:function(){return c.get(v.userStep)===2&&c.get(v.areaOfInterest)===a.stepOne.option5.id},customFeaturesUpdated:function(){var e=y();this.setState({customFeatures:e})},selectedCustomFeaturesUpdated:function(){var e=c.get(v.selectedCustomFeatures);this.setState({selectedCustomFeatures:e})},userChangedSteps:function(){var e=c.get(v.areaOfInterest),r=c.get(v.userStep);e==="millPointOption"&&r===2&&this.state.nestedListData.length===0&&this._loadMillPoints();if(e==="millPointOption"&&m===1&&r===2){var i=app.map.getLayer(t.mill.id);i&&(i.visible||(n.publish("showMillPoints"),n.publish("toggleItemInLayerList","mill"))),this.setState({activeListItemValues:[]})}m=c.get(v.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(g())},render:function(){return e.createElement("div",{className:"mill-point",id:"mill-point"},e.createElement("div",{className:"mill-list-options back-light-gray relative"},e.createElement("div",{className:"mill-list-toggle-indicator mill-"+(this.state.showCustomFeaturesList?"custom-list":"known-list")}),e.createElement("div",{className:"relative select-mill-list-button inline-block "+(this.state.showCustomFeaturesList?"":"active"),id:"selectFromList",onClick:this.toggleList},d.selectFromListButton),e.createElement("div",{className:"relative select-mill-list-button inline-block "+(this.state.showCustomFeaturesList?"active":""),id:"selectFromCustom",onClick:this.toggleList},d.selectFromCustomListButton)),e.createElement("div",{className:this.state.showCustomFeaturesList?"hidden":""},e.createElement("p",{className:"instructions"},d.selectInstructions),e.createElement("div",{className:"select-container"},e.createElement("select",{id:"mill-select",className:"mill-select",value:this.state.selectedCommodity,onChange:this._loadMillPoints},d.commodityOptions.map(this._selectMapper,this))),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")}," ",d.listInstructions," "),e.createElement(h,{data:this.state.nestedListData,click:this._millPointSelected,placeholder:"Search mill points...",activeListItemValues:this.state.activeListItemValues,isResetting:this.props.isResetting})),e.createElement("div",{className:this.state.showCustomFeaturesList?"":"hidden"},e.createElement("p",{className:"instructions"},d.instructions),e.createElement("div",{className:"drawing-tools"},e.createElement("div",{className:"drawing-tool-button",id:"enterCoords",onClick:this.drawToolClicked},d.enterCoordinatesButton),e.createElement("div",{className:"drawing-tool-button",id:"upload",onClick:this.drawToolClicked},d.uploadButton)),e.createElement(p,{features:this.state.customFeatures,selectedFeatures:this.state.selectedCustomFeatures,rspoChecks:!0,showClear:!0})))},_selectMapper:function(t){return e.createElement("option",{value:t.value}," ",t.label," ")},toggleList:function(e){var t=e.target.id,n;n=t==="selectFromCustom"?!0:!1,n||(l.close(),i.close()),this.state.showCustomFeaturesList!==n&&(this.setState({showCustomFeaturesList:n}),this._localReset())},drawToolClicked:function(e){var t=e.target.id;switch(t){case"enterCoords":i.close(),l.toggle();break;case"upload":l.close(),i.toggle()}},_loadMillPoints:function(){this.setState({isLoading:!0});var e=this;u.getMillPointData().then(function(t){t&&e.setState({nestedListData:t,isLoading:!1})})},_millPointSelected:function(e){var n=e.getAttribute("data-type"),r=e.getAttribute("data-value"),i=this.state.selectedCustomFeatures,s,l,h=this,p,d,m,g;n!=="group"&&r&&(l=app.map.getLayer(t.wizardGraphicsLayer.id),l&&u.getMillByWriId(r).then(function(t){g=e.innerText||e.innerHTML;if(h.state.activeListItemValues.indexOf(r)!=-1){var n=h.state.activeListItemValues.indexOf(r);s=h.state.activeListItemValues.slice(0),s.splice(n,1),h.setState({activeListItemValues:s}),d=t.attributes.OBJECTID,o.forEach(i,function(e,t){d===e.attributes.OBJECTID&&(p=t)}),i.splice(p,1),o.some(l.graphics,function(e){return e.attributes.OBJECTID===d?(l.remove(e),!0):!1})}else t.attributes[a.stepTwo.labelField]=g,m=f.preparePointAsPolygon(t),m=f.applySelectionSymbolToFeature(m),l.add(m),s=h.state.activeListItemValues.concat([r]),h.setState({activeListItemValues:s}),i.push(m);i.length>0?c.set(v.selectedCustomFeatures,i):c.set(v.selectedCustomFeatures,[])}))},_localReset:function(){var e=app.map.getLayer(t.wizardGraphicsLayer.id);c.set(v.selectedCustomFeatures,[]),e.clear(),this.setState({activeListItemValues:[]})}})}),define("components/wizard/AdminUnit",["react","map/config","map/Symbols","map/MapModel","analysis/Query","analysis/config","utils/GeoHelper","analysis/WizardStore","actions/WizardActions","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){function g(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1}}var p=s.adminUnit,d=s.STORE_KEYS,v,m,y=e.createClass({displayName:"AdminUnit",getInitialState:function(){return g()},componentDidMount:function(){r.applyTo("admin-unit"),u.registerCallback(d.userStep,this.userChangedSteps),v=u.get(d.userStep)},shouldComponentUpdate:function(){return u.get(d.userStep)===2&&u.get(d.areaOfInterest)===s.stepOne.option2.id},userChangedSteps:function(){var e=u.get(d.areaOfInterest),t=u.get(d.userStep);if(e==="adminUnitOption"&&t===2){var n=document.getElementById("country-select").value;n!=="NONE"&&v===1&&l.publish("setAdminBoundariesDefinition",n)}v=u.get(d.userStep)},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(g()),document.getElementById("country-select").value="NONE")},render:function(){return e.createElement("div",{className:"admin-unit",id:"admin-unit"},e.createElement("p",{className:"instructions"}," ",p.instructions," "),e.createElement("div",{className:"select-container"},e.createElement("select",{id:"country-select",className:"country-select",onChange:this._loadAdminUnits,"data-bind":'options: allCountries, optionsText: "label", optionsValue: "value"'}),e.createElement("span",{className:"loading-wheel"+(this.state.isLoading?"":" hidden")})),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0)?"":" hidden"},p.instructionsPartTwo),e.createElement(f,{data:this.state.nestedListData,click:this._lowLevelAdminUnitClick,placeholder:"Search administrative units...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_loadAdminUnits:function(e){var t=e.target.value,n=this;if(t==="NONE"){l.publish("setAdminBoundariesDefinition"),this.setState({nestedListData:[]});return}this.setState({isLoading:!0}),l.publish("setAdminBoundariesDefinition",t),i.getLowLevelAdminUnitData(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_lowLevelAdminUnitClick:function(e){var r=app.map.getLayer(t.wizardGraphicsLayer.id),u=parseInt(e.getAttribute("data-value")),f=e.getAttribute("data-type"),l=e.innerText||e.innerHTML,c,d=this,v;f!==m&&(a.clearSelectedCustomFeatures(),r.clear()),m=f;if(f==="group"){c=this.state.activeListGroupValue;if(c===u)a.removeSelectedFeatureByField(p.countryBoundaries.requiredField,l),o.removeGraphicByField(t.wizardGraphicsLayer.id,p.countryBoundaries.requiredField,l),d.setState({activeListGroupValue:undefined});else{a.clearSelectedCustomFeatures(),d.setState({activeListItemValues:[],activeListGroupValue:u}),r.clear();var g=document.getElementById("country-select").value;console.log(g),i.getFeaturesByGroupNameAndCountry(p.countryBoundaries,l,g).then(function(e){e&&r&&(e.forEach(function(e){e.attributes[s.stepTwo.labelField]=l,v=new h(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),r.add(v)}),a.addSelectedFeatures(e))})}}else if(u){c=this.state.activeListItemValues;var y=c.indexOf(u);y>-1?(c.splice(y,1),a.removeSelectedFeatureByField("OBJECTID",u),o.removeGraphicByField(t.wizardGraphicsLayer.id,"OBJECTID",u),d.setState({activeListItemValues:c,activeListGroupValue:undefined})):(c.push(u),d.setState({activeListItemValues:c,activeListGroupValue:null}),i.getFeatureById(p.lowLevelUnitsQuery.url,u).then(function(e){e.attributes[s.stepTwo.labelField]=l,v=new h(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),a.addSelectedFeatures([v]),r&&r.add(v)}))}}});return y}),define("components/wizard/CustomArea",["react","analysis/config","analysis/WizardStore","esri/graphic","esri/toolbars/draw","dojo/dom","dojo/query","dojo/dom-class","map/config","map/MapModel","map/Uploader","map/Symbols","utils/GeoHelper","components/featureList/FeatureList"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function g(){return{graphics:n.get(m.customFeatures),selectedGraphics:n.get(m.selectedCustomFeatures)}}var d,v,m=t.STORE_KEYS;return e.createClass({getInitialState:function(){return g()},componentDidMount:function(){d=new i(app.map),d.on("draw-end",this._drawComplete),n.registerCallback(m.customFeatures,this.graphicsListUpdated),n.registerCallback(m.selectedCustomFeatures,function(){this.setState({selectedGraphics:n.get(m.selectedCustomFeatures)})}.bind(this)),this.setState(g())},shouldComponentUpdate:function(){return n.get(m.userStep)===2&&n.get(m.areaOfInterest)===t.stepOne.option1.id},graphicsListUpdated:function(){var e=n.get(m.customFeatures);this.setState({graphics:e})},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(g()),this._deactivateToolbar(),this._removeActiveClass())},render:function(){return e.createElement("div",{className:"custom-area"},e.createElement("p",{className:"drawing-instructions"}," ",t.customArea.instructions," "),e.createElement("div",{className:"drawing-tools"},e.createElement("div",{className:"drawing-tool-button",id:"draw-freehand","data-label":t.customArea.freehandLabel,onClick:this._activateToolbar},t.customArea.freehandLabel),e.createElement("div",{className:"drawing-tool-button",id:"draw-polygon","data-label":t.customArea.polyLabel,onClick:this._activateToolbar},t.customArea.polyLabel),e.createElement("div",{className:"drawing-tool-button",id:"draw-upload","data-label":t.customArea.uploadLabel,onClick:l.toggle.bind(l)},t.customArea.uploadLabel)),e.createElement("div",{className:"custom-graphics-list-container"},e.createElement("p",{className:"drawing-instructions"},t.customArea.instructionsPartTwo),e.createElement(p,{features:this.state.graphics,selectedFeatures:this.state.selectedGraphics})))},_activateToolbar:function(e){this._removeActiveClass(),this.setState({showUploadTools:!1});if(v===e.target.id){this._deactivateToolbar();return}v=e.target.id;var n;e.target.getAttribute("data-label")?n=e.target.getAttribute("data-label"):e.target.parentElement.getAttribute("data-label")?n=e.target.parentElement.getAttribute("data-label"):n=e.target.parentElement.parentElement.getAttribute("data-label");switch(n){case t.customArea.freehandLabel:d.activate(i.FREEHAND_POLYGON);break;case t.customArea.polyLabel:d.activate(i.POLYGON);break;default:}u.add(e.target,"active"),f.set("drawToolsEnabled",!0)},_drawComplete:function(e){this._removeActiveClass(),this._deactivateToolbar();if(!e.geometry)return;var i=h.nextCustomFeatureId(),s={WRI_ID:i},o;s[t.stepTwo.labelField]="ID - "+i+": Custom drawn feature",o=new r(e.geometry,c.getPolygonSymbol(),s),n.set(m.customFeatures,n.get(m.customFeatures).concat([o]))},_deactivateToolbar:function(){d.deactivate(),v=undefined,f.set("drawToolsEnabled",!1)},_removeActiveClass:function(){o(".drawing-tools .drawing-tool-button").forEach(function(e){u.remove(e,"active")})}})}),define("components/wizard/CertifiedArea",["react","map/config","map/Symbols","analysis/Query","analysis/config","utils/GeoHelper","analysis/WizardStore","actions/WizardActions","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,i,s,o,u,a,f,l,c){function m(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1,selectedCommodity:h.commodityOptions[0].value,selectedScheme:h.certificationOptions[1].value}}var h=i.certifiedArea,p=i.STORE_KEYS,d,v;return e.createClass({getInitialState:function(){return m()},componentDidMount:function(){o.registerCallback(p.userStep,this.userChangedSteps),v=o.get(p.userStep)},shouldComponentUpdate:function(){return o.get(p.userStep)===2&&o.get(p.areaOfInterest)===i.stepOne.option4.id},userChangedSteps:function(){var e=o.get(p.areaOfInterest),t=o.get(p.userStep);if(e==="certifiedAreaOption"&&this.state.selectedScheme!=="NONE"&&t===2&&v===1){f.publish("setCertificationSchemeDefinition",this.state.selectedScheme);if(this.state.nestedListData.length===0){var n={target:{value:h.certificationOptions[1].value}};this._loadFeatures(n)}}v=o.get(p.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(m())},render:function(){var t=o.get(p.areaOfInterest),n=o.get(p.userStep);if(n===2&&t==="certifiedAreaOption"){switch(this.state.selectedCommodity){case"Oil palm concession":f.publish("filterConcessionsLegendItems",2)}this.state.selectedCommodity==="NONE"?f.publish("hideConcessionsLegend"):f.publish("showConcessionsLegend")}return e.createElement("div",{className:"certified-area"},e.createElement("p",{className:"instructions"}," ",h.instructions," "),e.createElement("select",{className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._updateCommodity},h.commodityOptions.map(this._selectMapper,this)),e.createElement("p",{className:"instructions"}," ",h.instructionsPartTwo," "),e.createElement("select",{className:"certification-scheme-select",value:this.state.selectedScheme,onChange:this._loadFeatures},h.certificationOptions.map(this._selectMapper,this)),e.createElement("span",{className:"loading-wheel"+(this.state.isLoading?"":" hidden")}),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},h.instructionsPartThree),e.createElement(a,{data:this.state.nestedListData,click:this._schemeClicked,placeholder:"Search certified areas...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.createElement("option",{value:t.value},t.label)},_updateCommodity:function(e){this.setState({selectedCommodity:e.target.value})},_updateScheme:function(e){this.setState({selectedScheme:e,isLoading:!0})},_loadFeatures:function(e){var t=e.target.value,n=this;if(t==="NONE"){f.publish("setCertificationSchemeDefinition"),this.setState({nestedListData:[],selectedScheme:t});return}this._updateScheme(t),f.publish("setCertificationSchemeDefinition",t),r.getFeaturesByScheme(t,this.state.selectedCommodity).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_schemeClicked:function(e){var o=app.map.getLayer(t.wizardGraphicsLayer.id),a=parseInt(e.getAttribute("data-value")),f=e.getAttribute("data-type"),l=e.innerText||e.innerHTML,p,v=this,m;f!==d&&(u.clearSelectedCustomFeatures(),o.clear()),d=f;if(f==="group")p=this.state.activeListGroupValue,p===a?(u.removeSelectedFeatureByField(h.groupQuery.requiredField,l),s.removeGraphicByField(t.wizardGraphicsLayer.id,h.groupQuery.requiredField,l),v.setState({activeListGroupValue:undefined})):(u.clearSelectedCustomFeatures(),v.setState({activeListItemValues:[],activeListGroupValue:a}),o.clear(),r.getFeaturesByGroupName(h.groupQuery,l).then(function(e){o=app.map.getLayer(t.wizardGraphicsLayer.id),e&&o&&(e.forEach(function(e){e.attributes[i.stepTwo.labelField]=l,m=new c(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),o.add(m)}),u.addSelectedFeatures(e))}));else if(a){p=this.state.activeListItemValues;var g=p.indexOf(a);g>-1?(p.splice(g,1),u.removeSelectedFeatureByField("OBJECTID",a),s.removeGraphicByField(t.wizardGraphicsLayer.id,"OBJECTID",a),v.setState({activeListItemValues:p,activeListGroupValue:undefined})):(p.push(a),v.setState({activeListItemValues:p,activeListGroupValue:null}),r.getFeatureById(h.schemeQuery.url,a).then(function(e){e.attributes[i.stepTwo.labelField]=l,m=new c(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),u.addSelectedFeatures([m]),o=app.map.getLayer(t.wizardGraphicsLayer.id),o&&o.add(m)}))}}})}),define("components/wizard/CommercialEntity",["react","map/config","map/Symbols","analysis/Query","analysis/config","utils/GeoHelper","analysis/WizardStore","actions/WizardActions","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,i,s,o,u,a,f,l,c){function m(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:undefined,isLoading:!1,selectedCommodity:h.commodityOptions[0].value}}var h=i.commercialEntity,p=i.STORE_KEYS,d,v;return e.createClass({getInitialState:function(){return m()},componentDidMount:function(){o.registerCallback(p.userStep,this.userChangedSteps),d=o.get(p.userStep)},shouldComponentUpdate:function(){return o.get(p.userStep)===2&&o.get(p.areaOfInterest)===i.stepOne.option3.id},userChangedSteps:function(){var e=o.get(p.areaOfInterest),t=o.get(p.userStep);e==="commercialEntityOption"&&this.state.selectedCommodity!=="NONE"&&d===1&&t===2&&f.publish("setCommercialEntityDefinition",this.state.selectedCommodity),d=o.get(p.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(m())},render:function(){var t=o.get(p.areaOfInterest),n=o.get(p.userStep);if(n===2&&t==="commercialEntityOption"){switch(this.state.selectedCommodity){case"Logging concession":f.publish("filterConcessionsLegendItems",0);break;case"Mining concession":f.publish("filterConcessionsLegendItems",1);break;case"Oil palm concession":f.publish("filterConcessionsLegendItems",2);break;case"Wood fiber plantation":f.publish("filterConcessionsLegendItems",3)}this.state.selectedCommodity==="NONE"?f.publish("hideConcessionsLegend"):f.publish("showConcessionsLegend")}return e.createElement("div",{className:"commercial-entity"},e.createElement("p",{className:"instructions"}," ",h.instructions," "),e.createElement("select",{className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._loadFeatures},h.commodityOptions.map(this._selectMapper,this)),e.createElement("span",{className:"loading"+(this.state.isLoading?"":" hidden")}),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},h.instructionsPartTwo),e.createElement(a,{data:this.state.nestedListData,click:this._commodityClicked,placeholder:"Search commercial entities",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.createElement("option",{value:t.value},t.label)},_loadFeatures:function(e){var t=e.target.value,n=this;if(t==="NONE"){f.publish("setCommercialEntityDefinition"),this.setState({nestedListData:[],selectedCommodity:t});return}this.setState({selectedCommodity:t,isLoading:!0}),f.publish("setCommercialEntityDefinition",t),r.getFeaturesByCommodity(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_commodityClicked:function(e){var a=app.map.getLayer(t.wizardGraphicsLayer.id),f=parseInt(e.getAttribute("data-value")),l=e.getAttribute("data-type"),d=o.get(p.selectedCustomFeatures),m=e.innerText||e.innerHTML,g=this,y;v!==l&&(u.clearSelectedCustomFeatures(),a.clear()),v=l;if(l==="group"){if(m===i.noNameField)return;var b=this.state.activeListGroupValue;f===b?(u.removeSelectedFeatureByField(h.groupQuery.requiredField,m),s.removeGraphicByField(t.wizardGraphicsLayer.id,h.groupQuery.requiredField,m),g.setState({activeListGroupValue:undefined})):(u.clearSelectedCustomFeatures(),g.setState({activeListItemValues:[],activeListGroupValue:f}),a.clear(),r.getFeaturesByGroupName(h.groupQuery,m).then(function(e){e&&a&&(e.forEach(function(e){e.attributes[i.stepTwo.labelField]=m,y=new c(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),a.add(y)}),u.addSelectedFeatures(e))}))}else if(f){var w=this.state.activeListItemValues,E=w.indexOf(f);E>-1?(w.splice(E,1),u.removeSelectedFeatureByField("OBJECTID",f),s.removeGraphicByField(t.wizardGraphicsLayer.id,"OBJECTID",f),g.setState({activeListItemValues:w,activeListGroupValue:undefined})):(w.push(f),g.setState({activeListItemValues:w,activeListGroupValue:undefined}),r.getFeatureById(h.commodityQuery.url,f).then(function(e){e.attributes[i.stepTwo.labelField]=m,y=new c(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),u.addSelectedFeatures([y]),a&&a.add(y)}))}}})}),define("components/wizard/StepTwo",["react","analysis/config","analysis/WizardStore","actions/WizardActions","components/wizard/MillPoint","components/wizard/AdminUnit","components/wizard/CustomArea","components/wizard/CertifiedArea","components/wizard/CommercialEntity"],function(e,t,n,r,i,s,o,u,a){function y(){return{completed:!1,currentSelectionLabel:b()}}function b(){var e=n.get(g.selectedCustomFeatures);return e.length>0?e.map(function(e){return e.attributes.WRI_label}).join(","):"none"}var f=t.stepTwo.title,l=t.stepTwo.customArea,c=t.stepTwo.adminUnit,h=t.stepTwo.millPoint,p=t.stepTwo.certArea,d=t.stepTwo.commArea,v=t.stepTwo.labelField,m={},g=t.STORE_KEYS;return m[l]="Create a custom area",m[c]="Administrative unit",m[h]="Mill point",m[p]="Certified area",m[d]="Commercial entity",e.createClass({getInitialState:function(){return y()},componentDidMount:function(){n.registerCallback(g.selectedCustomFeatures,this.analysisAreaUpdated)},analysisAreaUpdated:function(){var e=n.get(g.selectedCustomFeatures);e.length>0?this.setState({completed:!0,currentSelectionLabel:b()}):this.replaceState(y())},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(y())},render:function(){var r=n.get(g.areaOfInterest);return e.createElement("div",{className:"step"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-title"},f+" - "+m[r]),e.createElement("div",{className:"s2-tools "+(r!==h?"hidden":"")},e.createElement(i,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==c?"hidden":"")},e.createElement(s,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==l?"hidden":"")},e.createElement(o,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==p?"hidden":"")},e.createElement(u,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==d?"hidden":"")},e.createElement(a,e.__spread({},this.props)))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"selected-analysis-area"},e.createElement("div",{className:"current-selection-label"},t.stepTwo.currentFeatureText),e.createElement("div",{className:"current-selection",title:this.state.currentSelectionLabel},this.state.currentSelectionLabel)),e.createElement("div",{onClick:this.checkRequirements,className:"next-button-container "+(this.state.completed?"":"disabled")},e.createElement("span",{className:"next-button"},"Next"))))},checkRequirements:function(){this.state.completed&&r.proceedToNextStep()}})}),define("components/wizard/WizardCheckbox",["react","dojo/topic"],function(e,t){return e.createClass({propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.string.isRequired},getInitialState:function(){return{active:this.props.defaultChecked||!1}},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(this.getInitialState())},componentDidUpdate:function(e,t){this.props.change&&t.active!==this.state.active&&this.props.change(this.state.active)},render:function(){var t="wizard-checkbox"+(this.state.active?" active":"");return e.createElement("div",{className:"wizard-checkbox-container"},e.createElement("div",{className:t,"data-value":this.props.value},e.createElement("span",{className:"custom-check",onClick:this.toggle},e.createElement("span",null)),e.createElement("a",{className:"wizard-checkbox-label",onClick:this.toggle},this.props.label),this.props.noInfoIcon?null:e.createElement("span",{onClick:this.showInfo,className:"layer-info-icon",dangerouslySetInnerHTML:{__html:"<svg class='info-icon-svg'><use xlink:href='#shape-info'></use></svg>"}})))},toggle:function(){this.setState({active:!this.state.active})},showInfo:function(e){switch(this.props.value){case"peat":this.props.infoDivClass="forest-and-land-cover-peat-lands";break;case"treeDensity":this.props.infoDivClass="forest-and-land-cover-tree-cover-density";break;case"legal":this.props.infoDivClass="forest-and-land-cover-legal-classifications";break;case"protected":this.props.infoDivClass="conservation-protected-areas";break;case"carbon":this.props.infoDivClass="forest-and-land-cover-carbon-stocks";break;case"intact":this.props.infoDivClass="forest-and-land-cover-intact-forest-landscape";break;case"landCoverGlob":this.props.infoDivClass="forest-and-land-cover-land-cover-global";break;case"primForest":this.props.infoDivClass="forest-and-land-cover-primary-forest";break;case"suit":this.props.infoDivClass="land-use-oil-palm";break;case"rspo":this.props.infoDivClass="land-use-rspo-consessions";break;case"landCoverIndo":this.props.infoDivClass="forest-and-land-cover-land-cover-indonesia";break;case"landCoverAsia":this.props.infoDivClass="forest-and-land-cover-land-cover-south-east-asia";break;case"treeCoverLoss":this.props.infoDivClass="forest-change-tree-cover-change"}document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)}})}),define("components/wizard/StepThree",["react","analysis/config","analysis/WizardStore","components/wizard/WizardCheckbox"],function(e,t,n,r){function u(){return{completed:!1,currentSelectionLabel:a()}}function a(){var e=n.get(o.selectedCustomFeatures);return e.length>0?e.map(function(e){return e.attributes.WRI_label}).join(","):"none"}var i=t.stepThree,s=t.stepTwo.labelField,o=t.STORE_KEYS;return e.createClass({getInitialState:function(){return u()},componentDidMount:function(){n.registerCallback(o.selectedCustomFeatures,this.analysisAreaUpdated)},analysisAreaUpdated:function(){var e=n.get(o.selectedCustomFeatures);this.setState({currentSelectionLabel:a()})},componentDidUpdate:function(e){var t=n.get(o.areaOfInterest),r=n.get(o.userStep);t!=="millPointOption"&&e.currentStep===2&&r===3&&this._selectionMade()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(u())},shouldComponentUpdate:function(){return n.get(o.userStep)===3},render:function(){var s=n.get(o.areaOfInterest),u=n.get(o.selectedCustomFeatures),a=u.length>0&&u.some(function(e){return e.geometry.type==="point"});return e.createElement("div",{className:"step select-analysis"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-three-top"},e.createElement("div",{className:"step-title"},i.title),s===i.millPoint||s===i.customArea?this.createPointContent(a):null,e.createElement(r,{label:i.suit.label,value:i.suit.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.createElement("p",{className:"layer-description"},i.suit.description),e.createElement(r,{label:i.rspo.label,value:i.rspo.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.createElement("p",{className:"layer-description"},i.rspo.description),e.createElement("div",{className:s==="millPointOption"?"":"hidden",style:{position:"relative"}},e.createElement("div",{className:"coming-soon"},"Mill Point Risk Assessment Coming Soon!"),e.createElement(r,{label:i.mill.label,value:i.mill.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.createElement("p",{className:"layer-description"},i.mill.description)),e.createElement("div",{className:"step-sub-header"},i.forestChange.label),e.createElement("p",{className:"layer-description"},i.forestChange.description)),e.createElement("div",{className:"checkbox-list"},i.checkboxes.map(this._mapper,this))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"selected-analysis-area"},e.createElement("div",{className:"current-selection-label"},t.stepTwo.currentFeatureText),e.createElement("div",{className:"current-selection",title:this.state.currentSelectionLabel},this.state.currentSelectionLabel)),e.createElement("div",{onClick:this._proceed,className:"next-button-container "+(this.state.completed?"":"disabled")},e.createElement("span",{className:"next-button"},"Perform Analysis"))))},_mapper:function(t){return e.createElement(r,{label:t.label,value:t.value,change:this._selectionMade,isResetting:this.props.isResetting,defaultChecked:t.checked||!1,noInfoIcon:t.noInfoIcon||!1})},createPointContent:function(t){var r=n.get(o.areaOfInterest)===i.customArea,s=i.pointRadiusOptions.map(function(t){return e.createElement("option",{value:t.value},t.label)});return t?e.createElement("div",{className:"point-radius-select-container"},e.createElement("span",{className:"instructions"},i.pointRadiusDescription),e.createElement("select",{ref:"pointRadiusSelect",className:"point-radius-select"},s)):r?null:e.createElement("p",{className:"sub-title"},i.knownMillsDisclaimer)},_selectionMade:function(e){var t=this._checkRequirements();this.setState({completed:t})},_checkRequirements:function(){var e=!1,t=document.querySelectorAll(".select-analysis .wizard-checkbox.active"),r=n.get(o.areaOfInterest),i;if(t.length>0)if(t.length>1)e=!0;else{i=t[0].dataset?t[0].dataset.value:t[0].getAttribute("data-value");if(r==="millPointOption"||i!=="mill")e=!0}return e},_getPayload:function(){var e=document.querySelectorAll(".select-analysis .wizard-checkbox"),t=n.get(o.areaOfInterest),r={},i=this,s;return Array.prototype.forEach.call(e,function(e){s=e.dataset?e.dataset.value:e.getAttribute("data-value");if(t==="millPointOption"||s!=="mill")r[s]=e.className.search("active")>-1}),r},_proceed:function(){if(this.state.completed){var e=this._getPayload();n.set(o.analysisSets,e);var t=this.refs.pointRadiusSelect;if(t){var r=t.getDOMNode().value;n.set(o.analysisPointRadius,r)}this.props.callback.performAnalysis()}}})}),define("components/wizard/Intro",["react","analysis/config","actions/WizardActions"],function(e,t,n){var r=t.intro;return e.createClass({render:function(){return e.createElement("div",{className:"step"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-title"},r.title),e.createElement("div",{className:"step-one-main-description"},e.createElement("p",null,r.beginningText),e.createElement("ul",null,r.firstList.map(this._listMapper)),e.createElement("p",null,r.secondaryText),e.createElement("ul",null,r.secondList.map(this._listMapper)))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"next-button-container",onClick:n.proceedToNextStep},e.createElement("div",{className:"next-button"},"Next"))))},_listMapper:function(t){return e.createElement("li",null,t)}})}),define("map/LayerController",["map/config","map/MapModel","dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","utils/Hasher","utils/Analytics","esri/InfoTemplate","esri/graphic","esri/graphicsUtils","esri/tasks/query","esri/tasks/QueryTask","esri/layers/RasterFunction","esri/layers/LayerDrawingOptions"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){return{toggleLayers:function(t){var n=app.map.getLayer(t.id);if(t.id===e.pal.id){this.updateZoomDependentLayer(t,e.palHelper,6);return}if(t.id===e.gain.id){this.updateZoomDependentLayer(t,e.gainHelper,13);return}if(t.id===e.suit.id){this.showSuitabilityLoader();var r="User toggled Custom Suitabiltiy Layer "+(n.visible?"off.":"on.");c.sendEvent("Event","Layer",r)}n&&(n.setVisibility(!n.visible),this.refreshLegendWidget())},updateLayer:function(t){var n=e[t.id],s=app.map.getLayer(n.id),u=t.filter,a=[],l,h,p,d;i(".gfw .filter-list ."+u).forEach(function(t){l=t.dataset?t.dataset.layer:t.getAttribute("data-layer"),h=e[l],h&&h.id===s.id&&o.contains(t,"active")&&a.push(h.layerId)}),s&&(a.length>0?(s.visibleLayers.length>0,s.setVisibleLayers(a),s.show(),console.log(s.visibleLayers)):(console.log("hiding"),console.log(s.visibleLayers),s.hide()),this.refreshLegendWidget());if(n.layerId=="27"){var v=o.contains(r.byId("mill_checkbox").parentElement,"active"),m=o.contains(r.byId("gfwMill_checkbox").parentElement,"active"),g=[],y=[];v&&y.push(e.mill.query),m&&y.push(e.gfwMill.query),g[27]=y.join(" OR "),app.map.getLayer(n.id).setLayerDefinitions(g),app.map.getLayer(n.id).refresh()}p=f.indexOf(a,n.layerId)>-1?"on.":"off.";switch(n){case e.oilPerm:d="User toggled Oil Palm Concessions layer "+p,c.sendEvent("Event","Layer",d);break;case e.rspoPerm:d="User toggled RSPO Oil Palm Concessions layer "+p,c.sendEvent("Event","Layer",d);break;case e.mill:d="User toggled RSPO Mills layer "+p,c.sendEvent("Event","Layer",d)}},showLayer:function(e){var t=app.map.getLayer(e.id);if(e.layerId!==undefined){this.updateDynamicLayer(e);return}t&&(t.visible||(t.show(),this.refreshLegendWidget()))},hideLayer:function(e){var t=app.map.getLayer(e.id);if(t&&t.visible){if(t.visibleLayers)if(t.visibleLayers.length>1&&e.layerId){var n=t.visibleLayers.indexOf(e.layerId);t.visibleLayers.splice(n,1),t.setVisibleLayers(t.visibleLayers)}else t.hide();else t.hide();this.refreshLegendWidget()}},updateDynamicLayer:function(e){var t=app.map.getLayer(e.id),n=[];t&&(n.push(e.layerId),t.setVisibleLayers(n),t.show(),this.refreshLegendWidget())},setWizardDynamicLayerDefinition:function(e,t){var n=app.map.getLayer(e.id),r=[],i;n&&(t!==undefined?(i=e.whereField+" = '"+t+"'",r[e.layerId]=i,n.setVisibleLayers([e.layerId],!0),n.setLayerDefinitions(r),n.show()):n.hide(),this.refreshLegendWidget())},setWizardMillPointsLayerDefinition:function(e){var t=app.map.getLayer(e.id);t&&(t.visible?t.hide():t.show())},setFiresLayerDefinition:function(t,n){var r=new Date,i=[],s,o,u,a;u=app.map.getLayer(e.fires.id),r.setDate(r.getDate()-1*t),o=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),a=t!=="7"?"ACQ_DATE > date '"+o+"'":"1 = 1";for(var f=0,l=e.fires.defaultLayers.length;f<l;f++)i[f]=a;u&&(s=n?[0,1]:[0,1,2,3],u.visibleLayers.length!==s.length&&u.setVisibleLayers(s),u.setLayerDefinitions(i),this.refreshLegendWidget())},setOverlaysVisibleLayers:function(){var t=[],n,r;for(var r in app.map._simpleLegends)app.map._simpleLegends[r].hide();i(".gfw .overlays-container .overlays-checkbox.selected").forEach(function(n){r=n.dataset?n.dataset.layer:n.getAttribute("data-layer"),t.push(e[r].layerId),app.map._simpleLegends[r]&&app.map._simpleLegends[r].show()}),n=app.map.getLayer(e.overlays.id),n&&(t.length===0?(t.push(-1),n.hide()):n.show(),n.setVisibleLayers(t),this.refreshLegendWidget())},updateImageServiceRasterFunction:function(e,t){var n=app.map.getLayer(t.id),r=[1],i,s;if(n){if(t.id==="FormaAlerts"){var o=e[0]===e[1]?e[1]+1:e[1]+2;s=[1,1,e[0]+1,o],r=[0,1]}else s=e[0]===e[1]?[e[0]+1,e[1]+1]:[e[0]+1,e[1]+2];i=this.getColormapRasterFunction(t.colormap,s,r),n.setRenderingRule(i)}},updateTCDRenderingRule:function(t){var n=e.tcd,r=n.colormap,i=n.outputValue,s=[t,101],o;o=app.map.getLayer(n.id),o&&o.setRenderingRule(this.getColormapRasterFunction(r,s,i))},getColormapRasterFunction:function(e,t,n){return new g({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:e,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:t,OutputValues:n,AllowUnmatched:!1}}},variableName:"Raster"})},updateCustomSuitabilityLayer:function(n,r){var s=app.map.getLayer(e.suit.id),o=t.get("suitabilitySettings"),u=[];switch(r){case"peat-depth-slider":o.computeBinaryRaster[1].values=this._prepareSuitabilityJSON(0,n);break;case"conservation-area-slider":o.computeBinaryRaster[3].values=n;break;case"water-resource-slider":o.computeBinaryRaster[4].values=n;break;case"slope-slider":o.computeBinaryRaster[2].values=n;break;case"elevation-slider":o.computeBinaryRaster[5].values=n;break;case"rainfall-slider":o.computeBinaryRaster[6].values=parseInt(n[0])+","+parseInt(n[1]);break;case"soil-drainage-slider":o.computeBinaryRaster[7].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"soil-depth-slider":o.computeBinaryRaster[8].values=this._prepareSuitabilityJSON(n,7,[99]);break;case"soil-acid-slider":o.computeBinaryRaster[9].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"landcover-checkbox":u.push("11"),i("#environmental-criteria .suitable-checkbox input:checked").forEach(function(e){u.push(e.value)}),o.computeBinaryRaster[0].values=u.join(",");break;case"soil-type-checkbox":u.push("0"),u.push("6"),i("#environmental-criteria .suitable-checkbox-soil input:checked").forEach(function(e){u.push(e.value)}),o.computeBinaryRaster[10].values=u.join(",")}t.set("suitabilitySettings",o),s&&(s.refresh(),this.showSuitabilityLoader())},showSuitabilityLoader:function(){o.remove("suitability_loader","hidden")},hideSuitabilityLoader:function(){o.add("suitability_loader","hidden")},checkZoomDependentLayers:function(t){var n=e.pal,r=e.palHelper,i=e.gain,s=e.gainHelper;this.toggleZoomDependentLayer(t,n,r,6),this.toggleZoomDependentLayer(t,i,s,13)},toggleZoomDependentLayer:function(e,t,n,r){var i,s;i=app.map.getLayer(n.id),s=app.map.getLayer(t.id);if(s===undefined||i===undefined)return;if(!s.visible&&!i.visible)return;app.map.getLevel()>r?(i.show(),s.hide()):(i.hide(),s.show())},updateZoomDependentLayer:function(e,t,n){var r,i;r=app.map.getLayer(t.id),i=app.map.getLayer(e.id);if(i===undefined||r===undefined)return;i.visible||r.visible?(r.hide(),i.hide()):app.map.getLevel()>n?r.show():i.show(),this.refreshLegendWidget()},refreshLegendWidget:function(){var t=app.map.getLayer(e.legendLayer.id),n=e.tcd,r=e.forma,i=e.loss,s=e.gain,o=e.primForest,u=e.suit,l=[n,r,i,s,o,u],c=[],h=[],p,d=this;ldos=new y,ldos.transparency=100,f.forEach(l,function(e){p=app.map.getLayer(e.id),p&&p.visible&&(c.push(e.legendLayerId),h[e.legendLayerId]=ldos)}),c.length>0?(t.setVisibleLayers(c),t.setLayerDrawingOptions(h),t.visible||t.show()):t.hide(),a.byId("legend").refresh()},changeLayerTransparency:function(e,t,n){switch(t){case"image":this.setLayerOpacity(e,n);break;case"dynamic":this.setDynamicLayerTransparency(e,n);break;case"tiled":this.setLayerOpacity(e,n)}},setLayerOpacity:function(t,n){var r=app.map.getLayer(t.id);if(!r)return;r.setOpacity(n/100),r.id==="ProtectedAreas"&&this.setDynamicLayerTransparency(e.palHelper,n),r.id==="Gain"&&this.setLayerOpacity(e.gainHelper,n)},setDynamicLayerTransparency:function(e,t){var n=app.map.getLayer(e.id),r,i;if(!n)return;i=new y,i.transparency=100-t,r=n.layerDrawingOptions||[],e.layerId!==undefined?r[e.layerId]=i:e.defaultLayers&&f.forEach(e.defaultLayers,function(e){r[e]=i}),n.setLayerDrawingOptions(r)},setSelectedFeature:function(e){var t=new v,n=new m(e.url),r,i,s;t.objectIds=[e.objectId],t.outFields=["*"],t.returnGeometry=!0,n.execute(t).then(function(t){t.features&&t.features[0]&&(r=new p(t.features[0].geometry,null,t.features[0].attributes,null),r.layer=e.layer,i=d.graphicsExtent([r]).getCenter(),s={feature:r,value:r.attributes[t.displayFieldName]},r=e.templateFunction([s])[0],app.map.infoWindow.setFeatures([r]),app.map.infoWindow.show(i))})},_prepareSuitabilityJSON:function(e,t,n){var r=[];for(var i=e;i<=t;i++)r.push(i);return n&&(r=r.concat(n)),r.join(",")}}}),define("map/LossSlider",["dojo/on","map/config","map/LayerController"],function(e,t,n){"use strict";var r,i,s,o={containerId:"treecover_change_toolbox",values:[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014],sliderSelector:"#loss-range-slider",baseValue:2001,playHtml:"&#9658;",pauseHtml:"&#x25A0"},u={isPlaying:!1},a={init:function(){var t=this;s===undefined&&($(o.sliderSelector).ionRangeSlider({type:"double",values:o.values,grid:!0,hide_min_max:!0,hide_from_to:!0,prettify_enabled:!1,onFinish:t.change,onUpdate:t.change}),s=$(o.sliderSelector).data("ionRangeSlider"),i=$("#lossPlayButton"),e(i,"click",t.playToggle))},change:function(e){n.updateImageServiceRasterFunction([e.from,e.to],t.loss)},playToggle:function(){function a(){u.isPlaying=!1,clearInterval(r),i.html(o.playHtml)}var e,t,n;u.isPlaying?a():(u.isPlaying=!0,n=s.result.to,s.update({from:s.result.from,to:s.result.from}),r=setInterval(function(){e=s.result.from,t=s.result.to,t>=n?a():s.update({from:e,to:++t})},1250),i.html(o.pauseHtml))}};return a}),define("map/FormaSlider",["dojo/on","map/config","esri/request","dojo/Deferred","map/LayerController"],function(e,t,n,r,i){var s,o,u,a={sliderSelector:"#forma-alert-slider",playHtml:"&#9658;",pauseHtml:"&#x25A0",baseYear:15},f={isPlaying:!1},l=function(){var i=new r,s=[],o;return o=n({url:t.forma.url,callbackParamName:"callback",content:{f:"json"},handleAs:"json"}),o.then(function(e){var t=e.minValues[0],n=e.maxValues[0],r;for(t;t<=n;t++)r=a.baseYear+Math.floor(t/12),s.push(t+" - "+r);i.resolve(s)},function(e){i.reject()}),i},c={init:function(){var t=this;o===undefined&&l().then(function(n){$(a.sliderSelector).ionRangeSlider({type:"double",values:n,grid:!0,hide_min_max:!0,hide_from_to:!0,onFinish:t.change,onUpdate:t.change}),o=$(a.sliderSelector).data("ionRangeSlider"),u=$("#formaPlayButton"),e(u,"click",t.playToggle)})},change:function(e){i.updateImageServiceRasterFunction([e.from,e.to],t.forma)},playToggle:function(){function r(){f.isPlaying=!1,clearInterval(s),u.html(a.playHtml)}var e,t,n;f.isPlaying?r():(f.isPlaying=!0,n=o.result.to,o.update({from:o.result.from,to:o.result.from}),s=setInterval(function(){e=o.result.from,t=o.result.to,t>=n?r():o.update({from:e,to:++t})},1250),u.html(a.pauseHtml))}};return c}),define("map/Controls",["dojo/dom","dojo/query","dojo/Deferred","dojo/_base/fx","dojo/_base/array","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/dom-construct","utils/Hasher","map/config","map/MapModel","map/LossSlider","map/FormaSlider","map/LayerController","esri/request","esri/TimeExtent","esri/dijit/TimeSlider","dijit/form/CheckBox","dijit/layout/ContentPane","dijit/layout/AccordionContainer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){"use strict";var E=jQuery.noConflict(),S=!1,x=!1;return{toggleToolbox:function(e,t){if(e.id==="CustomSuitability"){var n=t==="show"?"block":"none";o.set(e.toolsNode,"display",n),this.resizeRangeSliders()}else this.hideAllToolboxes(),t==="show"&&o.set(e.toolsNode,"display","block")},hideAllToolboxes:function(){t(".gfw .layer-controls-container .toolbox").forEach(function(e){o.get(e,"display")==="block"&&o.set(e,"display","none")})},createDialogBox:function(e){require(["dijit/Dialog","dojo/_base/lang"],function(t,n){var r=n.clone(e),i=r.querySelector(".source_body");i.querySelector(".source_extended")&&i.removeChild(i.querySelector(".source_extended")),i.querySelector(".source_download")&&i.removeChild(i.querySelector(".source_download")),i.querySelector(".overview_title")&&i.querySelector(".source_summary").removeChild(i.querySelector(".overview_title")),r.querySelector(".source_header")&&r.removeChild(r.querySelector(".source_header")),r.getElementsByTagName("input").length&&r.removeChild(r.getElementsByTagName("input")[0]);var s=new t({title:e.querySelector(".source_title").innerHTML,style:"height: 600px; width: 600px; overflow-y: auto;",draggable:!1,hide:function(){s.destroy()}});s.onClose(function(){}),s.setContent(r.innerHTML),s.show(),$("body").on("click",function(e){e.target.classList.contains("dijitDialogUnderlay")&&(s.hide(),$("body").off("click"))})})},showFiresConfidenceInfo:function(e){var t=this;require(["dijit/Dialog","dojo/on","dojo/_base/lang"],function(e,t,n){var r="<p>"+l.firesConfidenceDialog.text+"</p>",i=new e({title:l.firesConfidenceDialog.title.toUpperCase(),style:"height: 310px; width: 415px; font-size:14px; padding: 5px;",draggable:!1,hide:function(){i.destroy()}});i.setContent(r),i.show(),$("body").on("click",function(e){e.target.classList.contains("dijitDialogUnderlay")&&(i.hide(),$("body").off("click"))})})},toggleFiresLayerOptions:function(n){var r=n.target?n.target:n.srcElement,i=r.dataset?r.dataset.filter:r.getAttribute("data-filter"),o;t(".fires_toolbox .toolbox-list li").forEach(function(e){s.remove(e,"selected")}),s.add(r,"selected"),o=e.byId("high-confidence").checked,d.setFiresLayerDefinition(i,o)},toggleFiresConfidenceLevel:function(e){var n=e.target?e.target:e.srcElement,r=n.checked,i,s;i=t(".fires_toolbox .toolbox-list li.selected")[0],s=i.dataset?i.dataset.filter:i.getAttribute("data-filter"),d.setFiresLayerDefinition(s,r)},toggleOverlays:function(t,n){t?s.toggle(t.currentTarget,"selected"):n&&s.toggle(e.byId(n),"selected"),d.setOverlaysVisibleLayers()},generateTimeSliders:function(){h.init(),p.init()},toggleLegendContainer:function(){var t=e.byId("legend-container"),n=t.offsetHeight===280?30:280;r.animateProperty({node:t,properties:{height:n},duration:500,onEnd:function(){n===30?s.add("legend-title","closed"):s.remove("legend-title","closed")}}).play()},generateSuitabilitySliders:function(){this.createCheckboxDijits(),this.createRangeSliders()},createCheckboxDijits:function(){var e;i.forEach(l.checkboxItems,function(t){e=new y({name:t.name,value:t.value,checked:t.checked,onChange:function(){d.updateCustomSuitabilityLayer(null,t.name)}},t.node)})},createRangeSliders:function(){var e=l.suitabilitySliderTooltips;jQuery.browser={},function(){jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)}(),E("#peat-depth-slider").rangeSlider({defaultValues:{min:0,max:3},valueLabels:"change",bounds:{min:0,max:3},step:1,arrows:!1,formatter:function(t){return e.peat[t]}}),E("#peat-depth-slider").addClass("singleValueSlider reverseSlider"),E("#peat-depth-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer(t.values.min,"peat-depth-slider")}),E("#conservation-area-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"change",bounds:{min:500,max:5e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),E("#conservation-area-slider").addClass("singleValueSlider"),E("#conservation-area-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer(t.values.min,"conservation-area-slider")}),E("#water-resource-slider").rangeSlider({defaultValues:{min:100,max:1e3},valueLabels:"change",bounds:{min:50,max:1e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),E("#water-resource-slider").addClass("singleValueSlider"),E("#water-resource-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer(t.values.min,"water-resource-slider")}),E("#slope-slider").rangeSlider({defaultValues:{min:30,max:80},valueLabels:"change",bounds:{min:0,max:80},step:1,arrows:!1,formatter:function(e){return e+"%"}}),E("#slope-slider").addClass("singleValueSlider reverseSlider"),E("#slope-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer(t.values.min,"slope-slider")}),E("#elevation-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"hide",bounds:{min:0,max:5e3},step:1,arrows:!1,formatter:function(e){return e+"m"}}),E("#elevation-slider").addClass("singleValueSlider reverseSlider"),E("#elevation-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer(t.values.min,"elevation-slider")}),E("#rainfall-slider").rangeSlider({defaultValues:{min:1500,max:6e3},valueLabels:"hide",bounds:{min:1500,max:6e3},step:1,arrows:!1,formatter:function(t){return t+" "+e.rainfall.label}}),E("#rainfall-slider").addClass("narrowTooltips"),E("#rainfall-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer([t.values.min,t.values.max],"rainfall-slider")}),E("#soil-drainage-slider").rangeSlider({defaultValues:{min:2,max:4},valueLabels:"hide",bounds:{min:1,max:4},step:1,arrows:!1,formatter:function(t){return e.drainage[t]}}),E("#soil-drainage-slider").addClass("narrowTooltips"),E("#soil-drainage-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-drainage-slider")}),E("#soil-depth-slider").rangeSlider({defaultValues:{min:3,max:7},valueLabels:"hide",bounds:{min:1,max:7},step:1,arrows:!1,formatter:function(t){return e.depth[t]}}),E("#soil-depth-slider").addClass("singleValueSlider narrowTooltips"),E("#soil-depth-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer(t.values.min,"soil-depth-slider")}),E("#soil-acid-slider").rangeSlider({defaultValues:{min:1,max:7},valueLabels:"change",bounds:{min:1,max:8},step:1,arrows:!1,formatter:function(t){return e.acidity[t]}}),E("#soil-acid-slider").addClass("narrowTooltips"),E("#soil-acid-slider").bind("valuesChanged",function(e,t){d.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-acid-slider")}),t(".ui-rangeSlider-innerBar").forEach(function(e){a.create("div",{"class":"slider-bar-blocker"},e,"after")})},resetSuitabilitySettings:function(){E("#peat-depth-slider").rangeSlider("values",0,3),E("#conservation-area-slider").rangeSlider("values",1e3,5e3),E("#water-resource-slider").rangeSlider("values",100,1e3),E("#slope-slider").rangeSlider("values",30,80),E("#elevation-slider").rangeSlider("values",1e3,5e3),E("#rainfall-slider").rangeSlider("values",1500,6e3),E("#soil-drainage-slider").rangeSlider("values",2,4),E("#soil-depth-slider").rangeSlider("values",3,7),E("#soil-acid-slider").rangeSlider("values",1,7),this.resizeRangeSliders();var e;i.forEach(l.checkboxItems,function(t){e=u.byId(t.node),e&&e.set("checked",t.checked)})},exportSuitabilitySettings:function(){var t=this;require(["dijit/Dialog","dojo/on","dojo/_base/lang"],function(n,r,i){var s="<p>"+l.suitabilityExportDialog.instruction+"</p>";s+="<p id='export-error-message' style='color: #e50036;font-size: 12px;'></p>",s+="<div id='export-loading-now' class='submit-container' style='display: none; visibility: hidden;'><div class='loading-wheel-container'><div class='loading-wheel'></div></div></div>",s+="<div id='export-buttons-container' class='submit-container'>",s+="<button id='export-cancel-now'>Cancel</button> ",s+="<button id='export-download-now'>Download</button>",s+="</div>";var u=new n({title:l.suitabilityExportDialog.title.toUpperCase(),style:"height: 190px; width: 415px; overflow-y: none;",draggable:!1,hide:function(){u.destroy()}});u.setContent(s),u.show(),r(e.byId("export-cancel-now"),"click",function(){u.destroy()}),r(e.byId("export-download-now"),"click",function(){var n=t._getSettingsCSV(),r=new Blob([n],{type:"text/csv;charset=utf-8;"});saveAs(r,"settings.csv"),o.set(e.byId("export-buttons-container"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"visibility","visible"),o.set(e.byId("export-loading-now"),"display","block"),t._saveTIFF(function(t){console.log("**callback** (error = "+t+")"),o.set(e.byId("export-loading-now"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"display","none"),t==""?u.destroy():e.byId("export-error-message").innerHTML=t})})})},_saveTIFF:function(e){var t=this,n=app.map.extent,r=1460,i=854,s={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",format:"tiff",size:r+","+i,imageSR:3857,bboxSR:3857,f:"json",pixelType:"UNKNOWN"},o=function(t,n){console.log("exporter() :: url = ",t),window.open(t,"geoTiffWin"),e("")},u=l.suit.id;app.map.getLayer(u).getImageUrl(app.map.extent,r,i,o,s)},_getSettingsCSV:function(){var n=["peat-depth-slider","conservation-area-slider","water-resource-slider","slope-slider","elevation-slider","rainfall-slider","soil-drainage-slider","soil-depth-slider","soil-acid-slider"],r="",o,a,f,c,h,p;i.forEach(n,function(t){o=e.byId(t+"-label"),a=E("#"+t).rangeSlider("values"),f=E("#"+t).rangeSlider("bounds"),c=s.contains(t,"reverseSlider"),p=t.split("-"),p[0]!="rainfall"&&(h=l.suitabilitySliderTooltips[p[0]],h==undefined&&(p[1]=="acid"&&(p[1]="acidity"),h=l.suitabilitySliderTooltips[p[1]])),r!=""&&(r+="\n"),r+=o.innerHTML+",";if(c)if(h==undefined)r+=f.min+"-"+a.min;else{var n="";for(var i=f.min;i<=a.min;++i)n!=""&&(n+="; "),n+=h[i].replace(",","/");r+=n}else if(h==undefined)r+=a.min+"-"+a.max;else{var n="";for(var i=a.min;i<=a.max;++i)n!=""&&(n+="; "),n+=h[i].replace(",","/");r+=n}});var d="",v="",m;i.forEach(l.checkboxItems,function(e){m=u.byId(e.node),m&&m.get("checked")&&(o=t("label[for='"+e.node+"']")[0],e.name=="landcover-checkbox"?(d!=""&&(d+="; "),d+=o.innerHTML):e.name=="soil-type-checkbox"&&(v!=""&&(v+="; "),v+=o.innerHTML))});var g=["Suitability Parameter","Suitability Values"],y=g.join(",")+"\n";return y+=r+"\n",y+="Land Cover,"+d+"\n",y+="Soil Type,"+v+"\n",y},resizeRangeSliders:function(){E("#peat-depth-slider").rangeSlider("option","valueLabels","hide"),E("#conservation-area-slider").rangeSlider("option","valueLabels","hide"),E("#water-resource-slider").rangeSlider("option","valueLabels","hide"),E("#slope-slider").rangeSlider("option","valueLabels","hide"),E("#elevation-slider").rangeSlider("option","valueLabels","hide"),E("#rainfall-slider").rangeSlider("option","valueLabels","hide"),E("#soil-drainage-slider").rangeSlider("option","valueLabels","hide"),E("#soil-depth-slider").rangeSlider("option","valueLabels","hide"),E("#soil-acid-slider").rangeSlider("option","valueLabels","hide"),E("#peat-depth-slider").rangeSlider("resize"),E("#conservation-area-slider").rangeSlider("resize"),E("#water-resource-slider").rangeSlider("resize"),E("#slope-slider").rangeSlider("resize"),E("#elevation-slider").rangeSlider("resize"),E("#rainfall-slider").rangeSlider("resize"),E("#soil-drainage-slider").rangeSlider("resize"),E("#soil-depth-slider").rangeSlider("resize"),E("#soil-acid-slider").rangeSlider("resize"),E("#peat-depth-slider").rangeSlider("option","valueLabels","change"),E("#conservation-area-slider").rangeSlider("option","valueLabels","change"),E("#water-resource-slider").rangeSlider("option","valueLabels","change"),E("#slope-slider").rangeSlider("option","valueLabels","change"),E("#elevation-slider").rangeSlider("option","valueLabels","change"),E("#rainfall-slider").rangeSlider("option","valueLabels","change"),E("#soil-drainage-slider").rangeSlider("option","valueLabels","change"),E("#soil-depth-slider").rangeSlider("option","valueLabels","change"),E("#soil-acid-slider").rangeSlider("option","valueLabels","change")},serializeSuitabilitySettings:function(){return{"Peat Depth":E("#peat-depth-slider").rangeSlider("values").min,"Conservation Area":E("#conservation-area-slider").rangeSlider("values").min,"Water Resource":E("#water-resource-slider").rangeSlider("values").min,Slope:E("#slope-slider").rangeSlider("values").min,Elevation:E("#elevation-slider").rangeSlider("values").min,Rainfall:E("#rainfall-slider").rangeSlider("values"),"Soil Drainage":E("#soil-drainage-slider").rangeSlider("values"),"Soil Depth":E("#soil-depth-slider").rangeSlider("values").min,"Soil Acidity":E("#soil-acid-slider").rangeSlider("values"),Shrub:u.byId("shrub-check").checked,Bareland:u.byId("bareland-check").checked,"Secondary Forest":u.byId("secondary-forest-check").checked,"Dryland Agriculture mixed with shrub":u.byId("dryland-agro-check").checked,"Water Body":u.byId("water-check").checked,Mining:u.byId("mining-check").checked,"Plantation Forest":u.byId("plantation-forest-check").checked,"Estate Crop Plantation":u.byId("estate-crop-check").checked,"Swamp shrub":u.byId("swamp-shrub-check").checked,"Primary swamp Forest":u.byId("primary-swamp-check").checked,"Secondary swamp Forest":u.byId("secondary-swamp-check").checked,Settlement:u.byId("settlement-check").checked,Grassland:u.byId("grassland-check").checked,"Secondary mangrove forest":u.byId("secondary-mangrove-check").checked,"Dryland agriculture":u.byId("dryland-check").checked,"Rice field":u.byId("rice-check").checked,"Fish pond":u.byId("fish-check").checked,"Transmigration area":u.byId("transmigration-check").checked,Swamp:u.byId("swamp-check").checked,"Primary mangrove swamp":u.byId("primary-mangrove-check").checked,Airport:u.byId("airport-check").checked,Inceptisol:u.byId("inceptisol-check").checked,Oxisol:u.byId("oxisol-check").checked,Alfisol:u.byId("alfisol-check").checked,Ultisol:u.byId("ultisol-check").checked,Spodosol:u.byId("spodosol-check").checked,Entisol:u.byId("entisol-check").checked,Histosol:u.byId("histosol-check").checked,Mollisol:u.byId("mollisol-check").checked,Rock:u.byId("rock-check").checked}}}}),define("components/wizard/Wizard",["react","analysis/config","analysis/WizardStore","components/wizard/StepOne","components/wizard/StepTwo","components/wizard/StepThree","components/wizard/Intro","dojo/topic","dojo/_base/array","map/config","dojo/_base/lang","esri/tasks/PrintTask","map/Controls","utils/Analytics","utils/GeoHelper"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){function g(){return{currentStep:n.get(m.userStep)||0,analysisArea:n.get(m.selectedCustomFeatures),usersAreaOfInterest:n.get(m.areaOfInterest)}}var v=t.wizard.breadcrumbs,m=t.STORE_KEYS,y=e.createClass({displayName:"Wizard",getInitialState:function(){return g()},componentDidMount:function(){n.registerCallback(m.selectedCustomFeatures,this.analysisAreaUpdated),n.registerCallback(m.userStep,this.currentUserStepUpdated),n.registerCallback(m.areaOfInterest,this.areaOfInterestUpdated),this.props.skipIntro?n.set(m.userStep,3):n.set(m.userStep,this.state.currentStep)},analysisAreaUpdated:function(){var e=n.get(m.selectedCustomFeatures);this.setState({analysisArea:e})},currentUserStepUpdated:function(){var e=n.get(m.userStep);this.setState({currentStep:e})},areaOfInterestUpdated:function(){var e=n.get(m.areaOfInterest);this.setState({usersAreaOfInterest:e})},componentDidUpdate:function(e,t){this.props.isResetting&&this.setProps({isResetting:!1});if(t.currentStep>1&&this.state.currentStep===1){var n=app.map.getLayer(f.wizardGraphicsLayer.id);n&&n.clear()}},render:function(){var t=this.props;return t.callback={performAnalysis:this._performAnalysis},this.state.currentStep===0?($(".breadcrumbs").hide(),$(".gfw .wizard-header").css("height","-=45px"),$(".gfw .wizard-body").css("top","55px"),$(".gfw .wizard-header .button.reset").hide()):($(".breadcrumbs").show(),$(".gfw .wizard-header").css("height","+=45px"),$(".gfw .wizard-body").css("top",""),$(".gfw .wizard-header .button.reset").show(),$(".gfw .wizard-header .button.reset").css("top","0px")),(["commercialEntityOption","certifiedAreaOption"].indexOf(this.state.usersAreaOfInterest)===-1||this.props.currentStep===1)&&u.publish("hideConcessionsLegend"),e.createElement("div",{className:"relative wizard-root"},e.createElement("div",{className:"wizard-header"},e.createElement("div",{className:"title-section"},e.createElement("span",{className:"title"},"Analysis"),e.createElement("span",{className:"button reset",onClick:this._reset},"Reset"),e.createElement("span",{className:"button close",onClick:this._close})),e.createElement("div",{className:"breadcrumbs"},v.map(this._breadcrumbMapper,this))),e.createElement("div",{className:"wizard-body"},e.createElement("div",{className:this.state.currentStep!==0?"hidden":""},e.createElement(o,e.__spread({},t))),e.createElement("div",{className:this.state.currentStep!==1?"hidden":""},e.createElement(r,e.__spread({},t))),e.createElement("div",{className:this.state.currentStep!==2?"hidden":""},e.createElement(i,e.__spread({},t))),e.createElement("div",{className:this.state.currentStep!==3?"hidden":""},e.createElement(s,e.__spread({},t)))))},_breadcrumbMapper:function(t,n){var r=n<this.state.currentStep-1?"enabled":"";return r+=this.state.currentStep-1===n?" active":"",e.createElement("span",{className:r},e.createElement("span",{className:"piece","data-index":n,onClick:this._changeStep},t),n<v.length-1?e.createElement("span",{className:"carat"}," > "):null)},_changeStep:function(e){var t=e.target.dataset?e.target.dataset.index:e.target.getAttribute("data-index");t*=1,t<this.state.currentStep+1&&n.set(m.userStep,1*t+1)},_reset:function(){this.replaceProps({isResetting:!0}),n.set(m.areaOfInterest,t.stepOne.option3.id,!0),n.set(m.selectedCustomFeatures,[],!0),n.set(m.userStep,0,!0),this.replaceState(g());var e=app.map.getLayer(f.wizardGraphicsLayer.id);e&&e.clear(),e=app.map.getLayer(f.adminUnitsLayer.id),e&&e.hide()},_close:function(){u.publish("toggleWizard")},_externalSetStep:function(e){(e>=0||e<=3)&&n.set(m.userStep,e)},_performAnalysis:function(){var e=this,r=e._prepareGeometry(e.state.analysisArea),i=n.get(m.analysisSets),s,o,u,a,l;s=t.stepTwo.labelField,o=app.map.getLayer(f.suit.id).getRenderingRule(),a={geometry:r,datasets:i,title:e.state.analysisArea.map(function(e){return e.attributes.WRI_label}).join(","),suitability:{renderRule:o,csv:h._getSettingsCSV()}},l=window.open("report.html","_blank","menubar=yes,titlebar=yes,scrollbars=yes,resizable=yes"),localStorage?localStorage.setItem("payload",JSON.stringify(a)):l.payload=a,l===null||typeof l===undefined||l===undefined?alert("You need to disable your popup blocker for this feature to work."):(l.focus(),l.document.createEvent&&(u=l.document.createEvent("Event"),u.initEvent("PayloadReady",!0,!0),l.document.dispatchEvent(u))),p.sendEvent("Event","Perform Analysis","User clicked perfrom analysis.")},_prepareGeometry:function(e){function i(e){var t=n.get(m.areaOfInterest),r=e.attributes.wri_id||e.attributes.WRI_ID||undefined;return t==="millPointOption"?r:undefined}var t=n.get(m.analysisPointRadius)||50,r=[];return Object.prototype.toString.call(e)!=="[object Array]"&&(e=[e]),e.forEach(function(e){e.geometry.type==="point"&&(e=d.preparePointAsPolygon(e,t)),r.push({geometry:e.geometry,type:e.geometry.radius?"circle":"polygon",isCustom:e.attributes.WRI_ID!==undefined,label:e.attributes.WRI_label||undefined,millId:i(e),isRSPO:e.attributes.isRSPO||undefined,buffer:t})}),JSON.stringify(r)},_getStepAndActiveArea:function(){return{currentStep:this.state.currentStep,selectedArea:this.state.usersAreaOfInterest||"none"}}});return function(t,n){return e.render(e.createElement(y,e.__spread({},t)),document.getElementById(n))}}),define("analysis/WizardHelper",["dojo/fx","dojo/dom","dojo/_base/fx","dojo/Deferred","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/_base/array","dojo/topic","map/config","utils/Hasher","utils/GeoHelper","utils/AlertsHelper","analysis/Query","analysis/config","analysis/WizardStore","components/wizard/Wizard"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){"use strict";var g,y=d.STORE_KEYS;return{toggleWizard:function(e){var u=o.position(t.byId("map")).w,a=t.byId("wizard-container"),f=new r,c=460,h=460,d=u/2,v,y=500,b,w,E;return E=d>=h&&d<=c?d:d<h?h:c,v=app.map.extent.getCenter(),i.contains(a,"activated")&&(s.set("wizard","display","none"),E=0),i.toggle(a,"activated"),b=n.animateProperty({node:a,properties:{width:E},duration:y}),w=n.animateProperty({node:t.byId("wizard-tab"),properties:{opacity:E===0?1:0},duration:y,onEnd:function(){E>0&&s.set("wizard","display","block"),f.resolve(!0)}}),g===undefined&&(p.getSetupData(),setTimeout(function(){g=new m({skipIntro:e},"wizard")},y-100)),E===0?this.cleanupWizard():(g&&g.forceUpdate(),this.showWizardRelatedLayers()),E===0?l.removeKey("wiz"):l.setHash("wiz","open"),[b,w]},cleanupWizard:function(){app.map.getLayer(f.adminUnitsLayer.id).hide(),app.map.getLayer(f.wizardGraphicsLayer.id).hide(),app.map._simpleLegends.concessions.hide()},showWizardRelatedLayers:function(){app.map.getLayer(f.adminUnitsLayer.id).show(),app.map.getLayer(f.wizardGraphicsLayer.id).show()},analyzeAreaFromPopup:function(e){function b(e){v.set(y.areaOfInterest,s),v.set(y.selectedCustomFeatures,[e]),g===undefined&&(g=new m({skipIntro:!0},"wizard")),g._externalSetStep(3)}var t=e.target?e.target:e.srcElement,n=t.getAttribute("data-label"),r=t.getAttribute("data-type"),i=t.getAttribute("data-id"),s=d.stepOne.option3.id,o=f.oilPerm.url,l=this,h;switch(r){case"Logging concession":h=3;break;case"Mining concession":h=2;break;case"Wood fiber plantation":h=0;break;case"Oil palm concession":h=1;break;case"RSPO Oil palm concession":h=4,o=f.commercialEntitiesLayer.url;break;case"AdminBoundary":s=d.stepOne.option2.id,o=f.adminUnitsLayer.url,h=f.adminUnitsLayer.layerId;break;case"CertScheme":o=f.commercialEntitiesLayer.url,h=f.commercialEntitiesLayer.layerId;break;case"CustomGraphic":s=d.stepOne.option1.id;break;case"MillPoint":s=d.stepOne.option5.id;break;case"WDPA":o=f.palHelper.url,h=f.palHelper.layerId}r==="CustomGraphic"?(h=app.map.getLayer(f.customGraphicsLayer.id),u.some(h.graphics,function(e){return e.attributes.WRI_ID===parseInt(i)?(l.isOpen()?b(e):(a.publish("toggleWizard"),b(e)),!0):!1})):r==="MillPoint"?p.getMillByWriId(i).then(function(e){e.attributes.WRI_label=n,e=c.preparePointAsPolygon(e),l.isOpen()?(b(e),l.addGraphicFromPopup(e)):(a.publish("toggleWizard"),b(e),l.addGraphicFromPopup(e))}):p.getFeatureById(o+"/"+h,i).then(function(e){e.attributes.WRI_label=n,l.isOpen()?(b(e),l.addGraphicFromPopup(e)):(a.publish("toggleWizard"),b(e),l.addGraphicFromPopup(e))}),app.map.infoWindow.hide()},addGraphicFromPopup:function(e){var t=app.map.getLayer(f.wizardGraphicsLayer.id),n;t&&(t.clear(),e=c.applySelectionSymbolToFeature(e),t.add(e))},isOpen:function(){return i.contains("wizard-container","activated")}}}),define("utils/Helper",["dojo/dom-class","dojo/dom-geometry","analysis/WizardHelper","utils/AlertsHelper","dojo/_base/window","dojo/_base/connect","dojo/_base/fx","dojo/fx","dojo/on"],function(e,t,n,r,i,s,o,u,a){"use strict";var f,l,c=500,h=460,p=this;return l=function(e,t,n){f=f||document.getElementById("map-container");var t=t||!0,r=function(){t===!0&&a.once(app.map,"resize",function(){app.map.centerAt(n)})},i=function(){t===!0&&app.map.resize(!0)},s={node:f,properties:{left:e},duration:c,beforeBegin:r,onEnd:i};return o.animateProperty(s)},{enableLayout:function(){var n=i.body(),r=t.position(n).w;r<960&&e.add(n,"mobile")},toggleWizard:function(){var e,t=app.map.extent.getCenter();r.isOpen()===!0?(e=u.combine([r.toggleAlertsForm()].concat([l(0,!1)])),s.connect(e,"onEnd",function(){u.combine(n.toggleWizard().concat(l(n.isOpen()?h:0,!0,t))).play()}),e.play()):u.combine(n.toggleWizard().concat(l(n.isOpen()?h:0,!0,t))).play()},toggleAlerts:function(){var e,t=app.map.extent.getCenter();n.isOpen()===!0?(e=u.combine(n.toggleWizard().concat([l(0,!1)])),s.connect(e,"onEnd",function(){u.combine([r.toggleAlertsForm(),l(r.isOpen()?0:h,!0,t)]).play()}),e.play()):u.combine([r.toggleAlertsForm(),l(r.isOpen()?0:h,!0,t)]).play()}}}),define("map/SuitabilityImageServiceLayer",["dojo/_base/declare","dojo/Evented","dojo/_base/lang","dojo/_base/array","esri/layers/RasterFunction","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","map/MapModel","esri/request"],function(e,t,n,r,i,s,o,u,a){return e("SuitabilityImageServiceLayer",[t,o],{constructor:function(){this.declaredClass="esri.layers.ArcGISImageServiceLayer",this.rasterFunctionArguments={},this.rasterFunctionArguments.ElevRaster="$1",this.rasterFunctionArguments.SlopeRaster="$2",this.rasterFunctionArguments.WaterRaster="$3",this.rasterFunctionArguments.ConsRaster="$4",this.rasterFunctionArguments.STypeRaster="$5",this.rasterFunctionArguments.SDepthRaster="$6",this.rasterFunctionArguments.PeatRaster="$7",this.rasterFunctionArguments.SAcidRaster="$8",this.rasterFunctionArguments.SDrainRaster="$9",this.rasterFunctionArguments.RainfallRaster="$10",this.rasterFunctionArguments.LCRaster="$11",this.rasterFunctionScalars={},this.rasterFunctionScalars.Elev=10,this.rasterFunctionScalars.Slope=1,this.rasterFunctionScalars.Water=10,this.rasterFunctionScalars.Cons=100,this.rasterFunctionScalars.SType=1,this.rasterFunctionScalars.SDepth=1,this.rasterFunctionScalars.Peat=1,this.rasterFunctionScalars.SAcid=1,this.rasterFunctionScalars.SDrain=1,this.rasterFunctionScalars.Rainfall=10,this.rasterFunctionScalars.LC=1,this.renderingRule={};var e=new i;e.functionName="RemapColormap2Prashant",e.arguments=this.rasterFunctionArguments;var t=new s;t.noData=0,t.renderingRule=e,this.imageServiceParameters=t},getExportUrl:function(e,t,n,r,i){},getRenderingRule:function(){var e=this,t=e.returnRasterSettingsAsObject(),r={};n.mixin(r,this.rasterFunctionArguments),e.addThresholdArgument(t,r,"Elev",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Slope",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Water",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Cons",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Rainfall",e.rasterFunctionScalars,"BETWEEN"),e.addMembershipArgument(t,r,"SDepth",[0,1,2,3,4,5,6,7,99]),e.addMembershipArgument(t,r,"Peat",[0,1,2,3,4,5,6]),e.addMembershipArgument(t,r,"SAcid",[0,1,2,3,4,5,6,7,8,99]),e.addMembershipArgument(t,r,"SDrain",[0,1,2,3,4,99]),e.addMembershipArgument(t,r,"LC",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),e.addMembershipArgument(t,r,"SType",[0,1,2,3,4,5,6,7,8,9,10]);var s=new i;return s.rasterFunction="PalmOilSuitabilityNew",s.rasterFunctionArguments=r,s},getImageUrl:function(e,t,n,r,i){var s=this;e=e._normalize();var o=[e.xmin,e.ymin,e.xmax,e.ymax],u,f,l,c,h,p,d=s.getRenderingRule();i?(u=i,u.renderingRule=JSON.stringify(d),u.bbox=o.join(","),u.f="json",s.renderingRule=d,p=a({url:s.url+"/exportImage",content:u,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),p.then(function(e){try{r(e.href),s.emit("image-ready",{})}catch(t){s.refresh()}},function(e){console.dir(e),s.emit("image-ready",{})})):(u={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",renderingRule:JSON.stringify(d),format:"png8",size:t+","+n,imageSR:3857,bboxSR:3857,f:"json",pixelType:"U8",bbox:o.join(",")},s.renderingRule=d,s.renderingRule.toJson=function(){return s.getRenderingRule()},p=a({url:s.url+"/exportImage",content:u,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),p.then(function(e){try{r(e.href),s.emit("image-ready",{})}catch(t){s.refresh()}},function(e){console.dir(e),s.emit("image-ready",{})}))},returnRasterSettingsAsObject:function(){var e={},t=u.get("suitabilitySettings").computeBinaryRaster;return r.forEach(t,function(t){e[t.name]=t.values}),e},returnNumericArray:function(e){var t=e.split(","),n=[];return r.forEach(t,function(e){n.push(parseInt(e,10))}),n},addThresholdArgument:function(e,t,n,r,i){var s=this;scalar=r[n];if(i==="BETWEEN"){var o=s.returnNumericArray(e[n+"InpR"]),u=o[0],a=o[o.length-1];t[n+"InpR"]=[0,u/scalar,u/scalar,a/scalar,a/scalar,1e6],t[n+"OutV"]=[1,1,0]}else{var f=parseInt(e[n+"InpR"],10);t[n+"InpR"]=[0,f/scalar,f/scalar,1e6],t[n+"OutV"]=i==="MIN"?[0,1]:[1,0]}},addMembershipArgument:function(e,t,n,r){var i=this,s=i.returnNumericArray(e[n+"InpR"]),o=[],u=[],a=["SDepth","SAcid","SDrain","LC"],f,l;a.indexOf(n)>-1&&s[0]!==0&&s.unshift(0);for(l=0;l<r.length;l++)f=r[l],o.push(f,f),s.indexOf(f)===-1?u.push(0):u.push(1);t[n+"InpR"]=o,t[n+"OutV"]=u}})}),define("map/SimpleLegend",[],function(){return SimpleLegend=function(e){return this.config=e,this.CLASS_NAME="simple-legend",this.onHide=function(){},this.onShow=function(){},this.items=[],this},SimpleLegend.prototype.init=function(e){var t=new XMLHttpRequest,n=0,r="",i,s,o,u=this.config,a=this;t.onreadystatechange=function(f){t.readyState===4&&(t.status===200?(s=JSON.parse(t.response),r+='<div id="'+u.id+'" class="'+a.CLASS_NAME+'">',u.title&&(r+='<div id="'+u.id+'-title" class="simple-legend-title">'+u.title+"</div>"),i=u.layers.map(function(e){return e.id}),o=s.layers.filter(function(e){return i.indexOf(e.layerId)>-1}),o.forEach(function(e){e.config=u.layers.filter(function(t){return t.id===e.layerId},this)[0],e.legend.forEach(function(e,t){var i=u.id+"-layer-"+n+"-"+t,s=e.label;a.items.push(i),u.layers[n].labels!==undefined&&u.layers[n].labels[t]&&(s=u.layers[n].labels[t]),r+='<div id="'+i+'" class="simple-legend-layer">'+'<img class="simple-legend-image" src="data:image/png;base64,'+e.imageData+'" height="'+e.height+'px" width="'+e.width+'px">'+'<span class="simple-legend-label">'+s+"</span>"+"</div>"}),n+=1}),u.title&&(r+="</div>"),r+="</div>",document.getElementById(u.parentId).insertAdjacentHTML("afterbegin",r),e&&e.bind(a)()):console.log("Error"))},t.addEventListener("error",function(e){e&&console.log(e)},!1),t.open("GET",u.url,!0),t.send()},SimpleLegend.prototype.show=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="block"),this.onShow(),this},SimpleLegend.prototype.hide=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="none"),this.onHide(),this},SimpleLegend.prototype.filterItem=function(e){return this.items.forEach(function(t,n){n===e?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}),this},SimpleLegend}),define("map/Map",["dojo/Evented","dojo/_base/declare","dojo/on","dojo/dom","dojo/topic","dijit/registry","dojo/_base/array","dojo/dom-construct","map/config","analysis/WizardHelper","map/SuitabilityImageServiceLayer","map/SimpleLegend","esri/map","esri/config","esri/InfoTemplate","esri/layers/GraphicsLayer","esri/layers/FeatureLayer","esri/layers/RasterFunction","esri/layers/ImageParameters","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/dijit/Legend","esri/dijit/Geocoder","esri/dijit/Scalebar","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/dijit/BasemapGallery"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L){"use strict";var A=t([e],{element:"map",constructor:function(e){t.safeMixin(this,e),this.addConfigurations(),this.createMap()},addConfigurations:function(){},createMap:function(){var e=this;e.map=new h(this.element,{basemap:this.basemap,center:[this.centerX,this.centerY],sliderPosition:this.sliderPosition,zoom:this.zoom}),e.map.on("load",function(){e.mapLoaded(),e.map.resize(),e.emit("map-ready",{})})},mapLoaded:function(){this.map.graphics.clear(),this.addWidgets(),this.addLayers()},addWidgets:function(){var e,t,n,r,i,s={},o,f,l,h,p;u.create("div",{id:"home-button","class":"home-button"},document.querySelector(".esriSimpleSliderIncrementButton"),"after"),e=new C({map:this.map},"home-button"),e.startup(),i=new L({map:this.map,showArcGISBasemaps:!0},"basemap-gallery"),i.startup(),n=new k({map:this.map,highlightLocation:!1},"location-widget"),n.startup(),r=new T({map:this.map,autoComplete:!0,arcgisGeocoder:{placeholder:"Enter address or region"}},"simple-geocoder"),r.startup(),t=new x({map:this.map,layerInfos:[],autoUpdate:!0},"legend"),t.startup(),o=new N({map:this.map,scalebarUnit:"metric"}),l=new c(a.simpleLegends.settle),l.init(l.hide),f=new c(a.simpleLegends.road),f.init(f.hide),h=new c(a.simpleLegends.poBounds),h.init(h.hide),p=new c(a.simpleLegends.concessions),p.init(p.hide),s.road=f,s.settle=l,s.poBounds=h,s.concessions=p,this.map._simpleLegends=s},addLayers:function(){var e,t,r,u,f,c,h,p,d,m,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q,G=this;t=new y,t.layerOption=y.LAYER_OPTION_SHOW,t.layerIds=a.fires.defaultLayers,t.format="png32",e=new S(a.fires.url,{imageParameters:t,id:a.fires.id,visible:!1}),u=new y,u.layerOption=y.LAYER_OPTION_SHOW,u.layerIds=[],u.format="png32",r=new S(a.legendLayer.url,{imageParameters:u,id:a.legendLayer.id,visible:!1}),c=new b,c.renderingRule=new g({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:a.forma.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:a.forma.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),f=new w(a.forma.url,{imageServiceParameters:c,id:a.forma.id,visible:!1,opacity:1}),m=new b,m.renderingRule=new g({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:a.loss.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:a.loss.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),d=new w(a.loss.url,{imageServiceParameters:m,id:a.loss.id,visible:!1,opacity:1}),h=new E(a.gain.url,{id:a.gain.id,visible:!1}),p=new w(a.gainHelper.url,{id:a.gainHelper.id,visible:!1}),x=new w(a.tcd.url,{id:a.tcd.id,visible:!1}),T=new y,T.layerOption=y.LAYER_OPTION_SHOW,T.layerIds=[],T.format="png32",N=new S(a.ifl.url,{imageParameters:T,id:"forestCover_forestCover",visible:!1}),k=new S(a.peat.url,{imageParameters:T,id:"forestCover_commodities",visible:!1}),C=new S(a.minePerm.url,{imageParameters:T,id:"forestUse_landUse",visible:!1}),L=new S(a.rspoPerm.url,{imageParameters:T,id:"forestUse_commodities",visible:!1}),A=new S(a.opsd.url,{imageParameters:T,id:"productionSuitability",visible:!1}),I=new l(a.suit.url,{id:a.suit.id,visible:!1}),B=new E(a.pal.url,{id:a.pal.id,visible:!1}),j=new y,j.layerOption=y.LAYER_OPTION_SHOW,j.layerIds=[a.palHelper.layerId],j.format="png32",F=new S(a.palHelper.url,{imageParameters:j,id:a.palHelper.id,maxScale:0,minScale:0,visible:!1}),$=new y,$.layerOption=y.LAYER_OPTION_SHOW,$.layerIds=[a.biodiversity.layerId],$.format="png32",J=new S(a.biodiversity.url,{imageParameters:$,id:a.biodiversity.id,visible:!1}),R=new y,R.layerOption=y.LAYER_OPTION_SHOW,R.layerIds=a.overlays.defaultLayers,R.format="png32",q=new S(a.overlays.url,{imageParameters:R,id:a.overlays.id,visible:!1}),X=new y,X.layerOption=y.LAYER_OPTION_SHOW,X.layerIds=[],X.format="png32",V=new S(a.adminUnitsLayer.url,{imageParameters:X,id:a.adminUnitsLayer.id,visible:!1}),Q=new v({id:a.wizardGraphicsLayer.id}),U=new v({id:a.customGraphicsLayer.id}),app.map.addLayers([r,x,I,N,C,k,L,A,B,F,J,f,d,h,p,e,V,q,U,Q]),n.once(app.map,"layers-add-result",function(e){G.emit("layers-loaded",{response:e});var t=o.map(e.layers,function(e){return{layer:e.layer}});t=o.filter(t,function(e){return e.layer.url?e.layer.url.search("ImageServer")<0&&e.layer.id.search("Gain")<0&&e.layer.id!==a.adminUnitsLayer.id:!1}),s.byId("legend").refresh(t)}),e.on("error",this.addLayerError),f.on("error",this.addLayerError),d.on("error",this.addLayerError),h.on("error",this.addLayerError),p.on("error",this.addLayerError),x.on("error",this.addLayerError),I.on("error",this.addLayerError),B.on("error",this.addLayerError),F.on("error",this.addLayerError),N.on("error",this.addLayerError),C.on("error",this.addLayerError),k.on("error",this.addLayerError),L.on("error",this.addLayerError),A.on("error",this.addLayerError),V.on("error",this.addLayerError),q.on("error",this.addLayerError),U.on("error",this.addLayerError),J.on("error",this.addLayerError),I.on("image-ready",function(){i.publish("customSuitabilityImageReady")})},addLayerError:function(e){console.error(e)}});return A}),define("map/Finder",["dojo/on","dojo/dom","dojo/Deferred","dojo/promise/all","map/config","map/MapModel","analysis/WizardHelper","utils/AlertsHelper","utils/GeoHelper","esri/graphic","dojo/_base/array","esri/InfoTemplate","esri/geometry/Point","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/geometry/webMercatorUtils","esri/symbols/PictureMarkerSymbol"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){"use strict";return{searchAreaByCoordinates:function(){var e={},n,r,i=!1,o="You did not enter a valid value.  Please check that your location values are all filled in and nubmers only.",u=new m("app/css/images/RedStickpin.png",32,32),f={},l,c,h=function(e){return i||(i=isNaN(parseFloat(e))),isNaN(parseFloat(e))?0:parseFloat(e)};s.get("showDMSInputs")?(e.dlat=h(t.byId("degreesLatInput").value),e.mlat=h(t.byId("minutesLatInput").value),e.slat=h(t.byId("secondsLatInput").value),e.dlon=h(t.byId("degreesLonInput").value),e.mlon=h(t.byId("minutesLonInput").value),e.slon=h(t.byId("secondsLonInput").value),n=e.dlat+e.mlat/60+e.slat/3600,r=e.dlon+e.mlon/60+e.slon/3600):(n=h(t.byId("latitudeInput").value),r=h(t.byId("longitudeInput").value)),i?alert(o):(f.locatorValue=a.nextCustomFeatureId(),f.id="LOCATOR_"+f.locatorValue,c=a.generatePointGraphicFromGeometric(r,n,f),app.map.graphics.add(c),app.map.centerAndZoom(c.geometry,7),s.set("showClearPinsOption",!0))},performIdentify:function(e){var t=e.mapPoint,n=[],o=[],u=this,a,f;app.map.infoWindow.clearFeatures(),f=app.map.getLayer(i.fires.id),f&&f.visible&&n.push(u.identifyFires(t)),f=app.map.getLayer(i.rspoPerm.id),f&&f.visible&&n.push(u.identifyforestUseCommodities(t)),f=app.map.getLayer(i.oilPerm.id),f&&f.visible&&n.push(u.identifyforestUseLandUse(t)),a=app.map.getLayer(i.palHelper.id),f=app.map.getLayer(i.pal.id),f&&a&&(f.visible||a.visible)&&n.push(u.identifyWDPA(t)),f=app.map.getLayer(i.adminUnitsLayer.id),f&&f.visible&&n.push(u.identifyWizardDynamicLayer(t)),f=app.map.getLayer(i.biomes.id),f&&f.visible&&n.push(u.identifyBiomesLayer(t)),f=app.map.getLayer(i.customGraphicsLayer.id),f&&f.visible&&n.push(u.getCustomGraphics(e));if(n.length===0)return;if(s.get("drawToolsEnabled"))return;r(n).then(function(e){l.forEach(e,function(e){console.log(e),console.log(e.layer);switch(e.layer){case"Fires":o=o.concat(u.setFireTemplates(e.features));break;case"forestUseCommodities":o=o.concat(u.setForestUseCommoditiesTemplates(e.features));break;case"forestUseLandUse":o=o.concat(u.setForestUseLandUseTemplates(e.features));break;case"WDPA":o=o.concat(u.setWDPATemplates(e.features));break;case"WizardDynamic":o=o.concat(u.setWizardTemplates(e.features));break;case"CustomGraphics":o.push(u.setCustomGraphicTemplates(e.feature));break;case"Biomes":o=o.concat(u.setBiomesTemplates(e.features));break;default:}}),o.length>0&&(app.map.infoWindow.setFeatures(o),app.map.infoWindow.show(t))})},identifyFires:function(e){var t=new n,r=new p(i.fires.url),s=new d;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[0,1,2,3],s.layerOption=d.LAYER_OPTION_VISIBLE,r.execute(s,function(e){e.length>0?t.resolve({layer:"Fires",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setFireTemplates:function(e){var t,n=[];return l.forEach(e,function(e){t=new c(e.layerName,i.fires.infoTemplate.content),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyWDPA:function(e){var t=new n,r=new p(i.palHelper.url),s=new d;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[i.palHelper.id],s.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(s,function(e){e.forEach(function(e){e.feature.layer="WDPA"}),e.length>0?t.resolve({layer:"WDPA",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWDPATemplates:function(e){var t,n=[],r;return l.forEach(e,function(e){r=i.pal.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='WDPA' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='WDPA' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>",t=new c(e.value,r),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyforestUseCommodities:function(e){var t=new n,r=new p(i.rspoPerm.url),s=new d;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=app.map.getLayer(i.rspoPerm.id).visibleLayers,s.layerOption=d.LAYER_OPTION_VISIBLE,s.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(s,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="forestUseCommodities-"+e.layerId}),t.resolve({layer:"forestUseCommodities",features:e})):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},identifyforestUseLandUse:function(e){var t=new n,r=new p(i.oilPerm.url),s=new d;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=app.map.getLayer(i.oilPerm.id).visibleLayers,s.layerOption=d.LAYER_OPTION_VISIBLE,s.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(s,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="forestUseLandUse-"+e.layerId}),t.resolve({layer:"forestUseLandUse",features:e})):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},identifyBiomesLayer:function(e){var t=new n,r=new p(i.biomes.url),s=new d;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[i.biomes.layerId],s.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(s,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="Biomes"}),t.resolve({layer:"Biomes",features:e})):t.resolve(!1)}),t},setBiomesTemplates:function(e){var t=[],n;return e.forEach(function(e){n=i.biomes.infoTemplate.content,e.feature.setInfoTemplate(new c(e.value,n)),t.push(e.feature)}),t},setForestUseCommoditiesTemplates:function(e){var t,n=[],r=this;return l.forEach(e,function(e){console.log(e.layerId),e.layerId===4?(t=new c(e.value,i.rspoPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===6?(t=new c(e.value,i.mill.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${mill_name}' data-type='MillPoint' data-id='${wri_id}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+"${mill_name}' data-type='MillPoint' data-id='${wri_id}'>Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===27&&(t=new c(e.value,i.gfwMill.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${mill_name_}' data-type='MillPoint' data-id='${wri_id}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+"${mill_name_}' data-type='MillPoint' data-id='${wri_id}'>Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.filter(function(t){return t.attributes.wri_id===e.feature.attributes.wri_id}).length===0&&n.push(e.feature))}),n},setForestUseLandUseTemplates:function(e){var t,n=[],r=this;return l.forEach(e,function(e){console.log(e.layerId),e.layerId===0?(t=new c(e.value,i.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Wood fiber plantation' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Wood fiber plantation' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===1?(t=new c(e.value,i.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Oil palm concession' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Oil palm concession' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===2?(t=new c(e.value,i.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Mining concession' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Mining concession' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===3&&(t=new c(e.value,i.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Logging concession' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Logging concession' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature))}),n},identifyWizardDynamicLayer:function(e){var t=new n,r=new p(i.adminUnitsLayer.url),s=app.map.getLayer(i.adminUnitsLayer.id),o=new d,u=[];return u[7]="1 = 1",u[13]=s.layerDefinitions[13],o.tolerance=3,o.returnGeometry=!1,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=s.visibleLayers,o.layerDefinitions=u,o.layerOption=d.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.length>0?t.resolve({layer:"WizardDynamic",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWizardTemplates:function(e){var t,n=[],r=this;return l.forEach(e,function(e){e.layerId===7?t=new c(e.value,i.adminUnitsLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+"${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"):t=new c(e.value,i.certificationSchemeLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyMillPoints:function(e){var t=new n,r=new p(i.mill.url),s=app.map.getLayer(i.mill.id),o=new d,u=[];return u[0]="1 = 1",o.tolerance=3,o.returnGeometry=!0,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=s.visibleLayers,o.layerDefinitions=u,o.layerOption=d.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.forEach(function(e){e.feature.layer="MillPoints"}),e.length>0?t.resolve({layer:"MillPoints",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},getCustomGraphics:function(e){var t=new n;return e.graphic&&e.graphic._layer.id===i.customGraphicsLayer.id?t.resolve({layer:"CustomGraphics",feature:e.graphic}):t.resolve(!1),t.promise},setCustomGraphicTemplates:function(e){var t=e.attributes.WRI_label,n;return n=new c(t,i.customGraphicsLayer.infoTemplate.content+"<div>"+"<button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+t+"' data-type='CustomGraphic' data-id='${WRI_ID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+t+"' data-type='CustomGraphic' data-id='${WRI_ID}'>"+"Subscribe</button>"+"</div>"),e.setInfoTemplate(n),e},createFormattingFunctions:function(){window.checkAvailable=function(e,t,n){return n[t]===undefined||n[t]==="Null"?"N/A":n[t]}},setupInfowindowListeners:function(){var n,r;e(app.map.infoWindow,"selection-change",function(){setTimeout(function(){t.byId("popup-analyze-area")&&(n&&n.remove(),n=e(t.byId("popup-analyze-area"),"click",o.analyzeAreaFromPopup.bind(o))),t.byId("subscribe-area")&&(r&&r.remove(),r=e(t.byId("subscribe-area"),"click",u.subscribeFromPopup))},0)}),e(app.map.infoWindow,"hide",function(){n&&n.remove(),r&&r.remove()})}}}),function(e,t){e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var n={},r=1e3/60;n.fadeIn=function(t,n,i){function a(){o.style.opacity=1*o.style.opacity+u,o.style.opacity<1?e.requestAnimationFrame(a):(s=t.shift(),o=document.getElementById(s),o?e.requestAnimationFrame(a):typeof i=="function"&&i())}Object.prototype.toString.call(t)!=="[object Array]"&&(t=[t]);var s=t.shift(),o=document.getElementById(s),u=r/(n.duration||500);e.requestAnimationFrame(a)},typeof define=="function"&&define.amd?define("utils/Animator",[],function(){return n}):typeof module=="object"&&module.exports?module.exports=n:e.animator=n}(window,document,define),define("map/TCDSlider",["dojo/on","map/MapModel","map/LayerController"],function(e,t,n){"use strict";var r,i,s={show:function(){var t=this;r===undefined&&(r=$("#tcd-density-slider").ionRangeSlider({type:"double",values:[0,10,15,20,25,30,50,75,100],hide_min_max:!0,from_min:1,from_max:7,to_fixed:!0,grid:!0,grid_snap:!0,from:5,onFinish:t.change,prettify:function(e){return e+"%"}})),i=$("#tcd-modal"),i.addClass("active"),e.once($("#tcd-modal .close-icon")[0],"click",t.hide)},hide:function(){i&&i.removeClass("active")},change:function(e){var r=e.from_value;r&&(t.set("tcdDensityValue",e.from_value),n.updateTCDRenderingRule(e.from_value))}};return s}),define("components/Check",["react","dojo/topic","dojo/dom-class","utils/Hasher","dijit/form/HorizontalSlider"],function(e,t,n,r,i){return e.createClass({getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=r.getLayers(),n=e.indexOf(this.props.id)>-1,s=this;n&&(this.setState({active:n}),this.props.useRadioCallback||this.props.id==="suit"?t.publish("toggleLayer",this.props.id):requestAnimationFrame(function(){t.publish("updateLayer",s.props)})),this.props.kids||document.getElementById(this.props.id+"_slider")&&(new i({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){t.publish("changeLayerTransparency",s.props.id,s.props.layerType,e)}},this.props.id+"_slider")).startup()},toggle:function(e){!n.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(e){document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.parent?" indented":"")+(this.props.kids?" newList":"")+(this.props.visible?"":" hidden");return e.createElement("li",{className:t,"data-layer":this.props.id},e.createElement("div",{id:this.props.id+"_checkbox",onClick:this.props.kids?null:this.toggle},this.props.kids?null:e.createElement("span",{className:"custom-check"},e.createElement("span",null)),this.props.infoDivClass!==undefined?e.createElement("span",{onClick:this.showInfo,className:"layer-info-icon",dangerouslySetInnerHTML:{__html:"<svg class='info-icon-svg'><use xlink:href='#shape-info'></use></svg>"}}):null,e.createElement("a",{className:"layer-title"},this.props.title),e.createElement("p",{className:"layer-sub-title"},this.props.subtitle),this.props.kids?null:e.createElement("div",{title:"Layer Transparency",className:"sliderContainer"+(this.state.active?"":" hidden")},e.createElement("div",{id:this.props.id+"_slider"}))))}})}),define("components/RadioButton",["react","knockout","dojo/topic","dojo/dom-class","utils/Hasher","map/MapModel","map/TCDSlider","components/Check","dijit/form/HorizontalSlider"],function(e,t,n,r,i,s,o,u,a){var f=e.createClass({displayName:"RadioButton",getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=i.getLayers(),r=e.indexOf(this.props.id)>-1,o=this;r&&(n.publish("showLayer",this.props.id),this.setState({active:r})),document.getElementById(this.props.id+"_slider")&&!this.props.noSlider&&(new a({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){n.publish("changeLayerTransparency",o.props.id,o.props.layerType,e)}},this.props.id+"_slider")).startup(),this.props.id==="tcd"&&t.applyBindings(s.get("model"),document.querySelector(".tcd-button-container"))},toggle:function(e){!r.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(e){document.getElementsByClassName(this.props.infoDivClass).length?n.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):n.publish("showInfoPanel",this.props.infoDivClass)},showTCDSlider:function(){o.show()},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.parent?" indented":"")+(this.props.forceUnderline?" newList":"")+(this.props.visible?"":" hidden");return e.createElement("li",{className:t,"data-layer":this.props.id,"data-name":this.props.filter},e.createElement("div",{onClick:this.toggle},e.createElement("span",{className:"radio-icon"},e.createElement("span",null)),this.props.title!=="None"&&this.props.id!=="tcc"&&!this.props.noSlider?e.createElement("span",{onClick:this.showInfo,className:"layer-info-icon",dangerouslySetInnerHTML:{__html:"<svg class='info-icon-svg'><use xlink:href='#shape-info'></use></svg>"}}):null,e.createElement("a",{className:"layer-title"},this.props.title),e.createElement("p",{className:"layer-sub-title"},this.props.subtitle)),this.props.children?e.createElement("ul",null," ",this.props.children.map(this._mapper)," "):this.props.layerType!=="none"&&!this.props.noSlider?e.createElement("div",{title:"Layer Transparency",className:"sliderContainer"+(this.state.active?"":" hidden")},e.createElement("div",{id:this.props.id+"_slider"})):null,this.props.id==="tcd"?e.createElement("div",{className:"tcd-button-container"+(this.state.active?"":" hidden")},e.createElement("span",{className:"tcd-percentage-label"},"Displaying at "),e.createElement("span",{className:"tcd-percentage-button",onClick:this.showTCDSlider,"data-bind":"text: tcdDensityValue"}),e.createElement("span",{className:"tcd-percentage-label"}," density")):null)},_mapper:function(t){return t.visible=this.state.active,t.handle=this.props.handle,t.postCreate=this.props.postCreate,t.useRadioCallback=!0,t.type==="radio"?e.createElement(f,e.__spread({},t)):e.createElement(u,e.__spread({},t))}});return f}),define("components/LayerList",["react","dojo/topic","utils/Hasher","components/RadioButton","components/Check"],function(e,t,n,r,i){var s=[],o=e.createClass({displayName:"List",getInitialState:function(){return{title:this.props.title,filter:this.props.filter}},componentDidMount:function(){},componentWillReceiveProps:function(e,t){this.setState(e)},render:function(){return e.createElement("div",{className:"smart-list"},e.createElement("div",{className:"filter-list-title"},this.props.title),e.createElement("div",{className:"layer-line"}),e.createElement("ul",{className:"filter-list"},this.props.items.map(this._mapper,this)))},_mapper:function(t){return t.visible=this.state.filter===t.filter,t.handle=this._handle,t.postCreate=this._postCreate,t.type==="radio"?e.createElement(r,e.__spread({},t)):e.createElement(i,e.__spread({},t))},_handle:function(e){e.props.type==="radio"?this._radio(e):this._check(e)},_check:function(e){var r=!e.state.active;e.setState({active:r}),n.toggleLayers(e.props.id),e.props.useRadioCallback||e.props.id==="suit"?t.publish("toggleLayer",e.props.id):requestAnimationFrame(function(){t.publish("updateLayer",e.props)})},_radio:function(e){var r,i;s.forEach(function(t,n){t.props.filter===e.props.filter&&t.state.active&&(r=t)}),r?(i=r.props.id!==e.props.id,i?(r.props.type!=="check"&&(r.setState({active:!1}),r.props.id.search("none_")===-1&&(n.toggleLayers(r.props.id),t.publish("hideLayer",r.props.id)),this._toggleChildren(r,"remove")),e.props.id.search("none_")===-1&&(n.toggleLayers(e.props.id),t.publish("showLayer",e.props.id))):(e.setState({active:!1}),this._toggleChildren(e,"remove"),n.removeLayers(e.props.id),t.publish("hideLayer",e.props.id))):e.props.id.search("none_")===-1&&(n.toggleLayers(e.props.id),t.publish("showLayer",e.props.id)),i!==!1&&(e.setState({active:!0}),this._toggleChildren(e,"add"))},_toggleChildren:function(e,r){var i=[];e.props.children&&(e.props.children.forEach(function(e){s.forEach(function(t){t.props.id===e.id&&i.push(t)})}),r==="remove"?i.forEach(function(e){e.state.active&&(t.publish("hideLayer",e.props.id),n.removeLayers(e.props.id))}):i.forEach(function(e){e.state.active&&(t.publish("showLayer",e.props.id),n.toggleLayers(e.props.id))}))},_postCreate:function(e){s.push(e)},toggleFormElement:function(e){s.forEach(function(t){t.props.id===e&&t.props.handle(t)})}});return function(t,n){return e.render(e.createElement(o,e.__spread({},t)),document.getElementById(n))}}),define("utils/Loader",["dojo/Deferred"],function(e){"use strict";return{getTemplate:function(t){var n=new e,r="./app/templates/"+t+".html?v=2.5.18",i;return i=new XMLHttpRequest,i.onreadystatechange=function(){i.readyState===4&&i.status===200&&n.resolve(i.responseText)},i.open("GET",r,!0),i.send(),n.promise},loadCSS:function(e){var t=doc.createElement("link"),n=doc.getElementsByTagName("head")[0];t.rel="stylesheet",t.type="text/css",t.href=e,n.appendChild(t)}}}),define("controllers/MapController",["dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","dojo/dom-geometry","dojo/number","map/config","map/Map","map/Finder","map/MapModel","utils/Hasher","utils/Animator","utils/Helper","utils/GeoHelper","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/graphicsUtils","map/Controls","map/LayerController","analysis/WizardStore","components/LayerList","utils/Loader","map/Uploader","map/CoordinatesModal","utils/Analytics"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L){"use strict";var A=!1,O,M,_=!1,D,P=document.createElement("infoDiv");return{init:function(r){var i=this,s=[],u;if(A){o.byId("stackContainer").selectChild("mapView"),L.sendPageview("/#v=map","Map");return}A=!0,o.byId("mapView").set("content",r),o.byId("stackContainer").selectChild("mapView");var a=d.getHash("x"),g=d.getHash("y"),b=d.getHash("l"),w={};for(var E in l.mapOptions)w[E]=l.mapOptions[E];a!==undefined&&a!==""&&(w.centerX=a),a!==undefined&&a!==""&&(w.centerY=g),a!==undefined&&a!==""&&(w.zoom=b),D=new c(w),app.map=D.map,D.on("layers-loaded",function(){var e=d.getHash("f"),t,n,r,i;if(e!==undefined){t=e.split("-"),n=t[0];switch(n){case"WDPA":i={layer:n,url:l.pal.url+"/0",objectId:t[1],templateFunction:h.setWDPATemplates},S.setSelectedFeature(i);break;case"MillPoints":i={layer:n,url:l.mill.url+"/0",objectId:t[1],templateFunction:h.setMillPointTemplates},S.setSelectedFeature(i);break;case"Concessions":i={layer:n+"-"+t[1],url:l.concession.url+"/"+t[1],objectId:t[2],templateFunction:h.setConcessionTemplates},S.setSelectedFeature(i)}}}),D.on("map-ready",function(){var e=y.webMercatorToGeographic(D.map.extent),t=f.round(e.getCenter().x,2),n=f.round(e.getCenter().y,2),r=D.map.getZoom();setTimeout(function(){d.setHash("x",t),d.setHash("y",n)},1e3),O=p.initialize("map-container"),i.renderComponents(),i.bindUIEvents(),i.registerStoreCallbacks();var s=d.getHash("wiz");s!==undefined&&s==="open"&&m.toggleWizard()}),app.map.on("zoom-end",S.checkZoomDependentLayers.bind(S)),app.map.on("click",h.performIdentify.bind(h)),h.createFormattingFunctions(),h.setupInfowindowListeners(),n(".gfw .map-layer-controls li").forEach(function(e){s.push(e.id)}),v.fadeIn(s,{duration:100});try{addthis.init()}catch(x){t.byId("sharing-modal").innerHTML="Sorry.  AddThis is temporarily down."}e(app.map.infoWindow,"hide",function(){d.removeKey("f")});var T,N=["attributes","geometry","infoTemplate","symbol"],C=e.pausable(app.map.infoWindow,"selection-change",function(){if(this.features){if(JSON.stringify(this.features,N)!=JSON.stringify(T,N)){var e=[],t,n,r=this;r.features.forEach(function(r){n=r.attributes.Mill_name!==undefined,n?(t=!0,e.unshift(r)):e.push(r)}),t&&(C.pause(),r.hide(),r.clearFeatures(),r.setFeatures(e),T=e,r.show(r.location,{closestFirst:!1}),C.resume())}d.setHash("f",this.getSelectedFeature().layer+"-"+this.getSelectedFeature().attributes.OBJECTID)}else d.removeKey("f")});L.sendPageview("/#v=map","Map")},bindUIEvents:function(){var r=this;e(app.map,"mouse-move",function(e){p.set("currentLatitude",e.mapPoint.getLatitude().toFixed(4)),p.set("currentLongitude",e.mapPoint.getLongitude().toFixed(4))}),e(app.map,"extent-change",function(e){var t=e.delta,n=y.webMercatorToGeographic(e.extent),r=e.levelChange,i=e.lod,s=e.target,o=f.round(n.getCenter().x,2),u=f.round(n.getCenter().y,2);d.setHash("x",o),d.setHash("y",u),d.setHash("l",i.level)}),e(t.byId("locator-widget-button"),"click",function(){p.set("showBasemapGallery",!1),p.set("showSharingOptions",!1),p.set("showLocatorOptions",!p.get("showLocatorOptions"))}),e(t.byId("basemap-gallery-button"),"click",function(){p.set("showLocatorOptions",!1),p.set("showSharingOptions",!1),p.set("showBasemapGallery",!p.get("showBasemapGallery"))}),e(t.byId("share-button"),"click",function(){p.set("showLocatorOptions",!1),p.set("showBasemapGallery",!1),p.set("showSharingOptions",!p.get("showSharingOptions")),L.sendEvent("Event","Share Button","User clicked the share button.")}),e(t.byId("dms-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(p.set("showDMSInputs",!0),p.set("showLatLongInputs",!1))}),e(t.byId("lat-long-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(p.set("showDMSInputs",!1),p.set("showLatLongInputs",!0))}),e(t.byId("search-option-go-button"),"click",function(){h.searchAreaByCoordinates()}),e(t.byId("clear-search-pins"),"click",function(){D.map.graphics.clear(),p.set("showClearPinsOption",!1)}),n(".map-layer-controls li").forEach(function(e){e.addEventListener("mouseenter",function(){r.toggleLayerList(e)})}),e(t.byId("master-layer-list"),"mouseleave",function(){s.set("master-layer-list","opacity",0),s.set("master-layer-list","left","-1000px")}),n(".fires_toolbox .toolbox-list li").forEach(function(t){e(t,"click",E.toggleFiresLayerOptions)}),e(t.byId("high-confidence"),"change",E.toggleFiresConfidenceLevel),e(t.byId("high-confidence-info"),"click",E.showFiresConfidenceInfo),n(".gfw .overlays-container .overlays-checkbox").forEach(function(t){e(t,"click",E.toggleOverlays)}),e(t.byId("legend-title"),"click",function(){E.toggleLegendContainer()}),e(t.byId("reset-suitability"),"click",function(){E.resetSuitabilitySettings()}),e(t.byId("export-suitability"),"click",function(){E.exportSuitabilitySettings()}),e(t.byId("close-suitability"),"click",function(){r.toggleItemInLayerList("suit")}),e(t.byId("wizard-tab"),"click",function(){m.toggleWizard()}),n(".suitability-accordion .slider-name .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),n(".suitability-accordion .criteria-separator .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),e(t.byId("upload-form"),"change",C.beginUpload.bind(C)),e(document.querySelector(".coordinates-modal-enter-button"),"click",k.savePoint.bind(k))},registerStoreCallbacks:function(){x.set("customFeatures",[]),x.set("removedCustomFeatures",[]),x.set("selectedCustomFeatures",[]),x.set("selectedPresetFeature",null),x.registerCallback("customFeatures",function(){var e=D.map.getLayer(l.customGraphicsLayer.id),t=x.get("customFeatures"),n=e.graphics.length-t.length,r,i,s;i=function(){t.slice(e.graphics.length-t.length).forEach(function(t){if(t.geometry.type==="point"){var n=g.preparePointAsPolygon(t,50);e.add(n)}else e.add(t)})},s=function(){x.get("removedCustomFeatures").forEach(function(t){if(t.geometry.type==="point"){var n="WRI_ID";g.removeGraphicByField(e.id,n,t.attributes[n])}else e.remove(t)})},t.length>0&&n<0?i():n>0?s():t.length===0&&e.clear()}),x.registerCallback("selectedCustomFeatures",function(){var e=x.get("selectedCustomFeatures"),t;e.length>0&&D.map.setExtent(w.graphicsExtent(e),!0)})},toggleLayerList:function(e){var t=e.dataset?e.dataset.filter:e.getAttribute("data-filter"),n=e.dataset?e.dataset.class:e.getAttribute("data-class"),r=a.position(e,!0),o=180,u;u=(r.w-o)/2,s.set("master-layer-list","left",r.x+u+"px"),v.fadeIn("master-layer-list",{duration:100}),i.remove("master-layer-list"),i.add("master-layer-list",n),M&&M.setProps({title:e.children[0].innerHTML,filter:t})},renderComponents:function(){var e=d.getHash();e.lyrs===undefined&&(d.toggleLayers("tcc"),d.toggleLayers("loss")),E.generateSuitabilitySliders(),M=new T({items:l.layersUI},"master-layer-list"),E.generateTimeSliders()},toggleItemInLayerList:function(e){M.toggleFormElement(e)},centerChange:function(e,t,n){if(!A)return;var r=y.webMercatorToGeographic(D.map.extent),i=y.webMercatorToGeographic(D.map.extent);e=f.round(i.getCenter().x,2),t=f.round(i.getCenter().y,2);var s=D.map.getLevel(),o=d.getHash(),u=parseFloat(o.x)!=e||parseFloat(o.y)!=t||parseInt(o.l)!=s;if(u){var a=y.geographicToWebMercator(new b(parseFloat(o.x),parseFloat(o.y)));D.map.centerAndZoom(a,parseInt(o.l))}},showInfoPanel:function(e){var t;typeof e=="object"?(t=e,E.createDialogBox(t)):_?(t=P.querySelector("."+e),E.createDialogBox(t)):N.getTemplate("data").then(function(n){_=!0,P.innerHTML=n,t=P.querySelector("."+e),E.createDialogBox(t)})}}}),define("utils/NavListController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dojo/hash","dojo/io-query","utils/Hasher","utils/Analytics"],function(e,t,n,r,i,s,o,u){function a(e){return e.replace(/\w*/g,function(e){return e==="GFW"?e:e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}return{loadNavControl:function(e){function i(e,i){t(".nav-item-a.selected ").forEach(function(e){e.parentElement.id.indexOf(i)>-1&&(n.remove(e,"selected"),r.set(e.parentElement.id.match(/(.*)Nav/)[1],"display","none"),n.remove(e.parentElement.id.match(/(.*)Nav/)[1],"selected"))}),n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block");var s=e.id;s=s.replace("Nav","").replace(i,""),o.setHash("n",s);var f=a(i)+" - "+a(e.children[0].innerHTML),l="/#v="+i+"&n="+s;u.sendPageview(l,f)}t(".nav-item").forEach(function(t){t.id.indexOf(e)>-1&&(t.onclick=function(){i(t,e)})})},loadNavView:function(o){var f=s.queryToObject(i()),l=!0,c;f.hasOwnProperty("n")?t(".nav-item").forEach(function(e){e.id.indexOf(o)>-1&&f.n===e.id.replace("Nav","").replace(o,"")&&(n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block"),n.add(e.id.match(/(.*)Nav/)[1],"selected"),l=!1,c=e.children[0])}):(t(".nav-item-a.default-selection").forEach(function(e){e.parentElement.id.indexOf(o)>-1&&(n.add(e,"selected"),c=e)}),t(".nav-subpage.default-selection").forEach(function(e){e.id.indexOf(o)>-1&&r.set(e,"display","block")})),f.hasOwnProperty("s")&&e.byId(f.s)&&(e.byId(f.s).checked=!0);var h=a(o)+" - "+a(c.innerHTML),p=c.parentElement.id.replace("Nav","").replace(o,""),d="/#v="+o+"&n="+p;u.sendPageview(d,h)},urlControl:function(e){var n={},r,i;n.v=e;var s=t(".nav-item-a.selected");s.length>0?s.forEach(function(t){t.parentElement.id.indexOf(e)>-1&&(n.n=t.parentElement.id.replace("Nav","").replace(e,""))}):n.n&&delete n.n,r=document.getElementsByTagName("input");for(i=0;i<r.length;i++)r[i].checked?n.s=r[i].id:n.s&&delete n.s;var u=!0;r=document.getElementsByTagName("input");for(i=0;i<r.length;i++)r[i].checked&&(n.s=r[i].id,u=!1);var a=e.indexOf("data")>-1;(u||!a)&&n.s&&delete n.s,o.setHashFromState(n)}}}),define("controllers/Header",["dojo/on","dojo/dom","dojo/dom-style","dojo/query","dojo/hash","dojo/dom-class","dojo/io-query","dijit/Dialog","utils/Hasher","main/config","utils/NavListController"],function(e,t,n,r,i,s,o,u,a,f,l){"use strict";var c="large",h=!1;return{init:function(e){if(h)return;t.byId("app-header").innerHTML=t.byId("app-header").innerHTML+e,this.bindEvents(),h=!0},setState:function(e){s.remove("app-header",c),s.add("app-header",e),c=e},bindEvents:function(){var t=this;r(".header .nav-link").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r=n.dataset?n.dataset.view:n.getAttribute("data-view"),i=n.dataset?n.dataset.external:n.getAttribute("data-external");t.updateView(r,i,h)})}),r("#dijit_Dialog_0 > div.dijitDialogPaneContent > p > a").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r="map",i=!1;$("#dijit_Dialog_0 > div.dijitDialogTitleBar > span.dijitDialogCloseIcon").click(),t.updateView(r,i,h)})}),r(".nav-link-more").forEach(function(e){e.onclick=function(){t.changeNavItemAbout(e,"about")}});var n=function(){$("#learn-more-dropdown").removeClass("hidden")},i=function(){$("#learn-more-dropdown").addClass("hidden")};$("#learnMoreItem").mouseenter(n).mouseleave(i),setTimeout(function(){$("#footerSelecter").click(function(){t.addSubscriptionDialog()})},200)},changeNavItemAbout:function(e,t){r(".nav-item-a.selected ").forEach(function(e){e.parentElement.id.indexOf(t)>-1&&(s.remove(e,"selected"),n.set(e.parentElement.id.match(/(.*)Nav/)[1],"display","none"),s.remove(e.parentElement.id.match(/(.*)Nav/)[1],"selected"))});var u=o.queryToObject(i());u.v!="about"?(a.setHash("v","about"),a.setHash("n",e.dataset.src)):a.setHash("n",e.dataset.src);var f;switch(e.dataset.src){case"GFW":f=$("#aboutGFWNav");break;case"History":f=$("#aboutHistoryNav");break;case"Partners":f=$("#aboutPartnersNav");break;case"Videos":f=$("#aboutVideosNav");break;case"Users":f=$("#aboutUsersNav");break;default:f=$("#aboutGFWNav")}f[0]&&e.dataset.src===f[0].id.replace("Nav","").replace(t,"")&&(s.add(f[0].children[0],"selected"),n.set(f[0].id.match(/(.*)Nav/)[1],"display","block"),s.add(f[0].id.match(/(.*)Nav/)[1],"selected"))},updateView:function(e,t,n){if(t==="true"){this.redirectPage(e);return}r(".header .nav-link.selected").forEach(function(e){s.remove(e,"selected")}),r('.nav-link-list [data-view="'+e+'"]').forEach(function(e){s.add(e,"selected")}),n&&a.setHash("v",e)},toggleForView:function(e){e==="map"?this.setForMap():e==="home"?this.setForHome():this.setForGenericView()},setForMap:function(){s.add("nav-content","outer"),s.remove("nav-content","inner"),s.add("app-header","mapView"),s.remove("app-header","generalView")},setForGenericView:function(){this.setForHome(),s.remove("app-header","mapView"),s.add("app-header","generalView"),$(".footerModesContainer").hide()},setForHome:function(){s.add("nav-content","inner"),s.remove("nav-content","outer"),s.remove("app-header","mapView"),s.remove("app-header","generalView"),$(".footerModesContainer").show()},redirectPage:function(e){window.open(f.urls[e],"_blank")},addSubscriptionDialog:function(){this.dialog2=new u({style:"width: 300px; text-align: center;"});var e=this,t='<p>To sign up for tree clearance or fire alerts go to the <span id="goToMapFromDialog">Map</span>, turn on a data layer from the Forest Use or Conservation drop-down tabs, select an area on the map, and click "Subscribe".</p>';this.dialog2.setContent(t),$("#goToMapFromDialog").css("color","#e98300"),$("#goToMapFromDialog").css("cursor","pointer"),$("#goToMapFromDialog").css("font-weight","bold"),$("#goToMapFromDialog").click(function(){e.dialog2.destroy(),e.updateView("map",!1,!0)}),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-top","-30px"),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-bottom","-10px"),this.dialog2.show()}}}),define("models/FooterModel",["dojo/_base/declare","dojo/dom","main/config","knockout"],function(e,t,n,r){var i=e(null,{constructor:function(e){var n={};n.vm={};var i=n.vm;i.root=e,n.applyBindings=function(e){r.applyBindings(i,t.byId(e))}}});return i.get=function(e){return e==="model"?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.applyTo=function(e){r.applyBindings(i.vm,document.getElementById(e))},i.initialize=function(e){return i.instance||(i.instance=new i(e)),i.instance},i}),define("controllers/Footer",["dojo/query","dojo/dom","dojo/dom-style","dojo/dom-class","models/FooterModel"],function(e,t,n,r,i){"use strict";var s=!1;return{init:function(n){if(s)return;s=!0,t.byId("app-footer").innerHTML=n+t.byId("app-footer").innerHTML;var i=document.createElement("script"),o=document.getElementsByTagName("head")[0];i.src="http://www.globalforestwatch.org/gfw-assets",i.async=!0,i.onload=i.onreadystatechange=function(){var t,n=setInterval(function(){t=e("#headerGfw .shape-commodities")[0],t!==undefined&&(r.add(t,"current"),clearInterval(n))},50)},o.appendChild(i)},toggle:function(e){e?n.set("app-footer","display","none"):n.set("app-footer","display","block")}}}),define("models/HomeModel",["dojo/_base/declare","main/config","knockout"],function(e,t,n){var r=e(null,{constructor:function(e){r.vm={},r.root=e,r.vm.homeModeOptions=n.observableArray(t.homeModeOptions),r.vm.dataSubmit=function(e,t){debugger},r.vm.modeSelect=function(e,t){var n=e.eventName;require(["controllers/HomeController"],function(e){e.handleModeClick(n)})},r.vm.dotSelect=function(e,t){require(["controllers/HomeController"],function(t){t.handleDotClick(e)})},n.applyBindings(r.vm,document.getElementById(e))}});return r.get=function(e){return e==="model"?r.vm:r.vm[e]()},r.set=function(e,t){r.vm[e](t)},r.applyTo=function(e){n.applyBindings(r.vm,document.getElementById(e))},r.initialize=function(e){return r.instance||(r.instance=new r(e)),r.instance},r}),define("controllers/HomeController",["main/config","dojo/dom","dojo/cookie","dijit/Dialog","dijit/registry","dojo/_base/array","models/HomeModel"],function(e,t,n,r,i,s,o){"use strict";var u={},a=!1,f="homeView",l={viewId:"homeView",viewName:"home"},c=!1;return u.startModeAnim=function(){var e=0,t=function(e){var t=o.vm.homeModeOptions(),n=s.map(t,function(t,n){return n===e?t.display=!0:t.display=!1,t});o.vm.homeModeOptions([]),o.vm.homeModeOptions(n)};t(e),require(["dojo/fx","dojo/_base/fx","dojo/query"],function(n,r,i){var s=function(o){var u=i(".modeGroup"),a=u.length,f=n.chain([r.animateProperty({node:u[o],properties:{marginLeft:{start:0,end:-350},opacity:{start:1,end:0}},onEnd:function(){var n;e<a-1?(n=e+1,e++):(n=0,e=0),setTimeout(function(){c||(t(n),setTimeout(function(){c||s(n)},1e3))},250)},units:"px",duration:1e3,delay:2e3})]);f.play()};s(e)})},u.stopModeAnim=function(e){c=!0;if(e){var t=e.id,n=o.vm.homeModeOptions();o.vm.homeModeOptions([]);var r=s.map(n,function(e,n){return t==n?e.display=!0:e.display=!1,o.vm.homeModeOptions.push(e),e})}},{init:function(e){if(a){i.byId("stackContainer").selectChild("homeView");return}a=!0,i.byId("stackContainer").selectChild("homeView"),i.byId("homeView").set("content",e),o.initialize("homeView"),u.startModeAnim()},handleModeClick:function(e){require(["controllers/Header"],function(t){e=="goToMap"?t.updateView("map",!1,!0):e=="goToFires"?t.updateView("fires","true",!0):e=="goToBlogs"?t.updateView("blog","true",!0):e=="goToZSL"&&t.updateView("SPOTT","true",!0)})},handleDotClick:function(e){u.stopModeAnim(e)},showSplashScreen:function(){var t=n("hideSplashScreen"),i,s,o;t||(i="<label><input id='hideSplashScreen' type='checkbox' />&nbsp;&nbsp;Don't ask me again.</label>",s=new r({id:"splashDialog",title:"Welcome to GFW Commodities Analyzer",style:"width: 550px;",content:e.homeDialog.html+i}),s.show(),s.on("cancel",function(){o=document.getElementById("hideSplashScreen").checked,o&&n("hideSplashScreen",o,{expires:31})}))}}}),define("controllers/AboutController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/Hasher","utils/NavListController"],function(e,t,n,r,i,s,o){"use strict";var u=!1;return{init:function(e){if(u){i.byId("stackContainer").selectChild("aboutView");return}u=!0,i.byId("stackContainer").selectChild("aboutView"),i.byId("aboutView").set("content",e);var t="about";o.loadNavControl(t),o.loadNavView(t)}}}),define("controllers/DataController",["dijit/registry","utils/NavListController","utils/Hasher","dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style"],function(e,t,n,r,i,s,o){"use strict";var u=!1;return{init:function(r){if(u){e.byId("stackContainer").selectChild("dataView");return}u=!0,e.byId("stackContainer").selectChild("dataView"),e.byId("dataView").set("content",r);var i="data";t.loadNavControl(i),t.loadNavView(i);var s=document.getElementsByTagName("input");for(var o=0;o<s.length;o+=1)s[o].onclick=function(){this.checked?n.setHash("s",this.id):n.removeKey("s");for(var e=0;e<s.length;e++)s[e]!==this&&(s[e].checked=!1)};this.initializeCountryDropdowns()},initializeCountryDropdowns:function(){var e=document.getElementsByClassName("source_download_container"),t=document.getElementsByClassName("source_dropdown_body");e.length>0&&[].map.call(e,function(e){e.onchange=function(){[].map.call(t,function(e){e.value!=="none"&&(e.className="source_dropdown_body")});var n=e.options[e.selectedIndex].value;if(n!=="none"){var r=document.getElementById(n);r.className=r.className+" active"}}})}}}),define("controllers/MethodsController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/NavListController"],function(e,t,n,r,i,s){"use strict";var o=!1;return{init:function(e){if(o){i.byId("stackContainer").selectChild("methodsView");return}o=!0,i.byId("stackContainer").selectChild("methodsView"),i.byId("methodsView").set("content",e);var t="methods";s.loadNavControl(t),s.loadNavView(t)}}}),define("controllers/PublicationsController",["dojo/dom","dijit/registry"],function(e,t){"use strict";var n=!1;return{init:function(e){if(n){t.byId("stackContainer").selectChild("publicationsView");return}n=!0,t.byId("stackContainer").selectChild("publicationsView"),t.byId("publicationsView").set("content",e)}}}),define("models/SubmissionModel",["dojo/_base/declare","knockout"],function(e,t){var n=e(null,{constructor:function(e){n.vm={},n.root=e,n.vm.storyNameData=t.observable(),n.vm.storyCompanyData=t.observable(),n.vm.storyTitleData=t.observable(),n.vm.storyEmailData=t.observable(),n.vm.storyDetailsData=t.observable(),n.vm.dataFileName=t.observable(),n.vm.dataFileType=t.observable(),n.vm.attributeFileName=t.observable(),n.vm.attributeFileType=t.observable(),n.vm.mediaChange=function(e,t){require(["controllers/SubmissionController"],function(n){n.handleFileChange(e,t)})},n.vm.dataSubmit=function(e,t){require(["controllers/SubmissionController"],function(t){t.handleDataSubmit(e)})},t.applyBindings(n.vm,document.getElementById(e))}});return n.get=function(e){return e==="model"?n.vm:n.vm[e]()},n.set=function(e,t){n.vm[e](t)},n.applyTo=function(e){t.applyBindings(n.vm,document.getElementById(e))},n.initialize=function(e){return n.instance||(n.instance=new n(e)),n.instance},n}),define("controllers/SubmissionController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","esri/graphic","esri/request","utils/NavListController","models/SubmissionModel"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=!1,l;return{init:function(e){if(f){i.byId("stackContainer").selectChild("submissionView");return}l=this,f=!0,i.byId("stackContainer").selectChild("submissionView"),i.byId("submissionView").set("content",e),a.initialize("submissionView")},handleDataSubmit:function(e){l.model=e,$("#storyNameInput").css("border-color","#c0c0c0"),$("#storyCompanyInput").css("border-color","#c0c0c0"),$("#storyTitleInput").css("border-color","#@c0c0c0"),$("#storyEmailInput").css("border-color","#c0c0c0"),$("#dataInput").css("border-color","#c0c0c0"),$("#attributeDataInput").css("border-color","#c0c0c0");var t=e.storyNameData(),n=e.storyCompanyData(),r=e.storyTitleData(),i=e.storyEmailData(),s=e.storyDetailsData(),o=e.dataFileName(),u=e.dataFileType(),a=e.attributeFileName(),f=e.attributeFileType();if(!e.storyNameData()){$("#storyNameInput").css("border-color","red"),alert("Please enter your name!");return}if(!e.storyCompanyData()){$("#storyCompanyInput").css("border-color","red"),alert("Please enter your company!");return}if(!e.storyTitleData()){$("#storyTitleInput").css("border-color","red"),alert("Please enter your title!");return}if(!e.storyEmailData()){$("#storyEmailInput").css("border-color","red"),alert("Please enter your email!");return}if(!e.dataFileName()){$("#dataInput").css("border-color","red"),alert("Please attach your data!");return}var c=$("#dataInput")[0].files[0],h=$("#attributeDataInput")[0].files[0];if(c){var p=new FormData;p.append("dataFile",c),p.append("dataFileName",o),p.append("dataFileType",u),h&&(p.append("attributeFile",h),p.append("attributeFileName",a),p.append("attributeFileType",f)),$.ajax({url:"app/php/post_file_to_s3.php",dataType:"text",cache:!1,contentType:!1,processData:!1,data:p,type:"post",success:function(e){l.uploadToAGOL(e)}})}},handleFileChange:function(e,t){if(t.target.files.length===0)return;var n=t.target.files[0].name,r={".xls":1,".xlsx":1,".csv":1},i=/\..+$/,s=n.match(i),o=t.target.files[0].type;t.target.id==="dataInput"?(e.dataFileName(n),e.dataFileType(o)):t.target.id==="attributeDataInput"&&(e.attributeFileName(n),e.attributeFileType(o))},uploadToAGOL:function(e){var t=e.split(";"),n=t[0],r;t.length>1&&(r=t[1]);var i={};i.name=l.model.storyNameData(),i.company=l.model.storyCompanyData(),i.title=l.model.storyTitleData(),i.email=l.model.storyEmailData(),l.model.storyDetailsData()&&(i.notes=l.model.storyDetailsData()),i.data_file_name=l.model.dataFileName(),l.model.attributeFileName()&&(i.att_file_name=l.model.attributeFileName()),i.data_url=n,r&&(i.attribute_url=r);var s=[{attributes:i}],u="http://commodities-test.herokuapp.com/app/php/proxy.php";esri.config.defaults.io.proxyUrl=u,esri.config.defaults.io.alwaysUseProxy=!1;var a="http://services.arcgis.com/hBEMHCkbQdfV906F/arcgis/rest/services/data_submission_form/FeatureServer/0/addFeatures",f=o({url:a,content:{f:"json",features:JSON.stringify(s)},handleAs:"json",callbackParamName:"callback"},{usePost:!0,useProxy:!0});f.then(function(e){console.log("Success: ",e),alert("Data successfully submitted!")},function(e){alert("Data was not successfully submitted, please try again."),console.log("Error: ",e.message)})}}}),define("controllers/ViewController",["dojo/dom-class","dojo/query","dojo/io-query","dijit/registry","utils/Loader","controllers/Header","controllers/Footer","controllers/MapController","controllers/HomeController","controllers/AboutController","controllers/DataController","controllers/MethodsController","controllers/PublicationsController","controllers/SubmissionController","utils/Hasher","utils/NavListController"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";var m={};return{init:function(e){var t=this;t.load("header",function(n){s.init(n),s.updateView(e,!1),t.load(e)}),t.load("footer",o.init)},load:function(e,t){if(!e)return;var n=this;t||(t=this.getCallback(e)),m[e]?(t||(t=this.getCallback(e)),t(),n.viewLoaded(e),r.byId("stackContainer").resize()):(m[e]=!0,i.getTemplate(e).then(function(i){t(i),n.viewLoaded(e),r.byId("stackContainer").resize()}))},viewLoaded:function(t){if(t==="header"||t==="footer")return;o.toggle(t==="map"),s.toggleForView(t),e.remove("app-body"),e.add("app-body",t+"View"),v.urlControl(t)},getCallback:function(e){switch(e){case"home":return a.init.bind(a);case"map":return u.init.bind(u);case"data":return l.init.bind(l);case"methods":return c.init.bind(c);case"about":return f.init.bind(f);case"publications":return h.init.bind(h);case"submission":return p.init.bind(p);default:return}}}}),define("utils/Delegator",["dojo/topic","map/config","map/Controls","map/MapModel","analysis/Query","analysis/config","utils/Helper","map/LayerController","controllers/MapController","controllers/ViewController"],function(e,t,n,r,i,s,o,u,a,f){"use strict";return{startListening:function(){e.subscribe("changeView",function(e){f.load(e)}),e.subscribe("toggleWizard",function(){o.toggleWizard()}),e.subscribe("toggleAlerts",function(){o.toggleAlerts()}),e.subscribe("setAdminBoundariesDefinition",function(n){u.setWizardDynamicLayerDefinition(t.adminUnitsLayer,n),n&&i.zoomToFeatures(s.adminUnit.countryBoundaries,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCertificationSchemeDefinition",function(n){u.setWizardDynamicLayerDefinition(t.certificationSchemeLayer,n),n&&i.zoomToFeatures(s.certifiedArea.schemeQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCommercialEntityDefinition",function(n){u.setWizardDynamicLayerDefinition(t.commercialEntitiesLayer,n),n&&i.zoomToFeatures(s.commercialEntity.commodityQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("showMillPoints",function(){u.setWizardDynamicLayerDefinition(t.certificationSchemeLayer),u.setWizardMillPointsLayerDefinition(t.mill)}),e.subscribe("toggleLayer",function(e){var r=t[e];if(r){if(r.toolsNode){var i=app.map.getLayer(r.id).visible?"hide":"show";n.toggleToolbox(r,i)}u.toggleLayers(r)}}),e.subscribe("showLayer",function(e){var r=t[e];r&&(u.showLayer(r),r.toolsNode&&n.toggleToolbox(r,"show"))}),e.subscribe("hideLayer",function(e){var r=t[e];r&&(u.hideLayer(r),r.toolsNode&&n.toggleToolbox(r,"hide"))}),e.subscribe("updateLayer",function(e){if(e.layerType==="tiled"){var n=t[e.id];n&&u.toggleLayers(n)}else e.layerType==="dynamic"&&u.updateLayer(e)}),e.subscribe("changeLayerTransparency",function(e,n,r){var i=t[e];i&&u.changeLayerTransparency(i,n,r)}),e.subscribe("customSuitabilityImageReady",function(){u.hideSuitabilityLoader()}),e.subscribe("showInfoPanel",a.showInfoPanel),e.subscribe("toggleItemInLayerList",a.toggleItemInLayerList),e.subscribe("centerChange",function(e,t,n){a.centerChange(e,t,n)}),e.subscribe("showConcessionsLegend",function(){app.map._simpleLegends.concessions.show()}),e.subscribe("hideConcessionsLegend",function(){app.map._simpleLegends.concessions.hide()}),e.subscribe("filterConcessionsLegendItems",function(e){app.map._simpleLegends.concessions.filterItem(e)})}}}),define("main/Main",["dojox/mobile/parser","main/config","esri/config","esri/urlUtils","dojo/_base/array","dojo/has","utils/Hasher","utils/Helper","utils/Delegator","controllers/ViewController","dijit/layout/ContentPane","dijit/layout/StackContainer"],function(e,t,n,r,i,s,o,u,a,f){"use strict";return{init:function(){var t=navigator.userAgent,n=/\(.*?(\d+\.\d+).*?\)/,r,i;t.search("Windows NT")>-1&&(i=n.exec(t),r=i?parseFloat(i[1]):undefined,r>=6.2?document.body.className+=" windows_8":document.body.className+=" windows_7"),s("trident")&&(document.documentElement.className+=" dj_ie"),e.parse(),window.app={},this.applyConfigurations(),this.launchApp()},applyConfigurations:function(){i.forEach(t.corsEnabledServers,function(e){n.defaults.io.corsEnabledServers.push(e)})},launchApp:function(){var e=o.init();u.enableLayout(),a.startListening(),f.init(e)}}}),function(){require(["main/Main"],function(e){e.init()})}(),define("app/js/bundle",function(){});