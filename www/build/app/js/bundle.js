/**
 * @license
 * lodash 3.8.0 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */

/**
 * React v0.11.1
 *
 * Copyright 2013-2014 Facebook, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Knockout JavaScript library v3.1.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

define("main/config",{title:"Global Forest Watch Commodities",urls:{gfw:"http://www.globalforestwatch.org/",blog:"http://blog.globalforestwatch.org/tag/commodities/",fires:"http://fires.globalforestwatch.org/#v=home",SPOTT:"http://www.sustainablepalmoil.org/spott/"},corsEnabledServers:["https://api-ssl.bitly.com","http://globalforestwatch.org","http://firms.modaps.eosdis.nasa.gov","http://gis-potico.wri.org","http://gfw-apis.appspot.com","http://50.18.182.188"],homeModeOptions:[{html:"<span class='less-text'>Explore the map</span>",eventName:"goToMap",display:!0,id:0,tooltip:"Explore the Map"},{html:"<span>Check out GFW Fires</span>",eventName:"goToFires",display:!1,id:1,tooltip:"Check out GFW Fires"},{html:"Read recent blogs and news about GFW Commodities",eventName:"goToBlogs",display:!1,id:2,tooltip:"Commodities News & Blogs"},{html:"Check out ZSL's Transparency Toolkit",eventName:"goToZSL",display:!1,id:3,tooltip:"ZSL Transparency Toolkit"}],homeDialog:{html:"<p>GFW Commodities is constantly undergoing site enhancements including interface redesigns based on user feedback and the incorporation of new datasets and new tools you asked for.</p><p>If you'd like to be kept informed of these kinds of updates, please <a href='http://www.wri.org/global-forest-watch-updates-and-newsletter' target='_blank'>join our mailing list</a>.</p><p>We will <strong>NEVER</strong> sell your email address to anyone, ever. We will only use your email address to send you useful newsletters about updates to the site or request your user feedback. You can unsubscribe at any time.</p>"}}),define("utils/Hasher",["dojo/hash","dojo/io-query","dojo/topic","dojo/_base/array","dojo/query"],function(e,t,n,r,i){"use strict";var s,o,u,a,f;return{init:function(){var r=t.queryToObject(e()),i="home",l=this;return r.hasOwnProperty("v")?i=r.v:(r.v="home",e(t.objectToQuery(r))),s=r.v,u=r.x,a=r.y,f=r.l,o=r.f,n.subscribe("/dojo/hashchange",function(e){var i=r;r=t.queryToObject(e),(r.x!==u||r.y!==a)&&r.v=="map"&&n.publish("centerChange",u,a,f);if(r.v===s)return;s=r.v,l.changeView(s)}),i},handleHashChange:function(e,t){var n=this,r=t.x!=e.x||t.y!=e.y||t.y!=e.y;EventsController.centerChange(e),MapController.centerChange()},getHash:function(n){return n?t.queryToObject(e())[n]:t.queryToObject(e())},setHash:function(n,r){var i=t.queryToObject(e());i[n]=r,e(t.objectToQuery(i))},setHashFromState:function(n){var r=this.getHash();r.x&&r.y&&(n.x=r.x,n.y=r.y,n.l=r.l),r.lyrs&&(n.lyrs=r.lyrs),r.wiz&&(n.wiz=r.wiz),r.f&&n.v==="map"&&(n.f=r.f),e(t.objectToQuery(n))},removeKey:function(n){var r=t.queryToObject(e());r[n]&&delete r[n],e(t.objectToQuery(r))},toggleLayers:function(n){var r=t.queryToObject(e()),i,s;i=r.lyrs?r.lyrs.split(","):[],s=i.indexOf(n),s>-1?i.splice(s,1):i.push(n),i.length===0?delete r.lyrs:r.lyrs=i.join(","),e(t.objectToQuery(r))},getLayers:function(){var n=t.queryToObject(e()).lyrs;return n?n.split(","):[]},removeLayers:function(n){var r=t.queryToObject(e()),i=r.lyrs.split(",");i.splice(i.indexOf(n),1),r.lyrs=i.join(","),e(t.objectToQuery(r))},changeView:function(e){n.publish("changeView",e)}}}),define("map/config",[],function(){var e="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/moremaps2_EN/MapServer",t="http://50.18.182.188:6080/arcgis/rest/services/ForestGain_2000_2012_map/MapServer",n="http://50.18.182.188:6080/arcgis/rest/services/ForestGain_2000_2012/ImageServer",r="http://50.18.182.188:6080/arcgis/rest/services/ForestCover_lossyear/ImageServer",i="http://gis-gfw.wri.org/arcgis/rest/services/commodities/FORMA50_2014/ImageServer",s="http://gis-potico.wri.org/arcgis/rest/services/Fires/Global_Fires/MapServer",o="http://50.18.182.188:6080/arcgis/rest/services/TreeCover2000/ImageServer",u="http://gis-gfw.wri.org/arcgis/rest/services/conservation/wdpa_protected_areas/MapServer",a="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",f="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/primary_forest_extent/ImageServer",l="http://gis-potico.wri.org/arcgis/rest/services/suitabilitymapper/kpss_mosaic/ImageServer",c="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/oilpalmmills/MapServer",h="http://gis-gfw.wri.org/arcgis/rest/services/conservation/conservation/MapServer",p="http://gis-gfw.wri.org/arcgis/rest/services/Utilities/Geometry/GeometryServer";return{geometryServiceUrl:p,mapOptions:{basemap:"gray",centerX:114,centerY:3,zoom:5,sliderPosition:"top-right"},uploadForm:{title:"Upload Shapefile or CSV",shapefileHeader:"Shapefile Upload Instructions",csvHeader:"CSV Upload Instructions",shapefileInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coorsinate System (WGS84).","The shapefile must not exceed 1 MB."],csvInstructions:"Or, select a CSV from your local file system.  The CSV should contain a header row with columns for Name, Latitude, and Longitude."},uploader:{portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate",labelField:"WRI_label",errors:{}},coordinatesDialog:{coordinatesModalHeader:"Enter Point Coordinates",coordinatesEnterButton:"Enter",latitudePlaceholder:"Latitude",longitudePlaceholder:"Longitude",errors:{invalidLatitude:"You did not enter a valid value for Latitude.",invalidLongitude:"You did not enter a valid value for Longitude."}},overlays:{id:"MapOverlaysLayer",url:a,defaultLayers:[1,5,8,11]},road:{layerId:8},river:{layerId:11},settle:{layerId:1},poBounds:{layerId:5},customGraphicsLayer:{id:"CustomFeatures",infoTemplate:{content:"<table><tr><td>Unique ID:</td><td>${WRI_ID:checkAvailable}</td></tr></table>"}},wizardGraphicsLayer:{id:"WizardTempGraphics"},adminUnitsLayer:{id:"WizardDynamicLayer",url:a,whereField:"NAME_0",layerId:7,infoTemplate:{content:"<table><tr><td>Name:</td><td>${NAME_2}</td></tr></table>"}},certificationSchemeLayer:{id:"WizardDynamicLayer",url:a,whereField:"CERT_SCHEME",layerId:13,infoTemplate:{content:"<table><tr><td>Group:</td><td>${GROUP_NAME}</td></tr><tr><td>Type:</td><td>${TYPE}</td></tr></table>"}},millPointsLayer:{id:"WizardMillPointsLayer",url:c,layerId:0,infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${Parent_Com}</td></tr><tr><td>Mill Name:</td><td>${Mill_name}</td></tr></table>"}},commercialEntitiesLayer:{id:"WizardDynamicLayer",url:a,whereField:"TYPE",layerId:13},tcc:{id:"TreeCoverChange"},gain:{id:"Gain",url:t,legendLayerId:31},gainHelper:{id:"GainHelper",url:n},loss:{id:"Loss",url:r,legendLayerId:11,defaultRange:[1,14],colormap:[[1,219,101,152]],toolsNode:"treecover_change_toolbox"},forma:{id:"FormaAlerts",url:i,legendLayerId:30,defaultRange:[1,19],colormap:[[1,255,0,197]],toolsNode:"forma_toolbox"},fires:{id:"ActiveFires",url:s,defaultLayers:[0,1,2,3],toolsNode:"fires_toolbox",infoTemplate:{content:"<table><tr><td>Latitude: </td><td>${LATITUDE}</td></tr><tr><td>Longitude: </td><td>${LONGITUDE}</td></tr><tr><td>Brightness: </td><td>${BRIGHTNESS}</td></tr><tr><td>Confidence: </td><td>${CONFIDENCE}</td></tr><tr><td>Acquisition Date: </td><td>${ACQ_DATE}</td></tr><tr><td>Acquisition Time: </td><td>${ACQ_TIME}</td></tr></table>"}},tcd:{id:"TreeCoverDensity",url:o,legendLayerId:29},primForest:{id:"PrimaryForest",url:f,legendLayerId:33},suit:{id:"CustomSuitability",url:l,legendLayerId:17,toolsNode:"suitability_toolbox"},ifl:{id:"ForestCover",url:e,layerId:24},peat:{id:"ForestCover",url:e,layerId:1},tfcs:{id:"ForestCover",url:e,layerId:23},ldcover:{id:"ForestCover",url:e,layerId:22},ldcoverIndo:{id:"ForestCover",url:e,layerId:0},ldcoverAsia:{id:"ForestCover",url:e,layerId:19},legal:{id:"ForestCover",url:e,layerId:9},oilPerm:{id:"ForestUse",url:e,layerId:32,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${TYPE}</td></tr><tr><td>Country: </td><td>${Country}</td></tr><tr><td>Group: </td><td>${GROUP_NAME:checkAvailable}</td></tr><tr><td>Certification Status: </td><td>${CERT_STAT:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha): </td><td>${AREA_HA:NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},rspoPerm:{id:"ForestUse",url:e,layerId:27,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${TYPE:checkAvailable}</td></tr><tr><td>Country:</td><td>${Country:checkAvailable}</td></tr><tr><td>Group:</td><td>${GROUP_NAME:checkAvailable}</td></tr><tr><td>Certification Status:</td><td>${CERT_STAT:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha):</td><td>${AREA_HA:NumberFormat}</td></tr><tr><td>Certificate ID:</td><td>${Certificat:checkAvailable}</td></tr><tr><td>Certificate Issue Date:</td><td>${Issued:checkAvailable}</td></tr><tr><td>Certificate Expiry Date:</td><td>${Expired:checkAvailable}</td></tr><tr><td>Mill name:</td><td>${Mill:checkAvailable}</td></tr><tr><td>Mill location:</td><td>${Location:checkAvailable}</td></tr><tr><td>Mill capacity (t/hour):</td><td>${Capacity:NumberFormat}</td></tr><tr><td>Certified CPO (mt):</td><td>${CPO:NumberFormat}</td></tr><tr><td>Certified PK (mt):</td><td>${PK:NumberFormat}</td></tr><tr><td>Estate Suppliers:</td><td>${Estate:checkAvailable}</td></tr><tr><td>Estate Area (ha):</td><td>${Estate_1:NumberFormat}</td></tr><tr><td>Outgrower Area (ha):</td><td>${Outgrowe:NumberFormat}</td></tr><tr><td>Scheme Smallholder area (ha):</td><td>${SH:NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},logPerm:{id:"ForestUse",url:e,layerId:10},minePerm:{id:"ForestUse",url:e,layerId:26},woodPerm:{id:"ForestUse",url:e,layerId:28},moratorium:{id:"ForestUse",url:e,layerId:16},mill:{id:"MillPoints",url:c,layerId:0,infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${Parent_Com}</td></tr><tr><td>Mill Name:</td><td>${Mill_name}</td></tr><tr><td>RSPO Certified:</td><td>${RSPO_Certi}</td></tr></table>"}},pal:{id:"ProtectedAreas",url:u,infoTemplate:{content:"<table><tr><td>Local Name:</td><td>${ORIG_NAME}</td></tr><tr><td>Local Designation:</td><td>${DESIG_ENG}</td></tr><tr><td>WDPA ID:</td><td>${WDPAID}</td></tr><tr><td>Source:</td><td>${Source:checkAvailable}</td></tr></table>"}},biodiversity:{id:"Biodiversity",url:h,layerId:0},palHelper:{id:"ProtectedAreasHelper",url:e,layerId:25},concession:{url:e},opsd:{id:"AgriculturalSuitability",url:e,layerId:12},cons:{id:"AgriculturalSuitability",url:e,layerId:2},elev:{id:"AgriculturalSuitability",url:e,layerId:3},slope:{id:"AgriculturalSuitability",url:e,layerId:4},rain:{id:"AgriculturalSuitability",url:e,layerId:5},soilDr:{id:"AgriculturalSuitability",url:e,layerId:6},soilDe:{id:"AgriculturalSuitability",url:e,layerId:7},soilAc:{id:"AgriculturalSuitability",url:e,layerId:8},soilTy:{id:"AgriculturalSuitability",url:e,layerId:14},legendLayer:{id:"LegendLayer",url:e},layersUI:[{key:"tcc",title:"Tree Cover Change",subtitle:"(annual, 30m, global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-change",type:"radio",layerType:"none",children:[{key:"loss",title:"Loss",subtitle:"",filter:"forest-change",type:"check",layerType:"tiled"},{key:"gain",title:"Gain",subtitle:"",filter:"forest-change",type:"check",layerType:"image"}],infoDivClass:"forest-change-tree-cover-change"},{key:"forma",title:"FORMA Alerts",subtitle:"(monthly, 500m, humid tropics)",filter:"forest-change",type:"radio",layerType:"image",infoDivClass:"forest-change-forma-alerts"},{key:"fires",title:"Active Fires",subtitle:"(past 7 days, 1km, global; NASA)",filter:"forest-change",type:"radio",layerType:"dynamic",infoDivClass:"forest-change-nasa-active-fires"},{key:"tcd",title:"Tree Cover Density",subtitle:"(year 2000, 30m global)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-tree-cover-density"},{key:"ifl",title:"Intact Forest Landscapes",subtitle:"(year 2000, 30m global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-intact-forest-landscape"},{key:"peat",title:"Peat Lands",subtitle:"(year 2002, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-peat-lands"},{key:"tfcs",title:"Tropical Carbon Stocks",subtitle:"(early 2000s, 1km, tropics)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-carbon-stocks"},{key:"primForest",title:"Primary Forests",subtitle:"(2000, 30m, Indonesia)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-primary-forest"},{key:"ldcover",title:"Land Cover",subtitle:"(mid 2000s, global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-global"},{key:"ldcoverIndo",title:"Land Cover Indonesia",subtitle:"(mid 2000s, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-indonesia"},{key:"ldcoverAsia",title:"Land Cover Southeast Asia",subtitle:"(mid 2000s, Southeast Asia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-south-east-asia"},{key:"legal",title:"Legal Classifications",subtitle:"(year 2010, select countries)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-legal-classifications"},{key:"oilPerm",title:"Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-oil-palm"},{key:"rspoPerm",title:"RSPO Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-rspo-consessions"},{key:"logPerm",title:"Logging",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-logging"},{key:"minePerm",title:"Mining",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mining"},{key:"woodPerm",title:"Wood Fiber Plantations",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-wood-fiber-plantation"},{key:"mill",title:"RSPO Mills",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mill-points"},{key:"moratorium",title:"Indonesia Moratorium",subtitle:"(IMM V7/V6, 2014, Indonesia)",filter:"forest-use",type:"check",layerType:"dynamic"},{key:"pal",title:"Protected Areas",subtitle:"(varies, global)",filter:"conservation",type:"check",layerType:"tiled",infoDivClass:"conservation-protected-areas"},{key:"biodiversity",title:"Biodiversity Hotspots",subtitle:"(year 2011, global)",filter:"conservation",type:"check",layerType:"dynamic",infoDivClass:"conservation-biodiversity-hotspots"},{key:"suit",title:"Custom Suitability Map",subtitle:"",filter:"agro-suitability",type:"check",layerType:"image",infoDivClass:"suitability-custom-suitability-mapper"},{key:"opsd",title:"WRI Suitability Standard - Oil Palm",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-wri-standard-suitability"},{key:"cons",title:"Conservation Areas",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-conservation-areas"},{key:"elev",title:"Elevation",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-elevation"},{key:"slope",title:"Slope",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-slope"},{key:"rain",title:"Rainfall",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-rainfall"},{key:"soilDr",title:"Soil Drainage",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-drainage"},{key:"soilDe",title:"Soil Depth",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-depth"},{key:"soilAc",title:"Soil Acidity",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-acidity"},{key:"soilTy",title:"Soil Type",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"dynamic",infoDivClass:"suitability-soil-type"}],treeCoverLossSlider:{baseYear:2e3,numYears:12},customSuitabilityDefaults:{computeBinaryRaster:[{id:0,values:"2,3,5,8,9,11,15,17,18",classCount:32,operator:"in",name:"LCInpR"},{id:1,values:"0",classCount:32,operator:"in",name:"PeatInpR"},{id:2,values:"30",operator:"lt",name:"SlopeInpR"},{id:3,values:"1000",operator:"gt",name:"ConsInpR"},{id:4,values:"100",operator:"gt",name:"WaterInpR"},{id:5,values:"1000",operator:"lt",name:"ElevInpR"},{id:6,values:"1500,6000",operator:"between",name:"RainfallInpR"},{id:7,values:"2,3,4,99",classCount:32,operator:"in",name:"SDrainInpR"},{id:8,values:"3,4,5,6,7,99",classCount:32,operator:"in",name:"SDepthInpR"},{id:9,values:"1,2,3,4,5,6,7,99",classCount:32,operator:"in",name:"SAcidInpR"},{id:10,values:"0,1,2,3,5,6,7,8,9",classCount:32,operator:"in",name:"STypeInpR"}]},checkboxItems:[{node:"shrub-check",name:"landcover-checkbox",value:"2",checked:!0},{node:"bareland-check",name:"landcover-checkbox",value:"3",checked:!0},{node:"secondary-forest-check",name:"landcover-checkbox",value:"4",checked:!1},{node:"dryland-agro-check",name:"landcover-checkbox",value:"5",checked:!0},{node:"water-check",name:"landcover-checkbox",value:"6",checked:!1},{node:"mining-check",name:"landcover-checkbox",value:"7",checked:!1},{node:"plantation-forest-check",name:"landcover-checkbox",value:"8",checked:!0},{node:"estate-crop-check",name:"landcover-checkbox",value:"9",checked:!0},{node:"swamp-shrub-check",name:"landcover-checkbox",value:"10",checked:!1},{node:"primary-swamp-check",name:"landcover-checkbox",value:"12",checked:!1},{node:"secondary-swamp-check",name:"landcover-checkbox",value:"13",checked:!1},{node:"settlement-check",name:"landcover-checkbox",value:"14",checked:!1},{node:"grassland-check",name:"landcover-checkbox",value:"15",checked:!0},{node:"secondary-mangrove-check",name:"landcover-checkbox",value:"16",checked:!1},{node:"dryland-check",name:"landcover-checkbox",value:"17",checked:!0},{node:"rice-check",name:"landcover-checkbox",value:"18",checked:!0},{node:"fish-check",name:"landcover-checkbox",value:"19",checked:!1},{node:"transmigration-check",name:"landcover-checkbox",value:"20",checked:!1},{node:"swamp-check",name:"landcover-checkbox",value:"21",checked:!1},{node:"primary-mangrove-check",name:"landcover-checkbox",value:"22",checked:!1},{node:"airport-check",name:"landcover-checkbox",value:"23",checked:!1},{node:"inceptisol-check",name:"soil-type-checkbox",value:"1",checked:!0},{node:"oxisol-check",name:"soil-type-checkbox",value:"7",checked:!0},{node:"alfisol-check",name:"soil-type-checkbox",value:"5",checked:!0},{node:"ultisol-check",name:"soil-type-checkbox",value:"2",checked:!0},{node:"spodosol-check",name:"soil-type-checkbox",value:"8",checked:!0},{node:"entisol-check",name:"soil-type-checkbox",value:"3",checked:!0},{node:"histosol-check",name:"soil-type-checkbox",value:"4",checked:!1},{node:"mollisol-check",name:"soil-type-checkbox",value:"9",checked:!0},{node:"rock-check",name:"soil-type-checkbox",value:"10",checked:!1}],suitabilitySliderTooltips:{peat:{0:"0 cm",1:"Less than 50 cm",2:"50 - 100 cm",3:"100- 200 cm"},rainfall:{label:"mm/yr"},drainage:{1:"very poor",2:"poor, imperfect",3:"well, moderately well",4:"excessive, slightly excessive"},depth:{1:"none, very shallow (0-10 cm)",2:"shallow (11-25 cm)",3:"mod shallow (26-50 cm)",4:"mod deep (51-75 cm)",5:"deep (76-100 cm)",6:"very deep (101-150 cm)",7:"extremely deep (> 150 cm)"},acidity:{1:"excessively acid (< 4.0)",2:"extremely acid (4.0 - 4.5)",3:"very strongly acid (4.6 - 5.0)",4:"strongly acid (5.1 - 5.5)",5:"moderately acid (5.6 - 6.0)",6:"slightly acid (6.1 - 6.5)",7:"neutral (6.6 - 7.3)",8:"slightly alkaline (7.4 - 7.8)"},treeCover:{0:"2001",1:"2002",2:"2003",3:"2004",4:"2005",5:"2006",6:"2007",7:"2008",8:"2009",9:"2010",10:"2011",11:"2012"}},suitabilityExportDialog:{title:"Export Suitability Settings and GeoTiff",instruction:"The resolution downloaded for the Suitability Map is based on your current zoom extent. For a higher resolution download, zoom in closer to your area of interest."},simpleLegends:{concessions:{url:a+"/legend?f=json",parentId:"legend-content",title:"Concessions",id:"concessions-legend",layers:[{id:13}]},road:{url:a+"/legend?f=json",parentId:"legend-content",id:"roads-legend",title:"Roads",layers:[{id:9,labels:["Primary"]},{id:10,labels:["Secondary"]}]},settle:{url:a+"/legend?f=json",parentId:"legend-content",id:"settle-legend",title:"Settlements",layers:[{id:2},{id:3,labels:["Cities and Towns"]}]},poBounds:{url:a+"/legend?f=json",parentId:"legend-content",id:"po-bounds-legend",title:"Political Boundaries",layers:[{id:6,labels:["Admin Level 1"]},{id:7,labels:["Admin Level 2"]}]}}}}),define("map/Symbols",["esri/Color","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(e,t,n,r){"use strict";var i={getPolygonSymbol:function(){return new t(t.STYLE_SOLID,new n(n.STYLE_SOLID,new e([255,0,0]),2),new e([103,200,255,0]))},getPointSymbol:function(){return new r(r.STYLE_CIRCLE,10,new n(n.STYLE_SOLID,new e([255,0,0]),1),new e([0,0,0,.25]))},getHighlightPolygonSymbol:function(){return new t(t.STYLE_SOLID,new n(n.STYLE_SOLID,new e([0,255,255]),2),new e([103,200,255,0]))},getHighlightPointSymbol:function(){return new r(r.STYLE_CIRCLE,10,new n(n.STYLE_SOLID,new e([0,255,255]),1),new e([0,0,0,.25]))}};return i}),define("utils/GeoHelper",["map/config","map/Symbols","esri/units","esri/graphic","esri/geometry/Point","esri/geometry/Circle","esri/SpatialReference","esri/tasks/GeometryService","esri/geometry/webMercatorUtils","dojo/Deferred","dojo/_base/array"],function(e,t,n,r,i,s,o,u,a,f,l){var c,h;return{getSpatialReference:function(){return h=h||new o(102100)},generatePointGraphicFromGeometric:function(e,n,s){return new r(a.geographicToWebMercator(new i(e,n)),t.getPointSymbol(),s)},preparePointAsPolygon:function(e,o){var u=new s(new i(e.geometry),{radius:o||50,radiusUnit:n.KILOMETERS});return new r(u,t.getPolygonSymbol(),e.attributes)},applySelectionSymbolToFeature:function(e){var n=e.geometry.type==="point"?t.getHighlightPointSymbol():t.getHighlightPolygonSymbol();return new r(e.geometry,n,e.attributes)},zoomToFeature:function(e){e.geometry.x?app.map.centerAndZoom(e.geometry,9):e.geometry.center?app.map.centerAndZoom(e.geometry.center,9):app.map.setExtent(e.geometry.getExtent(),!0)},nextCustomFeatureId:function(){var t=app.map.getLayer(e.customGraphicsLayer.id),n=t.graphics,r=n.length,i=0,s,o;for(s=0;s<r;s++)o=parseInt(n[s].attributes.WRI_ID),isNaN(o)||(i=Math.max(i,o));return i+1},convertGeometryToGeometric:function(e){function u(e,t){var n=!1;return l.forEach(e,function(e){e[0]===t[0]&&e[1]===t[1]&&(n=!0)}),n}var t=[],n=[],r,s,o=this;return l.forEach(e.rings,function(e){l.forEach(e,function(e){s=new i(e,o.getSpatialReference()),r=a.xyToLngLat(s.x,s.y),u(n,r)?(n.push(r),t.push(n),n=[]):n.push(r)})}),{geom:t.length>1?t:t[0],type:t.length>1?"MultiPolygon":"Polygon"}},union:function(t){if(Object.prototype.toString.call(t)!=="[object Array]")throw new Error("Method expects polygons paramter to be of type Array");var n=new f,r=r||new u(e.geometryServiceUrl);return t.length===1?n.resolve(t[0]):r.union(t,n.resolve,n.resolve),n}}}),function(){function e(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||e===w&&r)return 1;if(e<t||!r||t===w&&n)return-1}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return h(e,n);n-=1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function r(e){return typeof e=="function"||!1}function i(e){return typeof e=="string"?e:null==e?"":e+""}function s(e){return e.charCodeAt(0)}function o(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function u(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function a(t,n){return e(t.a,n.a)||t.b-n.b}function f(e){return Bt[e]}function l(e){return jt[e]}function c(e){return"\\"+qt[e]}function h(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var i=e[t];if(i!==i)return t}return-1}function p(e){return!!e&&typeof e=="object"}function d(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function v(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;)e[n]===t&&(e[n]=I,s[++i]=n);return s}function m(e){for(var t=-1,n=e.length;++t<n&&d(e.charCodeAt(t)););return t}function g(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function y(e){return Ft[e]}function b(d){function Bt(e){if(p(e)&&!(gu(e)||e instanceof It)){if(e instanceof Ft)return e;if(Ds.call(e,"__chain__")&&Ds.call(e,"__wrapped__"))return Si(e)}return new Ft(e)}function jt(){}function Ft(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function It(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ho,this.__views__=null}function qt(){this.__data__={}}function Rt(e){var t=e?e.length:0;for(this.data={hash:no(null),set:new Js};t--;)this.push(e[t])}function Ut(e,t){var n=e.data;return(typeof t=="string"||Ki(t)?n.set.has(t):n.hash[t])?0:-1}function zt(e,t){var n=-1,r=e.length;for(t||(t=ys(r));++n<r;)t[n]=e[n];return t}function Wt(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function Xt(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Jt(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function Kt(e,t){for(var n=-1,r=e.length,i=ys(r);++n<r;)i[n]=t(e[n],n,e);return i}function Qt(e,t,n,r){var i=-1,s=e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Gt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Yt(e,t){return e===w?t:e}function Zt(e,t,n,r){return e!==w&&Ds.call(r,n)?e:t}function Ln(e,t,n){var r=Au(t);Xs.apply(r,Do(t));for(var i=-1,s=r.length;++i<s;){var o=r[i],u=e[o],a=n(u,t[o],o,e,t);(a===a?a===u:u!==u)&&(u!==w||o in e)||(e[o]=a)}return e}function Mn(e,t){for(var n=-1,r=null==e,i=!r&&ai(e),s=i&&e.length,o=t.length,u=ys(o);++n<o;){var a=t[n];u[n]=i?fi(a,s)?e[a]:w:r?w:e[a]}return u}function Dn(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var s=t[r];n[s]=e[s]}return n}function Pn(e,t,n){var r=typeof e;return"function"==r?t===w?e:xr(e,t,n):null==e?ps:"object"==r?ir(e):t===w?gs(e):sr(e,t)}function Hn(e,t,n,r,i,s,o){var u;if(n&&(u=i?n(e,r,i):n(e)),u!==w)return u;if(!Ki(e))return e;if(r=gu(e)){if(u=ii(e),!t)return zt(e,u)}else{var a=Hs.call(e),f=a==X;if(a!=$&&a!=q&&(!f||i))return Pt[a]?oi(e,a,t):i?e:{};if(u=si(f?{}:e),!t)return So(u,e)}for(s||(s=[]),o||(o=[]),i=s.length;i--;)if(s[i]==e)return o[i];return s.push(e),o.push(u),(r?Wt:Kn)(e,function(r,i){u[i]=Hn(r,t,n,i,e,s,o)}),u}function Bn(e,t,n){if(typeof e!="function")throw new ks(F);return Ks(function(){e.apply(w,n)},t)}function qn(e,t){var r=e?e.length:0,i=[];if(!r)return i;var s=-1,o=ri(),u=o==n,a=u&&200<=t.length?Ao(t):null,f=t.length;a&&(o=Ut,u=!1,t=a);e:for(;++s<r;)if(a=e[s],u&&a===a){for(var l=f;l--;)if(t[l]===a)continue e;i.push(a)}else 0>o(t,a,0)&&i.push(a);return i}function zn(e,t){var n=!0;return To(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Xn(e,t){var n=[];return To(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Vn(e,t,n,r){var i;return n(e,function(e,n,s){return t(e,n,s)?(i=r?n:e,!1):void 0}),i}function $n(e,t,n){for(var r=-1,i=e.length,s=-1,o=[];++r<i;){var u=e[r];if(p(u)&&ai(u)&&(n||gu(u)||Vi(u))){t&&(u=$n(u,t,n));for(var a=-1,f=u.length;++a<f;)o[++s]=u[a]}else n||(o[++s]=u)}return o}function Jn(e,t){Co(e,t,rs)}function Kn(e,t){return Co(e,t,Au)}function Qn(e,t){return ko(e,t,Au)}function Gn(e,t){for(var n=-1,r=t.length,i=-1,s=[];++n<r;){var o=t[n];bu(e[o])&&(s[++i]=o)}return s}function er(e,t,n){if(null!=e){n!==w&&n in wi(e)&&(t=[n]),n=-1;for(var r=t.length;null!=e&&++n<r;)e=e[t[n]];return n&&n==r?e:w}}function tr(e,t,n,r,i,s){if(e===t)return!0;var o=typeof e,u=typeof t;if("function"!=o&&"object"!=o&&"function"!=u&&"object"!=u||null==e||null==t)e=e!==e&&t!==t;else e:{var o=tr,u=gu(e),a=gu(t),f=R,l=R;u||(f=Hs.call(e),f==q?f=$:f!=$&&(u=es(e))),a||(l=Hs.call(t),l==q?l=$:l!=$&&es(t));var c=f==$,a=l==$,l=f==l;if(!l||u||c){if(!r&&(f=c&&Ds.call(e,"__wrapped__"),a=a&&Ds.call(t,"__wrapped__"),f||a)){e=o(f?e.value():e,a?t.value():t,n,r,i,s);break e}if(l){for(i||(i=[]),s||(s=[]),f=i.length;f--;)if(i[f]==e){e=s[f]==t;break e}i.push(e),s.push(t),e=(u?Yr:ei)(e,t,o,n,r,i,s),i.pop(),s.pop()}else e=!1}else e=Zr(e,t,f)}return e}function nr(e,t,n,r,i){for(var s=-1,o=t.length,u=!i;++s<o;)if(u&&r[s]?n[s]!==e[t[s]]:!(t[s]in e))return!1;for(s=-1;++s<o;){var a=t[s],f=e[a],l=n[s];if(u&&r[s]?a=f!==w||a in e:(a=i?i(f,l,a):w,a===w&&(a=tr(l,f,i,!0))),!a)return!1}return!0}function rr(e,t){var n=-1,r=ai(e)?ys(e.length):[];return To(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function ir(e){var t=Au(e),n=t.length;if(!n)return hs(!0);if(1==n){var r=t[0],i=e[r];if(di(i))return function(e){return null==e?!1:e[r]===i&&(i!==w||r in wi(e))}}for(var s=ys(n),o=ys(n);n--;)i=e[t[n]],s[n]=i,o[n]=di(i);return function(e){return null!=e&&nr(wi(e),t,s,o)}}function sr(e,t){var n=gu(e),r=ci(e)&&di(t),i=e+"";return e=Ei(e),function(s){if(null==s)return!1;var o=i;if(s=wi(s),!(!n&&r||o in s)){if(s=1==e.length?s:er(s,hr(e,0,-1)),null==s)return!1;o=ki(e),s=wi(s)}return s[o]===t?t!==w||o in s:tr(t,s[o],null,!0)}}function or(e,t,n,r,i){if(!Ki(e))return e;var s=ai(t)&&(gu(t)||es(t));if(!s){var o=Au(t);Xs.apply(o,Do(t))}return Wt(o||t,function(u,a){if(o&&(a=u,u=t[a]),p(u)){r||(r=[]),i||(i=[]);e:{for(var f=a,l=r,c=i,h=l.length,d=t[f];h--;)if(l[h]==d){e[f]=c[h];break e}var h=e[f],v=n?n(h,d,f,e,t):w,m=v===w;m&&(v=d,ai(d)&&(gu(d)||es(d))?v=gu(h)?h:ai(h)?zt(h):[]:wu(d)||Vi(d)?v=Vi(h)?ts(h):wu(h)?h:{}:m=!1),l.push(d),c.push(v),m?e[f]=or(v,d,n,l,c):(v===v?v!==h:h===h)&&(e[f]=v)}}else f=e[a],l=n?n(f,u,a,e,t):w,(c=l===w)&&(l=u),!s&&l===w||!c&&(l===l?l===f:f!==f)||(e[a]=l)}),e}function ur(e){return function(t){return null==t?w:t[e]}}function ar(e){var t=e+"";return e=Ei(e),function(n){return er(n,e,t)}}function fr(e,t){for(var n=e?t.length:0;n--;){var r=parseFloat(t[n]);if(r!=i&&fi(r)){var i=r;Qs.call(e,r,1)}}}function lr(e,t){return e+Us(lo()*(t-e+1))}function cr(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function hr(e,t,n){var r=-1,i=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=n===w||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=ys(i);++r<i;)n[r]=e[r+t];return n}function pr(e,t){var n;return To(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function dr(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function vr(t,n,r){var i=ni(),s=-1;return n=Kt(n,function(e){return i(e)}),t=rr(t,function(e){return{a:Kt(n,function(t){return t(e)}),b:++s,c:e}}),dr(t,function(t,n){var i;e:{i=-1;for(var s=t.a,o=n.a,u=s.length,a=r.length;++i<u;){var f=e(s[i],o[i]);if(f){i=i<a?f*(r[i]?1:-1):f;break e}}i=t.b-n.b}return i})}function mr(e,t){var n=0;return To(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function gr(e,t){var r=-1,i=ri(),s=e.length,o=i==n,u=o&&200<=s,a=u?Ao():null,f=[];a?(i=Ut,o=!1):(u=!1,a=t?[]:f);e:for(;++r<s;){var l=e[r],c=t?t(l,r,e):l;if(o&&l===l){for(var h=a.length;h--;)if(a[h]===c)continue e;t&&a.push(c),f.push(l)}else 0>i(a,c,0)&&((t||u)&&a.push(c),f.push(l))}return f}function yr(e,t){for(var n=-1,r=t.length,i=ys(r);++n<r;)i[n]=e[t[n]];return i}function br(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?hr(e,r?0:s,r?s+1:i):hr(e,r?s+1:0,r?i:s)}function wr(e,t){var n=e;n instanceof It&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var n=[n],s=t[r];Xs.apply(n,s.args),n=s.func.apply(s.thisArg,n)}return n}function Er(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=mo){for(;r<i;){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)?r=s+1:i=s}return i}return Sr(e,t,ps,n)}function Sr(e,t,n,r){t=n(t);for(var i=0,s=e?e.length:0,o=t!==t,u=t===w;i<s;){var a=Us((i+s)/2),f=n(e[a]),l=f===f;(o?l||r:u?l&&(r||f!==w):r?f<=t:f<t)?i=a+1:s=a}return oo(s,vo)}function xr(e,t,n){if(typeof e!="function")return ps;if(t===w)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}function Tr(e){return Is.call(e,0)}function Nr(e,t,n){for(var r=n.length,i=-1,s=so(e.length-r,0),o=-1,u=t.length,a=ys(s+u);++o<u;)a[o]=t[o];for(;++i<r;)a[n[i]]=e[i];for(;s--;)a[o++]=e[i++];return a}function Cr(e,t,n){for(var r=-1,i=n.length,s=-1,o=so(e.length-i,0),u=-1,a=t.length,f=ys(o+a);++s<o;)f[s]=e[s];for(o=s;++u<a;)f[o+u]=t[u];for(;++r<i;)f[o+n[r]]=e[s++];return f}function kr(e,t){return function(n,r,i){var s=t?t():{};if(r=ni(r,i,3),gu(n)){i=-1;for(var o=n.length;++i<o;){var u=n[i];e(s,u,r(u,i,n),n)}}else To(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function Lr(e){return Xi(function(t,n){var r=-1,i=null==t?0:n.length,s=2<i&&n[i-2],o=2<i&&n[2],u=1<i&&n[i-1];for(typeof s=="function"?(s=xr(s,u,5),i-=2):(s=typeof u=="function"?u:null,i-=s?1:0),o&&li(n[0],n[1],o)&&(s=3>i?null:s,i=1);++r<i;)(o=n[r])&&e(t,o,s);return t})}function Ar(e,t){return function(n,r){var i=n?_o(n):0;if(!pi(i))return e(n,r);for(var s=t?i:-1,o=wi(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Or(e){return function(t,n,r){var i=wi(t);r=r(t);for(var s=r.length,o=e?s:-1;e?o--:++o<s;){var u=r[o];if(!1===n(i[u],u,i))break}return t}}function Mr(e,t){function n(){return(this&&this!==Vt&&this instanceof n?r:e).apply(t,arguments)}var r=Dr(e);return n}function _r(e){return function(t){var n=-1;t=ls(ss(t));for(var r=t.length,i="";++n<r;)i=e(i,t[n],n);return i}}function Dr(e){return function(){var t=xo(e.prototype),n=e.apply(t,arguments);return Ki(n)?n:t}}function Pr(e){function t(n,r,i){return i&&li(n,r,i)&&(r=null),n=Gr(n,e,null,null,null,null,null,r),n.placeholder=t.placeholder,n}return t}function Hr(e,t){return function(n,r,i){i&&li(n,r,i)&&(r=null);var o=ni(),u=null==r;if(o===Pn&&u||(u=!1,r=o(r,i,3)),u){if(r=gu(n),r||!Zi(n))return e(r?n:bi(n));r=s}return ti(n,r,t)}}function Br(e,n){return function(r,i,s){return i=ni(i,s,3),gu(r)?(i=t(r,i,n),-1<i?r[i]:w):Vn(r,i,e)}}function jr(e){return function(n,r,i){return n&&n.length?(r=ni(r,i,3),t(n,r,e)):-1}}function Fr(e){return function(t,n,r){return n=ni(n,r,3),Vn(t,n,e,!0)}}function Ir(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var n,r=e?t:-1,i=0,s=ys(t);e?r--:++r<t;){var o=s[i++]=arguments[r];if(typeof o!="function")throw new ks(F);var u=n?"":Mo(o);n="wrapper"==u?new Ft([]):n}for(r=n?-1:t;++r<t;)o=s[r],u=Mo(o),n=(i="wrapper"==u?Oo(o):null)&&hi(i[0])&&i[1]==(A|N|k|O)&&!i[4].length&&1==i[9]?n[Mo(i[0])].apply(n,i[3]):1==o.length&&hi(o)?n[u]():n.thru(o);return function(){var e=arguments;if(n&&1==e.length&&gu(e[0]))return n.plant(e[0]).value();for(var r=0,e=s[r].apply(this,e);++r<t;)e=s[r].call(this,e);return e}}}function qr(e,t){return function(n,r,i){return typeof r=="function"&&i===w&&gu(n)?e(n,r):t(n,xr(r,i,3))}}function Rr(e){return function(t,n,r){return(typeof n!="function"||r!==w)&&(n=xr(n,r,3)),e(t,n,rs)}}function Ur(e){return function(t,n,r){return(typeof n!="function"||r!==w)&&(n=xr(n,r,3)),e(t,n)}}function zr(e){return function(t,n,r){var i={};return n=ni(n,r,3),Kn(t,function(t,r,s){s=n(t,r,s),r=e?s:r,t=e?t:s,i[r]=t}),i}}function Wr(e){return function(t,n,r){return t=i(t),(e?t:"")+Jr(t,n,r)+(e?"":t)}}function Xr(e){var t=Xi(function(n,r){var i=v(r,t.placeholder);return Gr(n,e,null,r,i)});return t}function Vr(e,t){return function(n,r,i,s){var o=3>arguments.length;return typeof r=="function"&&s===w&&gu(n)?e(n,r,i,o):cr(n,ni(r,s,4),i,o,t)}}function $r(e,t,n,r,i,s,o,u,a,f){function l(){for(var E=arguments.length,T=E,N=ys(E);T--;)N[T]=arguments[T];if(r&&(N=Nr(N,r,i)),s&&(N=Cr(N,s,o)),d||g){var T=l.placeholder,C=v(N,T),E=E-C.length;if(E<f){var A=u?zt(u):null,E=so(f-E,0),O=d?C:null,C=d?null:C,M=d?N:null,N=d?null:N;return t|=d?k:L,t&=~(d?L:k),m||(t&=~(S|x)),N=[e,t,n,M,O,N,C,A,a,E],A=$r.apply(w,N),hi(e)&&Po(A,N),A.placeholder=T,A}}if(T=h?n:this,p&&(e=T[b]),u)for(A=N.length,E=oo(u.length,A),O=zt(N);E--;)C=u[E],N[E]=fi(C,A)?O[C]:w;return c&&a<N.length&&(N.length=a),(this&&this!==Vt&&this instanceof l?y||Dr(e):e).apply(T,N)}var c=t&A,h=t&S,p=t&x,d=t&N,m=t&T,g=t&C,y=!p&&Dr(e),b=e;return l}function Jr(e,t,n){return e=e.length,t=+t,e<t&&ro(t)?(t-=e,n=null==n?" ":n+"",as(n,qs(t/n.length)).slice(0,t)):""}function Kr(e,t,n,r){function i(){for(var t=-1,u=arguments.length,a=-1,f=r.length,l=ys(u+f);++a<f;)l[a]=r[a];for(;u--;)l[a++]=arguments[++t];return(this&&this!==Vt&&this instanceof i?o:e).apply(s?n:this,l)}var s=t&S,o=Dr(e);return i}function Qr(e){return function(t,n,r,i){var s=ni(r);return s===Pn&&null==r?Er(t,n,e):Sr(t,n,s(r,i,1),e)}}function Gr(e,t,n,r,i,s,o,u){var a=t&x;if(!a&&typeof e!="function")throw new ks(F);var f=r?r.length:0;if(f||(t&=~(k|L),r=i=null),f-=i?i.length:0,t&L){var l=r,c=i;r=i=null}var h=a?null:Oo(e);return n=[e,t,n,r,i,l,c,s,o,u],h&&(r=n[1],t=h[1],u=r|t,i=t==A&&r==N||t==A&&r==O&&n[7].length<=h[8]||t==(A|O)&&r==N,(u<A||i)&&(t&S&&(n[2]=h[2],u|=r&S?0:T),(r=h[3])&&(i=n[3],n[3]=i?Nr(i,r,h[4]):zt(r),n[4]=i?v(n[3],I):zt(h[4])),(r=h[5])&&(i=n[5],n[5]=i?Cr(i,r,h[6]):zt(r),n[6]=i?v(n[5],I):zt(h[6])),(r=h[7])&&(n[7]=zt(r)),t&A&&(n[8]=null==n[8]?h[8]:oo(n[8],h[8])),null==n[9]&&(n[9]=h[9]),n[0]=h[0],n[1]=u),t=n[1],u=n[9]),n[9]=null==u?a?0:e.length:so(u-f,0)||0,(h?Lo:Po)(t==S?Mr(n[0],n[2]):t!=k&&t!=(S|k)||n[4].length?$r.apply(w,n):Kr.apply(w,n),n)}function Yr(e,t,n,r,i,s,o){var u=-1,a=e.length,f=t.length,l=!0;if(a!=f&&(!i||f<=a))return!1;for(;l&&++u<a;){var c=e[u],h=t[u],l=w;if(r&&(l=i?r(h,c,u):r(c,h,u)),l===w)if(i)for(var p=f;p--&&(h=t[p],!(l=c&&c===h||n(c,h,r,i,s,o))););else l=c&&c===h||n(c,h,r,i,s,o)}return!!l}function Zr(e,t,n){switch(n){case U:case z:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case V:return e!=+e?t!=+t:e==+t;case J:case K:return e==t+""}return!1}function ei(e,t,n,r,i,s,o){var u=Au(e),a=u.length,f=Au(t).length;if(a!=f&&!i)return!1;for(var f=i,l=-1;++l<a;){var c=u[l],h=i?c in t:Ds.call(t,c);if(h){var p=e[c],d=t[c],h=w;r&&(h=i?r(d,p,c):r(p,d,c)),h===w&&(h=p&&p===d||n(p,d,r,i,s,o))}if(!h)return!1;f||(f="constructor"==c)}return f||(n=e.constructor,r=t.constructor,!(n!=r&&"constructor"in e&&"constructor"in t)||typeof n=="function"&&n instanceof n&&typeof r=="function"&&r instanceof r)?!0:!1}function ti(e,t,n){var r=n?ho:co,i=r,s=i;return To(e,function(e,o,u){o=t(e,o,u),((n?o<i:o>i)||o===r&&o===s)&&(i=o,s=e)}),s}function ni(e,t,n){var r=Bt.callback||cs,r=r===cs?Pn:r;return n?r(e,t,n):r}function ri(e,t,r){var i=Bt.indexOf||Ci,i=i===Ci?n:i;return e?i(e,t,r):i}function ii(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ds.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function si(e){return e=e.constructor,typeof e=="function"&&e instanceof e||(e=Ts),new e}function oi(e,t,n){var r=e.constructor;switch(t){case Q:return Tr(e);case U:case z:return new r(+e);case G:case Y:case Z:case et:case tt:case nt:case rt:case it:case st:return t=e.buffer,new r(n?Tr(t):t,e.byteOffset,e.length);case V:case K:return new r(e);case J:var i=new r(e.source,Tt.exec(e));i.lastIndex=e.lastIndex}return i}function ui(e,t,n){return null==e||ci(t,e)||(t=Ei(t),e=1==t.length?e:er(e,hr(t,0,-1)),t=ki(t)),t=null==e?e:e[t],null==t?w:t.apply(e,n)}function ai(e){return null!=e&&pi(_o(e))}function fi(e,t){return e=+e,t=null==t?yo:t,-1<e&&0==e%1&&e<t}function li(e,t,n){if(!Ki(n))return!1;var r=typeof t;return("number"==r?ai(n)&&fi(t,n.length):"string"==r&&t in n)?(t=n[t],e===e?e===t:t!==t):!1}function ci(e,t){var n=typeof e;return"string"==n&&gt.test(e)||"number"==n?!0:gu(e)?!1:!mt.test(e)||null!=t&&e in wi(t)}function hi(e){var t=Mo(e);return!!t&&e===Bt[t]&&t in It.prototype}function pi(e){return typeof e=="number"&&-1<e&&0==e%1&&e<=yo}function di(e){return e===e&&!Ki(e)}function vi(e,t){e=wi(e);for(var n=-1,r=t.length,i={};++n<r;){var s=t[n];s in e&&(i[s]=e[s])}return i}function mi(e,t){var n={};return Jn(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function gi(e){var t;if(!p(e)||Hs.call(e)!=$||!(Ds.call(e,"constructor")||(t=e.constructor,typeof t!="function"||t instanceof t)))return!1;var n;return Jn(e,function(e,t){n=t}),n===w||Ds.call(e,n)}function yi(e){for(var t=rs(e),n=t.length,r=n&&e.length,i=Bt.support,i=r&&pi(r)&&(gu(e)||i.nonEnumArgs&&Vi(e)),s=-1,o=[];++s<n;){var u=t[s];(i&&fi(u,r)||Ds.call(e,u))&&o.push(u)}return o}function bi(e){return null==e?[]:ai(e)?Ki(e)?e:Ts(e):is(e)}function wi(e){return Ki(e)?e:Ts(e)}function Ei(e){if(gu(e))return e;var t=[];return i(e).replace(yt,function(e,n,r,i){t.push(r?i.replace(St,"$1"):n||e)}),t}function Si(e){return e instanceof It?e.clone():new Ft(e.__wrapped__,e.__chain__,zt(e.__actions__))}function xi(e,t,n){return e&&e.length?((n?li(e,t,n):null==t)&&(t=1),hr(e,0>t?0:t)):[]}function Ti(e,t,n){var r=e?e.length:0;return r?((n?li(e,t,n):null==t)&&(t=1),t=r-(+t||0),hr(e,0,0>t?0:t)):[]}function Ni(e){return e?e[0]:w}function Ci(e,t,r){var i=e?e.length:0;if(!i)return-1;if(typeof r=="number")r=0>r?so(i+r,0):r;else if(r)return r=Er(e,t),e=e[r],(t===t?t===e:e!==e)?r:-1;return n(e,t,r||0)}function ki(e){var t=e?e.length:0;return t?e[t-1]:w}function Li(e){return xi(e,1)}function Ai(e,t,r,i){if(!e||!e.length)return[];null!=t&&typeof t!="boolean"&&(i=r,r=li(e,t,i)?null:t,t=!1);var s=ni();if((s!==Pn||null!=r)&&(r=s(r,i,3)),t&&ri()==n){t=r;var o;r=-1,i=e.length;for(var s=-1,u=[];++r<i;){var a=e[r],f=t?t(a,r,e):a;r&&o===f||(o=f,u[++s]=a)}e=u}else e=gr(e,r);return e}function Oi(e){if(!e||!e.length)return[];var t=-1,n=0;e=Jt(e,function(e){return ai(e)?(n=so(e.length,n),!0):void 0});for(var r=ys(n);++t<n;)r[t]=Kt(e,ur(t));return r}function Mi(e,t,n){return e&&e.length?(e=Oi(e),null==t?e:(t=xr(t,n,4),Kt(e,function(e){return Qt(e,t,w,!0)}))):[]}function _i(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||gu(e[0])||(t=[]);++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Di(e){return e=Bt(e),e.__chain__=!0,e}function Pi(e,t,n){return t.call(n,e)}function Hi(e,t,n){var r=gu(e)?Xt:zn;return n&&li(e,t,n)&&(t=null),(typeof t!="function"||n!==w)&&(t=ni(t,n,3)),r(e,t)}function Bi(e,t,n){var r=gu(e)?Jt:Xn;return t=ni(t,n,3),r(e,t)}function ji(e,t,n,r){var i=e?_o(e):0;return pi(i)||(e=is(e),i=e.length),i?(n=typeof n!="number"||r&&li(t,n,r)?0:0>n?so(i+n,0):n||0,typeof e=="string"||!gu(e)&&Zi(e)?n<i&&-1<e.indexOf(t,n):-1<ri(e,t,n)):!1}function Fi(e,t,n){var r=gu(e)?Kt:rr;return t=ni(t,n,3),r(e,t)}function Ii(e,t,n){return(n?li(e,t,n):null==t)?(e=bi(e),t=e.length,0<t?e[lr(0,t-1)]:w):(e=qi(e),e.length=oo(0>t?0:+t||0,e.length),e)}function qi(e){e=bi(e);for(var t=-1,n=e.length,r=ys(n);++t<n;){var i=lr(0,t);t!=i&&(r[t]=r[i]),r[i]=e[t]}return r}function Ri(e,t,n){var r=gu(e)?Gt:pr;return n&&li(e,t,n)&&(t=null),(typeof t!="function"||n!==w)&&(t=ni(t,n,3)),r(e,t)}function Ui(e,t){var n;if(typeof t!="function"){if(typeof e!="function")throw new ks(F);var r=e;e=t,t=r}return function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function zi(e,t,n){function r(){var n=t-(iu()-f);0>=n||n>t?(u&&Rs(u),n=h,u=c=h=w,n&&(p=iu(),a=e.apply(l,o),c||u||(o=l=null))):c=Ks(r,n)}function i(){c&&Rs(c),u=c=h=w,(v||d!==t)&&(p=iu(),a=e.apply(l,o),c||u||(o=l=null))}function s(){if(o=arguments,f=iu(),l=this,h=v&&(c||!m),!1===d)var n=m&&!c;else{u||m||(p=f);var s=d-(f-p),g=0>=s||s>d;g?(u&&(u=Rs(u)),p=f,a=e.apply(l,o)):u||(u=Ks(i,s))}return g&&c?c=Rs(c):c||t===d||(c=Ks(r,t)),n&&(g=!0,a=e.apply(l,o)),!g||c||u||(o=l=null),a}var o,u,a,f,l,c,h,p=0,d=!1,v=!0;if(typeof e!="function")throw new ks(F);if(t=0>t?0:+t||0,!0===n)var m=!0,v=!1;else Ki(n)&&(m=n.leading,d="maxWait"in n&&so(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return s.cancel=function(){c&&Rs(c),u&&Rs(u),u=c=h=w},s}function Wi(e,t){function n(){var r=arguments,i=n.cache,s=t?t.apply(this,r):r[0];return i.has(s)?i.get(s):(r=e.apply(this,r),i.set(s,r),r)}if(typeof e!="function"||t&&typeof t!="function")throw new ks(F);return n.cache=new Wi.Cache,n}function Xi(e,t){if(typeof e!="function")throw new ks(F);return t=so(t===w?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=so(n.length-t,0),s=ys(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}for(i=ys(t+1),r=-1;++r<t;)i[r]=n[r];return i[t]=s,e.apply(this,i)}}function Vi(e){return p(e)&&ai(e)&&Hs.call(e)==q}function $i(e){return!!e&&1===e.nodeType&&p(e)&&-1<Hs.call(e).indexOf("Element")}function Ji(e){return p(e)&&typeof e.message=="string"&&Hs.call(e)==W}function Ki(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function Qi(e){return null==e?!1:Hs.call(e)==X?js.test(_s.call(e)):p(e)&&Ct.test(e)}function Gi(e){return typeof e=="number"||p(e)&&Hs.call(e)==V}function Yi(e){return p(e)&&Hs.call(e)==J}function Zi(e){return typeof e=="string"||p(e)&&Hs.call(e)==K}function es(e){return p(e)&&pi(e.length)&&!!Dt[Hs.call(e)]}function ts(e){return Dn(e,rs(e))}function ns(e){return Gn(e,rs(e))}function rs(e){if(null==e)return[];Ki(e)||(e=Ts(e));for(var t=e.length,t=t&&pi(t)&&(gu(e)||Eo.nonEnumArgs&&Vi(e))&&t||0,n=e.constructor,r=-1,n=typeof n=="function"&&n.prototype===e,i=ys(t),s=0<t;++r<t;)i[r]=r+"";for(var o in e)s&&fi(o,t)||"constructor"==o&&(n||!Ds.call(e,o))||i.push(o);return i}function is(e){return yr(e,Au(e))}function ss(e){return(e=i(e))&&e.replace(kt,f).replace(Et,"")}function os(e){return(e=i(e))&&wt.test(e)?e.replace(bt,"\\$&"):e}function us(e,t,n){return n&&li(e,t,n)&&(t=0),fo(e,t)}function as(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!ro(t))return n;do t%2&&(n+=e),t=Us(t/2),e+=e;while(t);return n}function fs(e,t,n){var r=e;return(e=i(e))?(n?li(r,t,n):null==t)?e.slice(m(e),g(e)+1):(t+="",e.slice(o(e,t),u(e,t)+1)):e}function ls(e,t,n){return n&&li(e,t,n)&&(t=null),e=i(e),e.match(t||Ot)||[]}function cs(e,t,n){return n&&li(e,t,n)&&(t=null),p(e)?ds(e):Pn(e,t)}function hs(e){return function(){return e}}function ps(e){return e}function ds(e){return ir(Hn(e,!0))}function vs(e,t,n){if(null==n){var r=Ki(t),i=r&&Au(t);((i=i&&i.length&&Gn(t,i))?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=Gn(t,Au(t)));var s=!0,r=-1,o=bu(e),u=i.length;!1===n?s=!1:Ki(n)&&"chain"in n&&(s=n.chain);for(;++r<u;){n=i[r];var a=t[n];e[n]=a,o&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(s||n){var r=e(this.__wrapped__);return(r.__actions__=zt(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return n=[this.value()],Xs.apply(n,arguments),t.apply(e,n)}}(a))}return e}function ms(){}function gs(e){return ci(e)?ur(e):ar(e)}d=d?$t.defaults(Vt.Object(),d,$t.pick(Vt,_t)):Vt;var ys=d.Array,bs=d.Date,ws=d.Error,Es=d.Function,Ss=d.Math,xs=d.Number,Ts=d.Object,Ns=d.RegExp,Cs=d.String,ks=d.TypeError,Ls=ys.prototype,As=Ts.prototype,Os=Cs.prototype,Ms=(Ms=d.window)&&Ms.document,_s=Es.prototype.toString,Ds=As.hasOwnProperty,Ps=0,Hs=As.toString,Bs=d._,js=Ns("^"+os(Hs).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fs=Qi(Fs=d.ArrayBuffer)&&Fs,Is=Qi(Is=Fs&&(new Fs(0)).slice)&&Is,qs=Ss.ceil,Rs=d.clearTimeout,Us=Ss.floor,zs=Qi(zs=Ts.getOwnPropertySymbols)&&zs,Ws=Qi(Ws=Ts.getPrototypeOf)&&Ws,Xs=Ls.push,Vs=Qi(Vs=Ts.preventExtensions)&&Vs,$s=As.propertyIsEnumerable,Js=Qi(Js=d.Set)&&Js,Ks=d.setTimeout,Qs=Ls.splice,Gs=Qi(Gs=d.Uint8Array)&&Gs,Ys=Qi(Ys=d.WeakMap)&&Ys,Zs=function(){try{var e=Qi(e=d.Float64Array)&&e,t=new e(new Fs(10),0,1)&&e}catch(n){}return t}(),eo=function(){var e=Vs&&Qi(e=Ts.assign)&&e;try{if(e){var t=Vs({1:0});t[0]=1}}catch(n){try{e(t,"xo")}catch(r){}return!t[1]&&e}return!1}(),to=Qi(to=ys.isArray)&&to,no=Qi(no=Ts.create)&&no,ro=d.isFinite,io=Qi(io=Ts.keys)&&io,so=Ss.max,oo=Ss.min,uo=Qi(uo=bs.now)&&uo,ao=Qi(ao=xs.isFinite)&&ao,fo=d.parseInt,lo=Ss.random,co=xs.NEGATIVE_INFINITY,ho=xs.POSITIVE_INFINITY,po=Ss.pow(2,32)-1,vo=po-1,mo=po>>>1,go=Zs?Zs.BYTES_PER_ELEMENT:0,yo=Ss.pow(2,53)-1,bo=Ys&&new Ys,wo={},Eo=Bt.support={};!function(e){function t(){this.x=e}var n=arguments,r=[];t.prototype={valueOf:e,y:e};for(var i in new t)r.push(i);Eo.funcDecomp=/\bthis\b/.test(function(){return this}),Eo.funcNames=typeof Es.name=="string";try{Eo.dom=11===Ms.createDocumentFragment().nodeType}catch(s){Eo.dom=!1}try{Eo.nonEnumArgs=!$s.call(n,1)}catch(o){Eo.nonEnumArgs=!0}}(1,0),Bt.templateSettings={escape:pt,evaluate:dt,interpolate:vt,variable:"",imports:{_:Bt}};var So=eo||function(e,t){return null==t?e:Dn(t,Do(t),Dn(t,Au(t),e))},xo=function(){function e(){}return function(t){if(Ki(t)){e.prototype=t;var n=new e;e.prototype=null}return n||d.Object()}}(),To=Ar(Kn),No=Ar(Qn,!0),Co=Or(),ko=Or(!0),Lo=bo?function(e,t){return bo.set(e,t),e}:ps;Is||(Tr=Fs&&Gs?function(e){var t=e.byteLength,n=Zs?Us(t/go):0,r=n*go,i=new Fs(t);if(n){var s=new Zs(i,0,n);s.set(new Zs(e,0,n))}return t!=r&&(s=new Gs(i,r),s.set(new Gs(e,r))),i}:hs(null));var Ao=no&&Js?function(e){return new Rt(e)}:hs(null),Oo=bo?function(e){return bo.get(e)}:ms,Mo=function(){return Eo.funcNames?"constant"==hs.name?ur("name"):function(e){for(var t=e.name,n=wo[t],r=n?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}:hs("")}(),_o=ur("length"),Do=zs?function(e){return zs(wi(e))}:hs([]),Po=function(){var e=0,t=0;return function(n,r){var i=iu(),s=P-(i-t);if(t=i,0<s){if(++e>=D)return n}else e=0;return Lo(n,r)}}(),Ho=Xi(function(e,t){return ai(e)?qn(e,$n(t,!1,!0)):[]}),Bo=jr(),jo=jr(!0),Fo=Xi(function(t,n){n=$n(n);var r=Mn(t,n);return fr(t,n.sort(e)),r}),Io=Qr(),qo=Qr(!0),Ro=Xi(function(e){return gr($n(e,!1,!0))}),Uo=Xi(function(e,t){return ai(e)?qn(e,t):[]}),zo=Xi(Oi),Wo=Xi(function(e){var t=e.length,n=e[t-2],r=e[t-1];return 2<t&&typeof n=="function"?t-=2:(n=1<t&&typeof r=="function"?(--t,r):w,r=w),e.length=t,Mi(e,n,r)}),Xo=Xi(function(e,t){return Mn(e,$n(t))}),Vo=kr(function(e,t,n){Ds.call(e,n)?++e[n]:e[n]=1}),$o=Br(To),Jo=Br(No,!0),Ko=qr(Wt,To),Qo=qr(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},No),Go=kr(function(e,t,n){Ds.call(e,n)?e[n].push(t):e[n]=[t]}),Yo=kr(function(e,t,n){e[n]=t}),Zo=Xi(function(e,t,n){var r=-1,i=typeof t=="function",s=ci(t),o=ai(e)?ys(e.length):[];return To(e,function(e){var u=i?t:s&&null!=e&&e[t];o[++r]=u?u.apply(e,n):ui(e,t,n)}),o}),eu=kr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),tu=Vr(Qt,To),nu=Vr(function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n},No),ru=Xi(function(e,t){if(null==e)return[];var n=t[2];return n&&li(t[0],t[1],n)&&(t.length=1),vr(e,$n(t),[])}),iu=uo||function(){return(new bs).getTime()},su=Xi(function(e,t,n){var r=S;if(n.length)var i=v(n,su.placeholder),r=r|k;return Gr(e,r,t,n,i)}),ou=Xi(function(e,t){t=t.length?$n(t):ns(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Gr(e[i],S,e)}return e}),uu=Xi(function(e,t,n){var r=S|x;if(n.length)var i=v(n,uu.placeholder),r=r|k;return Gr(t,r,e,n,i)}),au=Pr(N),fu=Pr(C),lu=Xi(function(e,t){return Bn(e,1,t)}),cu=Xi(function(e,t,n){return Bn(e,t,n)}),hu=Ir(),pu=Ir(!0),du=Xr(k),vu=Xr(L),mu=Xi(function(e,t){return Gr(e,O,null,null,null,$n(t))}),gu=to||function(e){return p(e)&&pi(e.length)&&Hs.call(e)==R};Eo.dom||($i=function(e){return!!e&&1===e.nodeType&&p(e)&&!wu(e)});var yu=ao||function(e){return typeof e=="number"&&ro(e)},bu=r(/x/)||Gs&&!r(Gs)?function(e){return Hs.call(e)==X}:r,wu=Ws?function(e){if(!e||Hs.call(e)!=$)return!1;var t=e.valueOf,n=Qi(t)&&(n=Ws(t))&&Ws(n);return n?e==n||Ws(e)==n:gi(e)}:gi,Eu=Lr(function(e,t,n){return n?Ln(e,t,n):So(e,t)}),Su=Xi(function(e){var t=e[0];return null==t?t:(e.push(Yt),Eu.apply(w,e))}),xu=Fr(Kn),Tu=Fr(Qn),Nu=Rr(Co),Cu=Rr(ko),ku=Ur(Kn),Lu=Ur(Qn),Au=io?function(e){var t=null!=e&&e.constructor;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&ai(e)?yi(e):Ki(e)?io(e):[]}:yi,Ou=zr(!0),Mu=zr(),_u=Lr(or),Du=Xi(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Kt($n(t),Cs),vi(e,qn(rs(e),t));var n=xr(t[0],t[1],3);return mi(e,function(e,t,r){return!n(e,t,r)})}),Pu=Xi(function(e,t){return null==e?{}:"function"==typeof t[0]?mi(e,xr(t[0],t[1],3)):vi(e,$n(t))}),Hu=_r(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Bu=_r(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),ju=Wr(),Fu=Wr(!0);8!=fo(Mt+"08")&&(us=function(e,t,n){return(n?li(e,t,n):null==t)?t=0:t&&(t=+t),e=fs(e),fo(e,t||(Nt.test(e)?16:10))});var Iu=_r(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),qu=_r(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ru=Xi(function(e,t){try{return e.apply(w,t)}catch(n){return Ji(n)?n:new ws(n)}}),Uu=Xi(function(e,t){return function(n){return ui(n,e,t)}}),zu=Xi(function(e,t){return function(n){return ui(e,n,t)}}),Wu=Hr(function(e){for(var t=-1,n=e.length,r=co;++t<n;){var i=e[t];i>r&&(r=i)}return r}),Xu=Hr(function(e){for(var t=-1,n=e.length,r=ho;++t<n;){var i=e[t];i<r&&(r=i)}return r},!0);return Bt.prototype=jt.prototype,Ft.prototype=xo(jt.prototype),Ft.prototype.constructor=Ft,It.prototype=xo(jt.prototype),It.prototype.constructor=It,qt.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},qt.prototype.get=function(e){return"__proto__"==e?w:this.__data__[e]},qt.prototype.has=function(e){return"__proto__"!=e&&Ds.call(this.__data__,e)},qt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},Rt.prototype.push=function(e){var t=this.data;typeof e=="string"||Ki(e)?t.set.add(e):t.hash[e]=!0},Wi.Cache=qt,Bt.after=function(e,t){if(typeof t!="function"){if(typeof e!="function")throw new ks(F);var n=e;e=t,t=n}return e=ro(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},Bt.ary=function(e,t,n){return n&&li(e,t,n)&&(t=null),t=e&&null==t?e.length:so(+t||0,0),Gr(e,A,null,null,null,null,t)},Bt.assign=Eu,Bt.at=Xo,Bt.before=Ui,Bt.bind=su,Bt.bindAll=ou,Bt.bindKey=uu,Bt.callback=cs,Bt.chain=Di,Bt.chunk=function(e,t,n){t=(n?li(e,t,n):null==t)?1:so(+t||1,1),n=0;for(var r=e?e.length:0,i=-1,s=ys(qs(r/t));n<r;)s[++i]=hr(e,n,n+=t);return s},Bt.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var s=e[t];s&&(i[++r]=s)}return i},Bt.constant=hs,Bt.countBy=Vo,Bt.create=function(e,t,n){var r=xo(e);return n&&li(e,t,n)&&(t=null),t?So(r,t):r},Bt.curry=au,Bt.curryRight=fu,Bt.debounce=zi,Bt.defaults=Su,Bt.defer=lu,Bt.delay=cu,Bt.difference=Ho,Bt.drop=xi,Bt.dropRight=Ti,Bt.dropRightWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3),!0,!0):[]},Bt.dropWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3),!0):[]},Bt.fill=function(e,t,n,r){var i=e?e.length:0;if(!i)return[];for(n&&typeof n!="number"&&li(e,t,n)&&(n=0,r=i),i=e.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===w||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e},Bt.filter=Bi,Bt.flatten=function(e,t,n){var r=e?e.length:0;return n&&li(e,t,n)&&(t=!1),r?$n(e,t):[]},Bt.flattenDeep=function(e){return e&&e.length?$n(e,!0):[]},Bt.flow=hu,Bt.flowRight=pu,Bt.forEach=Ko,Bt.forEachRight=Qo,Bt.forIn=Nu,Bt.forInRight=Cu,Bt.forOwn=ku,Bt.forOwnRight=Lu,Bt.functions=ns,Bt.groupBy=Go,Bt.indexBy=Yo,Bt.initial=function(e){return Ti(e,1)},Bt.intersection=function(){for(var e=[],t=-1,r=arguments.length,i=[],s=ri(),o=s==n,u=[];++t<r;){var a=arguments[t];ai(a)&&(e.push(a),i.push(o&&120<=a.length?Ao(t&&a):null))}if(r=e.length,2>r)return u;var o=e[0],f=-1,l=o?o.length:0,c=i[0];e:for(;++f<l;)if(a=o[f],0>(c?Ut(c,a):s(u,a,0))){for(t=r;--t;){var h=i[t];if(0>(h?Ut(h,a):s(e[t],a,0)))continue e}c&&c.push(a),u.push(a)}return u},Bt.invert=function(e,t,n){n&&li(e,t,n)&&(t=null),n=-1;for(var r=Au(e),i=r.length,s={};++n<i;){var o=r[n],u=e[o];t?Ds.call(s,u)?s[u].push(o):s[u]=[o]:s[u]=o}return s},Bt.invoke=Zo,Bt.keys=Au,Bt.keysIn=rs,Bt.map=Fi,Bt.mapKeys=Ou,Bt.mapValues=Mu,Bt.matches=ds,Bt.matchesProperty=function(e,t){return sr(e,Hn(t,!0))},Bt.memoize=Wi,Bt.merge=_u,Bt.method=Uu,Bt.methodOf=zu,Bt.mixin=vs,Bt.negate=function(e){if(typeof e!="function")throw new ks(F);return function(){return!e.apply(this,arguments)}},Bt.omit=Du,Bt.once=function(e){return Ui(2,e)},Bt.pairs=function(e){for(var t=-1,n=Au(e),r=n.length,i=ys(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},Bt.partial=du,Bt.partialRight=vu,Bt.partition=eu,Bt.pick=Pu,Bt.pluck=function(e,t){return Fi(e,gs(t))},Bt.property=gs,Bt.propertyOf=function(e){return function(t){return er(e,Ei(t),t+"")}},Bt.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=ri(),i=e.length;++n<i;)for(var s=0,o=e[n];-1<(s=r(t,o,s));)Qs.call(t,s,1);return t},Bt.pullAt=Fo,Bt.range=function(e,t,n){n&&li(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var r=-1;t=so(qs((t-e)/(n||1)),0);for(var i=ys(t);++r<t;)i[r]=e,e+=n;return i},Bt.rearg=mu,Bt.reject=function(e,t,n){var r=gu(e)?Jt:Xn;return t=ni(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},Bt.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,s=[],o=e.length;for(t=ni(t,n,3);++i<o;)n=e[i],t(n,i,e)&&(r.push(n),s.push(i));return fr(e,s),r},Bt.rest=Li,Bt.restParam=Xi,Bt.set=function(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||ci(t,e)?[r]:Ei(t);for(var r=-1,i=t.length,s=i-1,o=e;null!=o&&++r<i;){var u=t[r];Ki(o)&&(r==s?o[u]=n:null==o[u]&&(o[u]=fi(t[r+1])?[]:{})),o=o[u]}return e},Bt.shuffle=qi,Bt.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&li(e,t,n)&&(t=0,n=r),hr(e,t,n)):[]},Bt.sortBy=function(e,t,n){if(null==e)return[];n&&li(e,t,n)&&(t=null);var r=-1;return t=ni(t,n,3),e=rr(e,function(e,n,i){return{a:t(e,n,i),b:++r,c:e}}),dr(e,a)},Bt.sortByAll=ru,Bt.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&li(t,n,r)&&(n=null),gu(t)||(t=null==t?[]:[t]),gu(n)||(n=null==n?[]:[n]),vr(e,t,n))},Bt.spread=function(e){if(typeof e!="function")throw new ks(F);return function(t){return e.apply(this,t)}},Bt.take=function(e,t,n){return e&&e.length?((n?li(e,t,n):null==t)&&(t=1),hr(e,0,0>t?0:t)):[]},Bt.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?li(e,t,n):null==t)&&(t=1),t=r-(+t||0),hr(e,0>t?0:t)):[]},Bt.takeRightWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3),!1,!0):[]},Bt.takeWhile=function(e,t,n){return e&&e.length?br(e,ni(t,n,3)):[]},Bt.tap=function(e,t,n){return t.call(n,e),e},Bt.throttle=function(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new ks(F);return!1===n?r=!1:Ki(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ht.leading=r,Ht.maxWait=+t,Ht.trailing=i,zi(e,t,Ht)},Bt.thru=Pi,Bt.times=function(e,t,n){if(e=Us(e),1>e||!ro(e))return[];var r=-1,i=ys(oo(e,po));for(t=xr(t,n,1);++r<e;)r<po?i[r]=t(r):t(r);return i},Bt.toArray=function(e){var t=e?_o(e):0;return pi(t)?t?zt(e):[]:is(e)},Bt.toPlainObject=ts,Bt.transform=function(e,t,n,r){var i=gu(e)||es(e);return t=ni(t,r,4),null==n&&(i||Ki(e)?(r=e.constructor,n=i?gu(e)?new r:[]:xo(bu(r)&&r.prototype)):n={}),(i?Wt:Kn)(e,function(e,r,i){return t(n,e,r,i)}),n},Bt.union=Ro,Bt.uniq=Ai,Bt.unzip=Oi,Bt.unzipWith=Mi,Bt.values=is,Bt.valuesIn=function(e){return yr(e,rs(e))},Bt.where=function(e,t){return Bi(e,ir(t))},Bt.without=Uo,Bt.wrap=function(e,t){return t=null==t?ps:t,Gr(t,k,null,[e],[])},Bt.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(ai(n))var r=r?qn(r,n).concat(qn(n,r)):n}return r?gr(r):[]},Bt.zip=zo,Bt.zipObject=_i,Bt.zipWith=Wo,Bt.backflow=pu,Bt.collect=Fi,Bt.compose=pu,Bt.each=Ko,Bt.eachRight=Qo,Bt.extend=Eu,Bt.iteratee=cs,Bt.methods=ns,Bt.object=_i,Bt.select=Bi,Bt.tail=Li,Bt.unique=Ai,vs(Bt,Bt),Bt.add=function(e,t){return(+e||0)+(+t||0)},Bt.attempt=Ru,Bt.camelCase=Hu,Bt.capitalize=function(e){return(e=i(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Bt.clone=function(e,t,n,r){return t&&typeof t!="boolean"&&li(e,t,n)?t=!1:typeof t=="function"&&(r=n,n=t,t=!1),n=typeof n=="function"&&xr(n,r,1),Hn(e,t,n)},Bt.cloneDeep=function(e,t,n){return t=typeof t=="function"&&xr(t,n,1),Hn(e,!0,t)},Bt.deburr=ss,Bt.endsWith=function(e,t,n){e=i(e),t+="";var r=e.length;return n=n===w?r:oo(0>n?0:+n||0,r),n-=t.length,0<=n&&e.indexOf(t,n)==n},Bt.escape=function(e){return(e=i(e))&&ht.test(e)?e.replace(lt,l):e},Bt.escapeRegExp=os,Bt.every=Hi,Bt.find=$o,Bt.findIndex=Bo,Bt.findKey=xu,Bt.findLast=Jo,Bt.findLastIndex=jo,Bt.findLastKey=Tu,Bt.findWhere=function(e,t){return $o(e,ir(t))},Bt.first=Ni,Bt.get=function(e,t,n){return e=null==e?w:er(e,Ei(t),t+""),e===w?n:e},Bt.has=function(e,t){if(null==e)return!1;var n=Ds.call(e,t);return n||ci(t)||(t=Ei(t),e=1==t.length?e:er(e,hr(t,0,-1)),t=ki(t),n=null!=e&&Ds.call(e,t)),n},Bt.identity=ps,Bt.includes=ji,Bt.indexOf=Ci,Bt.inRange=function(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=oo(t,n)&&e<so(t,n)},Bt.isArguments=Vi,Bt.isArray=gu,Bt.isBoolean=function(e){return!0===e||!1===e||p(e)&&Hs.call(e)==U},Bt.isDate=function(e){return p(e)&&Hs.call(e)==z},Bt.isElement=$i,Bt.isEmpty=function(e){return null==e?!0:ai(e)&&(gu(e)||Zi(e)||Vi(e)||p(e)&&bu(e.splice))?!e.length:!Au(e).length},Bt.isEqual=function(e,t,n,r){return n=typeof n=="function"&&xr(n,r,3),!n&&di(e)&&di(t)?e===t:(r=n?n(e,t):w,r===w?tr(e,t,n):!!r)},Bt.isError=Ji,Bt.isFinite=yu,Bt.isFunction=bu,Bt.isMatch=function(e,t,n,r){var i=Au(t),s=i.length;if(!s)return!0;if(null==e)return!1;if(n=typeof n=="function"&&xr(n,r,3),e=wi(e),!n&&1==s){var o=i[0];if(r=t[o],di(r))return r===e[o]&&(r!==w||o in e)}for(var o=ys(s),u=ys(s);s--;)r=o[s]=t[i[s]],u[s]=di(r);return nr(e,i,o,u,n)},Bt.isNaN=function(e){return Gi(e)&&e!=+e},Bt.isNative=Qi,Bt.isNull=function(e){return null===e},Bt.isNumber=Gi,Bt.isObject=Ki,Bt.isPlainObject=wu,Bt.isRegExp=Yi,Bt.isString=Zi,Bt.isTypedArray=es,Bt.isUndefined=function(e){return e===w},Bt.kebabCase=Bu,Bt.last=ki,Bt.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(typeof n=="number")i=(0>n?so(r+n,0):oo(n||0,r-1))+1;else if(n)return i=Er(e,t,!0)-1,e=e[i],(t===t?t===e:e!==e)?i:-1;if(t!==t)return h(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},Bt.max=Wu,Bt.min=Xu,Bt.noConflict=function(){return d._=Bs,this},Bt.noop=ms,Bt.now=iu,Bt.pad=function(e,t,n){e=i(e),t=+t;var r=e.length;return r<t&&ro(t)?(r=(t-r)/2,t=Us(r),r=qs(r),n=Jr("",r,n),n.slice(0,t)+e+n):e},Bt.padLeft=ju,Bt.padRight=Fu,Bt.parseInt=us,Bt.random=function(e,t,n){n&&li(e,t,n)&&(t=n=null);var r=null==e,i=null==t;return null==n&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=lo(),oo(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):lr(e,t)},Bt.reduce=tu,Bt.reduceRight=nu,Bt.repeat=as,Bt.result=function(e,t,n){var r=null==e?w:e[t];return r===w&&(null==e||ci(t,e)||(t=Ei(t),e=1==t.length?e:er(e,hr(t,0,-1)),r=null==e?w:e[ki(t)]),r=r===w?n:r),bu(r)?r.call(e):r},Bt.runInContext=b,Bt.size=function(e){var t=e?_o(e):0;return pi(t)?t:Au(e).length},Bt.snakeCase=Iu,Bt.some=Ri,Bt.sortedIndex=Io,Bt.sortedLastIndex=qo,Bt.startCase=qu,Bt.startsWith=function(e,t,n){return e=i(e),n=null==n?0:oo(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Bt.sum=function(e,t,n){n&&li(e,t,n)&&(t=null);var r=ni(),i=null==t;if(r===Pn&&i||(i=!1,t=r(t,n,3)),i){for(e=gu(e)?e:bi(e),t=e.length,n=0;t--;)n+=+e[t]||0;e=n}else e=mr(e,t);return e},Bt.template=function(e,t,n){var r=Bt.templateSettings;n&&li(e,t,n)&&(t=n=null),e=i(e),t=Ln(So({},n||t),r,Zt),n=Ln(So({},t.imports),r.imports,Zt);var s,o,u=Au(n),a=yr(n,u),f=0;n=t.interpolate||Lt;var l="__p+='";n=Ns((t.escape||Lt).source+"|"+n.source+"|"+(n===vt?xt:Lt).source+"|"+(t.evaluate||Lt).source+"|$","g");var h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,i,u,a){return r||(r=i),l+=e.slice(f,a).replace(At,c),n&&(s=!0,l+="'+__e("+n+")+'"),u&&(o=!0,l+="';"+u+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),f=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(o?l.replace(ot,""):l).replace(ut,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Ru(function(){return Es(u,h+"return "+l).apply(w,a)}),t.source=l,Ji(t))throw t;return t},Bt.trim=fs,Bt.trimLeft=function(e,t,n){var r=e;return(e=i(e))?e.slice((n?li(r,t,n):null==t)?m(e):o(e,t+"")):e},Bt.trimRight=function(e,t,n){var r=e;return(e=i(e))?(n?li(r,t,n):null==t)?e.slice(0,g(e)+1):e.slice(0,u(e,t+"")+1):e},Bt.trunc=function(e,t,n){n&&li(e,t,n)&&(t=null);var r=M;if(n=_,null!=t)if(Ki(t)){var s="separator"in t?t.separator:s,r="length"in t?+t.length||0:r;n="omission"in t?i(t.omission):n}else r=+t||0;if(e=i(e),r>=e.length)return e;if(r-=n.length,1>r)return n;if(t=e.slice(0,r),null==s)return t+n;if(Yi(s)){if(e.slice(r).search(s)){var o,u=e.slice(0,r);for(s.global||(s=Ns(s.source,(Tt.exec(s)||"")+"g")),s.lastIndex=0;e=s.exec(u);)o=e.index;t=t.slice(0,null==o?r:o)}}else e.indexOf(s,r)!=r&&(s=t.lastIndexOf(s),-1<s&&(t=t.slice(0,s)));return t+n},Bt.unescape=function(e){return(e=i(e))&&ct.test(e)?e.replace(ft,y):e},Bt.uniqueId=function(e){var t=++Ps;return i(e)+t},Bt.words=ls,Bt.all=Hi,Bt.any=Ri,Bt.contains=ji,Bt.detect=$o,Bt.foldl=tu,Bt.foldr=nu,Bt.head=Ni,Bt.include=ji,Bt.inject=tu,vs(Bt,function(){var e={};return Kn(Bt,function(t,n){Bt.prototype[n]||(e[n]=t)}),e}(),!1),Bt.sample=Ii,Bt.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Ii(t,e)}):Ii(this.value())},Bt.VERSION=E,Wt("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Bt[e].placeholder=Bt}),Wt(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=j,r=t==H;It.prototype[e]=function(e,i){var s=this.__filtered__,o=s&&r?new It(this):this.clone();return(o.__iteratees__||(o.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:ni(e,i,1),limit:-1,type:t}),o.__filtered__=s||n,o}}),Wt(["drop","take"],function(e,t){var n=e+"While";It.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();return n=null==n?1:so(Us(n)||0,0),r?t?i.__takeCount__=oo(i.__takeCount__,n):ki(i.__iteratees__).limit=n:(i.__views__||(i.__views__=[])).push({size:n,type:e+(0>i.__dir__?"Right":"")}),i},It.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},It.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),Wt(["first","last"],function(e,t){var n="take"+(t?"Right":"");It.prototype[e]=function(){return this[n](1).value()[0]}}),Wt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");It.prototype[e]=function(){return this[n](1)}}),Wt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?ir:gs;It.prototype[e]=function(e){return this[n](r(e))}}),It.prototype.compact=function(){return this.filter(ps)},It.prototype.reject=function(e,t){return e=ni(e,t,1),this.filter(function(t){return!e(t)})},It.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return 0>e?n=this.takeRight(-e):e&&(n=this.drop(e)),t!==w&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},It.prototype.toArray=function(){return this.drop(0)},Kn(It.prototype,function(e,t){var n=Bt[t];if(n){var r=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);Bt.prototype[t]=function(){function t(e){return e=[e],Xs.apply(e,s),n.apply(Bt,e)}var s=arguments,o=this.__chain__,u=this.__wrapped__,a=!!this.__actions__.length,f=u instanceof It,l=s[0],c=f||gu(u);return c&&r&&typeof l=="function"&&1!=l.length&&(f=c=!1),f=f&&!a,i&&!o?f?e.call(u):n.call(Bt,this.value()):c?(u=e.apply(f?u:new It(this),s),i||!a&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Pi,args:[t],thisArg:Bt}),new Ft(u,o)):this.thru(t)}}}),Wt("concat join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?Os:Ls)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Bt.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Kn(It.prototype,function(e,t){var n=Bt[t];if(n){var r=n.name;(wo[r]||(wo[r]=[])).push({name:t,func:n})}}),wo[$r(null,x).name]=[{name:"wrapper",func:null}],It.prototype.clone=function(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new It(this.__wrapped__);return r.__actions__=e?zt(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?zt(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?zt(n):null,r},It.prototype.reverse=function(){if(this.__filtered__){var e=new It(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},It.prototype.value=function(){var e=this.__wrapped__.value();if(!gu(e))return wr(e,this.__actions__);var t,n=this.__dir__,r=0>n;t=e.length;for(var i=this.__views__,s=0,o=-1,u=i?i.length:0;++o<u;){var a=i[o],f=a.size;switch(a.type){case"drop":s+=f;break;case"dropRight":t-=f;break;case"take":t=oo(t,s+f);break;case"takeRight":s=so(s,t-f)}}t={start:s,end:t},i=t.start,s=t.end,t=s-i,i=r?s:i-1,s=oo(t,this.__takeCount__),u=(o=this.__iteratees__)?o.length:0,a=0,f=[];e:for(;t--&&a<s;){for(var i=i+n,l=-1,c=e[i];++l<u;){var h=o[l],p=h.iteratee,d=h.type;if(d==H){if(h.done&&(r?i>h.index:i<h.index)&&(h.count=0,h.done=!1),h.index=i,!(h.done||(d=h.limit,h.done=-1<d?h.count++>=d:!p(c))))continue e}else if(h=p(c),d==j)c=h;else if(!h){if(d==B)continue e;break e}}f[a++]=c}return f},Bt.prototype.chain=function(){return Di(this)},Bt.prototype.commit=function(){return new Ft(this.value(),this.__chain__)},Bt.prototype.plant=function(e){for(var t,n=this;n instanceof jt;){var r=Si(n);t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},Bt.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof It?(this.__actions__.length&&(e=new It(this)),new Ft(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})},Bt.prototype.toString=function(){return this.value()+""},Bt.prototype.run=Bt.prototype.toJSON=Bt.prototype.valueOf=Bt.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},Bt.prototype.collect=Bt.prototype.map,Bt.prototype.head=Bt.prototype.first,Bt.prototype.select=Bt.prototype.filter,Bt.prototype.tail=Bt.prototype.rest,Bt}var w,E="3.8.0",S=1,x=2,T=4,N=8,C=16,k=32,L=64,A=128,O=256,M=30,_="...",D=150,P=16,H=0,B=1,j=2,F="Expected a function",I="__lodash_placeholder__",q="[object Arguments]",R="[object Array]",U="[object Boolean]",z="[object Date]",W="[object Error]",X="[object Function]",V="[object Number]",$="[object Object]",J="[object RegExp]",K="[object String]",Q="[object ArrayBuffer]",G="[object Float32Array]",Y="[object Float64Array]",Z="[object Int8Array]",et="[object Int16Array]",tt="[object Int32Array]",nt="[object Uint8Array]",rt="[object Uint8ClampedArray]",it="[object Uint16Array]",st="[object Uint32Array]",ot=/\b__p\+='';/g,ut=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ft=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,ct=RegExp(ft.source),ht=RegExp(lt.source),pt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,gt=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,bt=/[.*+?^${}()|[\]\/\\]/g,wt=RegExp(bt.source),Et=/[\u0300-\u036f\ufe20-\ufe23]/g,St=/\\(\\)?/g,xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Tt=/\w*$/,Nt=/^0[xX]/,Ct=/^\[object .+?Constructor\]$/,kt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Lt=/($^)/,At=/['\n\r\u2028\u2029\\]/g,Ot=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Mt=" 	\f\n\r\u2028\u2029",_t="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Dt={};Dt[G]=Dt[Y]=Dt[Z]=Dt[et]=Dt[tt]=Dt[nt]=Dt[rt]=Dt[it]=Dt[st]=!0,Dt[q]=Dt[R]=Dt[Q]=Dt[U]=Dt[z]=Dt[W]=Dt[X]=Dt["[object Map]"]=Dt[V]=Dt[$]=Dt[J]=Dt["[object Set]"]=Dt[K]=Dt["[object WeakMap]"]=!1;var Pt={};Pt[q]=Pt[R]=Pt[Q]=Pt[U]=Pt[z]=Pt[G]=Pt[Y]=Pt[Z]=Pt[et]=Pt[tt]=Pt[V]=Pt[$]=Pt[J]=Pt[K]=Pt[nt]=Pt[rt]=Pt[it]=Pt[st]=!0,Pt[W]=Pt[X]=Pt["[object Map]"]=Pt["[object Set]"]=Pt["[object WeakMap]"]=!1;var Ht={leading:!1,maxWait:0,trailing:!1},Bt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ft={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},It={"function":!0,object:!0},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Rt=It[typeof exports]&&exports&&!exports.nodeType&&exports,Ut=It[typeof module]&&module&&!module.nodeType&&module,zt=It[typeof self]&&self&&self.Object&&self,Wt=It[typeof window]&&window&&window.Object&&window,Xt=Ut&&Ut.exports===Rt&&Rt,Vt=Rt&&Ut&&typeof global=="object"&&global&&global.Object&&global||Wt!==(this&&this.window)&&Wt||zt||this,$t=b();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Vt._=$t,define("lodash",[],function(){return $t})):Rt&&Ut?Xt?(Ut.exports=$t)._=$t:Rt._=$t:Vt._=$t}.call(this),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.React=e()}}(function(){return function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t){"use strict";var n=e("./focusNode"),r={componentDidMount:function(){this.props.autoFocus&&n(this.getDOMNode())}};t.exports=r},{"./focusNode":104}],2:[function(e,t){"use strict";function n(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&(!e.ctrlKey||!e.altKey)}var i=e("./EventConstants"),s=e("./EventPropagators"),o=e("./ExecutionEnvironment"),u=e("./SyntheticInputEvent"),a=e("./keyOf"),f=o.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||n()),l=32,c=String.fromCharCode(l),h=i.topLevelTypes,p={beforeInput:{phasedRegistrationNames:{bubbled:a({onBeforeInput:null}),captured:a({onBeforeInputCapture:null})},dependencies:[h.topCompositionEnd,h.topKeyPress,h.topTextInput,h.topPaste]}},d=null,v={eventTypes:p,extractEvents:function(e,t,n,i){var o;if(f)switch(e){case h.topKeyPress:var a=i.which;if(a!==l)return;o=String.fromCharCode(a);break;case h.topTextInput:if(o=i.data,o===c)return;break;default:return}else{switch(e){case h.topPaste:d=null;break;case h.topKeyPress:i.which&&!r(i)&&(d=String.fromCharCode(i.which));break;case h.topCompositionEnd:d=i.data}if(null===d)return;o=d}if(o){var v=u.getPooled(p.beforeInput,n,i);return v.data=o,d=null,s.accumulateTwoPhaseDispatches(v),v}}};t.exports=v},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./SyntheticInputEvent":84,"./keyOf":125}],3:[function(e,t){"use strict";function n(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},i=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){i.forEach(function(t){r[n(t,e)]=r[e]})});var s={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},o={isUnitlessNumber:r,shorthandPropertyExpansions:s};t.exports=o},{}],4:[function(e,t){"use strict";var n=e("./CSSProperty"),r=e("./dangerousStyleValue"),i=e("./hyphenateStyleName"),s=e("./memoizeStringOnly"),o=s(function(e){return i(e)}),u={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(t+=o(n)+":",t+=r(n,i)+";")}return t||null},setValueForStyles:function(e,t){var i=e.style;for(var s in t)if(t.hasOwnProperty(s)){var o=r(s,t[s]);if(o)i[s]=o;else{var u=n.shorthandPropertyExpansions[s];if(u)for(var a in u)i[a]="";else i[s]=""}}}};t.exports=u},{"./CSSProperty":3,"./dangerousStyleValue":99,"./hyphenateStyleName":116,"./memoizeStringOnly":127}],5:[function(e,t){"use strict";function n(){this._callbacks=null,this._contexts=null}var r=e("./PooledClass"),i=e("./invariant"),s=e("./mixInto");s(n,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){i(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./PooledClass":26,"./invariant":118,"./mixInto":131}],6:[function(e,t){"use strict";function n(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function r(e){var t=S.getPooled(k.change,A,e);b.accumulateTwoPhaseDispatches(t),E.batchedUpdates(i,t)}function i(e){y.enqueueEvents(e),y.processEventQueue()}function s(e,t){L=e,A=t,L.attachEvent("onchange",r)}function o(){L&&(L.detachEvent("onchange",r),L=null,A=null)}function u(e,t,n){return e===C.topChange?n:void 0}function a(e,t,n){e===C.topFocus?(o(),s(t,n)):e===C.topBlur&&o()}function f(e,t){L=e,A=t,O=e.value,M=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(L,"value",P),L.attachEvent("onpropertychange",c)}function l(){L&&(delete L.value,L.detachEvent("onpropertychange",c),L=null,A=null,O=null,M=null)}function c(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==O&&(O=t,r(e))}}function h(e,t,n){return e===C.topInput?n:void 0}function p(e,t,n){e===C.topFocus?(l(),f(t,n)):e===C.topBlur&&l()}function d(e){return e!==C.topSelectionChange&&e!==C.topKeyUp&&e!==C.topKeyDown||!L||L.value===O?void 0:(O=L.value,A)}function v(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function m(e,t,n){return e===C.topClick?n:void 0}var g=e("./EventConstants"),y=e("./EventPluginHub"),b=e("./EventPropagators"),w=e("./ExecutionEnvironment"),E=e("./ReactUpdates"),S=e("./SyntheticEvent"),x=e("./isEventSupported"),T=e("./isTextInputElement"),N=e("./keyOf"),C=g.topLevelTypes,k={change:{phasedRegistrationNames:{bubbled:N({onChange:null}),captured:N({onChangeCapture:null})},dependencies:[C.topBlur,C.topChange,C.topClick,C.topFocus,C.topInput,C.topKeyDown,C.topKeyUp,C.topSelectionChange]}},L=null,A=null,O=null,M=null,_=!1;w.canUseDOM&&(_=x("change")&&(!("documentMode"in document)||document.documentMode>8));var D=!1;w.canUseDOM&&(D=x("input")&&(!("documentMode"in document)||document.documentMode>9));var P={get:function(){return M.get.call(this)},set:function(e){O=""+e,M.set.call(this,e)}},H={eventTypes:k,extractEvents:function(e,t,r,i){var s,o;if(n(t)?_?s=u:o=a:T(t)?D?s=h:(s=d,o=p):v(t)&&(s=m),s){var f=s(e,t,r);if(f){var l=S.getPooled(k.change,f,i);return b.accumulateTwoPhaseDispatches(l),l}}o&&o(e,t,r)}};t.exports=H},{"./EventConstants":15,"./EventPluginHub":17,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactUpdates":74,"./SyntheticEvent":82,"./isEventSupported":119,"./isTextInputElement":121,"./keyOf":125}],7:[function(e,t){"use strict";var n=0,r={createReactRootIndex:function(){return n++}};t.exports=r},{}],8:[function(e,t){"use strict";function n(e){switch(e){case g.topCompositionStart:return b.compositionStart;case g.topCompositionEnd:return b.compositionEnd;case g.topCompositionUpdate:return b.compositionUpdate}}function r(e,t){return e===g.topKeyDown&&t.keyCode===d}function i(e,t){switch(e){case g.topKeyUp:return-1!==p.indexOf(t.keyCode);case g.topKeyDown:return t.keyCode!==d;case g.topKeyPress:case g.topMouseDown:case g.topBlur:return!0;default:return!1}}function s(e){this.root=e,this.startSelection=f.getSelection(e),this.startValue=this.getText()}var o=e("./EventConstants"),u=e("./EventPropagators"),a=e("./ExecutionEnvironment"),f=e("./ReactInputSelection"),l=e("./SyntheticCompositionEvent"),c=e("./getTextContentAccessor"),h=e("./keyOf"),p=[9,13,27,32],d=229,v=a.canUseDOM&&"CompositionEvent"in window,m=!v||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,g=o.topLevelTypes,y=null,b={compositionEnd:{phasedRegistrationNames:{bubbled:h({onCompositionEnd:null}),captured:h({onCompositionEndCapture:null})},dependencies:[g.topBlur,g.topCompositionEnd,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:h({onCompositionStart:null}),captured:h({onCompositionStartCapture:null})},dependencies:[g.topBlur,g.topCompositionStart,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:h({onCompositionUpdate:null}),captured:h({onCompositionUpdateCapture:null})},dependencies:[g.topBlur,g.topCompositionUpdate,g.topKeyDown,g.topKeyPress,g.topKeyUp,g.topMouseDown]}};s.prototype.getText=function(){return this.root.value||this.root[c()]},s.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var w={eventTypes:b,extractEvents:function(e,t,o,a){var f,c;if(v?f=n(e):y?i(e,a)&&(f=b.compositionEnd):r(e,a)&&(f=b.compositionStart),m&&(y||f!==b.compositionStart?f===b.compositionEnd&&y&&(c=y.getData(),y=null):y=new s(t)),f){var h=l.getPooled(f,o,a);return c&&(h.data=c),u.accumulateTwoPhaseDispatches(h),h}}};t.exports=w},{"./EventConstants":15,"./EventPropagators":20,"./ExecutionEnvironment":21,"./ReactInputSelection":56,"./SyntheticCompositionEvent":80,"./getTextContentAccessor":113,"./keyOf":125}],9:[function(e,t){"use strict";function n(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r,i=e("./Danger"),s=e("./ReactMultiChildUpdateTypes"),o=e("./getTextContentAccessor"),u=e("./invariant"),a=o();r="textContent"===a?function(e,t){e.textContent=t}:function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var f={dangerouslyReplaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup,updateTextContent:r,processUpdates:function(e,t){for(var o,a=null,f=null,l=0;o=e[l];l++)if(o.type===s.MOVE_EXISTING||o.type===s.REMOVE_NODE){var c=o.fromIndex,h=o.parentNode.childNodes[c],p=o.parentID;u(h),a=a||{},a[p]=a[p]||[],a[p][c]=h,f=f||[],f.push(h)}var d=i.dangerouslyRenderMarkup(t);if(f)for(var v=0;v<f.length;v++)f[v].parentNode.removeChild(f[v]);for(var m=0;o=e[m];m++)switch(o.type){case s.INSERT_MARKUP:n(o.parentNode,d[o.markupIndex],o.toIndex);break;case s.MOVE_EXISTING:n(o.parentNode,a[o.parentID][o.fromIndex],o.toIndex);break;case s.TEXT_CONTENT:r(o.parentNode,o.textContent);break;case s.REMOVE_NODE:}}};t.exports=f},{"./Danger":12,"./ReactMultiChildUpdateTypes":61,"./getTextContentAccessor":113,"./invariant":118}],10:[function(e,t){"use strict";var n=e("./invariant"),r={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},i=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},u=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var a in t){n(!s.isStandardName.hasOwnProperty(a)),s.isStandardName[a]=!0;var f=a.toLowerCase();if(s.getPossibleStandardName[f]=a,i.hasOwnProperty(a)){var l=i[a];s.getPossibleStandardName[l]=a,s.getAttributeName[a]=l}else s.getAttributeName[a]=f;s.getPropertyName[a]=o.hasOwnProperty(a)?o[a]:a,s.getMutationMethod[a]=u.hasOwnProperty(a)?u[a]:null;var c=t[a];s.mustUseAttribute[a]=c&r.MUST_USE_ATTRIBUTE,s.mustUseProperty[a]=c&r.MUST_USE_PROPERTY,s.hasSideEffects[a]=c&r.HAS_SIDE_EFFECTS,s.hasBooleanValue[a]=c&r.HAS_BOOLEAN_VALUE,s.hasNumericValue[a]=c&r.HAS_NUMERIC_VALUE,s.hasPositiveNumericValue[a]=c&r.HAS_POSITIVE_NUMERIC_VALUE,s.hasOverloadedBooleanValue[a]=c&r.HAS_OVERLOADED_BOOLEAN_VALUE,n(!s.mustUseAttribute[a]||!s.mustUseProperty[a]),n(s.mustUseProperty[a]||!s.hasSideEffects[a]),n(!!s.hasBooleanValue[a]+!!s.hasNumericValue[a]+!!s.hasOverloadedBooleanValue[a]<=1)}}},i={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=i[e];return r||(i[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:r};t.exports=s},{"./invariant":118}],11:[function(e,t){"use strict";function n(e,t){return null==t||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&1>t||r.hasOverloadedBooleanValue[e]&&t===!1}var r=e("./DOMProperty"),i=e("./escapeTextForBrowser"),s=e("./memoizeStringOnly"),o=(e("./warning"),s(function(e){return i(e)+'="'})),u={createMarkupForID:function(e){return o(r.ID_ATTRIBUTE_NAME)+i(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(n(e,t))return"";var s=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?i(s):o(s)+i(t)+'"'}return r.isCustomAttribute(e)?null==t?"":o(e)+i(t)+'"':null},setValueForProperty:function(e,t,i){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var s=r.getMutationMethod[t];if(s)s(e,i);else if(n(t,i))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+i);else{var o=r.getPropertyName[t];r.hasSideEffects[t]&&e[o]===i||(e[o]=i)}}else r.isCustomAttribute(t)&&(null==i?e.removeAttribute(t):e.setAttribute(t,""+i))},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,void 0);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],s=r.getDefaultValueForProperty(e.nodeName,i);r.hasSideEffects[t]&&e[i]===s||(e[i]=s)}}else r.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=u},{"./DOMProperty":10,"./escapeTextForBrowser":102,"./memoizeStringOnly":127,"./warning":139}],12:[function(e,t){"use strict";function n(e){return e.substring(1,e.indexOf(" "))}var r=e("./ExecutionEnvironment"),i=e("./createNodesFromMarkup"),s=e("./emptyFunction"),o=e("./getMarkupWrap"),u=e("./invariant"),a=/^(<[^ \/>]+)/,f="data-danger-index",l={dangerouslyRenderMarkup:function(e){u(r.canUseDOM);for(var t,l={},h=0;h<e.length;h++)u(e[h]),t=n(e[h]),t=o(t)?t:"*",l[t]=l[t]||[],l[t][h]=e[h];var p=[],d=0;for(t in l)if(l.hasOwnProperty(t)){var v=l[t];for(var m in v)if(v.hasOwnProperty(m)){var g=v[m];v[m]=g.replace(a,"$1 "+f+'="'+m+'" ')}var y=i(v.join(""),s);for(h=0;h<y.length;++h){var b=y[h];b.hasAttribute&&b.hasAttribute(f)&&(m=+b.getAttribute(f),b.removeAttribute(f),u(!p.hasOwnProperty(m)),p[m]=b,d+=1)}}return u(d===p.length),u(p.length===e.length),p},dangerouslyReplaceNodeWithMarkup:function(e,t){u(r.canUseDOM),u(t),u("html"!==e.tagName.toLowerCase());var n=i(t,s)[0];e.parentNode.replaceChild(n,e)}};t.exports=l},{"./ExecutionEnvironment":21,"./createNodesFromMarkup":98,"./emptyFunction":100,"./getMarkupWrap":110,"./invariant":118}],13:[function(e,t){"use strict";var n=e("./keyOf"),r=[n({ResponderEventPlugin:null}),n({SimpleEventPlugin:null}),n({TapEventPlugin:null}),n({EnterLeaveEventPlugin:null}),n({ChangeEventPlugin:null}),n({SelectEventPlugin:null}),n({CompositionEventPlugin:null}),n({BeforeInputEventPlugin:null}),n({AnalyticsEventPlugin:null}),n({MobileSafariClickEventPlugin:null})];t.exports=r},{"./keyOf":125}],14:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./EventPropagators"),i=e("./SyntheticMouseEvent"),s=e("./ReactMount"),o=e("./keyOf"),u=n.topLevelTypes,a=s.getFirstReactDOM,f={mouseEnter:{registrationName:o({onMouseEnter:null}),dependencies:[u.topMouseOut,u.topMouseOver]},mouseLeave:{registrationName:o({onMouseLeave:null}),dependencies:[u.topMouseOut,u.topMouseOver]}},l=[null,null],c={eventTypes:f,extractEvents:function(e,t,n,o){if(e===u.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==u.topMouseOut&&e!==u.topMouseOver)return null;var c;if(t.window===t)c=t;else{var h=t.ownerDocument;c=h?h.defaultView||h.parentWindow:window}var p,d;if(e===u.topMouseOut?(p=t,d=a(o.relatedTarget||o.toElement)||c):(p=c,d=t),p===d)return null;var v=p?s.getID(p):"",m=d?s.getID(d):"",g=i.getPooled(f.mouseLeave,v,o);g.type="mouseleave",g.target=p,g.relatedTarget=d;var y=i.getPooled(f.mouseEnter,m,o);return y.type="mouseenter",y.target=d,y.relatedTarget=p,r.accumulateEnterLeaveDispatches(g,y,v,m),l[0]=g,l[1]=y,l}};t.exports=c},{"./EventConstants":15,"./EventPropagators":20,"./ReactMount":59,"./SyntheticMouseEvent":86,"./keyOf":125}],15:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({bubbled:null,captured:null}),i=n({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),s={topLevelTypes:i,PropagationPhases:r};t.exports=s},{"./keyMirror":124}],16:[function(e,t){var n=e("./emptyFunction"),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,r){return e.addEventListener?(e.addEventListener(t,r,!0),{remove:function(){e.removeEventListener(t,r,!0)}}):{remove:n}},registerDefault:function(){}};t.exports=r},{"./emptyFunction":100}],17:[function(e,t){"use strict";var n=e("./EventPluginRegistry"),r=e("./EventPluginUtils"),i=e("./accumulate"),s=e("./forEachAccumulated"),o=e("./invariant"),u=(e("./isEventSupported"),e("./monitorCodeUse"),{}),a=null,f=function(e){if(e){var t=r.executeDispatch,i=n.getPluginModuleForEvent(e);i&&i.executeDispatch&&(t=i.executeDispatch),r.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},l=null,c={injection:{injectMount:r.injection.injectMount,injectInstanceHandle:function(e){l=e},getInstanceHandle:function(){return l},injectEventPluginOrder:n.injectEventPluginOrder,injectEventPluginsByName:n.injectEventPluginsByName},eventNameDispatchConfigs:n.eventNameDispatchConfigs,registrationNameModules:n.registrationNameModules,putListener:function(e,t,n){o(!n||"function"==typeof n);var r=u[t]||(u[t]={});r[e]=n},getListener:function(e,t){var n=u[t];return n&&n[e]},deleteListener:function(e,t){var n=u[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in u)delete u[t][e]},extractEvents:function(e,t,r,s){for(var o,u=n.plugins,a=0,f=u.length;f>a;a++){var l=u[a];if(l){var c=l.extractEvents(e,t,r,s);c&&(o=i(o,c))}}return o},enqueueEvents:function(e){e&&(a=i(a,e))},processEventQueue:function(){var e=a;a=null,s(e,f),o(!a)},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=c},{"./EventPluginRegistry":18,"./EventPluginUtils":19,"./accumulate":92,"./forEachAccumulated":105,"./invariant":118,"./isEventSupported":119,"./monitorCodeUse":132}],18:[function(e,t){"use strict";function n(){if(o)for(var e in u){var t=u[e],n=o.indexOf(e);if(s(n>-1),!a.plugins[n]){s(t.extractEvents),a.plugins[n]=t;var i=t.eventTypes;for(var f in i)s(r(i[f],t,f))}}}function r(e,t,n){s(!a.eventNameDispatchConfigs.hasOwnProperty(n)),a.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var o in r)if(r.hasOwnProperty(o)){var u=r[o];i(u,t,n)}return!0}return e.registrationName?(i(e.registrationName,t,n),!0):!1}function i(e,t,n){s(!a.registrationNameModules[e]),a.registrationNameModules[e]=t,a.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var s=e("./invariant"),o=null,u={},a={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){s(!o),o=Array.prototype.slice.call(e),n()},injectEventPluginsByName:function(e){var t=!1;for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];u.hasOwnProperty(r)&&u[r]===i||(s(!u[r]),u[r]=i,t=!0)}t&&n()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return a.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=a.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){o=null;for(var e in u)u.hasOwnProperty(e)&&delete u[e];a.plugins.length=0;var t=a.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=a.registrationNameModules;for(var i in r)r.hasOwnProperty(i)&&delete r[i]}};t.exports=a},{"./invariant":118}],19:[function(e,t){"use strict";function n(e){return e===v.topMouseUp||e===v.topTouchEnd||e===v.topTouchCancel}function r(e){return e===v.topMouseMove||e===v.topTouchMove}function i(e){return e===v.topMouseDown||e===v.topTouchStart}function s(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)t(e,n[i],r[i]);else n&&t(e,n,r)}function o(e,t,n){e.currentTarget=d.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function u(e,t){s(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function a(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function f(e){var t=a(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function l(e){var t=e._dispatchListeners,n=e._dispatchIDs;p(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function c(e){return!!e._dispatchListeners}var h=e("./EventConstants"),p=e("./invariant"),d={Mount:null,injectMount:function(e){d.Mount=e}},v=h.topLevelTypes,m={isEndish:n,isMoveish:r,isStartish:i,executeDirectDispatch:l,executeDispatch:o,executeDispatchesInOrder:u,executeDispatchesInOrderStopAtTrue:f,hasDispatches:c,injection:d,useTouchEvents:!1};t.exports=m},{"./EventConstants":15,"./invariant":118}],20:[function(e,t){"use strict";function n(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return v(e,r)}function r(e,t,r){var i=t?d.bubbled:d.captured,s=n(e,r,i);s&&(r._dispatchListeners=h(r._dispatchListeners,s),r._dispatchIDs=h(r._dispatchIDs,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&c.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,r,e)}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=v(e,r);i&&(n._dispatchListeners=h(n._dispatchListeners,i),n._dispatchIDs=h(n._dispatchIDs,e))}}function o(e){e&&e.dispatchConfig.registrationName&&s(e.dispatchMarker,null,e)}function u(e){p(e,i)}function a(e,t,n,r){c.injection.getInstanceHandle().traverseEnterLeave(n,r,s,e,t)}function f(e){p(e,o)}var l=e("./EventConstants"),c=e("./EventPluginHub"),h=e("./accumulate"),p=e("./forEachAccumulated"),d=l.PropagationPhases,v=c.getListener,m={accumulateTwoPhaseDispatches:u,accumulateDirectDispatches:f,accumulateEnterLeaveDispatches:a};t.exports=m},{"./EventConstants":15,"./EventPluginHub":17,"./accumulate":92,"./forEachAccumulated":105}],21:[function(e,t){"use strict";var n="undefined"!=typeof window&&!!window.document&&!!window.document.createElement,r={canUseDOM:n,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:n&&(!!window.addEventListener||!!window.attachEvent),canUseViewport:n&&!!window.screen,isInWorker:!n};t.exports=r},{}],22:[function(e,t){"use strict";var n,r=e("./DOMProperty"),i=e("./ExecutionEnvironment"),s=r.injection.MUST_USE_ATTRIBUTE,o=r.injection.MUST_USE_PROPERTY,u=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_SIDE_EFFECTS,f=r.injection.HAS_NUMERIC_VALUE,l=r.injection.HAS_POSITIVE_NUMERIC_VALUE,c=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(i.canUseDOM){var h=document.implementation;n=h&&h.hasFeature&&h.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var p={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:s|u,allowTransparency:s,alt:null,async:u,autoComplete:null,autoPlay:u,cellPadding:null,cellSpacing:null,charSet:s,checked:o|u,className:n?s:o,cols:s|l,colSpan:null,content:null,contentEditable:null,contextMenu:s,controls:o|u,coords:null,crossOrigin:null,data:null,dateTime:s,defer:u,dir:null,disabled:s|u,download:c,draggable:null,encType:null,form:s,formNoValidate:u,frameBorder:s,height:s,hidden:s|u,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:o,label:null,lang:null,list:null,loop:o|u,max:null,maxLength:s,mediaGroup:null,method:null,min:null,multiple:o|u,muted:o|u,name:null,noValidate:u,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:o|u,rel:null,required:u,role:s,rows:s|l,rowSpan:null,sandbox:null,scope:null,scrollLeft:o,scrolling:null,scrollTop:o,seamless:s|u,selected:o|u,shape:null,size:s|l,span:l,spellCheck:null,src:null,srcDoc:o,srcSet:null,start:f,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:o|a,width:s,wmode:s,autoCapitalize:null,autoCorrect:null,itemProp:s,itemScope:s|u,itemType:s,property:null},DOMAttributeNames:{className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=p},{"./DOMProperty":10,"./ExecutionEnvironment":21}],23:[function(e,t){"use strict";function n(e){a(null==e.props.checkedLink||null==e.props.valueLink)}function r(e){n(e),a(null==e.props.value&&null==e.props.onChange)}function i(e){n(e),a(null==e.props.checked&&null==e.props.onChange)}function s(e){this.props.valueLink.requestChange(e.target.value)}function o(e){this.props.checkedLink.requestChange(e.target.checked)}var u=e("./ReactPropTypes"),a=e("./invariant"),f={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},l={Mixin:{propTypes:{value:function(e,t){return!e[t]||f[e.type]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t){return!e[t]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.func}},getValue:function(e){return e.props.valueLink?(r(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(i(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(r(e),s):e.props.checkedLink?(i(e),o):e.props.onChange}};t.exports=l},{"./ReactPropTypes":67,"./invariant":118}],24:[function(e,t){"use strict";function n(e){e.remove()}var r=e("./ReactBrowserEventEmitter"),i=e("./accumulate"),s=e("./forEachAccumulated"),o=e("./invariant"),u={trapBubbledEvent:function(e,t){o(this.isMounted());var n=r.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=i(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&s(this._localEventListeners,n)}};t.exports=u},{"./ReactBrowserEventEmitter":29,"./accumulate":92,"./forEachAccumulated":105,"./invariant":118}],25:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./emptyFunction"),i=n.topLevelTypes,s={eventTypes:null,extractEvents:function(e,t,n,s){if(e===i.topTouchStart){var u=s.target;u&&!u.onclick&&(u.onclick=r)}}};t.exports=s},{"./EventConstants":15,"./emptyFunction":100}],26:[function(e,t){"use strict";var n=e("./invariant"),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},s=function(e,t,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,e,t,n),i}return new r(e,t,n)},o=function(e,t,n,r,i){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,r,i),o}return new s(e,t,n,r,i)},u=function(e){var t=this;n(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},a=10,f=r,l=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||f,n.poolSize||(n.poolSize=a),n.release=u,n},c={addPoolingTo:l,oneArgumentPooler:r,twoArgumentPooler:i,threeArgumentPooler:s,fiveArgumentPooler:o};t.exports=c},{"./invariant":118}],27:[function(e,t){"use strict";var n=e("./DOMPropertyOperations"),r=e("./EventPluginUtils"),i=e("./ReactChildren"),s=e("./ReactComponent"),o=e("./ReactCompositeComponent"),u=e("./ReactContext"),a=e("./ReactCurrentOwner"),f=e("./ReactDescriptor"),l=e("./ReactDOM"),c=e("./ReactDOMComponent"),h=e("./ReactDefaultInjection"),p=e("./ReactInstanceHandles"),d=e("./ReactMount"),v=e("./ReactMultiChild"),m=e("./ReactPerf"),g=e("./ReactPropTypes"),y=e("./ReactServerRendering"),b=e("./ReactTextComponent"),w=e("./onlyChild");h.inject();var E={Children:{map:i.map,forEach:i.forEach,count:i.count,only:w},DOM:l,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:o.createClass,createDescriptor:function(e){var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)},constructAndRenderComponent:d.constructAndRenderComponent,constructAndRenderComponentByID:d.constructAndRenderComponentByID,renderComponent:m.measure("React","renderComponent",d.renderComponent),renderComponentToString:y.renderComponentToString,renderComponentToStaticMarkup:y.renderComponentToStaticMarkup,unmountComponentAtNode:d.unmountComponentAtNode,isValidClass:f.isValidFactory,isValidComponent:f.isValidDescriptor,withContext:u.withContext,__internals:{Component:s,CurrentOwner:a,DOMComponent:c,DOMPropertyOperations:n,InstanceHandles:p,Mount:d,MultiChild:v,TextComponent:b}};E.version="0.11.1",t.exports=E},{"./DOMPropertyOperations":11,"./EventPluginUtils":19,"./ReactChildren":30,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDOM":36,"./ReactDOMComponent":38,"./ReactDefaultInjection":48,"./ReactDescriptor":49,"./ReactInstanceHandles":57,"./ReactMount":59,"./ReactMultiChild":60,"./ReactPerf":63,"./ReactPropTypes":67,"./ReactServerRendering":71,"./ReactTextComponent":73,"./onlyChild":133}],28:[function(e,t){"use strict";var n=e("./ReactEmptyComponent"),r=e("./ReactMount"),i=e("./invariant"),s={getDOMNode:function(){return i(this.isMounted()),n.isNullComponentID(this._rootNodeID)?null:r.getNode(this._rootNodeID)}};t.exports=s},{"./ReactEmptyComponent":51,"./ReactMount":59,"./invariant":118}],29:[function(e,t){"use strict";function n(e){return Object.prototype.hasOwnProperty.call(e,d)||(e[d]=h++,l[e[d]]={}),l[e[d]]}var r=e("./EventConstants"),i=e("./EventPluginHub"),s=e("./EventPluginRegistry"),o=e("./ReactEventEmitterMixin"),u=e("./ViewportMetrics"),a=e("./isEventSupported"),f=e("./merge"),l={},c=!1,h=0,p={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},d="_reactListenersID"+String(Math.random()).slice(2),v=f(o,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(v.handleTopLevel),v.ReactEventListener=e}},setEnabled:function(e){v.ReactEventListener&&v.ReactEventListener.setEnabled(e)},isEnabled:function(){return!!v.ReactEventListener&&!!v.ReactEventListener.isEnabled()},listenTo:function(e,t){for(var i=t,o=n(i),u=s.registrationNameDependencies[e],f=r.topLevelTypes,l=0,c=u.length;c>l;l++){var h=u[l];o.hasOwnProperty(h)&&o[h]||(h===f.topWheel?a("wheel")?v.ReactEventListener.trapBubbledEvent(f.topWheel,"wheel",i):a("mousewheel")?v.ReactEventListener.trapBubbledEvent(f.topWheel,"mousewheel",i):v.ReactEventListener.trapBubbledEvent(f.topWheel,"DOMMouseScroll",i):h===f.topScroll?a("scroll",!0)?v.ReactEventListener.trapCapturedEvent(f.topScroll,"scroll",i):v.ReactEventListener.trapBubbledEvent(f.topScroll,"scroll",v.ReactEventListener.WINDOW_HANDLE):h===f.topFocus||h===f.topBlur?(a("focus",!0)?(v.ReactEventListener.trapCapturedEvent(f.topFocus,"focus",i),v.ReactEventListener.trapCapturedEvent(f.topBlur,"blur",i)):a("focusin")&&(v.ReactEventListener.trapBubbledEvent(f.topFocus,"focusin",i),v.ReactEventListener.trapBubbledEvent(f.topBlur,"focusout",i)),o[f.topBlur]=!0,o[f.topFocus]=!0):p.hasOwnProperty(h)&&v.ReactEventListener.trapBubbledEvent(h,p[h],i),o[h]=!0)}},trapBubbledEvent:function(e,t,n){return v.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return v.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!c){var e=u.refreshScrollValues;v.ReactEventListener.monitorScrollValue(e),c=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});t.exports=v},{"./EventConstants":15,"./EventPluginHub":17,"./EventPluginRegistry":18,"./ReactEventEmitterMixin":53,"./ViewportMetrics":91,"./isEventSupported":119,"./merge":128}],30:[function(e,t){"use strict";function n(e,t){this.forEachFunction=e,this.forEachContext=t}function r(e,t,n,r){var i=e;i.forEachFunction.call(i.forEachContext,t,r)}function i(e,t,i){if(null==e)return e;var s=n.getPooled(t,i);c(e,r,s),n.release(s)}function s(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function o(e,t,n,r){var i=e,s=i.mapResult,o=!s.hasOwnProperty(n);if(o){var u=i.mapFunction.call(i.mapContext,t,r);s[n]=u}}function u(e,t,n){if(null==e)return e;var r={},i=s.getPooled(r,t,n);return c(e,o,i),s.release(i),r}function a(){return null}function f(e){return c(e,a,null)}var l=e("./PooledClass"),c=e("./traverseAllChildren"),h=(e("./warning"),l.twoArgumentPooler),p=l.threeArgumentPooler;l.addPoolingTo(n,h),l.addPoolingTo(s,p);var d={forEach:i,map:u,count:f};t.exports=d},{"./PooledClass":26,"./traverseAllChildren":138,"./warning":139}],31:[function(e,t){"use strict";var n=e("./ReactDescriptor"),r=e("./ReactOwner"),i=e("./ReactUpdates"),s=e("./invariant"),o=e("./keyMirror"),u=e("./merge"),a=o({MOUNTED:null,UNMOUNTED:null}),f=!1,l=null,c=null,h={injection:{injectEnvironment:function(e){s(!f),c=e.mountImageIntoNode,l=e.unmountIDFromEnvironment,h.BackendIDOperations=e.BackendIDOperations,f=!0}},LifeCycle:a,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===a.MOUNTED},setProps:function(e,t){var n=this._pendingDescriptor||this._descriptor;this.replaceProps(u(n.props,e),t)},replaceProps:function(e,t){s(this.isMounted()),s(0===this._mountDepth),this._pendingDescriptor=n.cloneAndReplaceProps(this._pendingDescriptor||this._descriptor,e),i.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var r=this._pendingDescriptor||this._descriptor;this._pendingDescriptor=n.cloneAndReplaceProps(r,u(r.props,e)),i.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=a.UNMOUNTED,this._pendingCallbacks=null,this._descriptor=e,this._pendingDescriptor=null},mountComponent:function(e,t,n){s(!this.isMounted());var i=this._descriptor.props;if(null!=i.ref){var o=this._descriptor._owner;r.addComponentAsRefTo(this,i.ref,o)}this._rootNodeID=e,this._lifeCycleState=a.MOUNTED,this._mountDepth=n},unmountComponent:function(){s(this.isMounted());var e=this.props;null!=e.ref&&r.removeComponentAsRefFrom(this,e.ref,this._owner),l(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=a.UNMOUNTED},receiveComponent:function(e,t){s(this.isMounted()),this._pendingDescriptor=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(null!=this._pendingDescriptor){var t=this._descriptor,n=this._pendingDescriptor;this._descriptor=n,this.props=n.props,this._owner=n._owner,this._pendingDescriptor=null,this.updateComponent(e,t)}},updateComponent:function(e,t){var n=this._descriptor;(n._owner!==t._owner||n.props.ref!==t.props.ref)&&(null!=t.props.ref&&r.removeComponentAsRefFrom(this,t.props.ref,t._owner),null!=n.props.ref&&r.addComponentAsRefTo(this,n.props.ref,n._owner))},mountComponentIntoNode:function(e,t,n){var r=i.ReactReconcileTransaction.getPooled();r.perform(this._mountComponentIntoNode,this,e,t,r,n),i.ReactReconcileTransaction.release(r)},_mountComponentIntoNode:function(e,t,n,r){var i=this.mountComponent(e,n,0);c(i,t,r)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return t&&t.refs?t.refs[e]:null}}};t.exports=h},{"./ReactDescriptor":49,"./ReactOwner":62,"./ReactUpdates":74,"./invariant":118,"./keyMirror":124,"./merge":128}],32:[function(e,t){"use strict";var n=e("./ReactDOMIDOperations"),r=e("./ReactMarkupChecksum"),i=e("./ReactMount"),s=e("./ReactPerf"),o=e("./ReactReconcileTransaction"),u=e("./getReactRootElementInContainer"),a=e("./invariant"),f=e("./setInnerHTML"),l=1,c=9,h={ReactReconcileTransaction:o,BackendIDOperations:n,unmountIDFromEnvironment:function(e){i.purgeID(e)},mountImageIntoNode:s.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){if(a(t&&(t.nodeType===l||t.nodeType===c)),n){if(r.canReuseMarkup(e,u(t)))return;a(t.nodeType!==c)}a(t.nodeType!==c),f(t,e)})};t.exports=h},{"./ReactDOMIDOperations":40,"./ReactMarkupChecksum":58,"./ReactMount":59,"./ReactPerf":63,"./ReactReconcileTransaction":69,"./getReactRootElementInContainer":112,"./invariant":118,"./setInnerHTML":134}],33:[function(e,t){"use strict";function n(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function r(e,t){for(var n in t)t.hasOwnProperty(n)&&x("function"==typeof t[n])}function i(e,t){var n=M.hasOwnProperty(t)?M[t]:null;P.hasOwnProperty(t)&&x(n===A.OVERRIDE_BASE),e.hasOwnProperty(t)&&x(n===A.DEFINE_MANY||n===A.DEFINE_MANY_MERGED)}function s(e){var t=e._compositeLifeCycleState;x(e.isMounted()||t===D.MOUNTING),x(t!==D.RECEIVING_STATE),x(t!==D.UNMOUNTING)}function o(e,t){x(!d.isValidFactory(t)),x(!d.isValidDescriptor(t));var n=e.prototype;for(var r in t){var s=t[r];if(t.hasOwnProperty(r))if(i(n,r),_.hasOwnProperty(r))_[r](e,s);else{var o=M.hasOwnProperty(r),u=n.hasOwnProperty(r),a=s&&s.__reactDontBind,c="function"==typeof s,h=c&&!o&&!u&&!a;if(h)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[r]=s,n[r]=s;else if(u){var p=M[r];x(o&&(p===A.DEFINE_MANY_MERGED||p===A.DEFINE_MANY)),p===A.DEFINE_MANY_MERGED?n[r]=f(n[r],s):p===A.DEFINE_MANY&&(n[r]=l(n[r],s))}else n[r]=s}}}function u(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var i=n in e,s=r;if(i){var o=e[n],u=typeof o,a=typeof r;x("function"===u&&"function"===a),s=l(o,r)}e[n]=s}}}function a(e,t){return x(e&&t&&"object"==typeof e&&"object"==typeof t),k(t,function(t,n){x(void 0===e[n]),e[n]=t}),e}function f(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);return null==n?r:null==r?n:a(n,r)}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var c=e("./ReactComponent"),h=e("./ReactContext"),p=e("./ReactCurrentOwner"),d=e("./ReactDescriptor"),v=(e("./ReactDescriptorValidator"),e("./ReactEmptyComponent")),m=e("./ReactErrorUtils"),g=e("./ReactOwner"),y=e("./ReactPerf"),b=e("./ReactPropTransferer"),w=e("./ReactPropTypeLocations"),E=(e("./ReactPropTypeLocationNames"),e("./ReactUpdates")),S=e("./instantiateReactComponent"),x=e("./invariant"),T=e("./keyMirror"),N=e("./merge"),C=e("./mixInto"),k=(e("./monitorCodeUse"),e("./mapObject")),L=e("./shouldUpdateReactComponent"),A=(e("./warning"),T({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null})),O=[],M={mixins:A.DEFINE_MANY,statics:A.DEFINE_MANY,propTypes:A.DEFINE_MANY,contextTypes:A.DEFINE_MANY,childContextTypes:A.DEFINE_MANY,getDefaultProps:A.DEFINE_MANY_MERGED,getInitialState:A.DEFINE_MANY_MERGED,getChildContext:A.DEFINE_MANY_MERGED,render:A.DEFINE_ONCE,componentWillMount:A.DEFINE_MANY,componentDidMount:A.DEFINE_MANY,componentWillReceiveProps:A.DEFINE_MANY,shouldComponentUpdate:A.DEFINE_ONCE,componentWillUpdate:A.DEFINE_MANY,componentDidUpdate:A.DEFINE_MANY,componentWillUnmount:A.DEFINE_MANY,updateComponent:A.OVERRIDE_BASE},_={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)o(e,t[n])},childContextTypes:function(e,t){r(e,t,w.childContext),e.childContextTypes=N(e.childContextTypes,t)},contextTypes:function(e,t){r(e,t,w.context),e.contextTypes=N(e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps=e.getDefaultProps?f(e.getDefaultProps,t):t},propTypes:function(e,t){r(e,t,w.prop),e.propTypes=N(e.propTypes,t)},statics:function(e,t){u(e,t)}},D=T({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),P={construct:function(){c.Mixin.construct.apply(this,arguments),g.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return c.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==D.MOUNTING},mountComponent:y.measure("ReactCompositeComponent","mountComponent",function(e,t,n){c.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=D.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._descriptor._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,x("object"==typeof this.state&&!Array.isArray(this.state)),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=S(this._renderValidatedComponent()),this._compositeLifeCycleState=null;var r=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),r}),unmountComponent:function(){this._compositeLifeCycleState=D.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,c.Mixin.unmountComponent.call(this)},setState:function(e,t){x("object"==typeof e||null==e),this.replaceState(N(this._pendingState||this.state,e),t)},replaceState:function(e,t){s(this),this._pendingState=e,this._compositeLifeCycleState!==D.MOUNTING&&E.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var r in n)t[r]=e[r]}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext();if(this.constructor.displayName||"ReactCompositeComponent",t){x("object"==typeof this.constructor.childContextTypes);for(var n in t)x(n in this.constructor.childContextTypes);return N(e,t)}return e},_processProps:function(e){var t,n=this.constructor.defaultProps;if(n){t=N(e);for(var r in n)"undefined"==typeof t[r]&&(t[r]=n[r])}else t=e;return t},_checkPropTypes:function(e,t,r){var i=this.constructor.displayName;for(var s in e)if(e.hasOwnProperty(s)){var o=e[s](t,s,i,r);o instanceof Error&&n(this)}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t!==D.MOUNTING&&t!==D.RECEIVING_PROPS&&(null!=this._pendingDescriptor||null!=this._pendingState||this._pendingForceUpdate)){var n=this.context,r=this.props,i=this._descriptor;null!=this._pendingDescriptor&&(i=this._pendingDescriptor,n=this._processContext(i._context),r=this._processProps(i.props),this._pendingDescriptor=null,this._compositeLifeCycleState=D.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(r,n)),this._compositeLifeCycleState=D.RECEIVING_STATE;var s=this._pendingState||this.state;this._pendingState=null;try{var o=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(r,s,n);o?(this._pendingForceUpdate=!1,this._performComponentUpdate(i,r,s,n,e)):(this._descriptor=i,this.props=r,this.state=s,this.context=n,this._owner=i._owner)}finally{this._compositeLifeCycleState=null}}},_performComponentUpdate:function(e,t,n,r,i){var s=this._descriptor,o=this.props,u=this.state,a=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,r),this._descriptor=e,this.props=t,this.state=n,this.context=r,this._owner=e._owner,this.updateComponent(i,s),this.componentDidUpdate&&i.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,o,u,a),this)},receiveComponent:function(e,t){(e!==this._descriptor||null==e._owner)&&c.Mixin.receiveComponent.call(this,e,t)},updateComponent:y.measure("ReactCompositeComponent","updateComponent",function(e,t){c.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,r=n._descriptor,i=this._renderValidatedComponent();if(L(r,i))n.receiveComponent(i,e);else{var s=this._rootNodeID,o=n._rootNodeID;n.unmountComponent(),this._renderedComponent=S(i);var u=this._renderedComponent.mountComponent(s,e,this._mountDepth+1);c.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(o,u)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;x(this.isMounted()||t===D.MOUNTING),x(t!==D.RECEIVING_STATE&&t!==D.UNMOUNTING),this._pendingForceUpdate=!0,E.enqueueUpdate(this,e)},_renderValidatedComponent:y.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=h.current;h.current=this._processChildContext(this._descriptor._context),p.current=this;try{e=this.render(),null===e||e===!1?(e=v.getEmptyComponent(),v.registerNullComponentID(this._rootNodeID)):v.deregisterNullComponentID(this._rootNodeID)}finally{h.current=t,p.current=null}return x(d.isValidDescriptor(e)),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(e)){var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(m.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=function(){return e.apply(t,arguments)};return n}},H=function(){};C(H,c.Mixin),C(H,g.Mixin),C(H,b.Mixin),C(H,P);var B={LifeCycle:D,Base:H,createClass:function(e){var t=function(e,t){this.construct(e,t)};t.prototype=new H,t.prototype.constructor=t,O.forEach(o.bind(null,t)),o(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),x(t.prototype.render);for(var n in M)t.prototype[n]||(t.prototype[n]=null);var r=d.createFactory(t);return r},injection:{injectMixin:function(e){O.push(e)}}};t.exports=B},{"./ReactComponent":31,"./ReactContext":34,"./ReactCurrentOwner":35,"./ReactDescriptor":49,"./ReactDescriptorValidator":50,"./ReactEmptyComponent":51,"./ReactErrorUtils":52,"./ReactOwner":62,"./ReactPerf":63,"./ReactPropTransferer":64,"./ReactPropTypeLocationNames":65,"./ReactPropTypeLocations":66,"./ReactUpdates":74,"./instantiateReactComponent":117,"./invariant":118,"./keyMirror":124,"./mapObject":126,"./merge":128,"./mixInto":131,"./monitorCodeUse":132,"./shouldUpdateReactComponent":136,"./warning":139}],34:[function(e,t){"use strict";var n=e("./merge"),r={current:{},withContext:function(e,t){var i,s=r.current;r.current=n(s,e);try{i=t()}finally{r.current=s}return i}};t.exports=r},{"./merge":128}],35:[function(e,t){"use strict";var n={current:null};t.exports=n},{}],36:[function(e,t){"use strict";function n(e,t){var n=function(e){this.construct(e)};n.prototype=new i(t,e),n.prototype.constructor=n,n.displayName=t;var s=r.createFactory(n);return s}var r=e("./ReactDescriptor"),i=(e("./ReactDescriptorValidator"),e("./ReactDOMComponent")),s=e("./mergeInto"),o=e("./mapObject"),u=o({a:!1,abbr:!1,address:!1,area:!0,article:!1,aside:!1,audio:!1,b:!1,base:!0,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!0,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!0,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!0,circle:!1,defs:!1,ellipse:!1,g:!1,line:!1,linearGradient:!1,mask:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1,tspan:!1},n),a={injectComponentClasses:function(e){s(u,e)}};u.injection=a,t.exports=u},{"./ReactDOMComponent":38,"./ReactDescriptor":49,"./ReactDescriptorValidator":50,"./mapObject":126,"./mergeInto":130}],37:[function(e,t){"use strict";var n=e("./AutoFocusMixin"),r=e("./ReactBrowserComponentMixin"),i=e("./ReactCompositeComponent"),s=e("./ReactDOM"),o=e("./keyMirror"),u=s.button,a=o({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),f=i.createClass({displayName:"ReactDOMButton",mixins:[n,r],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&a[t]||(e[t]=this.props[t]);return u(e,this.props.children)}});t.exports=f},{"./AutoFocusMixin":1,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./keyMirror":124}],38:[function(e,t){"use strict";function n(e){e&&(v(null==e.children||null==e.dangerouslySetInnerHTML),v(null==e.style||"object"==typeof e.style))}function r(e,t,n,r){var i=c.findReactContainerForID(e);if(i){var s=i.nodeType===T?i.ownerDocument:i;w(t,s)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function i(e,t){this._tagOpen="<"+e,this._tagClose=t?"":"</"+e+">",this.tagName=e.toUpperCase()}var s=e("./CSSPropertyOperations"),o=e("./DOMProperty"),u=e("./DOMPropertyOperations"),a=e("./ReactBrowserComponentMixin"),f=e("./ReactComponent"),l=e("./ReactBrowserEventEmitter"),c=e("./ReactMount"),h=e("./ReactMultiChild"),p=e("./ReactPerf"),d=e("./escapeTextForBrowser"),v=e("./invariant"),m=e("./keyOf"),g=e("./merge"),y=e("./mixInto"),b=l.deleteListener,w=l.listenTo,E=l.registrationNameModules,S={string:!0,number:!0},x=m({style:null}),T=1;i.Mixin={mountComponent:p.measure("ReactDOMComponent","mountComponent",function(e,t,r){return f.Mixin.mountComponent.call(this,e,t,r),n(this.props),this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n=this._tagOpen;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];if(null!=o)if(E.hasOwnProperty(i))r(this._rootNodeID,i,o,e);else{i===x&&(o&&(o=t.style=g(t.style)),o=s.createMarkupForStyles(o));var a=u.createMarkupForProperty(i,o);a&&(n+=" "+a)}}if(e.renderToStaticMarkup)return n+">";var f=u.createMarkupForID(this._rootNodeID);return n+" "+f+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(null!=t){if(null!=t.__html)return t.__html}else{var n=S[typeof this.props.children]?this.props.children:null,r=null!=n?null:this.props.children;if(null!=n)return d(n);if(null!=r){var i=this.mountChildren(r,e);return i.join("")}}return""},receiveComponent:function(e,t){(e!==this._descriptor||null==e._owner)&&f.Mixin.receiveComponent.call(this,e,t)},updateComponent:p.measure("ReactDOMComponent","updateComponent",function(e,t){n(this._descriptor.props),f.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n,i,s,u=this.props;for(n in e)if(!u.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===x){var a=e[n];for(i in a)a.hasOwnProperty(i)&&(s=s||{},s[i]="")}else E.hasOwnProperty(n)?b(this._rootNodeID,n):(o.isStandardName[n]||o.isCustomAttribute(n))&&f.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in u){var l=u[n],c=e[n];if(u.hasOwnProperty(n)&&l!==c)if(n===x)if(l&&(l=u.style=g(l)),c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(s=s||{},s[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(s=s||{},s[i]=l[i])}else s=l;else E.hasOwnProperty(n)?r(this._rootNodeID,n,l,t):(o.isStandardName[n]||o.isCustomAttribute(n))&&f.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,l)}s&&f.BackendIDOperations.updateStylesByID(this._rootNodeID,s)},_updateDOMChildren:function(e,t){var n=this.props,r=S[typeof e.children]?e.children:null,i=S[typeof n.children]?n.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,u=null!=r?null:e.children,a=null!=i?null:n.children,l=null!=r||null!=s,c=null!=i||null!=o;null!=u&&null==a?this.updateChildren(null,t):l&&!c&&this.updateTextContent(""),null!=i?r!==i&&this.updateTextContent(""+i):null!=o?s!==o&&f.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,o):null!=a&&this.updateChildren(a,t)},unmountComponent:function(){this.unmountChildren(),l.deleteAllListeners(this._rootNodeID),f.Mixin.unmountComponent.call(this)}},y(i,f.Mixin),y(i,i.Mixin),y(i,h.Mixin),y(i,a),t.exports=i},{"./CSSPropertyOperations":4,"./DOMProperty":10,"./DOMPropertyOperations":11,"./ReactBrowserComponentMixin":28,"./ReactBrowserEventEmitter":29,"./ReactComponent":31,"./ReactMount":59,"./ReactMultiChild":60,"./ReactPerf":63,"./escapeTextForBrowser":102,"./invariant":118,"./keyOf":125,"./merge":128,"./mixInto":131}],39:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=o.form,a=s.createClass({displayName:"ReactDOMForm",mixins:[i,r],render:function(){return this.transferPropsTo(u(null,this.props.children))},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(n.topLevelTypes.topSubmit,"submit")}});t.exports=a},{"./EventConstants":15,"./LocalEventTrapMixin":24,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36}],40:[function(e,t){"use strict";var n=e("./CSSPropertyOperations"),r=e("./DOMChildrenOperations"),i=e("./DOMPropertyOperations"),s=e("./ReactMount"),o=e("./ReactPerf"),u=e("./invariant"),a=e("./setInnerHTML"),f={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},l={updatePropertyByID:o.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var r=s.getNode(e);u(!f.hasOwnProperty(t)),null!=n?i.setValueForProperty(r,t,n):i.deleteValueForProperty(r,t)}),deletePropertyByID:o.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var r=s.getNode(e);u(!f.hasOwnProperty(t)),i.deleteValueForProperty(r,t,n)}),updateStylesByID:o.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var r=s.getNode(e);n.setValueForStyles(r,t)}),updateInnerHTMLByID:o.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=s.getNode(e);a(n,t)}),updateTextContentByID:o.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=s.getNode(e);r.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:o.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=s.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:o.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=s.getNode(e[n].parentID);r.processUpdates(e,t)})};t.exports=l},{"./CSSPropertyOperations":4,"./DOMChildrenOperations":9,"./DOMPropertyOperations":11,"./ReactMount":59,"./ReactPerf":63,"./invariant":118,"./setInnerHTML":134}],41:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./LocalEventTrapMixin"),i=e("./ReactBrowserComponentMixin"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=o.img,a=s.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[i,r],render:function(){return u(this.props)},componentDidMount:function(){this.trapBubbledEvent(n.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(n.topLevelTypes.topError,"error")}});t.exports=a},{"./EventConstants":15,"./LocalEventTrapMixin":24,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36}],42:[function(e,t){"use strict";var n=e("./AutoFocusMixin"),r=e("./DOMPropertyOperations"),i=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./ReactMount"),f=e("./invariant"),l=e("./merge"),c=u.input,h={},p=o.createClass({displayName:"ReactDOMInput",mixins:[n,i.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:null!=e?e:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=l(this.props);e.defaultChecked=null,e.defaultValue=null;var t=i.getValue(this);e.value=null!=t?t:this.state.value;var n=i.getChecked(this);return e.checked=null!=n?n:this.state.checked,e.onChange=this._handleChange,c(e,this.props.children)},componentDidMount:function(){var e=a.getID(this.getDOMNode());h[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=a.getID(e);delete h[t]},componentDidUpdate:function(){var e=this.getDOMNode();null!=this.props.checked&&r.setValueForProperty(e,"checked",this.props.checked||!1);var t=i.getValue(this);null!=t&&r.setValueForProperty(e,"value",""+t)},_handleChange:function(e){var t,n=i.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({checked:e.target.checked,value:e.target.value});var r=this.props.name;if("radio"===this.props.type&&null!=r){for(var s=this.getDOMNode(),o=s;o.parentNode;)o=o.parentNode;for(var u=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),l=0,c=u.length;c>l;l++){var p=u[l];if(p!==s&&p.form===s.form){var v=a.getID(p);f(v);var m=h[v];f(m),m.setState({checked:!1})}}}return t}});t.exports=p},{"./AutoFocusMixin":1,"./DOMPropertyOperations":11,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactMount":59,"./invariant":118,"./merge":128}],43:[function(e,t){"use strict";var n=e("./ReactBrowserComponentMixin"),r=e("./ReactCompositeComponent"),i=e("./ReactDOM"),s=(e("./warning"),i.option),o=r.createClass({displayName:"ReactDOMOption",mixins:[n],componentWillMount:function(){},render:function(){return s(this.props,this.props.children)}});t.exports=o},{"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./warning":139}],44:[function(e,t){"use strict";function n(e,t){if(null!=e[t])if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function r(e,t){var n,r,i,s=e.props.multiple,o=null!=t?t:e.state.value,u=e.getDOMNode().options;if(s)for(n={},r=0,i=o.length;i>r;++r)n[""+o[r]]=!0;else n=""+o;for(r=0,i=u.length;i>r;r++){var a=s?n.hasOwnProperty(u[r].value):u[r].value===n;a!==u[r].selected&&(u[r].selected=a)}}var i=e("./AutoFocusMixin"),s=e("./LinkedValueUtils"),o=e("./ReactBrowserComponentMixin"),u=e("./ReactCompositeComponent"),a=e("./ReactDOM"),f=e("./merge"),l=a.select,c=u.createClass({displayName:"ReactDOMSelect",mixins:[i,s.Mixin,o],propTypes:{defaultValue:n,value:n},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=f(this.props);return e.onChange=this._handleChange,e.value=null,l(e,this.props.children)},componentDidMount:function(){r(this,s.getValue(this))},componentDidUpdate:function(e){var t=s.getValue(this),n=!!e.multiple,i=!!this.props.multiple;(null!=t||n!==i)&&r(this,t)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1);var r;if(this.props.multiple){r=[];for(var i=e.target.options,o=0,u=i.length;u>o;o++)i[o].selected&&r.push(i[o].value)}else r=e.target.value;return this.setState({value:r}),t}});t.exports=c},{"./AutoFocusMixin":1,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./merge":128}],45:[function(e,t){"use strict";function n(e,t,n,r){return e===n&&t===r}function r(e){var t=document.selection,n=t.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(e),i.setEndPoint("EndToStart",n);var s=i.text.length,o=s+r;return{start:s,end:o}}function i(e){var t=window.getSelection();if(0===t.rangeCount)return null;var r=t.anchorNode,i=t.anchorOffset,s=t.focusNode,o=t.focusOffset,u=t.getRangeAt(0),a=n(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),f=a?0:u.toString().length,l=u.cloneRange();l.selectNodeContents(e),l.setEnd(u.startContainer,u.startOffset);var c=n(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=c?0:l.toString().length,p=h+f,d=document.createRange();d.setStart(r,i),d.setEnd(s,o);var v=d.collapsed;return d.detach(),{start:v?p:h,end:v?h:p}}function s(e,t){var n,r,i=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),i.moveToElementText(e),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function o(e,t){var n=window.getSelection(),r=e[f()].length,i=Math.min(t.start,r),s="undefined"==typeof t.end?i:Math.min(t.end,r);if(!n.extend&&i>s){var o=s;s=i,i=o}var u=a(e,i),l=a(e,s);if(u&&l){var c=document.createRange();c.setStart(u.node,u.offset),n.removeAllRanges(),i>s?(n.addRange(c),n.extend(l.node,l.offset)):(c.setEnd(l.node,l.offset),n.addRange(c)),c.detach()}}var u=e("./ExecutionEnvironment"),a=e("./getNodeForCharacterOffset"),f=e("./getTextContentAccessor"),l=u.canUseDOM&&document.selection,c={getOffsets:l?r:i,setOffsets:l?s:o};t.exports=c},{"./ExecutionEnvironment":21,"./getNodeForCharacterOffset":111,"./getTextContentAccessor":113}],46:[function(e,t){"use strict";var n=e("./AutoFocusMixin"),r=e("./DOMPropertyOperations"),i=e("./LinkedValueUtils"),s=e("./ReactBrowserComponentMixin"),o=e("./ReactCompositeComponent"),u=e("./ReactDOM"),a=e("./invariant"),f=e("./merge"),l=(e("./warning"),u.textarea),c=o.createClass({displayName:"ReactDOMTextarea",mixins:[n,i.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(a(null==e),Array.isArray(t)&&(a(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=i.getValue(this);return{initialValue:""+(null!=n?n:e)}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=f(this.props);return a(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,l(e,this.state.initialValue)},componentDidUpdate:function(){var e=i.getValue(this);if(null!=e){var t=this.getDOMNode();r.setValueForProperty(t,"value",""+e)}},_handleChange:function(e){var t,n=i.getOnChange(this);return n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({value:e.target.value}),t}});t.exports=c},{"./AutoFocusMixin":1,"./DOMPropertyOperations":11,"./LinkedValueUtils":23,"./ReactBrowserComponentMixin":28,"./ReactCompositeComponent":33,"./ReactDOM":36,"./invariant":118,"./merge":128,"./warning":139}],47:[function(e,t){"use strict";function n(){this.reinitializeTransaction()}var r=e("./ReactUpdates"),i=e("./Transaction"),s=e("./emptyFunction"),o=e("./mixInto"),u={initialize:s,close:function(){c.isBatchingUpdates=!1}},a={initialize:s,close:r.flushBatchedUpdates.bind(r)},f=[a,u];o(n,i.Mixin),o(n,{getTransactionWrappers:function(){return f}});var l=new n,c={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var r=c.isBatchingUpdates;c.isBatchingUpdates=!0,r?e(t,n):l.perform(e,null,t,n)}};t.exports=c},{"./ReactUpdates":74,"./Transaction":90,"./emptyFunction":100,"./mixInto":131}],48:[function(e,t){"use strict";function n(){T.EventEmitter.injectReactEventListener(x),T.EventPluginHub.injectEventPluginOrder(u),T.EventPluginHub.injectInstanceHandle(N),T.EventPluginHub.injectMount(C),T.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:A,EnterLeaveEventPlugin:a,ChangeEventPlugin:i,CompositionEventPlugin:o,MobileSafariClickEventPlugin:c,SelectEventPlugin:k,BeforeInputEventPlugin:r}),T.DOM.injectComponentClasses({button:m,form:g,img:y,input:b,option:w,select:E,textarea:S,html:M(v.html),head:M(v.head),body:M(v.body)}),T.CompositeComponent.injectMixin(h),T.DOMProperty.injectDOMPropertyConfig(l),T.DOMProperty.injectDOMPropertyConfig(O),T.EmptyComponent.injectEmptyComponent(v.noscript),T.Updates.injectReconcileTransaction(p.ReactReconcileTransaction),T.Updates.injectBatchingStrategy(d),T.RootIndex.injectCreateReactRootIndex(f.canUseDOM?s.createReactRootIndex:L.createReactRootIndex),T.Component.injectEnvironment(p)}var r=e("./BeforeInputEventPlugin"),i=e("./ChangeEventPlugin"),s=e("./ClientReactRootIndex"),o=e("./CompositionEventPlugin"),u=e("./DefaultEventPluginOrder"),a=e("./EnterLeaveEventPlugin"),f=e("./ExecutionEnvironment"),l=e("./HTMLDOMPropertyConfig"),c=e("./MobileSafariClickEventPlugin"),h=e("./ReactBrowserComponentMixin"),p=e("./ReactComponentBrowserEnvironment"),d=e("./ReactDefaultBatchingStrategy"),v=e("./ReactDOM"),m=e("./ReactDOMButton"),g=e("./ReactDOMForm"),y=e("./ReactDOMImg"),b=e("./ReactDOMInput"),w=e("./ReactDOMOption"),E=e("./ReactDOMSelect"),S=e("./ReactDOMTextarea"),x=e("./ReactEventListener"),T=e("./ReactInjection"),N=e("./ReactInstanceHandles"),C=e("./ReactMount"),k=e("./SelectEventPlugin"),L=e("./ServerReactRootIndex"),A=e("./SimpleEventPlugin"),O=e("./SVGDOMPropertyConfig"),M=e("./createFullPageComponent");t.exports={inject:n}},{"./BeforeInputEventPlugin":2,"./ChangeEventPlugin":6,"./ClientReactRootIndex":7,"./CompositionEventPlugin":8,"./DefaultEventPluginOrder":13,"./EnterLeaveEventPlugin":14,"./ExecutionEnvironment":21,"./HTMLDOMPropertyConfig":22,"./MobileSafariClickEventPlugin":25,"./ReactBrowserComponentMixin":28,"./ReactComponentBrowserEnvironment":32,"./ReactDOM":36,"./ReactDOMButton":37,"./ReactDOMForm":39,"./ReactDOMImg":41,"./ReactDOMInput":42,"./ReactDOMOption":43,"./ReactDOMSelect":44,"./ReactDOMTextarea":46,"./ReactDefaultBatchingStrategy":47,"./ReactEventListener":54,"./ReactInjection":55,"./ReactInstanceHandles":57,"./ReactMount":59,"./SVGDOMPropertyConfig":75,"./SelectEventPlugin":76,"./ServerReactRootIndex":77,"./SimpleEventPlugin":78,"./createFullPageComponent":97}],49:[function(e,t){"use strict";function n(e,t){if("function"==typeof t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if("function"==typeof r){var i=r.bind(t);for(var s in r)r.hasOwnProperty(s)&&(i[s]=r[s]);e[n]=i}else e[n]=r}}var r=e("./ReactContext"),i=e("./ReactCurrentOwner"),s=e("./merge"),o=(e("./warning"),function(){});o.createFactory=function(e){var t=Object.create(o.prototype),u=function(e,n){null==e?e={}:"object"==typeof e&&(e=s(e));var o=arguments.length-1;if(1===o)e.children=n;else if(o>1){for(var u=Array(o),a=0;o>a;a++)u[a]=arguments[a+1];e.children=u}var f=Object.create(t);return f._owner=i.current,f._context=r.current,f.props=e,f};return u.prototype=t,u.type=e,t.type=e,n(u,e),t.constructor=u,u},o.cloneAndReplaceProps=function(e,t){var n=Object.create(e.constructor.prototype);return n._owner=e._owner,n._context=e._context,n.props=t,n},o.isValidFactory=function(e){return"function"==typeof e&&e.prototype instanceof o},o.isValidDescriptor=function(e){return e instanceof o},t.exports=o},{"./ReactContext":34,"./ReactCurrentOwner":35,"./merge":128,"./warning":139}],50:[function(e,t){"use strict";function n(){var e=c.current;return e&&e.constructor.displayName||void 0}function r(e,t){e._store.validated||null!=e.props.key||(e._store.validated=!0,s("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t))}function i(e,t,n){m.test(e)&&s("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function s(e,t,r,i){var s=n(),o=i.displayName,u=s||o,a=p[e];if(!a.hasOwnProperty(u)){a[u]=!0,t+=s?" Check the render method of "+s+".":" Check the renderComponent call using <"+o+">.";var f=null;r._owner&&r._owner!==c.current&&(f=r._owner.constructor.displayName,t+=" It was passed a child from "+f+"."),t+=" See http://fb.me/react-warning-keys for more information.",h(e,{component:u,componentOwner:f}),console.warn(t)}}function o(){var e=n()||"";d.hasOwnProperty(e)||(d[e]=!0,h("react_object_map_children"))}function u(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var s=e[n];f.isValidDescriptor(s)&&r(s,t)}else if(f.isValidDescriptor(e))e._store.validated=!0;else if(e&&"object"==typeof e){o();for(var u in e)i(u,e[u],t)}}function a(e,t,n,r){for(var i in t)if(t.hasOwnProperty(i)){var s;try{s=t[i](n,i,e,r)}catch(o){s=o}s instanceof Error&&!(s.message in v)&&(v[s.message]=!0,h("react_failed_descriptor_type_check",{message:s.message}))}}var f=e("./ReactDescriptor"),l=e("./ReactPropTypeLocations"),c=e("./ReactCurrentOwner"),h=e("./monitorCodeUse"),p={react_key_warning:{},react_numeric_key_warning:{}},d={},v={},m=/^\d+$/,g={createFactory:function(e,t,n){var r=function(){for(var r=e.apply(this,arguments),i=1;i<arguments.length;i++)u(arguments[i],r.type);var s=r.type.displayName;return t&&a(s,t,r.props,l.prop),n&&a(s,n,r._context,l.context),r};r.prototype=e.prototype,r.type=e.type;for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r}};t.exports=g},{"./ReactCurrentOwner":35,"./ReactDescriptor":49,"./ReactPropTypeLocations":66,"./monitorCodeUse":132}],51:[function(e,t){"use strict";function n(){return u(o),o()}function r(e){a[e]=!0}function i(e){delete a[e]}function s(e){return a[e]}var o,u=e("./invariant"),a={},f={injectEmptyComponent:function(e){o=e}},l={deregisterNullComponentID:i,getEmptyComponent:n,injection:f,isNullComponentID:s,registerNullComponentID:r};t.exports=l},{"./invariant":118}],52:[function(e,t){"use strict";var n={guard:function(e){return e}};t.exports=n},{}],53:[function(e,t){"use strict";function n(e){r.enqueueEvents(e),r.processEventQueue()}var r=e("./EventPluginHub"),i={handleTopLevel:function(e,t,i,s){var o=r.extractEvents(e,t,i,s);n(o)}};t.exports=i},{"./EventPluginHub":17}],54:[function(e,t){"use strict";function n(e){var t=l.getID(e),n=f.getReactRootIDFromNodeID(t),r=l.findReactContainerForID(n),i=l.getFirstReactDOM(r);return i}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){for(var t=l.getFirstReactDOM(h(e.nativeEvent))||window,r=t;r;)e.ancestors.push(r),r=n(r);for(var i=0,s=e.ancestors.length;s>i;i++){t=e.ancestors[i];var o=l.getID(t)||"";v._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function s(e){var t=p(window);e(t)}var o=e("./EventListener"),u=e("./ExecutionEnvironment"),a=e("./PooledClass"),f=e("./ReactInstanceHandles"),l=e("./ReactMount"),c=e("./ReactUpdates"),h=e("./getEventTarget"),p=e("./getUnboundedScrollPosition"),d=e("./mixInto");d(r,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),a.addPoolingTo(r,a.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){v._handleTopLevel=e},setEnabled:function(e){v._enabled=!!e},isEnabled:function(){return v._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?o.listen(r,t,v.dispatchEvent.bind(null,e)):void 0},trapCapturedEvent:function(e,t,n){var r=n;return r?o.capture(r,t,v.dispatchEvent.bind(null,e)):void 0},monitorScrollValue:function(e){var t=s.bind(null,e);o.listen(window,"scroll",t),o.listen(window,"resize",t)},dispatchEvent:function(e,t){if(v._enabled){var n=r.getPooled(e,t);try{c.batchedUpdates(i,n)}finally{r.release(n)}}}};t.exports=v},{"./EventListener":16,"./ExecutionEnvironment":21,"./PooledClass":26,"./ReactInstanceHandles":57,"./ReactMount":59,"./ReactUpdates":74,"./getEventTarget":109,"./getUnboundedScrollPosition":114,"./mixInto":131}],55:[function(e,t){"use strict";var n=e("./DOMProperty"),r=e("./EventPluginHub"),i=e("./ReactComponent"),s=e("./ReactCompositeComponent"),o=e("./ReactDOM"),u=e("./ReactEmptyComponent"),a=e("./ReactBrowserEventEmitter"),f=e("./ReactPerf"),l=e("./ReactRootIndex"),c=e("./ReactUpdates"),h={Component:i.injection,CompositeComponent:s.injection,DOMProperty:n.injection,EmptyComponent:u.injection,EventPluginHub:r.injection,DOM:o.injection,EventEmitter:a.injection,Perf:f.injection,RootIndex:l.injection,Updates:c.injection};t.exports=h},{"./DOMProperty":10,"./EventPluginHub":17,"./ReactBrowserEventEmitter":29,"./ReactComponent":31,"./ReactCompositeComponent":33,"./ReactDOM":36,"./ReactEmptyComponent":51,"./ReactPerf":63,"./ReactRootIndex":70,"./ReactUpdates":74}],56:[function(e,t){"use strict";function n(e){return i(document.documentElement,e)}var r=e("./ReactDOMSelection"),i=e("./containsNode"),s=e("./focusNode"),o=e("./getActiveElement"),u={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=o();return{focusedElem:e,selectionRange:u.hasSelectionCapabilities(e)?u.getSelection(e):null}},restoreSelection:function(e){var t=o(),r=e.focusedElem,i=e.selectionRange;t!==r&&n(r)&&(u.hasSelectionCapabilities(r)&&u.setSelection(r,i),s(r))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if("undefined"==typeof i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};t.exports=u},{"./ReactDOMSelection":45,"./containsNode":94,"./focusNode":104,"./getActiveElement":106}],57:[function(e,t){"use strict";function n(e){return h+e.toString(36)}function r(e,t){return e.charAt(t)===h||t===e.length}function i(e){return""===e||e.charAt(0)===h&&e.charAt(e.length-1)!==h}function s(e,t){return 0===t.indexOf(e)&&r(t,e.length)}function o(e){return e?e.substr(0,e.lastIndexOf(h)):""}function u(e,t){if(c(i(e)&&i(t)),c(s(e,t)),e===t)return e;for(var n=e.length+p,o=n;o<t.length&&!r(t,o);o++);return t.substr(0,o)}function a(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var s=0,o=0;n>=o;o++)if(r(e,o)&&r(t,o))s=o;else if(e.charAt(o)!==t.charAt(o))break;var u=e.substr(0,s);return c(i(u)),u}function f(e,t,n,r,i,a){e=e||"",t=t||"",c(e!==t);var f=s(t,e);c(f||s(e,t));for(var l=0,h=f?o:u,p=e;;p=h(p,t)){var v;if(i&&p===e||a&&p===t||(v=n(p,f,r)),v===!1||p===t)break;c(l++<d)}}var l=e("./ReactRootIndex"),c=e("./invariant"),h=".",p=h.length,d=100,v={createReactRootID:function(){return n(l.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===h&&e.length>1){var t=e.indexOf(h,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,i){var s=a(e,t);s!==e&&f(e,s,n,r,!1,!0),s!==t&&f(s,t,n,i,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(f("",e,t,n,!0,!1),f(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){f("",e,t,n,!0,!1)},_getFirstCommonAncestorID:a,_getNextDescendantID:u,isAncestorIDOf:s,SEPARATOR:h};t.exports=v},{"./ReactRootIndex":70,"./invariant":118}],58:[function(e,t){"use strict";var n=e("./adler32"),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=n(e);return e.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var i=t.getAttribute(r.CHECKSUM_ATTR_NAME);i=i&&parseInt(i,10);var s=n(e);return s===i}};t.exports=r},{"./adler32":93}],59:[function(e,t){"use strict";function n(e){var t=g(e);return t&&O.getID(t)}function r(e){var t=i(e);if(t)if(x.hasOwnProperty(t)){var n=x[t];n!==e&&(b(!u(n,t)),x[t]=e)}else x[t]=e;return t}function i(e){return e&&e.getAttribute&&e.getAttribute(S)||""}function s(e,t){var n=i(e);n!==t&&delete x[n],e.setAttribute(S,t),x[t]=e}function o(e){return x.hasOwnProperty(e)&&u(x[e],e)||(x[e]=O.findReactNodeByID(e)),x[e]}function u(e,t){if(e){b(i(e)===t);var n=O.findReactContainerForID(t);if(n&&m(n,e))return!0}return!1}function a(e){delete x[e]}function f(e){var t=x[e];return t&&u(t,e)?void (A=t):!1}function l(e){A=null,d.traverseAncestors(e,f);var t=A;return A=null,t}var c=e("./DOMProperty"),h=e("./ReactBrowserEventEmitter"),p=(e("./ReactCurrentOwner"),e("./ReactDescriptor")),d=e("./ReactInstanceHandles"),v=e("./ReactPerf"),m=e("./containsNode"),g=e("./getReactRootElementInContainer"),y=e("./instantiateReactComponent"),b=e("./invariant"),w=e("./shouldUpdateReactComponent"),E=(e("./warning"),d.SEPARATOR),S=c.ID_ATTRIBUTE_NAME,x={},T=1,N=9,C={},k={},L=[],A=null,O={_instancesByReactRootID:C,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var i=t.props;return O.scrollMonitor(n,function(){e.replaceProps(i,r)}),e},_registerComponent:function(e,t){b(t&&(t.nodeType===T||t.nodeType===N)),h.ensureScrollValueMonitoring();var n=O.registerContainer(t);return C[n]=e,n},_renderNewRootComponent:v.measure("ReactMount","_renderNewRootComponent",function(e,t,n){var r=y(e),i=O._registerComponent(r,t);return r.mountComponentIntoNode(i,t,n),r}),renderComponent:function(e,t,r){b(p.isValidDescriptor(e));var i=C[n(t)];if(i){var s=i._descriptor;if(w(s,e))return O._updateRootComponent(i,e,t,r);O.unmountComponentAtNode(t)}var o=g(t),u=o&&O.isRenderedByReact(o),a=u&&!i,f=O._renderNewRootComponent(e,t,a);return r&&r.call(f),f},constructAndRenderComponent:function(e,t,n){return O.renderComponent(e(t),n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return b(r),O.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=n(e);return t&&(t=d.getReactRootIDFromNodeID(t)),t||(t=d.createReactRootID()),k[t]=e,t},unmountComponentAtNode:function(e){var t=n(e),r=C[t];return r?(O.unmountComponentFromNode(r,e),delete C[t],delete k[t],!0):!1},unmountComponentFromNode:function(e,t){for(e.unmountComponent(),t.nodeType===N&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=d.getReactRootIDFromNodeID(e),n=k[t];return n},findReactNodeByID:function(e){var t=O.findReactContainerForID(e);return O.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=O.getID(e);return t?t.charAt(0)===E:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(O.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=L,r=0,i=l(t)||e;for(n[0]=i.firstChild,n.length=1;r<n.length;){for(var s,o=n[r++];o;){var u=O.getID(o);u?t===u?s=o:d.isAncestorIDOf(u,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(s)return n.length=0,s}n.length=0,b(!1)},getReactRootID:n,getID:r,setID:s,getNode:o,purgeID:a};t.exports=O},{"./DOMProperty":10,"./ReactBrowserEventEmitter":29,"./ReactCurrentOwner":35,"./ReactDescriptor":49,"./ReactInstanceHandles":57,"./ReactPerf":63,"./containsNode":94,"./getReactRootElementInContainer":112,"./instantiateReactComponent":117,"./invariant":118,"./shouldUpdateReactComponent":136,"./warning":139}],60:[function(e,t){"use strict";function n(e,t,n){d.push({parentID:e,parentNode:null,type:f.INSERT_MARKUP,markupIndex:v.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function r(e,t,n){d.push({parentID:e,parentNode:null,type:f.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function i(e,t){d.push({parentID:e,parentNode:null,type:f.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function s(e,t){d.push({parentID:e,parentNode:null,type:f.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function o(){d.length&&(a.BackendIDOperations.dangerouslyProcessChildrenUpdates(d,v),u())}function u(){d.length=0,v.length=0}var a=e("./ReactComponent"),f=e("./ReactMultiChildUpdateTypes"),l=e("./flattenChildren"),c=e("./instantiateReactComponent"),h=e("./shouldUpdateReactComponent"),p=0,d=[],v=[],m={Mixin:{mountChildren:function(e,t){var n=l(e),r=[],i=0;this._renderedChildren=n;for(var s in n){var o=n[s];if(n.hasOwnProperty(s)){var u=c(o);n[s]=u;var a=this._rootNodeID+s,f=u.mountComponent(a,t,this._mountDepth+1);u._mountIndex=i,r.push(f),i++}}return r},updateTextContent:function(e){p++;var t=!0;try{var n=this._renderedChildren;for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{p--,p||(t?u():o())}},updateChildren:function(e,t){p++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{p--,p||(n?u():o())}},_updateChildren:function(e,t){var n=l(e),r=this._renderedChildren;if(n||r){var i,s=0,o=0;for(i in n)if(n.hasOwnProperty(i)){var u=r&&r[i],a=u&&u._descriptor,f=n[i];if(h(a,f))this.moveChild(u,o,s),s=Math.max(u._mountIndex,s),u.receiveComponent(f,t),u._mountIndex=o;else{u&&(s=Math.max(u._mountIndex,s),this._unmountChildByName(u,i));var p=c(f);this._mountChildByNameAtIndex(p,i,o,t)}o++}for(i in r)!r.hasOwnProperty(i)||n&&n[i]||this._unmountChildByName(r[i],i)}},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){n(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){i(this._rootNodeID,e._mountIndex)},setTextContent:function(e){s(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r){var i=this._rootNodeID+t,s=e.mountComponent(i,r,this._mountDepth+1);e._mountIndex=n,this.createChild(e,s),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};t.exports=m},{"./ReactComponent":31,"./ReactMultiChildUpdateTypes":61,"./flattenChildren":103,"./instantiateReactComponent":117,"./shouldUpdateReactComponent":136}],61:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=r},{"./keyMirror":124}],62:[function(e,t){"use strict";var n=e("./emptyObject"),r=e("./invariant"),i={isValidOwner:function(e){return!!e&&"function"==typeof e.attachRef&&"function"==typeof e.detachRef},addComponentAsRefTo:function(e,t,n){r(i.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(i.isValidOwner(n)),n.refs[t]===e&&n.detachRef(t)},Mixin:{construct:function(){this.refs=n},attachRef:function(e,t){r(t.isOwnedBy(this));var i=this.refs===n?this.refs={}:this.refs;i[e]=t},detachRef:function(e){delete this.refs[e]}}};t.exports=i},{"./emptyObject":101,"./invariant":118}],63:[function(e,t){"use strict";function n(e,t,n){return n}var r={enableMeasure:!1,storedMeasure:n,measure:function(e,t,n){return n},injection:{injectMeasure:function(e){r.storedMeasure=e}}};t.exports=r},{}],64:[function(e,t){"use strict";function n(e){return function(t,n,r){t[n]=t.hasOwnProperty(n)?e(t[n],r):r}}function r(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=f[n];r&&f.hasOwnProperty(n)?r(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var i=e("./emptyFunction"),s=e("./invariant"),o=e("./joinClasses"),u=e("./merge"),a=n(function(e,t){return u(t,e)}),f={children:i,className:n(o),key:i,ref:i,style:a},l={TransferStrategies:f,mergeProps:function(e,t){return r(u(e),t)},Mixin:{transferPropsTo:function(e){return s(e._owner===this),r(e.props,this.props),e}}};t.exports=l},{"./emptyFunction":100,"./invariant":118,"./joinClasses":123,"./merge":128}],65:[function(e,t){"use strict";var n={};t.exports=n},{}],66:[function(e,t){"use strict";var n=e("./keyMirror"),r=n({prop:null,context:null,childContext:null});t.exports=r},{"./keyMirror":124}],67:[function(e,t){"use strict";function n(e){function t(t,n,r,i,s){if(i=i||b,null!=n[r])return e(n,r,i,s);var o=g[s];return t?new Error("Required "+o+" `"+r+"` was not specified in "+("`"+i+"`.")):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,r,i){var s=t[n],o=d(s);if(o!==e){var u=g[i],a=v(s);return new Error("Invalid "+u+" `"+n+"` of type `"+a+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}}return n(t)}function i(){return n(y.thatReturns())}function s(e){function t(t,n,r,i){var s=t[n];if(!Array.isArray(s)){var o=g[i],u=d(s);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+u+"` supplied to `"+r+"`, expected an array."))}for(var a=0;a<s.length;a++){var f=e(s,a,r,i);if(f instanceof Error)return f}}return n(t)}function o(){function e(e,t,n,r){if(!m.isValidDescriptor(e[t])){var i=g[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a React component."))}}return n(e)}function u(e){function t(t,n,r,i){if(!(t[n]instanceof e)){var s=g[i],o=e.name||b;return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+o+"`."))}}return n(t)}function a(e){function t(t,n,r,i){for(var s=t[n],o=0;o<e.length;o++)if(s===e[o])return;var u=g[i],a=JSON.stringify(e);return new Error("Invalid "+u+" `"+n+"` of value `"+s+"` "+("supplied to `"+r+"`, expected one of "+a+"."))}return n(t)}function f(e){function t(t,n,r,i){var s=t[n],o=d(s);if("object"!==o){var u=g[i];return new Error("Invalid "+u+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an object."))}for(var a in s)if(s.hasOwnProperty(a)){var f=e(s,a,r,i);if(f instanceof Error)return f}}return n(t)}function l(e){function t(t,n,r,i){for(var s=0;s<e.length;s++){var o=e[s];if(null==o(t,n,r,i))return}var u=g[i];return new Error("Invalid "+u+" `"+n+"` supplied to "+("`"+r+"`."))}return n(t)}function c(){function e(e,t,n,r){if(!p(e[t])){var i=g[r];return new Error("Invalid "+i+" `"+t+"` supplied to "+("`"+n+"`, expected a renderable prop."))}}return n(e)}function h(e){function t(t,n,r,i){var s=t[n],o=d(s);if("object"!==o){var u=g[i];return new Error("Invalid "+u+" `"+n+"` of type `"+o+"` "+("supplied to `"+r+"`, expected `object`."))}for(var a in e){var f=e[a];if(f){var l=f(s,a,r,i);if(l)return l}}}return n(t,"expected `object`")}function p(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(p);if(m.isValidDescriptor(e))return!0;for(var t in e)if(!p(e[t]))return!1;return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function v(e){var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var m=e("./ReactDescriptor"),g=e("./ReactPropTypeLocationNames"),y=e("./emptyFunction"),b="<<anonymous>>",w={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:i(),arrayOf:s,component:o(),instanceOf:u,objectOf:f,oneOf:a,oneOfType:l,renderable:c(),shape:h};t.exports=w},{"./ReactDescriptor":49,"./ReactPropTypeLocationNames":65,"./emptyFunction":100}],68:[function(e,t){"use strict";function n(){this.listenersToPut=[]}var r=e("./PooledClass"),i=e("./ReactBrowserEventEmitter"),s=e("./mixInto");s(n,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(n),t.exports=n},{"./PooledClass":26,"./ReactBrowserEventEmitter":29,"./mixInto":131}],69:[function(e,t){"use strict";function n(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=u.getPooled()}var r=e("./CallbackQueue"),i=e("./PooledClass"),s=e("./ReactBrowserEventEmitter"),o=e("./ReactInputSelection"),u=e("./ReactPutListenerQueue"),a=e("./Transaction"),f=e("./mixInto"),l={initialize:o.getSelectionInformation,close:o.restoreSelection},c={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},p={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},d=[p,l,c,h],v={getTransactionWrappers:function(){return d},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,u.release(this.putListenerQueue),this.putListenerQueue=null}};f(n,a.Mixin),f(n,v),i.addPoolingTo(n),t.exports=n},{"./CallbackQueue":5,"./PooledClass":26,"./ReactBrowserEventEmitter":29,"./ReactInputSelection":56,"./ReactPutListenerQueue":68,"./Transaction":90,"./mixInto":131}],70:[function(e,t){"use strict";var n={injectCreateReactRootIndex:function(e){r.createReactRootIndex=e}},r={createReactRootIndex:null,injection:n};t.exports=r},{}],71:[function(e,t){"use strict";function n(e){f(i.isValidDescriptor(e)),f(2!==arguments.length||"function"!=typeof arguments[1]);var t;try{var n=s.createReactRootID();return t=u.getPooled(!1),t.perform(function(){var r=a(e),i=r.mountComponent(n,t,0);return o.addChecksumToMarkup(i)},null)}finally{u.release(t)}}function r(e){f(i.isValidDescriptor(e));var t;try{var n=s.createReactRootID();return t=u.getPooled(!0),t.perform(function(){var r=a(e);return r.mountComponent(n,t,0)},null)}finally{u.release(t)}}var i=e("./ReactDescriptor"),s=e("./ReactInstanceHandles"),o=e("./ReactMarkupChecksum"),u=e("./ReactServerRenderingTransaction"),a=e("./instantiateReactComponent"),f=e("./invariant");t.exports={renderComponentToString:n,renderComponentToStaticMarkup:r}},{"./ReactDescriptor":49,"./ReactInstanceHandles":57,"./ReactMarkupChecksum":58,"./ReactServerRenderingTransaction":72,"./instantiateReactComponent":117,"./invariant":118}],72:[function(e,t){"use strict";function n(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.putListenerQueue=s.getPooled()}var r=e("./PooledClass"),i=e("./CallbackQueue"),s=e("./ReactPutListenerQueue"),o=e("./Transaction"),u=e("./emptyFunction"),a=e("./mixInto"),f={initialize:function(){this.reactMountReady.reset()},close:u},l={initialize:function(){this.putListenerQueue.reset()},close:u},c=[l,f],h={getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,s.release(this.putListenerQueue),this.putListenerQueue=null}};a(n,o.Mixin),a(n,h),r.addPoolingTo(n),t.exports=n},{"./CallbackQueue":5,"./PooledClass":26,"./ReactPutListenerQueue":68,"./Transaction":90,"./emptyFunction":100,"./mixInto":131}],73:[function(e,t){"use strict";var n=e("./DOMPropertyOperations"),r=e("./ReactBrowserComponentMixin"),i=e("./ReactComponent"),s=e("./ReactDescriptor"),o=e("./escapeTextForBrowser"),u=e("./mixInto"),a=function(e){this.construct(e)};u(a,i.Mixin),u(a,r),u(a,{mountComponent:function(e,t,r){i.Mixin.mountComponent.call(this,e,t,r);var s=o(this.props);return t.renderToStaticMarkup?s:"<span "+n.createMarkupForID(e)+">"+s+"</span>"},receiveComponent:function(e){var t=e.props;t!==this.props&&(this.props=t,i.BackendIDOperations.updateTextContentByID(this._rootNodeID,t))}}),t.exports=s.createFactory(a)},{"./DOMPropertyOperations":11,"./ReactBrowserComponentMixin":28,"./ReactComponent":31,"./ReactDescriptor":49,"./escapeTextForBrowser":102,"./mixInto":131}],74:[function(e,t){"use strict";function n(){h(E.ReactReconcileTransaction&&v)}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=a.getPooled(null),this.reconcileTransaction=E.ReactReconcileTransaction.getPooled()}function i(e,t,r){n(),v.batchedUpdates(e,t,r)}function s(e,t){return e._mountDepth-t._mountDepth}function o(e){var t=e.dirtyComponentsLength;h(t===d.length),d.sort(s);for(var n=0;t>n;n++){var r=d[n];if(r.isMounted()){var i=r._pendingCallbacks;if(r._pendingCallbacks=null,r.performUpdateIfNecessary(e.reconcileTransaction),i)for(var o=0;o<i.length;o++)e.callbackQueue.enqueue(i[o],r)}}}function u(e,t){return h(!t||"function"==typeof t),n(),v.isBatchingUpdates?(d.push(e),void (t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t]))):void v.batchedUpdates(u,e,t)}var a=e("./CallbackQueue"),f=e("./PooledClass"),l=(e("./ReactCurrentOwner"),e("./ReactPerf")),c=e("./Transaction"),h=e("./invariant"),p=e("./mixInto"),d=(e("./warning"),[]),v=null,m={initialize:function(){this.dirtyComponentsLength=d.length},close:function(){this.dirtyComponentsLength!==d.length?(d.splice(0,this.dirtyComponentsLength),b()):d.length=0}},g={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},y=[m,g];p(r,c.Mixin),p(r,{getTransactionWrappers:function(){return y},destructor:function(){this.dirtyComponentsLength=null,a.release(this.callbackQueue),this.callbackQueue=null,E.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return c.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(r);var b=l.measure("ReactUpdates","flushBatchedUpdates",function(){for(;d.length;){var e=r.getPooled();e.perform(o,null,e),r.release(e)}}),w={injectReconcileTransaction:function(e){h(e),E.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){h(e),h("function"==typeof e.batchedUpdates),h("boolean"==typeof e.isBatchingUpdates),v=e}},E={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:u,flushBatchedUpdates:b,injection:w};t.exports=E},{"./CallbackQueue":5,"./PooledClass":26,"./ReactCurrentOwner":35,"./ReactPerf":63,"./Transaction":90,"./invariant":118,"./mixInto":131,"./warning":139}],75:[function(e,t){"use strict";var n=e("./DOMProperty"),r=n.injection.MUST_USE_ATTRIBUTE,i={Properties:{cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=i},{"./DOMProperty":10}],76:[function(e,t){"use strict";function n(e){if("selectionStart"in e&&o.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(document.selection){var t=document.selection.createRange();return{parentElement:t.parentElement(),text:t.text,top:t.boundingTop,left:t.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function r(e){if(!g&&null!=d&&d==a()){var t=n(d);if(!m||!c(m,t)){m=t;var r=u.getPooled(p.select,v,e);return r.type="select",r.target=d,s.accumulateTwoPhaseDispatches(r),r}}}var i=e("./EventConstants"),s=e("./EventPropagators"),o=e("./ReactInputSelection"),u=e("./SyntheticEvent"),a=e("./getActiveElement"),f=e("./isTextInputElement"),l=e("./keyOf"),c=e("./shallowEqual"),h=i.topLevelTypes,p={select:{phasedRegistrationNames:{bubbled:l({onSelect:null}),captured:l({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},d=null,v=null,m=null,g=!1,y={eventTypes:p,extractEvents:function(e,t,n,i){switch(e){case h.topFocus:(f(t)||"true"===t.contentEditable)&&(d=t,v=n,m=null);break;case h.topBlur:d=null,v=null,m=null;break;case h.topMouseDown:g=!0;break;case h.topContextMenu:case h.topMouseUp:return g=!1,r(i);case h.topSelectionChange:case h.topKeyDown:case h.topKeyUp:return r(i)}}};t.exports=y},{"./EventConstants":15,"./EventPropagators":20,"./ReactInputSelection":56,"./SyntheticEvent":82,"./getActiveElement":106,"./isTextInputElement":121,"./keyOf":125,"./shallowEqual":135}],77:[function(e,t){"use strict";var n=Math.pow(2,53),r={createReactRootIndex:function(){return Math.ceil(Math.random()*n)}};t.exports=r},{}],78:[function(e,t){"use strict";var n=e("./EventConstants"),r=e("./EventPluginUtils"),i=e("./EventPropagators"),s=e("./SyntheticClipboardEvent"),o=e("./SyntheticEvent"),u=e("./SyntheticFocusEvent"),a=e("./SyntheticKeyboardEvent"),f=e("./SyntheticMouseEvent"),l=e("./SyntheticDragEvent"),c=e("./SyntheticTouchEvent"),h=e("./SyntheticUIEvent"),p=e("./SyntheticWheelEvent"),d=e("./invariant"),v=e("./keyOf"),m=n.topLevelTypes,g={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},y={topBlur:g.blur,topClick:g.click,topContextMenu:g.contextMenu,topCopy:g.copy,topCut:g.cut,topDoubleClick:g.doubleClick,topDrag:g.drag,topDragEnd:g.dragEnd,topDragEnter:g.dragEnter,topDragExit:g.dragExit,topDragLeave:g.dragLeave,topDragOver:g.dragOver,topDragStart:g.dragStart,topDrop:g.drop,topError:g.error,topFocus:g.focus,topInput:g.input,topKeyDown:g.keyDown,topKeyPress:g.keyPress,topKeyUp:g.keyUp,topLoad:g.load,topMouseDown:g.mouseDown,topMouseMove:g.mouseMove,topMouseOut:g.mouseOut,topMouseOver:g.mouseOver,topMouseUp:g.mouseUp,topPaste:g.paste,topReset:g.reset,topScroll:g.scroll,topSubmit:g.submit,topTouchCancel:g.touchCancel,topTouchEnd:g.touchEnd,topTouchMove:g.touchMove,topTouchStart:g.touchStart,topWheel:g.wheel};for(var b in y)y[b].dependencies=[b];var w={eventTypes:g,executeDispatch:function(e,t,n){var i=r.executeDispatch(e,t,n);i===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var v=y[e];if(!v)return null;var g;switch(e){case m.topInput:case m.topLoad:case m.topError:case m.topReset:case m.topSubmit:g=o;break;case m.topKeyPress:if(0===r.charCode)return null;case m.topKeyDown:case m.topKeyUp:g=a;break;case m.topBlur:case m.topFocus:g=u;break;case m.topClick:if(2===r.button)return null;case m.topContextMenu:case m.topDoubleClick:case m.topMouseDown:case m.topMouseMove:case m.topMouseOut:case m.topMouseOver:case m.topMouseUp:g=f;break;case m.topDrag:case m.topDragEnd:case m.topDragEnter:case m.topDragExit:case m.topDragLeave:case m.topDragOver:case m.topDragStart:case m.topDrop:g=l;break;case m.topTouchCancel:case m.topTouchEnd:case m.topTouchMove:case m.topTouchStart:g=c;break;case m.topScroll:g=h;break;case m.topWheel:g=p;break;case m.topCopy:case m.topCut:case m.topPaste:g=s}d(g);var b=g.getPooled(v,n,r);return i.accumulateTwoPhaseDispatches(b),b}};t.exports=w},{"./EventConstants":15,"./EventPluginUtils":19,"./EventPropagators":20,"./SyntheticClipboardEvent":79,"./SyntheticDragEvent":81,"./SyntheticEvent":82,"./SyntheticFocusEvent":83,"./SyntheticKeyboardEvent":85,"./SyntheticMouseEvent":86,"./SyntheticTouchEvent":87,"./SyntheticUIEvent":88,"./SyntheticWheelEvent":89,"./invariant":118,"./keyOf":125}],79:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":82}],80:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":82}],81:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={dataTransfer:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticMouseEvent":86}],82:[function(e,t){"use strict";function n(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var s in r)if(r.hasOwnProperty(s)){var o=r[s];this[s]=o?o(n):n[s]}var u=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=u?i.thatReturnsTrue:i.thatReturnsFalse,this.isPropagationStopped=i.thatReturnsFalse}var r=e("./PooledClass"),i=e("./emptyFunction"),s=e("./getEventTarget"),o=e("./merge"),u=e("./mergeInto"),a={type:null,target:s,currentTarget:i.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};u(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=i.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=i.thatReturnsTrue},persist:function(){this.isPersistent=i.thatReturnsTrue},isPersistent:i.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),n.Interface=a,n.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);u(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=o(n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(n,r.threeArgumentPooler),t.exports=n},{"./PooledClass":26,"./emptyFunction":100,"./getEventTarget":109,"./merge":128,"./mergeInto":130}],83:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i={relatedTarget:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticUIEvent":88}],84:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i={data:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticEvent":82}],85:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventKey"),s=e("./getEventModifierState"),o={key:i,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?"charCode"in e?e.charCode:e.keyCode:0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return e.keyCode||e.charCode}};r.augmentClass(n,o),t.exports=n},{"./SyntheticUIEvent":88,"./getEventKey":107,"./getEventModifierState":108}],86:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./ViewportMetrics"),s=e("./getEventModifierState"),o={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:s,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};r.augmentClass(n,o),t.exports=n},{"./SyntheticUIEvent":88,"./ViewportMetrics":91,"./getEventModifierState":108}],87:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticUIEvent"),i=e("./getEventModifierState"),s={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};r.augmentClass(n,s),t.exports=n},{"./SyntheticUIEvent":88,"./getEventModifierState":108}],88:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticEvent"),i=e("./getEventTarget"),s={view:function(e){if(e.view)return e.view;var t=i(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(n,s),t.exports=n},{"./SyntheticEvent":82,"./getEventTarget":109}],89:[function(e,t){"use strict";function n(e,t,n){r.call(this,e,t,n)}var r=e("./SyntheticMouseEvent"),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(n,i),t.exports=n},{"./SyntheticMouseEvent":86}],90:[function(e,t){"use strict";var n=e("./invariant"),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,r,i,s,o,u,a){n(!this.isInTransaction());var f,l;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),l=e.call(t,r,i,s,o,u,a),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(c){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(s){}}}},closeAll:function(e){n(this.isInTransaction());for(var t=this.transactionWrappers,r=e;r<t.length;r++){var s,u=t[r],a=this.wrapperInitData[r];try{s=!0,a!==i.OBSERVED_ERROR&&u.close&&u.close.call(this,a),s=!1}finally{if(s)try{this.closeAll(r+1)}catch(f){}}}this.wrapperInitData.length=0}},i={Mixin:r,OBSERVED_ERROR:{}};t.exports=i},{"./invariant":118}],91:[function(e,t){"use strict";var n=e("./getUnboundedScrollPosition"),r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=n(window);r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{"./getUnboundedScrollPosition":114}],92:[function(e,t){"use strict";function n(e,t){if(r(null!=t),null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n?e.concat(t):i?[e].concat(t):[e,t]}var r=e("./invariant");t.exports=n},{"./invariant":118}],93:[function(e,t){"use strict";function n(e){for(var t=1,n=0,i=0;i<e.length;i++)t=(t+e.charCodeAt(i))%r,n=(n+t)%r;return t|n<<16}var r=65521;t.exports=n},{}],94:[function(e,t){function n(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?n(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=e("./isTextNode");t.exports=n},{"./isTextNode":122}],95:[function(e,t){function n(e,t,n,r,i,s){e=e||{};for(var o,u=[t,n,r,i,s],a=0;u[a];){o=u[a++];for(var f in o)e[f]=o[f];o.hasOwnProperty&&o.hasOwnProperty("toString")&&"undefined"!=typeof o.toString&&e.toString!==o.toString&&(e.toString=o.toString)}return e}t.exports=n},{}],96:[function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return n(e)?Array.isArray(e)?e.slice():i(e):[e]}var i=e("./toArray");t.exports=r},{"./toArray":137}],97:[function(e,t){"use strict";function n(e){var t=r.createClass({displayName:"ReactFullPageComponent"+(e.type.displayName||""),componentWillUnmount:function(){i(!1)},render:function(){return this.transferPropsTo(e(null,this.props.children))}});return t}var r=e("./ReactCompositeComponent"),i=e("./invariant");t.exports=n},{"./ReactCompositeComponent":33,"./invariant":118}],98:[function(e,t){function n(e){var t=e.match(f);return t&&t[1].toLowerCase()}function r(e,t){var r=a;u(!!a);var i=n(e),f=i&&o(i);if(f){r.innerHTML=f[1]+e+f[2];for(var l=f[0];l--;)r=r.lastChild}else r.innerHTML=e;var c=r.getElementsByTagName("script");c.length&&(u(t),s(c).forEach(t));for(var h=s(r.childNodes);r.lastChild;)r.removeChild(r.lastChild);return h}var i=e("./ExecutionEnvironment"),s=e("./createArrayFrom"),o=e("./getMarkupWrap"),u=e("./invariant"),a=i.canUseDOM?document.createElement("div"):null,f=/^\s*<(\w+)/;t.exports=r},{"./ExecutionEnvironment":21,"./createArrayFrom":96,"./getMarkupWrap":110,"./invariant":118}],99:[function(e,t){"use strict";function n(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=e("./CSSProperty"),i=r.isUnitlessNumber;t.exports=n},{"./CSSProperty":3}],100:[function(e,t){function n(e){return function(){return e}}function r(){}var i=e("./copyProperties");i(r,{thatReturns:n,thatReturnsFalse:n(!1),thatReturnsTrue:n(!0),thatReturnsNull:n(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}}),t.exports=r},{"./copyProperties":95}],101:[function(e,t){"use strict";var n={};t.exports=n},{}],102:[function(e,t){"use strict";function n(e){return i[e]}function r(e){return(""+e).replace(s,n)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},s=/[&><"']/g;t.exports=r},{}],103:[function(e,t){"use strict";function n(e,t,n){var r=e,i=!r.hasOwnProperty(n);i&&null!=t&&(r[n]=t)}function r(e){if(null==e)return e;var t={};return i(e,n,t),t}var i=e("./traverseAllChildren");e("./warning"),t.exports=r},{"./traverseAllChildren":138,"./warning":139}],104:[function(e,t){"use strict";function n(e){e.disabled||e.focus()}t.exports=n},{}],105:[function(e,t){"use strict";var n=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=n},{}],106:[function(e,t){function n(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=n},{}],107:[function(e,t){"use strict";function n(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n="charCode"in e?e.charCode:e.keyCode;return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?s[e.keyCode]||"Unidentified":void r(!1)}var r=e("./invariant"),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=n},{"./invariant":118}],108:[function(e,t){"use strict";function n(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return r?!!n[r]:!1}function r(){return n}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},{}],109:[function(e,t){"use strict";function n(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=n},{}],110:[function(e,t){function n(e){return i(!!s),c.hasOwnProperty(e)||(e="*"),o.hasOwnProperty(e)||(s.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",o[e]=!s.firstChild),o[e]?c[e]:null}var r=e("./ExecutionEnvironment"),i=e("./invariant"),s=r.canUseDOM?document.createElement("div"):null,o={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},u=[1,'<select multiple="true">',"</select>"],a=[1,"<table>","</table>"],f=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,"<svg>","</svg>"],c={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:a,colgroup:a,tbody:a,tfoot:a,thead:a,td:f,th:f,circle:l,defs:l,ellipse:l,g:l,line:l,linearGradient:l,path:l,polygon:l,polyline:l,radialGradient:l,rect:l,stop:l,text:l};t.exports=n},{"./ExecutionEnvironment":21,"./invariant":118}],111:[function(e,t){"use strict";function n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var i=n(e),s=0,o=0;i;){if(3==i.nodeType){if(o=s+i.textContent.length,t>=s&&o>=t)return{node:i,offset:t-s};s=o}i=n(r(i))}}t.exports=i},{}],112:[function(e,t){"use strict";function n(e){return e?e.nodeType===r?e.documentElement:e.firstChild:null}var r=9;t.exports=n},{}],113:[function(e,t){"use strict";function n(){return!i&&r.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var r=e("./ExecutionEnvironment"),i=null;t.exports=n},{"./ExecutionEnvironment":21}],114:[function(e,t){"use strict";function n(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=n},{}],115:[function(e,t){function n(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=n},{}],116:[function(e,t){"use strict";function n(e){return r(e).replace(i,"-ms-")}var r=e("./hyphenate"),i=/^ms-/;t.exports=n},{"./hyphenate":115}],117:[function(e,t){"use strict";function n(e){return e&&"function"==typeof e.type&&"function"==typeof e.type.prototype.mountComponent&&"function"==typeof e.type.prototype.receiveComponent}function r(e){return i(n(e)),new e.type(e)}var i=e("./invariant");t.exports=r},{"./invariant":118}],118:[function(e,t){"use strict";var n=function(e,t,n,r,i,s,o,u){if(!e){var a;if(void 0===t)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,r,i,s,o,u],l=0;a=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return f[l++]}))}throw a.framesToPop=1,a}};t.exports=n},{}],119:[function(e,t){"use strict";function n(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,s=n in document;if(!s){var u=document.createElement("div");u.setAttribute(n,"return;"),s="function"==typeof u[n]}return!s&&r&&"wheel"===e&&(s=document.implementation.hasFeature("Events.wheel","3.0")),s}var r,i=e("./ExecutionEnvironment");i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=n},{"./ExecutionEnvironment":21}],120:[function(e,t){function n(e){return!!e&&("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName)}t.exports=n},{}],121:[function(e,t){"use strict";function n(e){return e&&("INPUT"===e.nodeName&&r[e.type]||"TEXTAREA"===e.nodeName)}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=n},{}],122:[function(e,t){function n(e){return r(e)&&3==e.nodeType}var r=e("./isNode");t.exports=n},{"./isNode":120}],123:[function(e,t){"use strict";function n(e){e||(e="");var t,n=arguments.length;if(n>1)for(var r=1;n>r;r++)t=arguments[r],t&&(e+=" "+t);return e}t.exports=n},{}],124:[function(e,t){"use strict";var n=e("./invariant"),r=function(e){var t,r={};n(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(r[t]=t);return r};t.exports=r},{"./invariant":118}],125:[function(e,t){var n=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=n},{}],126:[function(e,t){"use strict";function n(e,t,n){if(!e)return null;var r=0,i={};for(var s in e)e.hasOwnProperty(s)&&(i[s]=t.call(n,e[s],s,r++));return i}t.exports=n},{}],127:[function(e,t){"use strict";function n(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}t.exports=n},{}],128:[function(e,t){"use strict";var n=e("./mergeInto"),r=function(e,t){var r={};return n(r,e),n(r,t),r};t.exports=r},{"./mergeInto":130}],129:[function(e,t){"use strict";var n=e("./invariant"),r=e("./keyMirror"),i=36,s=function(e){return"object"!=typeof e||null===e},o={MAX_MERGE_DEPTH:i,isTerminal:s,normalizeMergeArg:function(e){return void 0===e||null===e?{}:e},checkMergeArrayArgs:function(e,t){n(Array.isArray(e)&&Array.isArray(t))},checkMergeObjectArgs:function(e,t){o.checkMergeObjectArg(e),o.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){n(!s(e)&&!Array.isArray(e))},checkMergeIntoObjectArg:function(e){n(!(s(e)&&"function"!=typeof e||Array.isArray(e)))},checkMergeLevel:function(e){n(i>e)},checkArrayStrategy:function(e){n(void 0===e||e in o.ArrayStrategies)},ArrayStrategies:r({Clobber:!0,IndexByIndex:!0})};t.exports=o},{"./invariant":118,"./keyMirror":124}],130:[function(e,t){"use strict";function n(e,t){if(s(e),null!=t){i(t);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}}var r=e("./mergeHelpers"),i=r.checkMergeObjectArg,s=r.checkMergeIntoObjectArg;t.exports=n},{"./mergeHelpers":129}],131:[function(e,t){"use strict";var n=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])};t.exports=n},{}],132:[function(e,t){"use strict";function n(e){r(e&&!/[^a-z0-9_]/.test(e))}var r=e("./invariant");t.exports=n},{"./invariant":118}],133:[function(e,t){"use strict";function n(e){return i(r.isValidDescriptor(e)),e}var r=e("./ReactDescriptor"),i=e("./invariant");t.exports=n},{"./ReactDescriptor":49,"./invariant":118}],134:[function(e,t){"use strict";var n=e("./ExecutionEnvironment"),r=function(e,t){e.innerHTML=t};if(n.canUseDOM){var i=document.createElement("div");i.innerHTML=" ",""===i.innerHTML&&(r=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),t.match(/^[ \r\n\t\f]/)||"<"===t[0]&&(-1!==t.indexOf("<noscript")||-1!==t.indexOf("<script")||-1!==t.indexOf("<style")||-1!==t.indexOf("<meta")||-1!==t.indexOf("<link"))){e.innerHTML=""+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=r},{"./ExecutionEnvironment":21}],135:[function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=n},{}],136:[function(e,t){"use strict";function n(e,t){return e&&t&&e.type===t.type&&(e.props&&e.props.key)===(t.props&&t.props.key)&&e._owner===t._owner?!0:!1}t.exports=n},{}],137:[function(e,t){function n(e){var t=e.length;if(r(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),r("number"==typeof t),r(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),s=0;t>s;s++)i[s]=e[s];return i}var r=e("./invariant");t.exports=n},{"./invariant":118}],138:[function(e,t){"use strict";function n(e){return h[e]}function r(e,t){return e&&e.props&&null!=e.props.key?s(e.props.key):t.toString(36)}function i(e){return(""+e).replace(p,n)}function s(e){return"$"+i(e)}function o(e,t,n){return null==e?0:d(e,"",0,t,n)}var u=e("./ReactInstanceHandles"),a=e("./ReactTextComponent"),f=e("./invariant"),l=u.SEPARATOR,c=":",h={"=":"=0",".":"=1",":":"=2"},p=/[=.:]/g,d=function(e,t,n,i,o){var u=0;if(Array.isArray(e))for(var h=0;h<e.length;h++){var p=e[h],v=t+(t?c:l)+r(p,h),m=n+u;u+=d(p,v,m,i,o)}else{var g=typeof e,y=""===t,b=y?l+r(e,0):t;if(null==e||"boolean"===g)i(o,null,b,n),u=1;else if(e.type&&e.type.prototype&&e.type.prototype.mountComponentIntoNode)i(o,e,b,n),u=1;else if("object"===g){f(!e||1!==e.nodeType);for(var w in e)e.hasOwnProperty(w)&&(u+=d(e[w],t+(t?c:l)+s(w)+c+r(e[w],0),n+u,i,o))}else if("string"===g){var E=a(e);i(o,E,b,n),u+=1}else if("number"===g){var S=a(""+e);i(o,S,b,n),u+=1}}return u};t.exports=o},{"./ReactInstanceHandles":57,"./ReactTextComponent":73,"./invariant":118}],139:[function(e,t){"use strict";var n=e("./emptyFunction"),r=n;t.exports=r},{"./emptyFunction":100}]},{},[27])(27)}),define("analysis/WizardStore",["lodash"],function(e){"use strict";var t={},n={},r={get:function(e){return n[e]},clone:function(t){return e.cloneDeep(n[t])},set:function(e,t,r){n[e]=t,r||this.updateSubscribers(e)},registerCallback:function(e,n){t[e]?t[e].push(n):(t[e]=[],t[e].push(n))},updateSubscribers:function(e){var n=t[e];n&&n.forEach(function(e){e()})},debug:function(){console.dir(n)}};return r}),define("analysis/config",[],function(){var e="customAreaOption",t="adminUnitOption",n="commercialEntityOption",r="certifiedAreaOption",i="millPointOption",s="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",o="http://gis-potico.wri.org/arcgis/rest/services/CommoditiesAnalyzer/oilpalmmills/MapServer";return{noNameField:"No Group Information Available",wizard:{breadcrumbs:["Select Area","Refine Area","Select Analysis"]},stepOne:{title:"Step 1: Select Area of interest",description:"Set the area to analyze using one of the following options.",option1:{id:e,label:"Create custom area",description:"Draw a polygon or upload a shapefile to analyze."},option2:{id:t,label:"Administrative unit",description:"Analyze provinces, districts, and other subnational areas."},option3:{id:n,label:"Concession area",description:"Analyze an individual concession or a group of concessions."},option4:{id:r,label:"Certified area",description:"Analyze RSPO certified palm oil concessions."},option5:{id:i,label:"Palm oil mill points",description:"Analyze deforestation-related risks for a mill or set of mills."}},stepTwo:{title:"Step 2: Refine area",customArea:e,adminUnit:t,commArea:n,certArea:r,millPoint:i,currentFeatureText:"Current selection: ",labelField:"WRI_label"},stepThree:{title:"Step 3: Select a variable to analyze",description:'Select which types of analysis you would like to perform and then click "Perform Analysis".  You must select at least one option.',currentFeatureText:"Current selection: ",millPoint:i,customArea:e,pointRadiusDescription:"Choose a buffer for your points:",knownMillsDisclaimer:"(Analysis based on 50km buffer)",pointRadiusOptions:[{label:"50km",value:50},{label:"40km",value:40},{label:"30km",value:30},{label:"20km",value:20},{label:"10km",value:10}],cb1:{label:"Forest Change",value:"forest"},cb2:{label:"Tree cover loss and fires",value:"loss"},cb3:{label:"FORMA clearance alerts",value:"forma"},cb4:{label:"Suitability",value:"suit"},cb5:{label:"Risk Assessment",value:"risk"},checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Forest Carbon Stocks",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - SE Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"},{label:"Tree Cover Loss",value:"treeCoverLoss"},{label:"Indonesia Moratorium",value:"indonesiaMoratorium",noInfoIcon:!0}],suit:{label:"Oil Palm Suitability",value:"suit",description:"Analyze Areas potentially suitable and unsuitable for palm oil development using WRI's methodology."},rspo:{label:"RSPO Land Use Change Analysis",value:"rspo",description:"Analyze tree cover loss according to the RSPO compensation procedure and New Planting Procedure guidelines."},mill:{label:"Mill Point Risk Assessment",value:"mill",description:"Analyze deforestation-related risks for a mill or set of mills."},forestChange:{label:"Forest Change Analysis",description:"Analyze tree cover loss and fire activity according to the selected variable(s)."}},stepFour:{title:"Step 4: Refine Analysis",description:'Select which data sets you would like to include in your analysis and then click "Perform Analysis".  You must select at least one data set.',checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Forest Carbon Stocks",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - Southeast Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"}]},stepFive:{beginningText:"Create custom analysis of your area of interest  such as a commodity concession or group of concessions -- considering factors such as:",firstList:["Tree cover change","Fire activity","Primary or intact forest areas","Protected areas","Legal classification of land"],secondaryText:"You can also: ",secondList:["Upload your own shapefiles for analysis","Draw an area of interest","Sign up for alerts for clearance activity"]},customArea:{instructions:'Select the "Freehand" or "Polygon" options below to draw an area of interest on the map, or choose "Upload" to upload a zipped shapefile of polygons or points or a list of point coordinates to analyze.',instructionsPartTwo:'Select an area from the list below and click "Next" to proceed.',freehandLabel:"Freehand",uploadLabel:"Upload",polyLabel:"Polygon",uploadInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coordinate System (WGS84).","The shapefile must be of POLYGON geometry type.","The shapefile must not exceed 1 Megabyte."],incorrectFileTypeError:"Your shapefile must be of type .zip, please choose another file.",portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate"},adminUnit:{instructions:"Select a country to view it's first or second level administrative units:",instructionsPartTwo:'Select a province or district from the list below and click "Next" to proceed.',countriesQuery:{url:s+"/7",where:"NAME_0 IS NOT NULL",outFields:["NAME_0"],orderBy:["NAME_0"],groupBy:["NAME_0"],statistic:{statisticType:"count",onStatisticField:"OBJECTID",outStatisticFieldName:"OBJECTID"},labelValueField:"NAME_0"},lowLevelUnitsQuery:{url:s+"/7",whereField:"NAME_0",requiredField:"NAME_1",outFields:["NAME_0","NAME_1","NAME_2","OBJECTID"],orderBy:["NAME_1","NAME_2"],labelField:"NAME_2",valueField:"OBJECTID"},countryBoundaries:{url:s+"/6",whereField:"NAME_0",requiredField:"NAME_1"}},commercialEntity:{instructions:"Select a commodity type:",instructionsPartTwo:'Select a concession or group from the list below and click "Next" to proceed.',commodityOptions:[{label:"None",value:"NONE"},{label:"Logging concession",value:"Logging concession"},{label:"Mining concession",value:"Mining concession"},{label:"Oil palm concession",value:"Oil palm concession"},{label:"Wood fiber plantation",value:"Wood fiber plantation"}],commodityQuery:{url:s+"/13",whereField:"TYPE",outFields:["GROUP_NAME","Name","TYPE","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:s+"/27",requiredField:"GROUP_NAME"}},certifiedArea:{instructions:"Select a commodity type:",instructionsPartTwo:"Select a Certification Scheme:",instructionsPartThree:'Select a concession or group from the list below and click "Next" to proceed',commodityOptions:[{label:"Oil palm concession",value:"Oil palm concession"}],certificationOptions:[{label:"None",value:"NONE"},{label:"RSPO",value:"RSPO"}],schemeQuery:{url:s+"/13",whereField:"CERT_SCHEME",secondaryWhereField:"TYPE",outFields:["GROUP_NAME","Name","CERT_SCHEME","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:s+"/28",requiredField:"GROUP_NAME"}},millPoints:{instructions:"Select a method for choosing or creating mill points to analyze.",selectInstructions:"Select a commodity type:",listInstructions:'Select mill(s) from the list below and click "Next" to proceed.',selectFromListButton:"Select from List",selectFromCustomListButton:"Select from my features",enterCoordinatesButton:"Enter Coordinates",uploadButton:"Upload",commodityOptions:[{label:"Oil palm",value:"Oil palm concession"}],url:o+"/0",api:"http://wip.risk-api.appspot.com/",outFields:["Parent_Com","Mill_name","Entity_ID"],orderBy:["Parent_Com","Mill_name"],labelField:"Mill_name",valueField:"Entity_ID",requiredField:"Parent_Com"},STORE_KEYS:{customFeatures:"customFeatures",removedCustomFeatures:"removedCustomFeatures",selectedCustomFeatures:"selectedCustomFeatures",selectedPresetFeature:"selectedPresetFeature",userStep:"userStep",areaOfInterest:"areaOfInterest",analysisSets:"analysisSets",analysisPointRadius:"analysisPointRadius",alertsDialogActive:"alertsDialogActive"}}}),define("components/alertsForm/config",["analysis/config"],function(e){return{stepTwo:{labelField:e.stepTwo.labelField},customArea:{instructions:e.customArea.instructions,freehandLabel:e.customArea.freehandLabel,polyLabel:e.customArea.polyLabel,uploadLabel:e.customArea.uploadLabel},STORE_KEYS:e.STORE_KEYS,MODAL_ID:"subscription-modal",TEXT:{title:"Alerts Subscription",selection:"Current selection:",noSelection:"none",modalTitle:"Subscribe to Alerts",subscribe:"Subscribe"}}}),define("components/featureList/config",["analysis/config"],function(e){return{stepTwo:{labelField:e.stepTwo.labelField},STORE_KEYS:e.STORE_KEYS,TEXT:{instruction:"Select areas of interest using the left checkboxes.",noAreas:"No current areas of interest, please draw or upload some.",clear:"Clear Selection",headers:["Type","Area Name","RSPO"]}}}),define("components/featureList/FeatureList",["react","lodash","components/featureList/config","analysis/WizardStore","utils/GeoHelper","map/config"],function(e,t,n,r,i,s){var o,u,a=n.TEXT,f=n.STORE_KEYS,l=this;return e.createClass({propTypes:{features:e.PropTypes.array.isRequired,selectedFeatures:e.PropTypes.array.isRequired,rspoChecks:e.PropTypes.bool,showClear:e.PropTypes.bool},render:function(){var n=!1,r,i,s,o,u="";return this.props.selectedFeatures&&(r=this.props.features.map(this._featuresIdMapper),i=this.props.selectedFeatures.map(function(e){return e.attributes.WRI_ID}),n=r.length>0&&t.difference(r,i).length===0),this.props.rspoChecks&&(s=this.props.features.length>0?t.every(this.props.features,function(e){return e.attributes.isRSPO===!0}):!1,u=e.DOM.th(null,e.DOM.label(null,e.DOM.input({type:"checkbox",onChange:this._toggleAllFeaturesRSPO,checked:s,disabled:this.props.features.length===0}),a.headers[2]))),this.props.selectedFeatures.length===0||this.props.showClear!==undefined&&this.props.showClear===!1?o="":o=e.DOM.button({className:"button-link float-right margin__right no-padding__right",onClick:this._removeFeatureSelection},a.clear),e.DOM.div({className:"feature-list"},o,e.DOM.div({className:"padding__wide margin__bottom instructions"},a.instruction),e.DOM.table({className:"feature-list__table no-border-spacing fill__wide border-box border-orange"},e.DOM.thead(null,e.DOM.tr({className:"text-white text-center back-orange"},e.DOM.th(null,e.DOM.input({type:"checkbox",onChange:this._toggleAllFeaturesSelection,checked:n,disabled:this.props.features.length===0})),e.DOM.th(null,a.headers[0]),e.DOM.th(null,a.headers[1]),u)),e.DOM.tbody(null,this._noFeatures(),this.props.features.map(this._featuresMapper,this))))},_featuresMapper:function(r,i){var s=t.find(this.props.selectedFeatures,function(e){return r.attributes.WRI_ID===e.attributes.WRI_ID})||!1,o=i%2===0?"back-light-gray":"",o=s?"text-white back-medium-gray":o,u=this.props.rspoChecks?e.DOM.td({className:"text-center"},e.DOM.input({type:"checkbox",onChange:this._toggleFeatureRSPO,checked:r.attributes.isRSPO,"data-feature-id":r.attributes.WRI_ID})):"",a="app/css/images/icon_"+(r.geometry.type==="polygon"?"triangle_":"circle_")+(s?"white":"gray")+".png";return e.DOM.tr({key:i,className:o},e.DOM.td({className:"text-center"},e.DOM.input({type:"checkbox",onChange:this._toggleFeatureSelection,checked:s,"data-feature-index":i,"data-feature-id":r.attributes.WRI_ID})),e.DOM.td({className:"text-center"},e.DOM.img({className:"vertical-middle",width:"15px",height:"15px",src:a})),e.DOM.td(null,e.DOM.input({className:"custom-feature-label text-inherit-color vertical-middle feedback-outline-orange",type:"text",onChange:this._renameFeature,value:r.attributes[n.stepTwo.labelField],"data-feature-index":i,"data-feature-id":r.attributes.WRI_ID})),u)},_noFeatures:function(){var t=this.props.rspoChecks?"4":"3";return this.props.features.length>0?e.DOM.tr({className:"text-center"}):e.DOM.tr(null,e.DOM.td({className:"text-center text-medium-gray",colSpan:t},e.DOM.i(null,a.noAreas)))},_toggleFeatureSelection:function(e){var n,i,s;e.target.checked?(n=parseInt(e.target.dataset?e.target.dataset.featureIndex:e.target.getAttribute("data-feature-index")),s=this.props.selectedFeatures.concat(this.props.features[n])):(i=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),s=t.filter(this.props.selectedFeatures,function(e){return e.attributes.WRI_ID!==i})),this.addHighlightFeatures(s),r.set(f.selectedCustomFeatures,s)},_toggleAllFeaturesSelection:function(e){var n=this.props.features,i=n.map(this._featuresIdMapper),s,o,u;e.target.checked?(s=this.props.selectedFeatures.map(this._featuresIdMapper),o=t.difference(i,s).map(function(e){return t.find(n,function(t){return t.attributes.WRI_ID===e})}),u=r.get(f.selectedCustomFeatures).concat(o)):u=r.get(f.selectedCustomFeatures).filter(function(e){return i.indexOf(e.attributes.WRI_ID)<0}),this.addHighlightFeatures(u),r.set(f.selectedCustomFeatures,u)},addHighlightFeatures:function(e){var t=app.map.getLayer(s.wizardGraphicsLayer.id);t&&(t.clear(),e.forEach(function(e){e=i.applySelectionSymbolToFeature(e),t.add(e)}))},_toggleAllFeaturesRSPO:function(){if(this.props.features.length===0)return;var e,n=r.get(f.customFeatures),i=this.props.features.map(this._featuresIdMapper),s=t.every(this.props.features,function(e){return e.attributes.isRSPO===!0}),o=!s;i.forEach(function(r){e=t.find(n,function(e){return e.attributes.WRI_ID===r}),e&&(e.attributes.isRSPO=o)}),r.set(f.customFeatures,n)},_toggleFeatureRSPO:function(e){var n=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),i=r.get(f.customFeatures),s=t.find(i,function(e){return e.attributes.WRI_ID===n});if(!s)throw new Error("Could not find feature to update rspo based on id");s.attributes.isRSPO=!s.attributes.isRSPO,r.set(f.customFeatures,i)},_removeFeatureSelection:function(){var e=this.props.selectedFeatures.map(this._featuresIdMapper),n=function(t){return e.indexOf(t.attributes.WRI_ID)<0},i=t.filter(r.get(f.customFeatures),n),o=t.filter(r.get(f.selectedCustomFeatures),n),u=t.reject(r.get(f.selectedCustomFeatures),n),a;r.set(f.removedCustomFeatures,u),r.set(f.customFeatures,i),r.set(f.selectedCustomFeatures,o),a=app.map.getLayer(s.wizardGraphicsLayer.id),a&&a.clear()},_renameFeature:function(e){var t=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),i=r.get(f.customFeatures),s=i.filter(function(e){return e.attributes.WRI_ID===t});if(!s)throw new Error("Undefined: Could not identify feature to rename.");i.some(function(r,s){var o=r.attributes.WRI_ID===t;return o&&(i[s].attributes[n.stepTwo.labelField]=e.target.value),o}),r.set(f.customFeatures,i),e.target.parentNode.className.split(" ").indexOf("active")>-1&&r.set(f.selectedCustomFeatures,feature)},_featuresIdMapper:function(e){return e.attributes.WRI_ID}})}),function(){(function(p){var A=this||(0,eval)("this"),w=A.document,K=A.navigator,t=A.jQuery,C=A.JSON;(function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):"function"==typeof define&&define.amd?define("knockout",["exports"],e):e(A.ko={})})(function(e){function n(e,t){return null===e||typeof e in u?e===t:!1}function r(e,t){var n;return function(){n||(n=setTimeout(function(){n=p,e()},t))}}function i(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function s(e,t,n,r){o.d[e]={init:function(e,i,s,u,a){var f,l;return o.ba(function(){var s=o.a.c(i()),u=!n!=!s,c=!l;if(c||t||u!==f)c&&o.ca.fa()&&(l=o.a.lb(o.e.childNodes(e),!0)),u?(c||o.e.U(e,o.a.lb(l)),o.gb(r?r(a,s):a,e)):o.e.da(e),f=u},null,{G:e}),{controlsDescendantBindings:!0}}},o.g.aa[e]=!1,o.e.Q[e]=!0}var o="undefined"!=typeof e?e:{};o.b=function(e,t){for(var n=e.split("."),r=o,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},o.s=function(e,t,n){e[t]=n},o.version="3.1.0",o.b("version",o.version),o.a=function(){function e(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function n(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function r(e,t){return e.__proto__=t,e}var i={__proto__:[]}instanceof Array,s={},u={};s[K&&/Firefox\/2/i.test(K.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],s.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),e(s,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)u[t[n]]=e});var a={propertychange:!0},f=w&&function(){for(var e=3,t=w.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",n[0];);return 4<e?e:p}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},l:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hb:function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r))return e[r];return null},ma:function(e,t){var n=o.a.l(e,t);0<n?e.splice(n,1):0===n&&e.shift()},ib:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)0>o.a.l(t,e[n])&&t.push(e[n]);return t},ya:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r],r));return n},la:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;r<i;r++)t(e[r],r)&&n.push(e[r]);return n},$:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},Y:function(e,t,n){var r=o.a.l(o.a.Sa(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},na:i,extend:n,ra:r,sa:i?r:n,A:e,Oa:function(e,t){if(!e)return e;var n={},r;for(r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},Fa:function(e){for(;e.firstChild;)o.removeNode(e.firstChild)},ec:function(e){e=o.a.R(e);for(var t=w.createElement("div"),n=0,r=e.length;n<r;n++)t.appendChild(o.M(e[n]));return t},lb:function(e,t){for(var n=0,r=e.length,i=[];n<r;n++){var s=e[n].cloneNode(!0);i.push(t?o.M(s):s)}return i},U:function(e,t){o.a.Fa(e);if(t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Bb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],i=r.parentNode,s=0,u=t.length;s<u;s++)i.insertBefore(t[s],r);s=0;for(u=n.length;s<u;s++)o.removeNode(n[s])}},ea:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)if(e.push(n),n=n.nextSibling,!n)return;e.push(r)}}return e},Db:function(e,t){7>f?e.setAttribute("selected",t):e.selected=t},ta:function(e){return null===e||e===p?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(e,t){for(var n=[],r=(e||"").split(t),i=0,s=r.length;i<s;i++){var u=o.a.ta(r[i]);""!==u&&n.push(u)}return n},kc:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},Sb:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(t.compareDocumentPosition(e)&16);for(;e&&e!=t;)e=e.parentNode;return!!e},Ea:function(e){return o.a.Sb(e,e.ownerDocument.documentElement)},eb:function(e){return!!o.a.hb(e,o.a.Ea)},B:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},q:function(e,n,r){var i=f&&a[n];if(!i&&t)t(e).bind(n,r);else if(i||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var s=function(t){r.call(e,t)},u="on"+n;e.attachEvent(u,s),o.a.u.ja(e,function(){e.detachEvent(u,s)})}else e.addEventListener(n,r,!1)},ha:function(e,n){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var r;"input"===o.a.B(e)&&e.type&&"click"==n.toLowerCase()?(r=e.type,r="checkbox"==r||"radio"==r):r=!1;if(t&&!r)t(e).trigger(n);else if("function"==typeof w.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");r=w.createEvent(u[n]||"HTMLEvents"),r.initEvent(n,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(r)}else if(r&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+n)}},c:function(e){return o.v(e)?e():e},Sa:function(e){return o.v(e)?e.o():e},ua:function(e,t,n){if(t){var r=/\S+/g,i=e.className.match(r)||[];o.a.r(t.match(r),function(e){o.a.Y(i,e,n)}),e.className=i.join(" ")}},Xa:function(e,t){var n=o.a.c(t);if(null===n||n===p)n="";var r=o.e.firstChild(e);!r||3!=r.nodeType||o.e.nextSibling(r)?o.e.U(e,[e.ownerDocument.createTextNode(n)]):r.data=n,o.a.Vb(e)},Cb:function(e,t){e.name=t;if(7>=f)try{e.mergeAttributes(w.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},Vb:function(e){9<=f&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Tb:function(e){if(f){var t=e.style.width;e.style.width=0,e.style.width=t}},ic:function(e,t){e=o.a.c(e),t=o.a.c(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},R:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},mc:6===f,nc:7===f,oa:f,ob:function(e,t){for(var n=o.a.R(e.getElementsByTagName("input")).concat(o.a.R(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],s=n.length-1;0<=s;s--)r(n[s])&&i.push(n[s]);return i},fc:function(e){return"string"==typeof e&&(e=o.a.ta(e))?C&&C.parse?C.parse(e):(new Function("return "+e))():null},Ya:function(e,t,n){if(!C||!C.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return C.stringify(o.a.c(e),t,n)},gc:function(t,n,r){r=r||{};var i=r.params||{},s=r.includeFields||this.mb,u=t;if("object"==typeof t&&"form"===o.a.B(t))for(var u=t.action,a=s.length-1;0<=a;a--)for(var f=o.a.ob(t,s[a]),l=f.length-1;0<=l;l--)i[f[l].name]=f[l].value;n=o.a.c(n);var c=w.createElement("form");c.style.display="none",c.action=u,c.method="post";for(var h in n)t=w.createElement("input"),t.name=h,t.value=o.a.Ya(o.a.c(n[h])),c.appendChild(t);e(i,function(e,t){var n=w.createElement("input");n.name=e,n.value=t,c.appendChild(n)}),w.body.appendChild(c),r.submitter?r.submitter(c):c.submit(),setTimeout(function(){c.parentNode.removeChild(c)},0)}}}(),o.b("utils",o.a),o.b("utils.arrayForEach",o.a.r),o.b("utils.arrayFirst",o.a.hb),o.b("utils.arrayFilter",o.a.la),o.b("utils.arrayGetDistinctValues",o.a.ib),o.b("utils.arrayIndexOf",o.a.l),o.b("utils.arrayMap",o.a.ya),o.b("utils.arrayPushAll",o.a.$),o.b("utils.arrayRemoveItem",o.a.ma),o.b("utils.extend",o.a.extend),o.b("utils.fieldsIncludedWithJsonPost",o.a.mb),o.b("utils.getFormFields",o.a.ob),o.b("utils.peekObservable",o.a.Sa),o.b("utils.postJson",o.a.gc),o.b("utils.parseJson",o.a.fc),o.b("utils.registerEventHandler",o.a.q),o.b("utils.stringifyJson",o.a.Ya),o.b("utils.range",o.a.ic),o.b("utils.toggleDomNodeCssClass",o.a.ua),o.b("utils.triggerEvent",o.a.ha),o.b("utils.unwrapObservable",o.a.c),o.b("utils.objectForEach",o.a.A),o.b("utils.addOrRemoveItem",o.a.Y),o.b("unwrap",o.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),o.a.f=new function(){function e(e,i){var s=e[n];if(!s||"null"===s||!r[s]){if(!i)return p;s=e[n]="ko"+t++,r[s]={}}return r[s]}var t=0,n="__ko__"+(new Date).getTime(),r={};return{get:function(t,n){var r=e(t,!1);return r===p?p:r[n]},set:function(t,n,r){if(r!==p||e(t,!1)!==p)e(t,!0)[n]=r},clear:function(e){var t=e[n];return t?(delete r[t],e[n]=null,!0):!1},L:function(){return t++ +n}}},o.b("utils.domData",o.a.f),o.b("utils.domData.clear",o.a.f.clear),o.a.u=new function(){function e(e,t){var n=o.a.f.get(e,r);return n===p&&t&&(n=[],o.a.f.set(e,r,n)),n}function n(t){var r=e(t,!1);if(r)for(var r=r.slice(0),i=0;i<r.length;i++)r[i](t);o.a.f.clear(t),o.a.u.cleanExternalData(t);if(s[t.nodeType])for(r=t.firstChild;t=r;)r=t.nextSibling,8===t.nodeType&&n(t)}var r=o.a.f.L(),i={1:!0,8:!0,9:!0},s={1:!0,9:!0};return{ja:function(t,n){if("function"!=typeof n)throw Error("Callback must be a function");e(t,!0).push(n)},Ab:function(t,n){var i=e(t,!1);i&&(o.a.ma(i,n),0==i.length&&o.a.f.set(t,r,p))},M:function(e){if(i[e.nodeType]&&(n(e),s[e.nodeType])){var t=[];o.a.$(t,e.getElementsByTagName("*"));for(var r=0,u=t.length;r<u;r++)n(t[r])}return e},removeNode:function(e){o.M(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){t&&"function"==typeof t.cleanData&&t.cleanData([e])}}},o.M=o.a.u.M,o.removeNode=o.a.u.removeNode,o.b("cleanNode",o.M),o.b("removeNode",o.removeNode),o.b("utils.domNodeDisposal",o.a.u),o.b("utils.domNodeDisposal.addDisposeCallback",o.a.u.ja),o.b("utils.domNodeDisposal.removeDisposeCallback",o.a.u.Ab),function(){o.a.Qa=function(e){var n;if(t){if(t.parseHTML)n=t.parseHTML(e)||[];else if((n=t.clean([e]))&&n[0]){for(e=n[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var r=o.a.ta(e).toLowerCase();n=w.createElement("div"),r=r.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!r.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!r.indexOf("<td")||!r.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+r[1]+e+r[2]+"</div>";for("function"==typeof A.innerShiv?n.appendChild(A.innerShiv(e)):n.innerHTML=e;r[0]--;)n=n.lastChild;n=o.a.R(n.lastChild.childNodes)}return n},o.a.Va=function(e,n){o.a.Fa(e),n=o.a.c(n);if(null!==n&&n!==p)if("string"!=typeof n&&(n=n.toString()),t)t(e).html(n);else for(var r=o.a.Qa(n),i=0;i<r.length;i++)e.appendChild(r[i])}}(),o.b("utils.parseHtmlFragment",o.a.Qa),o.b("utils.setHtml",o.a.Va),o.w=function(){function e(t,n){if(t)if(8==t.nodeType){var r=o.w.xb(t.nodeValue);null!=r&&n.push({Rb:t,cc:r})}else if(1==t.nodeType)for(var r=0,i=t.childNodes,s=i.length;r<s;r++)e(i[r],n)}var t={};return{Na:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var n=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return t[n]=e,"<!--[ko_memo:"+n+"]-->"},Hb:function(e,n){var r=t[e];if(r===p)throw Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete t[e]}},Ib:function(t,n){var r=[];e(t,r);for(var i=0,s=r.length;i<s;i++){var u=r[i].Rb,a=[u];n&&o.a.$(a,n),o.w.Hb(r[i].cc,a),u.nodeValue="",u.parentNode&&u.parentNode.removeChild(u)}},xb:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),o.b("memoization",o.w),o.b("memoization.memoize",o.w.Na),o.b("memoization.unmemoize",o.w.Hb),o.b("memoization.parseMemoText",o.w.xb),o.b("memoization.unmemoizeDomNodeAndDescendants",o.w.Ib),o.Ga={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return o.h({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,s,o;"number"==typeof t?n=t:(n=t.timeout,s=t.method),o="notifyWhenChangesStop"==s?i:r,e.Ma(function(e){return o(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:n}};var u={"undefined":1,"boolean":1,number:1,string:1};o.b("extenders",o.Ga),o.Fb=function(e,t,n){this.target=e,this.za=t,this.Qb=n,this.sb=!1,o.s(this,"dispose",this.F)},o.Fb.prototype.F=function(){this.sb=!0,this.Qb()},o.N=function(){o.a.sa(this,o.N.fn),this.H={}};var a="change";e={V:function(e,t,n){var r=this;n=n||a;var i=new o.Fb(r,t?e.bind(t):e,function(){o.a.ma(r.H[n],i)});return r.o&&r.o(),r.H[n]||(r.H[n]=[]),r.H[n].push(i),i},notifySubscribers:function(e,t){t=t||a;if(this.qb(t))try{o.k.jb();for(var n=this.H[t].slice(0),r=0,i;i=n[r];++r)i.sb||i.za(e)}finally{o.k.end()}},Ma:function(e){var t=this,n=o.v(t),r,i,s;t.ia||(t.ia=t.notifySubscribers,t.notifySubscribers=function(e,n){n&&n!==a?"beforeChange"===n?t.bb(e):t.ia(e,n):t.cb(e)});var u=e(function(){n&&s===t&&(s=t()),r=!1,t.Ka(i,s)&&t.ia(i=s)});t.cb=function(e){r=!0,s=e,u()},t.bb=function(e){r||(i=e,t.ia(e,"beforeChange"))}},qb:function(e){return this.H[e]&&this.H[e].length},Wb:function(){var e=0;return o.a.A(this.H,function(t,n){e+=n.length}),e},Ka:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&o.a.A(e,function(e,n){var r=o.Ga[e];"function"==typeof r&&(t=r(t,n)||t)}),t}},o.s(e,"subscribe",e.V),o.s(e,"extend",e.extend),o.s(e,"getSubscriptionsCount",e.Wb),o.a.na&&o.a.ra(e,Function.prototype),o.N.fn=e,o.tb=function(e){return null!=e&&"function"==typeof e.V&&"function"==typeof e.notifySubscribers},o.b("subscribable",o.N),o.b("isSubscribable",o.tb),o.ca=o.k=function(){function e(e){n.push(r),r=e}function t(){r=n.pop()}var n=[],r,i=0;return{jb:e,end:t,zb:function(e){if(r){if(!o.tb(e))throw Error("Only subscribable things can act as dependencies");r.za(e,e.Kb||(e.Kb=++i))}},t:function(n,r,i){try{return e(),n.apply(r,i||[])}finally{t()}},fa:function(){if(r)return r.ba.fa()},pa:function(){if(r)return r.pa}}}(),o.b("computedContext",o.ca),o.b("computedContext.getDependenciesCount",o.ca.fa),o.b("computedContext.isInitial",o.ca.pa),o.m=function(e){function t(){return 0<arguments.length?(t.Ka(n,arguments[0])&&(t.P(),n=arguments[0],t.O()),this):(o.k.zb(t),n)}var n=e;return o.N.call(t),o.a.sa(t,o.m.fn),t.o=function(){return n},t.O=function(){t.notifySubscribers(n)},t.P=function(){t.notifySubscribers(n,"beforeChange")},o.s(t,"peek",t.o),o.s(t,"valueHasMutated",t.O),o.s(t,"valueWillMutate",t.P),t},o.m.fn={equalityComparer:n};var f=o.m.hc="__ko_proto__";o.m.fn[f]=o.m,o.a.na&&o.a.ra(o.m.fn,o.N.fn),o.Ha=function(e,t){return null===e||e===p||e[f]===p?!1:e[f]===t?!0:o.Ha(e[f],t)},o.v=function(e){return o.Ha(e,o.m)},o.ub=function(e){return"function"==typeof e&&e[f]===o.m||"function"==typeof e&&e[f]===o.h&&e.Yb?!0:!1},o.b("observable",o.m),o.b("isObservable",o.v),o.b("isWriteableObservable",o.ub),o.T=function(e){e=e||[];if("object"==typeof e&&"length"in e)return e=o.m(e),o.a.sa(e,o.T.fn),e.extend({trackArrayChanges:!0});throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.")},o.T.fn={remove:function(e){for(var t=this.o(),n=[],r="function"!=typeof e||o.v(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var s=t[i];r(s)&&(0===n.length&&this.P(),n.push(s),t.splice(i,1),i--)}return n.length&&this.O(),n},removeAll:function(e){if(e===p){var t=this.o(),n=t.slice(0);return this.P(),t.splice(0,t.length),this.O(),n}return e?this.remove(function(t){return 0<=o.a.l(e,t)}):[]},destroy:function(e){var t=this.o(),n="function"!=typeof e||o.v(e)?function(t){return t===e}:e;this.P();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.O()},destroyAll:function(e){return e===p?this.destroy(function(){return!0}):e?this.destroy(function(t){return 0<=o.a.l(e,t)}):[]},indexOf:function(e){var t=this();return o.a.l(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.P(),this.o()[n]=t,this.O())}},o.a.r("pop push reverse shift sort splice unshift".split(" "),function(e){o.T.fn[e]=function(){var t=this.o();return this.P(),this.kb(t,e,arguments),t=t[e].apply(t,arguments),this.O(),t}}),o.a.r(["slice"],function(e){o.T.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),o.a.na&&o.a.ra(o.T.fn,o.m.fn),o.b("observableArray",o.T);var l="arrayChange";o.Ga.trackArrayChanges=function(e){function t(){if(!n){n=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==a||++i,t.apply(this,arguments)};var s=[].concat(e.o()||[]);r=null,e.V(function(t){t=[].concat(t||[]);if(e.qb(l)){var n;if(!r||1<i)r=o.a.Aa(s,t,{sparse:!0});n=r,n.length&&e.notifySubscribers(n,l)}s=t,r=null,i=0})}}if(!e.kb){var n=!1,r=null,i=0,s=e.V;e.V=e.subscribe=function(e,n,r){return r===l&&t(),s.apply(this,arguments)},e.kb=function(e,t,s){function u(e,t,n){return a[a.length]={status:e,value:t,index:n}}if(n&&!i){var a=[],f=e.length,l=s.length,c=0;switch(t){case"push":c=f;case"unshift":for(t=0;t<l;t++)u("added",s[t],c+t);break;case"pop":c=f-1;case"shift":f&&u("deleted",e[c],c);break;case"splice":t=Math.min(Math.max(0,0>s[0]?f+s[0]:s[0]),f);for(var f=1===l?f:Math.min(t+(s[1]||0),f),l=t+l-2,c=Math.max(f,l),h=[],p=[],v=2;t<c;++t,++v)t<f&&p.push(u("deleted",e[t],t)),t<l&&h.push(u("added",s[v],t));o.a.nb(p,h);break;default:return}r=a}}}},o.ba=o.h=function(e,t,n){function r(){p=!0,o.a.A(w,function(e,t){t.F()}),w={},E=0,l=!1}function i(){var e=u.throttleEvaluation;e&&0<=e?(clearTimeout(S),S=setTimeout(s,e)):u.wa?u.wa():s()}function s(){if(!c&&!p){if(y&&y()){if(!h){b();return}}else h=!1;c=!0;try{var e=w,n=E;o.k.jb({za:function(t,r){p||(n&&e[r]?(w[r]=e[r],++E,delete e[r],--n):w[r]||(w[r]=t.V(i),++E))},ba:u,pa:!E}),w={},E=0;try{var r=t?d.call(t):d()}finally{o.k.end(),n&&o.a.A(e,function(e,t){t.F()}),l=!1}u.Ka(f,r)&&(u.notifySubscribers(f,"beforeChange"),f=r,u.wa&&!u.throttleEvaluation||u.notifySubscribers(f))}finally{c=!1}E||b()}}function u(){if(0<arguments.length){if("function"!=typeof v)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return v.apply(t,arguments),this}return l&&s(),o.k.zb(u),f}function a(){return l||0<E}var f,l=!0,c=!1,h=!1,p=!1,d=e;d&&"object"==typeof d?(n=d,d=n.read):(n=n||{},d||(d=n.read));if("function"!=typeof d)throw Error("Pass a function that returns the value of the ko.computed");var v=n.write,m=n.disposeWhenNodeIsRemoved||n.G||null,g=n.disposeWhen||n.Da,y=g,b=r,w={},E=0,S=null;t||(t=n.owner),o.N.call(u),o.a.sa(u,o.h.fn),u.o=function(){return l&&!E&&s(),f},u.fa=function(){return E},u.Yb="function"==typeof n.write,u.F=function(){b()},u.ga=a;var x=u.Ma;return u.Ma=function(e){x.call(u,e),u.wa=function(){u.bb(f),l=!0,u.cb(u)}},o.s(u,"peek",u.o),o.s(u,"dispose",u.F),o.s(u,"isActive",u.ga),o.s(u,"getDependenciesCount",u.fa),m&&(h=!0,m.nodeType&&(y=function(){return!o.a.Ea(m)||g&&g()})),!0!==n.deferEvaluation&&s(),m&&a()&&m.nodeType&&(b=function(){o.a.u.Ab(m,b),r()},o.a.u.ja(m,b)),u},o.$b=function(e){return o.Ha(e,o.h)},e=o.m.hc,o.h[e]=o.m,o.h.fn={equalityComparer:n},o.h.fn[e]=o.h,o.a.na&&o.a.ra(o.h.fn,o.N.fn),o.b("dependentObservable",o.h),o.b("computed",o.h),o.b("isComputed",o.$b),function(){function e(r,i,s){s=s||new n,r=i(r);if("object"!=typeof r||null===r||r===p||r instanceof Date||r instanceof String||r instanceof Number||r instanceof Boolean)return r;var o=r instanceof Array?[]:{};return s.save(r,o),t(r,function(t){var n=i(r[t]);switch(typeof n){case"boolean":case"number":case"string":case"function":o[t]=n;break;case"object":case"undefined":var u=s.get(n);o[t]=u!==p?u:e(n,i,s)}}),o}function t(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function n(){this.keys=[],this.ab=[]}o.Gb=function(t){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;o.v(e)&&10>t;t++)e=e();return e})},o.toJSON=function(e,t,n){return e=o.Gb(e),o.a.Ya(e,t,n)},n.prototype={save:function(e,t){var n=o.a.l(this.keys,e);0<=n?this.ab[n]=t:(this.keys.push(e),this.ab.push(t))},get:function(e){return e=o.a.l(this.keys,e),0<=e?this.ab[e]:p}}}(),o.b("toJS",o.Gb),o.b("toJSON",o.toJSON),function(){o.i={p:function(e){switch(o.a.B(e)){case"option":return!0===e.__ko__hasDomDataOptionValue__?o.a.f.get(e,o.d.options.Pa):7>=o.a.oa?e.getAttributeNode("value")&&e.getAttributeNode("value").specified?e.value:e.text:e.value;case"select":return 0<=e.selectedIndex?o.i.p(e.options[e.selectedIndex]):p;default:return e.value}},X:function(e,t,n){switch(o.a.B(e)){case"option":switch(typeof t){case"string":o.a.f.set(e,o.d.options.Pa,p),"__ko__hasDomDataOptionValue__"in e&&delete e.__ko__hasDomDataOptionValue__,e.value=t;break;default:o.a.f.set(e,o.d.options.Pa,t),e.__ko__hasDomDataOptionValue__=!0,e.value="number"==typeof t?t:""}break;case"select":if(""===t||null===t)t=p;for(var r=-1,i=0,s=e.options.length,u;i<s;++i)if(u=o.i.p(e.options[i]),u==t||""==u&&t===p){r=i;break}if(n||0<=r||t===p&&1<e.size)e.selectedIndex=r;break;default:if(null===t||t===p)t="";e.value=t}}}}(),o.b("selectExtensions",o.i),o.b("selectExtensions.readValue",o.i.p),o.b("selectExtensions.writeValue",o.i.X),o.g=function(){function e(e){e=o.a.ta(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t=[],n=e.match(r),u,a,f=0;if(n){n.push(",");for(var l=0,c;c=n[l];++l){var h=c.charCodeAt(0);if(44===h){if(0>=f){u&&t.push(a?{key:u,value:a.join("")}:{unknown:u}),u=a=f=0;continue}}else if(58===h){if(!a)continue}else if(47===h&&l&&1<c.length)(h=n[l-1].match(i))&&!s[h[0]]&&(e=e.substr(e.indexOf(c)+1),n=e.match(r),n.push(","),l=-1,c="/");else if(40===h||123===h||91===h)++f;else if(41===h||125===h||93===h)--f;else if(!u&&!a){u=34===h||39===h?c.slice(1,-1):c;continue}a?a.push(c):a=[c]}}return t}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),i=/[\])"'A-Za-z0-9_$]+$/,s={"in":1,"return":1,"typeof":1},u={};return{aa:[],W:u,Ra:e,qa:function(r,i){function s(e,r){var i,c=o.getBindingHandler(e);if(c&&c.preprocess?r=c.preprocess(r,e,s):1){if(c=u[e])i=r,0<=o.a.l(t,i)?i=!1:(c=i.match(n),i=null===c?!1:c[1]?"Object("+c[1]+")"+c[2]:i),c=i;c&&f.push("'"+e+"':function(_z){"+i+"=_z}"),l&&(r="function(){return "+r+" }"),a.push("'"+e+"':"+r)}}i=i||{};var a=[],f=[],l=i.valueAccessors,c="string"==typeof r?e(r):r;return o.a.r(c,function(e){s(e.key||e.unknown,e.value)}),f.length&&s("_ko_property_writers","{"+f.join(",")+" }"),a.join(",")},bc:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},va:function(e,t,n,r,i){e&&o.v(e)?!o.ub(e)||i&&e.o()===r||e(r):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](r)}}}(),o.b("expressionRewriting",o.g),o.b("expressionRewriting.bindingRewriteValidators",o.g.aa),o.b("expressionRewriting.parseObjectLiteral",o.g.Ra),o.b("expressionRewriting.preProcessBindings",o.g.qa),o.b("expressionRewriting._twoWayBindings",o.g.W),o.b("jsonExpressionRewriting",o.g),o.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.g.qa),function(){function e(e){return 8==e.nodeType&&s.test(i?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&u.test(i?e.text:e.nodeValue)}function n(n,r){for(var i=n,s=1,o=[];i=i.nextSibling;){if(t(i)&&(s--,0===s))return o;o.push(i),e(i)&&s++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function r(e,t){var r=n(e,t);return r?0<r.length?r[r.length-1].nextSibling:e.nextSibling:null}var i=w&&"<!--test-->"===w.createComment("test").text,s=i?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,u=i?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,a={ul:!0,ol:!0};o.e={Q:{},childNodes:function(t){return e(t)?n(t):t.childNodes},da:function(t){if(e(t)){t=o.e.childNodes(t);for(var n=0,r=t.length;n<r;n++)o.removeNode(t[n])}else o.a.Fa(t)},U:function(t,n){if(e(t)){o.e.da(t);for(var r=t.nextSibling,i=0,s=n.length;i<s;i++)r.parentNode.insertBefore(n[i],r)}else o.a.U(t,n)},yb:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},rb:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):o.e.yb(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=r(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},Xb:e,lc:function(e){return(e=(i?e.text:e.nodeValue).match(s))?e[1]:null},wb:function(n){if(a[o.a.B(n)]){var i=n.firstChild;if(i)do if(1===i.nodeType){var s;s=i.firstChild;var u=null;if(s)do if(u)u.push(s);else if(e(s)){var f=r(s,!0);f?s=f:u=[s]}else t(s)&&(u=[s]);while(s=s.nextSibling);if(s=u)for(u=i.nextSibling,f=0;f<s.length;f++)u?n.insertBefore(s[f],u):n.appendChild(s[f])}while(i=i.nextSibling)}}}}(),o.b("virtualElements",o.e),o.b("virtualElements.allowedBindings",o.e.Q),o.b("virtualElements.emptyNode",o.e.da),o.b("virtualElements.insertAfter",o.e.rb),o.b("virtualElements.prepend",o.e.yb),o.b("virtualElements.setDomNodeChildren",o.e.U),function(){o.J=function(){this.Nb={}},o.a.extend(o.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind");case 8:return o.e.Xb(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return o.e.lc(e);default:return null}},parseBindingsString:function(e,t,n,r){try{var i=this.Nb,s=e+(r&&r.valueAccessors||""),u;if(!(u=i[s])){var a,f="with($context){with($data||{}){return{"+o.g.qa(e,r)+"}}}";a=new Function("$context","$element",f),u=i[s]=a}return u(t,n)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+l.message,l}}}),o.J.instance=new o.J}(),o.b("bindingProvider",o.J),function(){function e(e){return function(){return e}}function n(e){return e()}function r(e){return o.a.Oa(o.k.t(e),function(t,n){return function(){return e()[n]}})}function i(e,t){return r(this.getBindings.bind(this,e,t))}function s(e,t,n){var r,i=o.e.firstChild(t),s=o.J.instance,a=s.preprocessNode;if(a){for(;r=i;)i=o.e.nextSibling(r),a.call(s,r);i=o.e.firstChild(t)}for(;r=i;)i=o.e.nextSibling(r),u(e,r,n)}function u(e,t,n){var r=!0,i=1===t.nodeType;i&&o.e.wb(t);if(i&&n||o.J.instance.nodeHasBindings(t))r=f(t,null,e,n).shouldBindDescendants;r&&!c[o.a.B(t)]&&s(e,t,!i)}function a(e){var t=[],n={},r=[];return o.a.A(e,function i(s){if(!n[s]){var u=o.getBindingHandler(s);u&&(u.after&&(r.push(s),o.a.r(u.after,function(t){if(e[t]){if(-1!==o.a.l(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.length--),t.push({key:s,pb:u})),n[s]=!0}}),t}function f(e,t,r,s){var u=o.a.f.get(e,h);if(!t){if(u)throw Error("You cannot apply bindings multiple times to the same element.");o.a.f.set(e,h,!0)}!u&&s&&o.Eb(e,r);var f;if(t&&"function"!=typeof t)f=t;else{var l=o.J.instance,c=l.getBindingAccessors||i,d=o.h(function(){return(f=t?t(r,e):c.call(l,e,r))&&r.D&&r.D(),f},null,{G:e});f&&d.ga()||(d=null)}var v;if(f){var m=d?function(e){return function(){return n(d()[e])}}:function(e){return f[e]},y=function(){return o.a.Oa(d?d():f,n)};y.get=function(e){return f[e]&&n(m(e))},y.has=function(e){return e in f},s=a(f),o.a.r(s,function(t){var n=t.pb.init,i=t.pb.update,s=t.key;if(8===e.nodeType&&!o.e.Q[s])throw Error("The binding '"+s+"' cannot be used with virtual elements");try{"function"==typeof n&&o.k.t(function(){var t=n(e,m(s),y,r.$data,r);if(t&&t.controlsDescendantBindings){if(v!==p)throw Error("Multiple bindings ("+v+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");v=s}}),"function"==typeof i&&o.h(function(){i(e,m(s),y,r.$data,r)},null,{G:e})}catch(u){throw u.message='Unable to process binding "'+s+": "+f[s]+'"\nMessage: '+u.message,u}})}return{shouldBindDescendants:v===p}}function l(e){return e&&e instanceof o.I?e:new o.I(e)}o.d={};var c={script:!0};o.getBindingHandler=function(e){return o.d[e]},o.I=function(e,t,n,r){var i=this,s="function"==typeof e&&!o.v(e),u,a=o.h(function(){var u=s?e():e,f=o.a.c(u);return t?(t.D&&t.D(),o.a.extend(i,t),a&&(i.D=a)):(i.$parents=[],i.$root=f,i.ko=o),i.$rawData=u,i.$data=f,n&&(i[n]=f),r&&r(i,t,f),i.$data},null,{Da:function(){return u&&!o.a.eb(u)},G:!0});a.ga()&&(i.D=a,a.equalityComparer=null,u=[],a.Jb=function(e){u.push(e),o.a.u.ja(e,function(e){o.a.ma(u,e),u.length||(a.F(),i.D=a=p)})})},o.I.prototype.createChildContext=function(e,t,n){return new o.I(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},o.I.prototype.extend=function(e){return new o.I(this.D||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,o.a.extend(t,"function"==typeof e?e():e)})};var h=o.a.f.L(),d=o.a.f.L();o.Eb=function(e,t){if(2!=arguments.length)return o.a.f.get(e,d);o.a.f.set(e,d,t),t.D&&t.D.Jb(e)},o.xa=function(e,t,n){return 1===e.nodeType&&o.e.wb(e),f(e,t,l(n),!0)},o.Lb=function(t,n,i){return i=l(i),o.xa(t,"function"==typeof n?r(n.bind(null,i,t)):o.a.Oa(n,e),i)},o.gb=function(e,t){1!==t.nodeType&&8!==t.nodeType||s(l(e),t,!0)},o.fb=function(e,n){!t&&A.jQuery&&(t=A.jQuery);if(n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||A.document.body,u(l(e),n,!0)},o.Ca=function(e){switch(e.nodeType){case 1:case 8:var t=o.Eb(e);if(t)return t;if(e.parentNode)return o.Ca(e.parentNode)}return p},o.Pb=function(e){return(e=o.Ca(e))?e.$data:p},o.b("bindingHandlers",o.d),o.b("applyBindings",o.fb),o.b("applyBindingsToDescendants",o.gb),o.b("applyBindingAccessorsToNode",o.xa),o.b("applyBindingsToNode",o.Lb),o.b("contextFor",o.Ca),o.b("dataFor",o.Pb)}();var c={"class":"className","for":"htmlFor"};o.d.attr={update:function(e,t){var n=o.a.c(t())||{};o.a.A(n,function(t,n){n=o.a.c(n);var r=!1===n||null===n||n===p;r&&e.removeAttribute(t),8>=o.a.oa&&t in c?(t=c[t],r?e.removeAttribute(t):e[t]=n):r||e.setAttribute(t,n.toString()),"name"===t&&o.a.Cb(e,r?"":n.toString())})}},function(){o.d.checked={after:["value","attr"],init:function(e,t,n){function r(){return n.has("checkedValue")?o.a.c(n.get("checkedValue")):e.value}function i(){var i=e.checked,s=c?r():i;if(!o.ca.pa()&&(!a||i)){var u=o.k.t(t);f?l!==s?(i&&(o.a.Y(u,s,!0),o.a.Y(u,l,!1)),l=s):o.a.Y(u,s,i):o.g.va(u,n,"checked",s,!0)}}function s(){var n=o.a.c(t());e.checked=f?0<=o.a.l(n,r()):u?n:r()===n}var u="checkbox"==e.type,a="radio"==e.type;if(u||a){var f=u&&o.a.c(t())instanceof Array,l=f?r():p,c=a||f;a&&!e.name&&o.d.uniqueName.init(e,function(){return!0}),o.ba(i,null,{G:e}),o.a.q(e,"click",i),o.ba(s,null,{G:e})}}},o.g.W.checked=!0,o.d.checkedValue={update:function(e,t){e.value=o.a.c(t())}}}(),o.d.css={update:function(e,t){var n=o.a.c(t());"object"==typeof n?o.a.A(n,function(t,n){n=o.a.c(n),o.a.ua(e,t,n)}):(n=String(n||""),o.a.ua(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,o.a.ua(e,n,!0))}},o.d.enable={update:function(e,t){var n=o.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},o.d.disable={update:function(e,t){o.d.enable.update(e,function(){return!o.a.c(t())})}},o.d.event={init:function(e,t,n,r,i){var s=t()||{};o.a.A(s,function(s){"string"==typeof s&&o.a.q(e,s,function(e){var u,a=t()[s];if(a){try{var f=o.a.R(arguments);r=i.$data,f.unshift(r),u=a.apply(r,f)}finally{!0!==u&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(s+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},o.d.foreach={vb:function(e){return function(){var t=e(),n=o.a.Sa(t);return!n||"number"==typeof n.length?{foreach:t,templateEngine:o.K.Ja}:(o.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:o.K.Ja})}},init:function(e,t){return o.d.template.init(e,o.d.foreach.vb(t))},update:function(e,t,n,r,i){return o.d.template.update(e,o.d.foreach.vb(t),n,r,i)}},o.g.aa.foreach=!1,o.e.Q.foreach=!0,o.d.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var i=e.ownerDocument;if("activeElement"in i){var s;try{s=i.activeElement}catch(u){s=i.body}r=s===e}i=t(),o.g.va(i,n,"hasfocus",r,!0),e.__ko_hasfocusLastValue=r,e.__ko_hasfocusUpdating=!1}var i=r.bind(null,!0),s=r.bind(null,!1);o.a.q(e,"focus",i),o.a.q(e,"focusin",i),o.a.q(e,"blur",s),o.a.q(e,"focusout",s)},update:function(e,t){var n=!!o.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),o.k.t(o.a.ha,null,[e,n?"focusin":"focusout"]))}},o.g.W.hasfocus=!0,o.d.hasFocus=o.d.hasfocus,o.g.W.hasFocus=!0,o.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){o.a.Va(e,t())}},s("if"),s("ifnot",!1,!0),s("with",!0,!1,function(e,t){return e.createChildContext(t)});var h={};o.d.options={init:function(e){if("select"!==o.a.B(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,t,n){function r(){return o.a.la(e.options,function(e){return e.selected})}function i(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function s(t,n){if(c.length){var r=0<=o.a.l(c,o.i.p(n[0]));o.a.Db(n[0],r),d&&!r&&o.k.t(o.a.ha,null,[e,"change"])}}var u=0!=e.length&&e.multiple?e.scrollTop:null,a=o.a.c(t()),f=n.get("optionsIncludeDestroyed");t={};var l,c;c=e.multiple?o.a.ya(r(),o.i.p):0<=e.selectedIndex?[o.i.p(e.options[e.selectedIndex])]:[],a&&("undefined"==typeof a.length&&(a=[a]),l=o.a.la(a,function(e){return f||e===p||null===e||!o.a.c(e._destroy)}),n.has("optionsCaption")&&(a=o.a.c(n.get("optionsCaption")),null!==a&&a!==p&&l.unshift(h)));var d=!1;t.beforeRemove=function(t){e.removeChild(t)},a=s,n.has("optionsAfterRender")&&(a=function(e,t){s(0,t),o.k.t(n.get("optionsAfterRender"),null,[t[0],e!==h?e:p])}),o.a.Ua(e,l,function(t,r,s){return s.length&&(c=s[0].selected?[o.i.p(s[0])]:[],d=!0),r=e.ownerDocument.createElement("option"),t===h?(o.a.Xa(r,n.get("optionsCaption")),o.i.X(r,p)):(s=i(t,n.get("optionsValue"),t),o.i.X(r,o.a.c(s)),t=i(t,n.get("optionsText"),s),o.a.Xa(r,t)),[r]},t,a),o.k.t(function(){n.get("valueAllowUnset")&&n.has("value")?o.i.X(e,o.a.c(n.get("value")),!0):(e.multiple?c.length&&r().length<c.length:c.length&&0<=e.selectedIndex?o.i.p(e.options[e.selectedIndex])!==c[0]:c.length||0<=e.selectedIndex)&&o.a.ha(e,"change")}),o.a.Tb(e),u&&20<Math.abs(u-e.scrollTop)&&(e.scrollTop=u)}},o.d.options.Pa=o.a.f.L(),o.d.selectedOptions={after:["options","foreach"],init:function(e,t,n){o.a.q(e,"change",function(){var r=t(),i=[];o.a.r(e.getElementsByTagName("option"),function(e){e.selected&&i.push(o.i.p(e))}),o.g.va(r,n,"selectedOptions",i)})},update:function(e,t){if("select"!=o.a.B(e))throw Error("values binding applies only to SELECT elements");var n=o.a.c(t());n&&"number"==typeof n.length&&o.a.r(e.getElementsByTagName("option"),function(e){var t=0<=o.a.l(n,o.i.p(e));o.a.Db(e,t)})}},o.g.W.selectedOptions=!0,o.d.style={update:function(e,t){var n=o.a.c(t()||{});o.a.A(n,function(t,n){n=o.a.c(n),e.style[t]=n||""})}},o.d.submit={init:function(e,t,n,r,i){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");o.a.q(e,"submit",function(n){var r,s=t();try{r=s.call(i.$data,e)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},o.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){o.a.Xa(e,t())}},o.e.Q.text=!0,o.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++o.d.uniqueName.Ob;o.a.Cb(e,n)}}},o.d.uniqueName.Ob=0,o.d.value={after:["options","foreach"],init:function(e,t,n){function r(){u=!1;var r=t(),i=o.i.p(e);o.g.va(r,n,"value",i)}var i=["change"],s=n.get("valueUpdate"),u=!1;s&&("string"==typeof s&&(s=[s]),o.a.$(i,s),i=o.a.ib(i)),!o.a.oa||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=o.a.l(i,"propertychange")||(o.a.q(e,"propertychange",function(){u=!0}),o.a.q(e,"focus",function(){u=!1}),o.a.q(e,"blur",function(){u&&r()})),o.a.r(i,function(t){var n=r;o.a.kc(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5)),o.a.q(e,t,n)})},update:function(e,t,n){var r=o.a.c(t());t=o.i.p(e);if(r!==t)if("select"===o.a.B(e)){var i=n.get("valueAllowUnset");n=function(){o.i.X(e,r,i)},n(),i||r===o.i.p(e)?setTimeout(n,0):o.k.t(o.a.ha,null,[e,"change"])}else o.i.X(e,r)}},o.g.W.value=!0,o.d.visible={update:function(e,t){var n=o.a.c(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},function(e){o.d[e]={init:function(t,n,r,i,s){return o.d.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,i,s)}}}("click"),o.C=function(){},o.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},o.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},o.C.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||w;var n=t.getElementById(e);if(!n)throw Error("Cannot find template with ID "+e);return new o.n.j(n)}if(1==e.nodeType||8==e.nodeType)return new o.n.Z(e);throw Error("Unknown template type: "+e)},o.C.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n)},o.C.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(e,t).data("isRewritten")},o.C.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},o.b("templateEngine",o.C),o.Za=function(){function e(e,t,n,r){e=o.g.Ra(e);for(var i=o.g.aa,s=0;s<e.length;s++){var u=e[s].key;if(i.hasOwnProperty(u)){var a=i[u];if("function"==typeof a){if(u=a(e[s].value))throw Error(u)}else if(!a)throw Error("This template engine does not support the '"+u+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+o.g.qa(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return o.Za.dc(e,t)},n)},dc:function(r,i){return r.replace(t,function(t,n,r,s,o){return e(o,n,r,i)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",i)})},Mb:function(e,t){return o.w.Na(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&o.xa(i,e,r)})}}}(),o.b("__tr_ambtns",o.Za.Mb),function(){o.n={},o.n.j=function(e){this.j=e},o.n.j.prototype.text=function(){var e=o.a.B(this.j),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.j[e];var t=arguments[0];"innerHTML"===e?o.a.Va(this.j,t):this.j[e]=t};var e=o.a.f.L()+"_";o.n.j.prototype.data=function(t){if(1===arguments.length)return o.a.f.get(this.j,e+t);o.a.f.set(this.j,e+t,arguments[1])};var t=o.a.f.L();o.n.Z=function(e){this.j=e},o.n.Z.prototype=new o.n.j,o.n.Z.prototype.text=function(){if(0==arguments.length){var e=o.a.f.get(this.j,t)||{};return e.$a===p&&e.Ba&&(e.$a=e.Ba.innerHTML),e.$a}o.a.f.set(this.j,t,{$a:arguments[0]})},o.n.j.prototype.nodes=function(){if(0==arguments.length)return(o.a.f.get(this.j,t)||{}).Ba;o.a.f.set(this.j,t,{Ba:arguments[0]})},o.b("templateSources",o.n),o.b("templateSources.domElement",o.n.j),o.b("templateSources.anonymousTemplate",o.n.Z)}(),function(){function e(e,t,n){var r;for(t=o.e.nextSibling(t);e&&(r=e)!==t;)e=o.e.nextSibling(r),n(r,e)}function t(t,n){if(t.length){var r=t[0],i=t[t.length-1],s=r.parentNode,u=o.J.instance,a=u.preprocessNode;if(a){e(r,i,function(e,t){var n=e.previousSibling,s=a.call(u,e);s&&(e===r&&(r=s[0]||t),e===i&&(i=s[s.length-1]||n))}),t.length=0;if(!r)return;r===i?t.push(r):(t.push(r,i),o.a.ea(t,s))}e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||o.fb(n,e)}),e(r,i,function(e){1!==e.nodeType&&8!==e.nodeType||o.w.Ib(e,[n])}),o.a.ea(t,s)}}function n(e){return e.nodeType?e:0<e.length?e[0]:null}function r(e,r,s,u,a){a=a||{};var f=e&&n(e),f=f&&f.ownerDocument,l=a.templateEngine||i;o.Za.Ub(s,l,f),s=l.renderTemplate(s,u,a,f);if("number"!=typeof s.length||0<s.length&&"number"!=typeof s[0].nodeType)throw Error("Template engine must return an array of DOM nodes");f=!1;switch(r){case"replaceChildren":o.e.U(e,s),f=!0;break;case"replaceNode":o.a.Bb(e,s),f=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+r)}return f&&(t(s,u),a.afterRender&&o.k.t(a.afterRender,null,[s,u.$data])),s}var i;o.Wa=function(e){if(!(e==p||e instanceof o.C))throw Error("templateEngine must inherit from ko.templateEngine");i=e},o.Ta=function(e,t,s,u,a){s=s||{};if((s.templateEngine||i)==p)throw Error("Set a template engine before calling renderTemplate");a=a||"replaceChildren";if(u){var f=n(u);return o.h(function(){var i=t&&t instanceof o.I?t:new o.I(o.a.c(t)),l=o.v(e)?e():"function"==typeof e?e(i.$data,i):e,i=r(u,a,l,i,s);"replaceNode"==a&&(u=i,f=n(u))},null,{Da:function(){return!f||!o.a.Ea(f)},G:f&&"replaceNode"==a?f.parentNode:f})}return o.w.Na(function(n){o.Ta(e,t,s,n,"replaceNode")})},o.jc=function(e,n,i,s,u){function a(e,n){t(n,l),i.afterRender&&i.afterRender(n,e)}function f(t,n){l=u.createChildContext(t,i.as,function(e){e.$index=n});var s="function"==typeof e?e(t,l):e;return r(null,"ignoreTargetNode",s,l,i)}var l;return o.h(function(){var e=o.a.c(n)||[];"undefined"==typeof e.length&&(e=[e]),e=o.a.la(e,function(e){return i.includeDestroyed||e===p||null===e||!o.a.c(e._destroy)}),o.k.t(o.a.Ua,null,[s,e,f,i,a])},null,{G:s})};var s=o.a.f.L();o.d.template={init:function(e,t){var n=o.a.c(t());return"string"==typeof n||n.name?o.e.da(e):(n=o.e.childNodes(e),n=o.a.ec(n),(new o.n.Z(e)).nodes(n)),{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var u=t(),a;t=o.a.c(u),n=!0,r=null,"string"==typeof t?t={}:(u=t.name,"if"in t&&(n=o.a.c(t["if"])),n&&"ifnot"in t&&(n=!o.a.c(t.ifnot)),a=o.a.c(t.data)),"foreach"in t?r=o.jc(u||e,n&&t.foreach||[],t,e,i):n?(i="data"in t?i.createChildContext(a,t.as):i,r=o.Ta(u||e,i,t,e)):o.e.da(e),i=r,(a=o.a.f.get(e,s))&&"function"==typeof a.F&&a.F(),o.a.f.set(e,s,i&&i.ga()?i:p)}},o.g.aa.template=function(e){return e=o.g.Ra(e),1==e.length&&e[0].unknown||o.g.bc(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.e.Q.template=!0}(),o.b("setTemplateEngine",o.Wa),o.b("renderTemplate",o.Ta),o.a.nb=function(e,t,n){if(e.length&&t.length){var r,i,s,o,u;for(r=i=0;(!n||r<n)&&(o=e[i]);++i){for(s=0;u=t[s];++s)if(o.value===u.value){o.moved=u.index,u.moved=o.index,t.splice(s,1),r=s=0;break}r+=s}}},o.a.Aa=function(){function e(e,t,n,r,i){var s=Math.min,u=Math.max,a=[],f,l=e.length,c,h=t.length,p=h-l||1,d=l+h+1,v,m,g;for(f=0;f<=l;f++)for(m=v,a.push(v=[]),g=s(h,f+p),c=u(0,f-1);c<=g;c++)v[c]=c?f?e[f-1]===t[c-1]?m[c-1]:s(m[c]||d,v[c-1]||d)+1:c+1:f+1;s=[],u=[],p=[],f=l;for(c=h;f||c;)h=a[f][c]-1,c&&h===a[f][c-1]?u.push(s[s.length]={status:n,value:t[--c],index:c}):f&&h===a[f-1][c]?p.push(s[s.length]={status:r,value:e[--f],index:f}):(--c,--f,i.sparse||s.push({status:"retained",value:t[c]}));return o.a.nb(u,p,10*l),s.reverse()}return function(t,n,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],n=n||[],t.length<=n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}(),o.b("utils.compareArrays",o.a.Aa),function(){function e(e,t,n,r,i){var s=[],u=o.h(function(){var u=t(n,i,o.a.ea(s,e))||[];0<s.length&&(o.a.Bb(s,u),r&&o.k.t(r,null,[n,u,i])),s.length=0,o.a.$(s,u)},null,{G:e,Da:function(){return!o.a.eb(s)}});return{S:s,h:u.ga()?u:p}}var t=o.a.f.L();o.a.Ua=function(n,r,i,s,u){function a(e,t){S=c[t],g!==t&&(E[e]=S),S.Ia(g++),o.a.ea(S.S,n),v.push(S),w.push(S)}function f(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&o.a.r(t[n].S,function(r){e(r,n,t[n].ka)})}r=r||[],s=s||{};var l=o.a.f.get(n,t)===p,c=o.a.f.get(n,t)||[],h=o.a.ya(c,function(e){return e.ka}),d=o.a.Aa(h,r,s.dontLimitMoves),v=[],m=0,g=0,y=[],w=[];r=[];for(var E=[],h=[],S,x=0,T,N;T=d[x];x++)switch(N=T.moved,T.status){case"deleted":N===p&&(S=c[m],S.h&&S.h.F(),y.push.apply(y,o.a.ea(S.S,n)),s.beforeRemove&&(r[x]=S,w.push(S))),m++;break;case"retained":a(x,m++);break;case"added":N!==p?a(x,N):(S={ka:T.value,Ia:o.m(g++)},v.push(S),w.push(S),l||(h[x]=S))}f(s.beforeMove,E),o.a.r(y,s.beforeRemove?o.M:o.removeNode);for(var x=0,l=o.e.firstChild(n),C;S=w[x];x++){S.S||o.a.extend(S,e(n,i,S.ka,u,S.Ia));for(m=0;d=S.S[m];l=d.nextSibling,C=d,m++)d!==l&&o.e.rb(n,d,C);!S.Zb&&u&&(u(S.ka,S.S,S.Ia),S.Zb=!0)}f(s.beforeRemove,r),f(s.afterMove,E),f(s.afterAdd,h),o.a.f.set(n,t,v)}}(),o.b("utils.setDomNodeChildrenFromArrayMapping",o.a.Ua),o.K=function(){this.allowTemplateRewriting=!1},o.K.prototype=new o.C,o.K.prototype.renderTemplateSource=function(e){var t=(9>o.a.oa?0:e.nodes)?e.nodes():null;return t?o.a.R(t.cloneNode(!0).childNodes):(e=e.text(),o.a.Qa(e))},o.K.Ja=new o.K,o.Wa(o.K.Ja),o.b("nativeTemplateEngine",o.K),function(){o.La=function(){var e=this.ac=function(){if(!t||!t.tmpl)return 0;try{if(0<=t.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,r,i){i=i||{};if(2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var s=n.data("precompiled");return s||(s=n.text()||"",s=t.template(null,"{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}"),n.data("precompiled",s)),n=[r.$data],r=t.extend({koBindingContext:r},i.templateOptions),r=t.tmpl(s,n,r),r.appendTo(w.createElement("div")),t.fragments={},r},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){w.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(t.tmpl.tag.ko_code={open:"__.push($1 || '');"},t.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.La.prototype=new o.C;var e=new o.La;0<e.ac&&o.Wa(e),o.b("jqueryTmplTemplateEngine",o.La)}()})})()}(),define("map/MapModel",["dojo/_base/declare","main/config","map/config","knockout"],function(e,t,n,r){var i=e(null,{constructor:function(e){i.vm={},i.root=e,i.vm.showDMSInputs=r.observable(!0),i.vm.showLatLongInputs=r.observable(!1),i.vm.showBasemapGallery=r.observable(!1),i.vm.showLocatorOptions=r.observable(!1),i.vm.showSharingOptions=r.observable(!1),i.vm.showClearPinsOption=r.observable(!1),i.vm.currentLatitude=r.observable(),i.vm.currentLongitude=r.observable(),i.vm.suitabilitySettings=r.observable(n.customSuitabilityDefaults),i.vm.uploadModalHeader=r.observable(n.uploadForm.title),i.vm.shapefileUploadInstructionHeader=r.observable(n.uploadForm.shapefileHeader),i.vm.csvUploadInstructionHeader=r.observable(n.uploadForm.csvHeader),i.vm.shapefileInstructions=r.observableArray(n.uploadForm.shapefileInstructions),i.vm.csvInstructions=r.observable(n.uploadForm.csvInstructions),i.vm.coordinatesModalHeader=r.observable(n.coordinatesDialog.coordinatesModalHeader),i.vm.coordinatesEnterButton=r.observable(n.coordinatesDialog.coordinatesEnterButton),i.vm.latitudePlaceholder=r.observable(n.coordinatesDialog.latitudePlaceholder),i.vm.longitudePlaceholder=r.observable(n.coordinatesDialog.longitudePlaceholder),i.vm.allCountries=r.observableArray([]),i.vm.lowerLevelAdminUnits=r.observableArray([]),i.vm.drawToolsEnabled=r.observable(!1),r.applyBindings(i.vm,document.getElementById(e))}});return i.get=function(e){return e==="model"?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.applyTo=function(e){r.applyBindings(i.vm,document.getElementById(e))},i.initialize=function(e){return i.instance||(i.instance=new i(e)),i.instance},i}),define("map/Uploader",["map/config","map/Symbols","utils/GeoHelper","analysis/config","analysis/WizardStore","dojo/on","dojo/sniff","dojo/dom-class","dijit/registry","dojo/store/Memory","dojo/dom-construct","dijit/form/ComboBox","dojox/data/CsvStore","esri/request","esri/graphic","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/geometry/scaleUtils","esri/geometry/webMercatorUtils"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){"use strict";var w,E=r.STORE_KEYS,S={toggle:function(){u.toggle("upload-modal","active"),w?(w.remove(),w=undefined):w=s.once(document.querySelector("#upload-modal .close-icon"),"click",this.toggle)},close:function(){return w&&(w.remove(),w=undefined),u.remove("upload-modal","active")},beginUpload:function(e){if(e.target.value==="")return;var t=e.target.value.toLowerCase();if(o("ie")){var n=t.split("\\");t=n[n.length-1]}t.indexOf(".zip")<0?this.uploadCSV(e):this.uploadShapefile(t,e)},uploadCSV:function(e){var t=e.target.files[0],n=new FileReader,r=[],i=this,s,o,u;s=function(){u=new h({data:n.result,separator:","}),u.fetch({onComplete:function(e){if(e.length<1)throw new Error("No items found in CSV file.");o=u.getAttributes(e[0]),o.forEach(function(e){r.push({name:e,id:e})}),i.generateDropdown(r,function(t){t&&i.formatCSVDataForStore(u,e,t)})},onError:i.uploadError})},n.onload=s,n.readAsText(t)},uploadShapefile:function(t,n){var r,i;t=t.split("."),t=t[0].replace("c:\\fakepath\\",""),r={name:t,targetSR:app.map.spatialReference,generalize:!0,maxRecordCount:1e3,reducePrecision:!0,numberOfDigitsAfterDecimal:0,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},i=y.getExtentForScale(app.map,4e4),r.maxAllowableOffset=i.getWidth()/app.map.width,p({url:e.uploader.portalUrl,content:{f:"json",filetype:"shapefile","callback.html":"callback",publishParameters:JSON.stringify(r)},form:document.getElementById("upload-form"),handleAs:"json",load:this.uploadSuccess.bind(this),error:this.uploadError})},uploadError:function(e){console.error("Error uplaoding data: ",e)},uploadSuccess:function(e,t){var n=e.featureCollection,r=[],i=this;n.layers[0].layerDefinition.fields.forEach(function(e){r.push({name:e.name,id:e.alias})}),i.generateDropdown(r,function(e){e&&i.formatFeaturesToStore(n.layers[0].featureSet,e)})},formatCSVDataForStore:function(t,r,s){var o=n.nextCustomFeatureId(),u=[],a,f,l,c,h,p;r.forEach(function(r,i){a={},l=t.getAttributes(r),l.forEach(function(e){c=t.getValue(r,e),a[e]=isNaN(c)?c:parseFloat(c)}),a[e.uploader.labelField]="ID - "+(o+i)+": "+a[s],a.WRI_ID=o+i,a.isRSPO=!1,h=a.Latitude?a.Latitude:a.latitude,p=a.Longitude?a.Longitude:a.longitude,f=n.generatePointGraphicFromGeometric(p,h,a),u.push(f)}),i.set(E.customFeatures,i.get(E.customFeatures).concat(u))},formatFeaturesToStore:function(r,s){var o=n.nextCustomFeatureId(),u=[],a,f,l,c,h;r.features.forEach(function(n,r){n.attributes[e.uploader.labelField]="ID - "+(o+r)+": "+n.attributes[s],n.attributes.WRI_ID=o+r,n.geometry.x?(c=t.getPointSymbol(),a=new v(n.geometry),h=new m(a.x,a.y,a.x,a.y,a.spatialReference),l=l?l.union(h):h,n.attributes.isRSPO=!1):(c=t.getPolygonSymbol(),a=new g(n.geometry),l=l?l.union(a.getExtent()):a.getExtent()),f=new d(a,c,n.attributes),u.push(f)}),i.set(E.customFeatures,i.get(E.customFeatures).concat(u))},resetForm:function(){var e=document.getElementById("uploadNameField");a.byId("uploadNameFieldWidget")&&a.byId("uploadNameFieldWidget").destroy(),e&&l.destroy(e.id),document.getElementById("upload-form").reset()},generateDropdown:function(e,t){var n=document.getElementById("postUploadOptions"),r=this,i;l.create("div",{id:"uploadNameField",innerHTML:'<div id="uploadNameFieldWidget"></div>'},n,"last"),i=new f({data:e}),new c({id:"uploadNameFieldWidget",value:"-- Choose name field --",store:i,searchAttr:"name",onChange:function(e){r.resetForm(),r.toggle(),t(e)}},"uploadNameFieldWidget")}};return S}),define("components/alertsForm/AlertsForm",["react","lodash","analysis/WizardStore","components/alertsForm/config","components/featureList/FeatureList","map/config","map/MapModel","map/Uploader","map/Symbols","utils/GeoHelper","esri/graphic","esri/geometry/Polygon","esri/toolbars/draw","dojo/topic","dojo/dom","dojo/query","dojo/dom-class","dojo/Deferred","dojo/promise/all","dojo/request/xhr","dojox/validate/web"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){var E,S,x,T=r.TEXT,N=r.STORE_KEYS,C,k=this;return C=function(){return{features:n.get(N.customFeatures),selectedFeatures:n.get(N.selectedCustomFeatures)}},E=e.createClass({getInitialState:C,componentDidMount:function(){S=new h(app.map),S.on("draw-end",this._drawComplete),n.registerCallback(N.customFeatures,function(){this.setState({features:n.get(N.customFeatures)})}.bind(this)),n.registerCallback(N.selectedCustomFeatures,function(){this.setState({selectedFeatures:n.get(N.selectedCustomFeatures)})}.bind(this)),this.setState(C())},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(C()),this._deactivateToolbar(),this._removeActiveClass())},render:function(){var t=n.get(N.selectedCustomFeatures),s=t.length>0?t.map(function(e){return e.attributes.WRI_label}).join(", "):T.noSelection,o=this;return e.DOM.div({className:"relative fill"},e.DOM.div({className:"alerts-form__header"},e.DOM.div({className:"alerts-form__header__title inline-block fill__long border-box padding__long vertical-middle"},T.title),e.DOM.button({onClick:this._toggle,className:"alerts-form__header__exit back-white absolute no-top no-right no-padding fill__long pointer"},e.DOM.img({className:"vertical-middle",src:"app/css/images/close_symbol.png"}))),e.DOM.div({className:"alerts-form__body"},e.DOM.div({className:"padding__wide padding__top"},e.DOM.div({className:"margin__bottom"},r.customArea.instructions),e.DOM.div({className:"text-center margin__bottom"},e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:this._activateToolbar,"data-geometry-type":h.FREEHAND_POLYGON},r.customArea.freehandLabel),e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:this._activateToolbar,"data-geometry-type":h.POLYGON},r.customArea.polyLabel),e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:u.toggle.bind(u),id:"alerts-draw-upload"},r.customArea.uploadLabel))),new i({features:this.state.features,selectedFeatures:this.state.selectedFeatures})),e.DOM.div({className:"alerts-form__footer"},e.DOM.div({className:"inline-block padding__left"},T.selection),e.DOM.div({className:"alerts-form__footer__selection absolute inline-block padding__wide text-gold ellipsis border-box",title:s},s),e.DOM.button({className:"text-white back-orange no-border fill__long pointer absolute no-right no-top",onClick:this._subscribeToAlerts,disabled:this.state.selectedFeatures.length===0},T.subscribe)))},_toggle:function(){p.publish("toggleAlerts")},_activateToolbar:function(e){var t;t=e.target.dataset?e.target.dataset.geometryType:e.target.getAttribute("data-geometry-type"),this._removeActiveClass();if(x===t){this._deactivateToolbar();return}x=t,S.activate(t),m.add(e.target,"active"),o.set("drawToolsEnabled",!0)},_deactivateToolbar:function(){S.deactivate(),x=undefined,o.set("drawToolsEnabled",!1)},_drawComplete:function(e){this._removeActiveClass(),this._deactivateToolbar();if(!e.geometry)return;var t=f.nextCustomFeatureId(),i={WRI_ID:t},s=new l(e.geometry,a.getPolygonSymbol(),i);i[r.stepTwo.labelField]="ID - "+t+": Custom drawn feature",n.set(N.customFeatures,n.get(N.customFeatures).concat([s]))},_removeActiveClass:function(){v(".alerts-form__body .alerts-form__drawing-tool").forEach(function(e){m.remove(e,"active")})},_subscribeToAlerts:function(){n.set(N.alertsDialogActive,!n.get(N.alertsDialogActive))}}),function(t,n){return e.renderComponent(new E(t),document.getElementById(n))}}),define("components/alertsDialog/config",["analysis/config"],function(e){return{STORE_KEYS:e.STORE_KEYS,MAX_INPUT_CHARS:70,IDS:{mount:"subscription-modal",forma:"alerts-forma",fires:"alerts-fires",buffer:"alerts-buffer",email:"alerts-email",subscription:"alerts-subscription"},TEXT:{title:"Subscribe to Alerts",forma:"Monthly Clearance Alerts",fires:"Fire Alerts",selectionLabel:"Selection:",noSelection:"none",subscriptionPlaceholder:"Subscription name",subscriptionDefaultLabel:"Use default",emailPlaceholder:"your_email@example.com",subscribe:"Subscribe",bufferLabel:"Point data selected - buffer area(s) required.",bufferOptionsLabel:"Buffer radius:",bufferOptions:[["50","50km"],["40","40km"],["30","30km"],["20","20km"],["10","10km"]],messagesLabel:"Please fill in the following:\n",messages:{invalidEmail:"You must provide a valid email in the form.",noAreaSelection:"You must select at least one area from the list.",noSelection:"You must select at least one checkbox from the form.",noSelectionName:"You must provide a name for your subscription area.",formaSuccess:"Thank you for subscribing to Forma Alerts.  You should receive a confirmation email soon.",formaFail:"There was an error with your request to subscribe to Forma alerts.  Please try again later.",fireSuccess:"Thank you for subscribing to Fires Alerts.  You should receive a confirmation email soon.",fireFail:"There was an error with your request to subscribe to Fires alerts.  Please try again later."},requiredLabels:{alerts:"* Please select an alert type.",subscription:"* Please enter a subscription area name.",email:"* Please enter a valid email."}},requests:{fires:{url:"https://gfw-fires.wri.org/subscribe_by_polygon",options:{method:"POST",handleAs:"json",headers:{"X-Requested-With":null},data:{msg_type:"email",msg_addr:null,area_name:null,features:null}},successMessage:"subscription successful"},forma:{url:"http://gfw-apis.appspot.com/subscribe",options:{method:"POST",data:{topic:"updates/forma",geom:null,email:null}}}}}}),define("utils/Analytics",[],function(){"use strict";return{sendEvent:function(e,t,n,r){var i={hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,eventValue:r};ga&&(ga("A.send",i),ga("B.send",i),ga("C.send",i))},sendPageview:function(e,t){var n={hitType:"pageview"};e&&(n.page=e),t&&(n.title=t),ga&&(ga("A.send",n),ga("B.send",n),ga("C.send",n))}}}),define("components/alertsDialog/alertsDialog",["react","lodash","components/alertsDialog/config","analysis/WizardStore","utils/GeoHelper","utils/Analytics","esri/geometry/Polygon","dojo/dom","dojo/dom-class","dojo/Deferred","dojo/promise/all","dojo/request/xhr","dojox/validate/web"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){var p,d,v=n.STORE_KEYS,m=n.IDS,g=n.TEXT,y=this,b,w,E,S=t.uniqueId(m.forma),x=t.uniqueId(m.fires),T=t.uniqueId(m.buffer),N=t.uniqueId(m.email),C=t.uniqueId(m.subscrpition);return d=function(){return{forma:!1,fires:!1,email:"",subscriptionName:"",features:r.get(v.selectedCustomFeatures),presetFeature:r.get(v.selectedPresetFeature)}},p=e.createClass({displayName:"AlertsDialog",getInitialState:d,componentDidMount:function(){r.registerCallback(v.alertsDialogActive,function(){r.get(v.alertsDialogActive)?a.add(m.mount,"active"):a.remove(m.mount,"active")}.bind(this)),r.registerCallback(v.customFeatures,function(){this.setState({features:r.get(v.selectedCustomFeatures)})}.bind(this)),r.registerCallback(v.selectedCustomFeatures,function(){this.setState({features:r.get(v.selectedCustomFeatures)}),r.set(v.selectedPresetFeature,null)}.bind(this)),r.registerCallback(v.selectedPresetFeature,function(){this.setState({presetFeature:r.get(v.selectedPresetFeature)})}.bind(this)),r.get(v.alertsDialogActive)===!0&&a.add(m.mount,"active")},render:function(){var r=this.state.features,i=this.state.presetFeature,s,o,u,a,f;return i!==null?(o=i.geometry.type==="point",s=i.attributes.WRI_label||i.attributes.Name||i.attributes.NAME||i.attributes.Mill_name||g.noSelection):(o=t.find(r,function(e){return e.geometry.type==="point"})?!0:!1,s=r.length>0?r.map(function(e){return e.attributes.WRI_label}).join(", "):g.noSelection),o&&(f=e.DOM.div({className:"margin__bottom"},e.DOM.div({className:"margin--small__left"},g.bufferLabel),e.DOM.span({className:"margin--small__left"},g.bufferOptionsLabel),e.DOM.select({id:T,className:"margin__left"},g.bufferOptions.map(function(t){return e.DOM.option({value:t[0]},t[1])})))),a=[r.length===0&&i===null,this.state.subscriptionName.trim().length===0,this.state.email.trim().length===0,!h.isEmailAddress(this.state.email),this.state.forma!==!0&&this.state.fires!==!0],disabled=a.indexOf(!0)>-1,w="pb_"+t.random(1,100).toString(),E="pb_"+t.random(1,100).toString(),b=b||w+E,e.DOM.div({className:"alerts-dialog"},e.DOM.div({className:"close-icon",onClick:this._close}),e.DOM.div({className:"modal-content"},e.DOM.div({className:"alerts-form__form no-wide border-box"},e.DOM.div({className:"modal-header"},g.title),e.DOM.div({className:"margin__bottom margin--small__left"},e.DOM.span(null,g.selectionLabel),e.DOM.span({className:"padding__left"+(a[0]?" text-red":" text-gold"),title:s},s.substr(0,75),s.length>75?"...":"")),e.DOM.div({className:"margin--small__wide"},e.DOM.div({className:"font-12px text-red margin__top",style:{visibility:a[4]?"visible":"hidden"}},g.requiredLabels.alerts)),e.DOM.div({className:"margin__bottom"},e.DOM.label({className:"vertical-middle"},e.DOM.input({id:S,className:"vertical-middle",type:"checkbox",onChange:this._formChange,checked:this.state.forma}),g.forma)),e.DOM.div({className:""},e.DOM.label({className:"margin--small__bottom vertical-middle"},e.DOM.input({id:x,className:"vertical-middle",type:"checkbox",onChange:this._formChange,checked:this.state.fires}),g.fires)),e.DOM.div({className:"pooh-bear text-center"},e.DOM.div({className:"pooh-bear"},"Please leave this blank"),e.DOM.input({id:w,className:"pooh-bear",type:"text",name:"name"})),e.DOM.div({className:"margin--small__wide font-12px text-red margin__top",style:{visibility:a[1]?"visible":"hidden"}},g.requiredLabels.subscription),e.DOM.div({className:"text-left margin__bottom margin--small__wide"},e.DOM.input({id:C,className:"border-medium-gray border-radius",maxLength:toString(n.MAX_INPUT_CHARS),type:"text",onChange:this._formChange,value:this.state.subscriptionName,placeholder:g.subscriptionPlaceholder}),e.DOM.button({className:"margin__left font-16px text-white back-orange no-border border-radius",onClick:this._setDefaultSubscriptionName,disabled:a[0]},g.subscriptionDefaultLabel)),e.DOM.div({className:"margin--small__wide font-12px text-red margin__top",style:{visibility:a[3]?"visible":"hidden"}},g.requiredLabels.email),e.DOM.div({className:"text-left margin__bottom margin--small__wide"},e.DOM.input({id:N,className:"border-medium-gray border-radius",maxLength:toString(n.MAX_INPUT_CHARS),type:"text",onChange:this._formChange,value:this.state.email,placeholder:g.emailPlaceholder})),e.DOM.div({className:"pooh-bear text-center"},e.DOM.div({className:"pooh-bear"},"Please do not change this field"),e.DOM.input({id:E,className:"pooh-bear",type:"text",name:"address",defaultValue:b})),f,e.DOM.div({className:"text-center margin__bottom"},e.DOM.button({className:"text-white back-orange no-border border-radius font-16px",onClick:this._subscribe,disabled:disabled},e.DOM.img({className:"vertical-sub",width:"21px",height:"19px",src:"app/css/images/alert_symbol_"+(disabled?"gray":"white")+".png"}),e.DOM.span({className:"padding__left"},g.subscribe))))))},_close:function(){r.set(v.alertsDialogActive,!r.get(v.alertsDialogActive))},_formChange:function(e){var t={forma:u.byId(S).checked,fires:u.byId(x).checked,subscriptionName:u.byId(C).value,email:u.byId(N).value};this.setState(t)},_subscribeToFires:function(e,r,i){var o=new f,u=g.messages,a=n.requests.fires,l=a.url,h=t.cloneDeep(a.options);return h.data.features=JSON.stringify({rings:e.rings,spatialReference:e.spatialReference}),h.data.msg_addr=i,h.data.area_name=r,c(l,h).then(function(e){o.resolve(e.message&&e.message===a.successMessage?u.fireSuccess:u.fireFail)}),s.sendEvent("Event","subscribe","Fire Alerts","User is subscribing to Fire Alerts."),o.promise},_subscribeToForma:function(e,r,i){var o=new f,u=g.messages,a=n.requests.forma.url,l=t.cloneDeep(n.requests.forma.options),c=JSON.stringify({topic:l.data.topic,email:i,geom:'{"type": "'+e.type+'", "coordinates":['+JSON.stringify(e.geom)+"]}"}),h=new XMLHttpRequest;return y=this,h.onreadystatechange=function(){h.readyState===4&&o.resolve(JSON.parse(h.response).subscribe?u.formaSuccess:u.formaFail)},h.addEventListener("error",function(){o.resolve(!1)},!1),h.open(l.method,a,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(c),s.sendEvent("Event","subscribe","Monthly Clearance Alerts","User is subscribing to Monthly Clearance Alerts."),o.promise},_subscribe:function(){if(u.byId(w)==null||u.byId(E)==null||u.byId(w).value.length>0||u.byId(E).value!==b)return;var e=this.state.features,n=this.state.presetFeature,r,s,a,f,c=[];n!==null?(e=[n],r=e[0].geometry.type==="point"):r=t.find(e,function(e){return e.geometry.type==="point"})?!0:!1,r?(f=parseInt(u.byId(T).value),a=t.filter(e,function(e){return e.geometry.type==="point"}),a=a.map(function(e){return i.preparePointAsPolygon(e,f)}),a=a.map(function(e){return(new o(i.getSpatialReference())).addRing(e.geometry.rings[e.geometry.rings.length-1])}),e=t.filter(e,function(e){return e.geometry.type!=="point"}),s=e.map(function(e){var t=new o(i.getSpatialReference());return t.rings=e.geometry.rings,t}),s=s.concat(a)):s=e.map(function(e){var t=new o(i.getSpatialReference());return t.rings=e.geometry.rings,t}),i.union(s).then(function(e){this.state.forma===!0&&c.push(this._subscribeToForma(i.convertGeometryToGeometric(e),this.state.subscriptionName.trim(),this.state.email.trim())),this.state.fires===!0&&c.push(this._subscribeToFires(e,this.state.subscriptionName.trim(),this.state.email.trim())),l(c).then(function(e){alert(e.join("\n"))})}.bind(this)),this._close()},_setDefaultSubscriptionName:function(){var e=this.state.presetFeature!==null?this.state.presetFeature:this.state.features[0],t=e.attributes.WRI_label||e.attributes.Name||e.attributes.NAME||e.attributes.Mill_name||"";this.setState({subscriptionName:t.substr(0,n.MAX_INPUT_CHARS)})}}),function(){return e.renderComponent(new p,u.byId(m.mount))}}),define("analysis/Query",["dojo/Deferred","dojo/_base/array","esri/tasks/query","esri/graphicsUtils","esri/tasks/QueryTask","esri/tasks/StatisticDefinition","analysis/config","map/MapModel"],function(e,t,n,r,i,s,o,u){"use strict";return{getSetupData:function(){this.getAdminUnitData()},getAdminUnitData:function(){function a(e){var n=[];n.push({label:"None",value:"NONE"}),t.forEach(e.features,function(e){n.push({label:e.attributes[r.labelValueField],value:e.attributes[r.labelValueField]})}),u.set("allCountries",n)}var e=new n,r=o.adminUnit.countriesQuery,i;i=new s,i.statisticType=r.statistic.statisticType,i.onStatisticField=r.statistic.onStatisticField,i.outStatisticFieldName=r.statistic.outStatisticFieldName,e.where=r.where,e.returnGeometry=!1,e.outFields=r.outFields,e.orderByFields=r.orderBy,e.outStatistics=[i],e.groupByFieldsForStatistics=r.groupBy,this._query(r.url,e,a,this._queryErrorHandler)},getLowLevelAdminUnitData:function(t){function c(e){e.features.length>0&&(f=a._formatData(s,e.features),r.resolve(f))}var r=new e,i=new n,s=o.adminUnit.lowLevelUnitsQuery,u={},a=this,f=[],l;return i.where=s.whereField+" = '"+t+"' AND "+s.requiredField+" IS NOT NULL",i.returnGeometry=!1,i.outFields=s.outFields,i.orderByFields=s.orderBy,this._query(s.url,i,c,function(e){r.resolve([]),a._queryErrorHandler(e)}),r.promise},getFeaturesByGroupName:function(t,r){var i=new e,s=new n,o=this;return s.where=t.requiredField+" = '"+r+"'",s.geometryPrecision=0,s.returnGeometry=!0,s.outFields=["*"],this._query(t.url,s,function(e){e.features.length>0?i.resolve(e.features):i.resolve([])},function(e){i.resolve([]),o._queryErrorHandler(e)}),i.promise},getFeaturesByGroupNameAndCountry:function(t,r,i){var s=new e,o=new n,u=this;return o.where=t.requiredField+" = '"+r+"'"+" AND NAME_0 = '"+i+"'",o.geometryPrecision=0,o.returnGeometry=!0,o.outFields=["*"],this._query(t.url,o,function(e){e.features.length>0?s.resolve(e.features):s.resolve([])},function(e){s.resolve([]),u._queryErrorHandler(e)}),s.promise},getMillByEntityId:function(t){var r=new e,i=new n,s=this;return i.where="Entity_ID = '"+t+"'",i.geometryPrecision=2,i.returnGeometry=!0,i.outFields=["*"],this._query(o.millPoints.url,i,function(e){e.features.length===1?r.resolve(e.features[0]):r.resolve(!1)},function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getFeatureById:function(t,r){var i=new e,s=new n,o=this;return s.where="OBJECTID = "+r,s.geometryPrecision=0,s.returnGeometry=!0,s.outFields=["*"],this._query(t,s,function(e){e.features.length===1&&i.resolve(e.features[0])},function(e){i.resolve(!1),o._queryErrorHandler(e)}),i.promise},getFeaturesByScheme:function(t,r){function l(e){e.features.length>0&&(f=a._formatData(i,e.features),s.resolve(f))}var i=o.certifiedArea.schemeQuery,s=new e,u=new n,a=this,f=[];return u.where=i.whereField+" = '"+t+"' AND "+i.secondaryWhereField+" = '"+r+"'",u.returnGeometry=!1,u.outFields=i.outFields,u.orderByFields=i.orderBy,this._query(i.url,u,l,function(e){s.resolve(!1),a._queryErrorHandler(e)}),s.promise},getMillPointData:function(){function a(e){e.features.length>0&&(u=s._formatData(t,e.features),r.resolve(u))}var t=o.millPoints,r=new e,i=new n,s=this,u=[];return i.where="1 = 1",i.returnGeometry=!1,i.outFields=t.outFields,i.orderByFields=t.orderBy,this._query(t.url,i,a,function(e){r.resolve(!1),s._queryErrorHandler(e)}),r.promise},getFeaturesByCommodity:function(t){function l(e){e.features.length>0&&(a=u._formatData(r,e.features),i.resolve(a))}var r=o.commercialEntity.commodityQuery,i=new e,s=new n,u=this,a=[],f;return f=t==="Mining concession"?r.whereField+" = '"+t+"'":r.whereField+" = '"+t+"'",s.where=f,s.returnGeometry=!1,s.outFields=r.outFields,s.orderByFields=r.orderBy,this._query(r.url,s,l,function(e){i.resolve(!1),u._queryErrorHandler(e)}),i.promise},zoomToFeatures:function(e,t){var i=new n,s;i.where=e.whereField+" = '"+t+"'",i.maxAllowableOffset=3e3,i.returnGeometry=!0,i.geometryPrecision=0,this._query(e.url,i,function(e){e.features.length>0&&(s=r.graphicsExtent(e.features),app.map.setExtent(s,!0))},this._queryErrorHandler)},_formatData:function(e,n){var r={},i=[],s,u;t.forEach(n,function(t){u=t.attributes,s=u[e.requiredField]||o.noNameField,r.hasOwnProperty(s)?r[s].children.push({label:u[e.labelField],value:u[e.valueField]}):(r[s]={label:s,value:u[e.valueField],children:[]},r[s].children.push({label:u[e.labelField],value:u[e.valueField]}))});for(var a in r)a!==o.noNameField&&i.push(r[a]);return r[o.noNameField]&&i.push(r[o.noNameField]),i},_query:function(e,t,n,r){var s=new i(e);s.execute(t,n,r)},_queryErrorHandler:function(e){console.error(e)}}}),define("utils/AlertsHelper",["lodash","dojo/fx","dojo/_base/fx","dojo/Deferred","components/alertsForm/AlertsForm","components/alertsDialog/alertsDialog","analysis/WizardStore","analysis/Query","analysis/config","map/config"],function(e,t,n,r,i,s,o,u,a,f){var l,c,h=a.STORE_KEYS,p={"Logging concession":10,"Mining concession":26,"Wood fiber plantation":28,"Oil palm concession":32,"RSPO Oil palm concession":27},d=!1,v,m,g,y,b=this;return v=function(){c=c||new s},m=function(e){var t,r=app.map.extent.getCenter();return e=e||0,duration=500,n.animateProperty({node:document.getElementById("alerts-form-container"),properties:{width:e},duration:duration,onEnd:function(){d=!d}})},_toggle=function(){return o.set(h.selectedCustomFeatures,[]),d?m(0):m(460)},_getFeatureFromPopup=function(t){var n,i=t.target,s=i.dataset?i.dataset.type:i.getAttribute("data-type"),o=i.dataset?i.dataset.label:i.getAttribute("data-label"),a=i.dataset?i.dataset.id:i.getAttribute("data-id"),l,c,h=this;s==="AdminBoundary"?(c=f.adminUnitsLayer.layerId,l=f.adminUnitsLayer.url+"/"+c):s==="CertScheme"?(c=f.commercialEntitiesLayer.layerId,l=f.commercialEntitiesLayer.url+"/"+c):s==="MillPoint"?n=u.getMillByEntityId(a):s==="WDPA"?(c=f.palHelper.layerId,l=f.palHelper.url+"/"+c):s==="CustomGraphic"?(n=new r,c=app.map.getLayer(f.customGraphicsLayer.id),n.resolve(e.find(c.graphics,function(e){return e.attributes.WRI_ID===parseInt(a)})||!1)):p[s]!==undefined&&(c=p[s],l=f.oilPerm.url+"/"+c);if(n===undefined&&l!==undefined)n=u.getFeatureById(l,a);else if(n===undefined)throw new Error("Could not identify feature from event data.");return n},o.registerCallback(h.alertsDialogActive,v),{toggleAlertsForm:function(){return l=l||new i({},"alerts-form"),_toggle()},isOpen:function(){return d},subscribeFromPopup:function(e){var t=e.target,n=(t.dataset?t.dataset.type:t.getAttribute("data-type"))==="CustomGraphic";b._getFeatureFromPopup(e).then(function(e){if(!e)throw new Error("Could not identify feature from event data.");o.set(h.alertsDialogActive,!0),o.set(h.selectedCustomFeatures,n?[e]:[]),o.set(h.selectedPresetFeature,n?null:e)}),app.map.infoWindow.hide()}}}),define("components/wizard/StepOne",["react","analysis/config","analysis/WizardStore"],function(e,t,n){function h(){return{completed:!0,selectedOption:n.get(c.areaOfInterest)||a.id,previousAreaOfInterest:undefined}}var r=t.stepOne,i=r.title,s=r.description,o=r.option1,u=r.option2,a=r.option3,f=r.option4,l=r.option5,c=t.STORE_KEYS;return e.createClass({getInitialState:function(){return h()},componentDidMount:function(){n.set(c.areaOfInterest,a.id),n.registerCallback(c.areaOfInterest,this.areaOfInterestUpdated)},areaOfInterestUpdated:function(){var e=n.get(c.areaOfInterest);this.setState({selectedOption:e})},componentWillReceiveProps:function(e){if(e.isResetting){var t=h();this.replaceState(t)}},render:function(){return e.DOM.div({className:"step"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-title"},i),e.DOM.p({className:"step-one-main-description"},s),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:o.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===o.id}),e.DOM.label({htmlFor:o.id},o.label),e.DOM.p({className:"step-one-option-description"},o.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:u.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===u.id}),e.DOM.label({htmlFor:u.id},u.label),e.DOM.p({className:"step-one-option-description"},u.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:a.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===a.id}),e.DOM.label({htmlFor:a.id},a.label),e.DOM.p({className:"step-one-option-description"},a.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:f.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===f.id}),e.DOM.label({htmlFor:f.id},f.label),e.DOM.p({className:"step-one-option-description"},f.description)),e.DOM.div({className:"s1-radio-container"},e.DOM.input({id:l.id,type:"radio",onChange:this._changeSelection,name:"first-step",checked:this.state.selectedOption===l.id}),e.DOM.label({htmlFor:l.id},l.label),e.DOM.p({className:"step-one-option-description"},l.description))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"next-button-container",onClick:this._moveOn},e.DOM.span({className:"next-button"},"Next"))))},_changeSelection:function(e){n.set(c.areaOfInterest,e.target.id)},_resetSelectedFeatures:function(){var e=this.state.previousAreaOfInterest||!1,t=n.get(c.areaOfInterest);e&&e!==t?n.set(c.selectedCustomFeatures,[]):this.setState({previousAreaOfInterest:t})},_moveOn:function(){this._resetSelectedFeatures(),n.set(c.userStep,n.get(c.userStep)+1)}})}),define("map/CoordinatesModal",["map/config","map/Symbols","utils/GeoHelper","analysis/config","analysis/WizardStore","dojo/on","dojo/dom-class","esri/graphic","esri/geometry/Point"],function(e,t,n,r,i,s,o,u,a){"use strict";var f,l=r.STORE_KEYS,c={toggle:function(){o.toggle("coordinates-modal","active"),f?(f.remove(),f=undefined):f=s.once(document.querySelector("#coordinates-modal .close-icon"),"click",this.toggle)},close:function(){return f&&(f.remove(),f=undefined),o.remove("coordinates-modal","active")},resetForm:function(){document.getElementById("coordsModalLatitiude").value="",document.getElementById("coordsModalLongitude").value=""},savePoint:function(){var t=parseFloat(document.getElementById("coordsModalLatitiude").value),r=parseFloat(document.getElementById("coordsModalLongitude").value),s=e.coordinatesDialog.errors,o=n.nextCustomFeatureId(),u={},a=[],f;(t===""||isNaN(t)||t>90||t<-90)&&a.push(s.invalidLatitude),(r===""||isNaN(r)||r>180||r<-180)&&a.push(s.invalidLongitude);if(a.length>0){alert(a.join("\n"));return}u[e.uploader.labelField]="ID - "+o,u.WRI_ID=o,u.isRSPO=!1,f=n.generatePointGraphicFromGeometric(r,t,u),i.set(l.customFeatures,i.get(l.customFeatures).concat([f])),this.resetForm(),this.close()}};return c}),define("components/wizard/NestedList",["react"],function(e){function n(){return{filter:""}}var t=e.createClass({propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.string.isRequired,click:e.PropTypes.func.isRequired,filter:e.PropTypes.string.isRequired},render:function(){var t=this.props.activeListGroupValue!=null&&this.props.activeListGroupValue==this.props.value;if(this.props.filter===""){var n=t?"active":"";return e.DOM.div({className:"wizard-list-item"},e.DOM.span({"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label),this.props.children?this.props.children.map(this._childrenMapper,this):null)}var n=t?"active":"";if(this._searchChildrenForMatches(this.props.children,this.props.filter))return e.DOM.div({className:"wizard-list-item"},e.DOM.span({"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label),this.props.children?this.props.children.map(this._childrenMapper,this):null);var r=this.props.label.toLowerCase(),n="wizard-list-item"+(r.search(this.props.filter)>-1?"":" hidden")+(t?" active":"");return e.DOM.div({className:n},e.DOM.span({"data-value":this.props.value,"data-type":"group",onClick:this._click,className:n},this.props.label))},_searchChildrenForMatches:function(e,t){return e.some(function(e){return e.label.toLowerCase().search(t)>-1?!0:!1})},_childrenMapper:function(t){var n=t.label.toLowerCase(),r="wizard-list-child-item"+(n.search(this.props.filter)>-1?"":" hidden");return this.props.activeListItemValues&&this.props.activeListItemValues.indexOf(t.value)!=-1&&(r+=" active"),e.DOM.div({className:r},e.DOM.span({"data-value":t.value,"data-type":"individual",onClick:this._click},t.label))},_click:function(e){this.props.click(e.target)}}),r=e.createClass({getInitialState:function(){return n()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(n())},render:function(){return e.DOM.div({className:"nested-list"},e.DOM.div({className:"searchBox relative"+(this.props.data.length>0?"":" hidden")},e.DOM.div({className:"nested-list-search-icon"}),e.DOM.input({placeholder:this.props.placeholder,type:"text",value:this.state.filter,onChange:this._setFilter})),e.DOM.div({className:"list-container "+(this.state.filter!==""?"filtered":"")},this.props.data.map(this._mapper,this)))},_mapper:function(e){return new t({label:e.label||"No Name",value:e.value,click:this.props.click,children:e.children,activeListItemValues:this.props.activeListItemValues,activeListGroupValue:this.props.activeListGroupValue,filter:this.state.filter})},_setFilter:function(e){this.setState({filter:e.target.value.toLowerCase()})}});return r}),define("components/wizard/MillPoint",["react","map/config","dojo/topic","dojo/query","map/Uploader","dojo/dom-class","dojo/_base/array","analysis/Query","analysis/config","utils/GeoHelper","map/CoordinatesModal","analysis/WizardStore","components/wizard/NestedList","components/featureList/FeatureList"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){var d=a.millPoints,v=a.STORE_KEYS,m,g=function(){return{nestedListData:[],activeListItemValues:[],selectedCommodity:d.commodityOptions[0].value,showCustomFeaturesList:!1,selectedCustomFeatures:c.get(v.selectedCustomFeatures),customFeatures:y()}},y=function(){var e=c.get(v.customFeatures);return e.filter(function(e){return e.geometry.type==="point"})};return e.createClass({getInitialState:function(){return g()},componentDidMount:function(){m=c.get(v.userStep),c.registerCallback(v.userStep,this.userChangedSteps),c.registerCallback(v.customFeatures,this.customFeaturesUpdated),c.registerCallback(v.selectedCustomFeatures,this.selectedCustomFeaturesUpdated)},shouldComponentUpdate:function(){return c.get(v.userStep)===2&&c.get(v.areaOfInterest)===a.stepOne.option5.id},customFeaturesUpdated:function(){var e=y();this.setState({customFeatures:e})},selectedCustomFeaturesUpdated:function(){var e=c.get(v.selectedCustomFeatures);this.setState({selectedCustomFeatures:e})},userChangedSteps:function(){var e=c.get(v.areaOfInterest),r=c.get(v.userStep);e==="millPointOption"&&r===2&&this.state.nestedListData.length===0&&this._loadMillPoints();if(e==="millPointOption"&&m===1&&r===2){var i=app.map.getLayer(t.mill.id);i&&(i.visible||(n.publish("showMillPoints"),n.publish("toggleItemInLayerList","mill"))),this.setState({activeListItemValues:[]})}m=c.get(v.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(g())},render:function(){return e.DOM.div({className:"mill-point",id:"mill-point"},e.DOM.div({className:"mill-list-options back-light-gray relative"},e.DOM.div({className:"mill-list-toggle-indicator mill-"+(this.state.showCustomFeaturesList?"custom-list":"known-list")}),e.DOM.div({className:"relative select-mill-list-button inline-block "+(this.state.showCustomFeaturesList?"":"active"),id:"selectFromList",onClick:this.toggleList},d.selectFromListButton),e.DOM.div({className:"relative select-mill-list-button inline-block "+(this.state.showCustomFeaturesList?"active":""),id:"selectFromCustom",onClick:this.toggleList},d.selectFromCustomListButton)),e.DOM.div({className:this.state.showCustomFeaturesList?"hidden":""},e.DOM.p({className:"instructions"},d.selectInstructions),e.DOM.div({className:"select-container"},e.DOM.select({id:"mill-select",className:"mill-select",value:this.state.selectedCommodity,onChange:this._loadMillPoints},d.commodityOptions.map(this._selectMapper,this))),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")}," ",d.listInstructions," "),h({data:this.state.nestedListData,click:this._millPointSelected,placeholder:"Search mill points...",activeListItemValues:this.state.activeListItemValues,isResetting:this.props.isResetting})),e.DOM.div({className:this.state.showCustomFeaturesList?"":"hidden"},e.DOM.p({className:"instructions"},d.instructions),e.DOM.div({className:"drawing-tools"},e.DOM.div({className:"drawing-tool-button",id:"enterCoords",onClick:this.drawToolClicked},d.enterCoordinatesButton),e.DOM.div({className:"drawing-tool-button",id:"upload",onClick:this.drawToolClicked},d.uploadButton)),p({features:this.state.customFeatures,selectedFeatures:this.state.selectedCustomFeatures,rspoChecks:!0,showClear:!0})))},_selectMapper:function(t){return e.DOM.option({value:t.value}," ",t.label," ")},toggleList:function(e){var t=e.target.id,n;n=t==="selectFromCustom"?!0:!1,n||(l.close(),i.close()),this.state.showCustomFeaturesList!==n&&(this.setState({showCustomFeaturesList:n}),this._localReset())},drawToolClicked:function(e){var t=e.target.id;switch(t){case"enterCoords":i.close(),l.toggle();break;case"upload":l.close(),i.toggle()}},_loadMillPoints:function(){this.setState({isLoading:!0});var e=this;u.getMillPointData().then(function(t){t&&e.setState({nestedListData:t,isLoading:!1})})},_millPointSelected:function(e){var n=e.getAttribute("data-type"),r=e.getAttribute("data-value"),i=this.state.selectedCustomFeatures,s,l,h=this,p,d,m,g;n!=="group"&&r&&(l=app.map.getLayer(t.wizardGraphicsLayer.id),l&&u.getMillByEntityId(r).then(function(t){g=e.innerText||e.innerHTML;if(h.state.activeListItemValues.indexOf(r)!=-1){var n=h.state.activeListItemValues.indexOf(r);s=h.state.activeListItemValues.slice(0),s.splice(n,1),h.setState({activeListItemValues:s}),d=t.attributes.OBJECTID,o.forEach(i,function(e,t){d===e.attributes.OBJECTID&&(p=t)}),i.splice(p,1),o.some(l.graphics,function(e){return e.attributes.OBJECTID===d?(l.remove(e),!0):!1})}else t.attributes[a.stepTwo.labelField]=g,m=f.preparePointAsPolygon(t),m=f.applySelectionSymbolToFeature(m),l.add(m),s=h.state.activeListItemValues.concat([r]),h.setState({activeListItemValues:s}),i.push(m);i.length>0?c.set(v.selectedCustomFeatures,i):c.set(v.selectedCustomFeatures,[])}))},_localReset:function(){var e=app.map.getLayer(t.wizardGraphicsLayer.id);c.set(v.selectedCustomFeatures,[]),e.clear(),this.setState({activeListItemValues:[]})}})}),define("components/wizard/AdminUnit",["react","map/config","map/Symbols","map/MapModel","analysis/Query","analysis/config","analysis/WizardStore","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,i,s,o,u,a,f,l){function d(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1}}var c=s.adminUnit,h=s.STORE_KEYS,p,v=e.createClass({getInitialState:function(){return d()},componentDidMount:function(){r.applyTo("admin-unit"),o.registerCallback(h.userStep,this.userChangedSteps),p=o.get(h.userStep)},shouldComponentUpdate:function(){return o.get(h.userStep)===2&&o.get(h.areaOfInterest)===s.stepOne.option2.id},userChangedSteps:function(){var e=o.get(h.areaOfInterest),t=o.get(h.userStep);if(e==="adminUnitOption"&&t===2){var n=document.getElementById("country-select").value;n!=="NONE"&&p===1&&a.publish("setAdminBoundariesDefinition",n)}p=o.get(h.userStep)},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(d()),document.getElementById("country-select").value="NONE")},render:function(){return e.DOM.div({className:"admin-unit",id:"admin-unit"},e.DOM.p({className:"instructions"},c.instructions),e.DOM.div({className:"select-container"},e.DOM.select({id:"country-select",className:"country-select",onChange:this._loadAdminUnits,"data-bind":"options: allCountries, optionsText: 'label', optionsValue: 'value'"}),e.DOM.span({className:"loading-wheel "+(this.state.isLoading?"":"hidden")})),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},c.instructionsPartTwo),new u({data:this.state.nestedListData,click:this._lowLevelAdminUnitClick,placeholder:"Search administrative units...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_loadAdminUnits:function(e){var t=e.target.value,n=this;if(t==="NONE"){a.publish("setAdminBoundariesDefinition"),this.setState({nestedListData:[]});return}this.setState({isLoading:!0}),a.publish("setAdminBoundariesDefinition",t),i.getLowLevelAdminUnitData(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_lowLevelAdminUnitClick:function(e){var r=e.dataset?e.dataset.type:e.getAttribute("data-type"),u=e.dataset?e.dataset.value:e.getAttribute("data-value"),a,p=this,d;if(r==="group"){var v=[];f(".wizard-list-child-item span",e.parentNode).forEach(function(e){v.push(parseInt(e.dataset?e.dataset.value:e.getAttribute("data-value")))}),p.setState({activeListItemValues:v,activeListGroupValue:parseInt(u)}),i.getFeaturesByGroupNameAndCountry(c.countryBoundaries,e.innerHTML,document.getElementById("country-select").value).then(function(r){a=app.map.getLayer(t.wizardGraphicsLayer.id),r&&a&&(a.clear(),r.forEach(function(t){t.attributes[s.stepTwo.labelField]=e.innerHTML||e.innerText,d=new l(t.geometry,n.getHighlightPolygonSymbol(),t.attributes),a.add(d)}),o.set(h.selectedCustomFeatures,r))})}else u&&(p.setState({activeListItemValues:[parseInt(u)],activeListGroupValue:null}),i.getFeatureById(c.lowLevelUnitsQuery.url,u).then(function(r){a=app.map.getLayer(t.wizardGraphicsLayer.id),r.attributes[s.stepTwo.labelField]=e.innerText||e.innerHTML,d=new l(r.geometry,n.getHighlightPolygonSymbol(),r.attributes),a&&(a.clear(),a.add(d),o.set(h.selectedCustomFeatures,[d]))}))},_countrySelectMapper:function(t){return e.DOM.option({value:t.value},t.label)}});return v}),define("components/wizard/CustomArea",["react","analysis/config","analysis/WizardStore","esri/graphic","esri/toolbars/draw","dojo/dom","dojo/query","dojo/dom-class","map/config","map/MapModel","map/Uploader","map/Symbols","utils/GeoHelper","components/featureList/FeatureList"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){function g(){return{graphics:n.get(m.customFeatures),selectedGraphics:n.get(m.selectedCustomFeatures)}}var d,v,m=t.STORE_KEYS;return e.createClass({getInitialState:function(){return g()},componentDidMount:function(){d=new i(app.map),d.on("draw-end",this._drawComplete),n.registerCallback(m.customFeatures,this.graphicsListUpdated),n.registerCallback(m.selectedCustomFeatures,function(){this.setState({selectedGraphics:n.get(m.selectedCustomFeatures)})}.bind(this)),this.setState(g())},shouldComponentUpdate:function(){return n.get(m.userStep)===2&&n.get(m.areaOfInterest)===t.stepOne.option1.id},graphicsListUpdated:function(){var e=n.get(m.customFeatures);this.setState({graphics:e})},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(g()),this._deactivateToolbar(),this._removeActiveClass())},render:function(){return e.DOM.div({className:"custom-area"},e.DOM.p({className:"drawing-instructions"},t.customArea.instructions),e.DOM.div({className:"drawing-tools"},e.DOM.div({className:"drawing-tool-button",onClick:this._activateToolbar,id:"draw-freehand"},t.customArea.freehandLabel),e.DOM.div({className:"drawing-tool-button",onClick:this._activateToolbar,id:"draw-polygon"},t.customArea.polyLabel),e.DOM.div({className:"drawing-tool-button",onClick:l.toggle.bind(l),id:"draw-upload"},t.customArea.uploadLabel)),e.DOM.div({className:"custom-graphics-list-container"},e.DOM.div({className:"drawing-instructions"},t.customArea.instructionsPartTwo),new p({features:this.state.graphics,selectedFeatures:this.state.selectedGraphics})))},_activateToolbar:function(e){this._removeActiveClass(),this.setState({showUploadTools:!1});if(v===e.target.id){this._deactivateToolbar();return}v=e.target.id;switch(e.target.innerHTML){case t.customArea.freehandLabel:d.activate(i.FREEHAND_POLYGON);break;case t.customArea.polyLabel:d.activate(i.POLYGON);break;default:}u.add(e.target,"active"),f.set("drawToolsEnabled",!0)},_drawComplete:function(e){this._removeActiveClass(),this._deactivateToolbar();if(!e.geometry)return;var i=h.nextCustomFeatureId(),s={WRI_ID:i},o;s[t.stepTwo.labelField]="ID - "+i+": Custom drawn feature",o=new r(e.geometry,c.getPolygonSymbol(),s),n.set(m.customFeatures,n.get(m.customFeatures).concat([o]))},_deactivateToolbar:function(){d.deactivate(),v=undefined,f.set("drawToolsEnabled",!1)},_removeActiveClass:function(){o(".drawing-tools .drawing-tool-button").forEach(function(e){u.remove(e,"active")})}})}),define("components/wizard/CertifiedArea",["react","map/config","map/Symbols","analysis/Query","analysis/config","analysis/WizardStore","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,i,s,o,u,a,f){function p(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1,selectedCommodity:l.commodityOptions[0].value,selectedScheme:l.certificationOptions[1].value}}var l=i.certifiedArea,c=i.STORE_KEYS,h;return e.createClass({getInitialState:function(){return p()},componentDidMount:function(){s.registerCallback(c.userStep,this.userChangedSteps),h=s.get(c.userStep)},shouldComponentUpdate:function(){return s.get(c.userStep)===2&&s.get(c.areaOfInterest)===i.stepOne.option4.id},userChangedSteps:function(){var e=s.get(c.areaOfInterest),t=s.get(c.userStep);if(e==="certifiedAreaOption"&&this.state.selectedScheme!=="NONE"&&t===2&&h===1){u.publish("setCertificationSchemeDefinition",this.state.selectedScheme);if(this.state.nestedListData.length===0){var n={target:{value:l.certificationOptions[1].value}};this._loadFeatures(n)}}h=s.get(c.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(p())},render:function(){var t=s.get(c.areaOfInterest),n=s.get(c.userStep);if(n===2&&t==="certifiedAreaOption"){switch(this.state.selectedCommodity){case"Oil palm concession":u.publish("filterConcessionsLegendItems",2)}this.state.selectedCommodity==="NONE"?u.publish("hideConcessionsLegend"):u.publish("showConcessionsLegend")}return e.DOM.div({className:"certified-area"},e.DOM.p({className:"instructions"},l.instructions),e.DOM.select({className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._updateCommodity},l.commodityOptions.map(this._selectMapper,this)),e.DOM.p({className:"instructions"},l.instructionsPartTwo),e.DOM.select({className:"certification-scheme-select",value:this.state.selectedScheme,onChange:this._loadFeatures},l.certificationOptions.map(this._selectMapper,this)),e.DOM.span({className:"loading-wheel "+(this.state.isLoading?"":"hidden")}),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},l.instructionsPartThree),new o({data:this.state.nestedListData,click:this._schemeClicked,placeholder:"Search certified areas...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.DOM.option({value:t.value},t.label)},_updateCommodity:function(e){this.setState({selectedCommodity:e.target.value})},_updateScheme:function(e){this.setState({selectedScheme:e,isLoading:!0})},_loadFeatures:function(e){var t=e.target.value,n=this;if(t==="NONE"){u.publish("setCertificationSchemeDefinition"),this.setState({nestedListData:[],selectedScheme:t});return}this._updateScheme(t),u.publish("setCertificationSchemeDefinition",t),r.getFeaturesByScheme(t,this.state.selectedCommodity).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_schemeClicked:function(e){var o=e.dataset?e.dataset.type:e.getAttribute("data-type"),u=e.dataset?e.dataset.value:e.getAttribute("data-value"),h,p=this,d;if(o==="group"){var v=[];a(".wizard-list-child-item span",e.parentNode).forEach(function(e){v.push(parseInt(e.dataset?e.dataset.value:e.getAttribute("data-value")))}),p.setState({activeListItemValues:v,activeListGroupValue:parseInt(u)}),r.getFeaturesByGroupName(l.groupQuery,e.innerHTML).then(function(r){h=app.map.getLayer(t.wizardGraphicsLayer.id),r&&h&&(h.clear(),r.forEach(function(t){t.attributes[i.stepTwo.labelField]=e.innerText||e.innerHTML,d=new f(t.geometry,n.getHighlightPolygonSymbol(),t.attributes),h.add(d)}),s.set(c.selectedCustomFeatures,r))})}else u&&(p.setState({activeListItemValues:[parseInt(u)],activeListGroupValue:null}),r.getFeatureById(l.schemeQuery.url,u).then(function(r){r.attributes[i.stepTwo.labelField]=e.innerText||e.innerHTML,d=new f(r.geometry,n.getHighlightPolygonSymbol(),r.attributes),h=app.map.getLayer(t.wizardGraphicsLayer.id),h&&(h.clear(),h.add(d),s.set(c.selectedCustomFeatures,[d]))}))}})}),define("components/wizard/CommercialEntity",["react","map/config","map/Symbols","analysis/Query","analysis/config","analysis/WizardStore","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,i,s,o,u,a,f){function p(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1,selectedCommodity:l.commodityOptions[0].value}}var l=i.commercialEntity,c=i.STORE_KEYS,h;return e.createClass({getInitialState:function(){return p()},componentDidMount:function(){s.registerCallback(c.userStep,this.userChangedSteps),h=s.get(c.userStep)},shouldComponentUpdate:function(){return s.get(c.userStep)===2&&s.get(c.areaOfInterest)===i.stepOne.option3.id},userChangedSteps:function(){var e=s.get(c.areaOfInterest),t=s.get(c.userStep);e==="commercialEntityOption"&&this.state.selectedCommodity!=="NONE"&&h===1&&t===2&&u.publish("setCommercialEntityDefinition",this.state.selectedCommodity),h=s.get(c.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(p())},render:function(){var t=s.get(c.areaOfInterest),n=s.get(c.userStep);if(n===2&&t==="commercialEntityOption"){switch(this.state.selectedCommodity){case"Logging concession":u.publish("filterConcessionsLegendItems",0);break;case"Mining concession":u.publish("filterConcessionsLegendItems",1);break;case"Oil palm concession":u.publish("filterConcessionsLegendItems",2);break;case"Wood fiber plantation":u.publish("filterConcessionsLegendItems",3)}this.state.selectedCommodity==="NONE"?u.publish("hideConcessionsLegend"):u.publish("showConcessionsLegend")}return e.DOM.div({className:"commercial-entity"},e.DOM.p({className:"instructions"},l.instructions),e.DOM.select({className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._loadFeatures},l.commodityOptions.map(this._selectMapper,this)),e.DOM.span({className:"loading-wheel "+(this.state.isLoading?"":"hidden")}),e.DOM.p({className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},l.instructionsPartTwo),new o({data:this.state.nestedListData,click:this._commodityClicked,placeholder:"Search commercial entities...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.DOM.option({value:t.value},t.label)},_loadFeatures:function(e){var t=e.target.value,n=this;if(t==="NONE"){u.publish("setCommercialEntityDefinition"),this.setState({nestedListData:[],selectedCommodity:t});return}this.setState({selectedCommodity:t,isLoading:!0}),u.publish("setCommercialEntityDefinition",t),r.getFeaturesByCommodity(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})})},_commodityClicked:function(e){var o=e.dataset?e.dataset.type:e.getAttribute("data-type"),u=e.dataset?e.dataset.value:e.getAttribute("data-value"),h,p=this,d;if(o==="group"){if(e.innerHTML===i.noNameField)return;var v=[];a(".wizard-list-child-item span",e.parentNode).forEach(function(e){v.push(parseInt(e.dataset?e.dataset.value:e.getAttribute("data-value")))}),p.setState({activeListItemValues:v,activeListGroupValue:parseInt(u)}),r.getFeaturesByGroupName(l.groupQuery,e.innerHTML).then(function(r){h=app.map.getLayer(t.wizardGraphicsLayer.id),r&&h&&(h.clear(),r.forEach(function(t){t.attributes[i.stepTwo.labelField]=e.innerText,d=new f(t.geometry,n.getHighlightPolygonSymbol(),t.attributes),h.add(d)}),s.set(c.selectedCustomFeatures,r))})}else u&&(p.setState({activeListItemValues:[parseInt(u)],activeListGroupValue:null}),r.getFeatureById(l.commodityQuery.url,u).then(function(r){r.attributes[i.stepTwo.labelField]=e.innerHTML||e.innerText,d=new f(r.geometry,n.getHighlightPolygonSymbol(),r.attributes),h=app.map.getLayer(t.wizardGraphicsLayer.id),h&&(h.clear(),h.add(d),s.set(c.selectedCustomFeatures,[d]))}))}})}),define("components/wizard/StepTwo",["react","analysis/config","analysis/WizardStore","components/wizard/MillPoint","components/wizard/AdminUnit","components/wizard/CustomArea","components/wizard/CertifiedArea","components/wizard/CommercialEntity"],function(e,t,n,r,i,s,o,u){function g(){return{completed:!1,currentSelectionLabel:y()}}function y(){var e=n.get(m.selectedCustomFeatures);return e.length>0?e.map(function(e){return e.attributes.WRI_label}).join(","):"none"}var a=t.stepTwo.title,f=t.stepTwo.customArea,l=t.stepTwo.adminUnit,c=t.stepTwo.millPoint,h=t.stepTwo.certArea,p=t.stepTwo.commArea,d=t.stepTwo.labelField,v={},m=t.STORE_KEYS;return v[f]="Create a custom area",v[l]="Administrative unit",v[c]="Mill point",v[h]="Certified area",v[p]="Commercial entity",e.createClass({getInitialState:function(){return g()},componentDidMount:function(){n.registerCallback(m.selectedCustomFeatures,this.analysisAreaUpdated)},analysisAreaUpdated:function(){var e=n.get(m.selectedCustomFeatures);e.length>0?this.setState({completed:!0,currentSelectionLabel:y()}):this.replaceState(g())},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(g())},render:function(){var d=n.get(m.areaOfInterest);return e.DOM.div({className:"step"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-title"},a+" - "+v[d]),e.DOM.div({className:"s2-tools "+(d!==c?"hidden":"")},new r(this.props)),e.DOM.div({className:"s2-tools "+(d!==l?"hidden":"")},new i(this.props)),e.DOM.div({className:"s2-tools "+(d!==f?"hidden":"")},new s(this.props)),e.DOM.div({className:"s2-tools "+(d!==h?"hidden":"")},new o(this.props)),e.DOM.div({className:"s2-tools "+(d!==p?"hidden":"")},new u(this.props))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"selected-analysis-area"},e.DOM.div({className:"current-selection-label"},t.stepTwo.currentFeatureText),e.DOM.div({className:"current-selection",title:this.state.currentSelectionLabel},this.state.currentSelectionLabel)),e.DOM.div({className:"next-button-container "+(this.state.completed?"":"disabled"),onClick:this._checkRequirements},e.DOM.span({className:"next-button"},"Next"))))},_checkRequirements:function(){this.state.completed&&n.set(m.userStep,n.get(m.userStep)+1)}})}),define("components/wizard/WizardCheckbox",["react","dojo/topic"],function(e,t){return e.createClass({propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.string.isRequired},getInitialState:function(){return{active:this.props.defaultChecked||!1}},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(this.getInitialState())},componentDidUpdate:function(e,t){this.props.change&&t.active!==this.state.active&&this.props.change(this.state.active)},render:function(){var t="wizard-checkbox"+(this.state.active?" active":"");return e.DOM.div({className:"wizard-checkbox-container"},e.DOM.div({className:t,"data-value":this.props.value},e.DOM.span({className:"custom-check",onClick:this._toggle},e.DOM.span({})),e.DOM.a({className:"wizard-checkbox-label",onClick:this._toggle},this.props.label),this.props.noInfoIcon?null:e.DOM.div({className:"layer-info-icon",onClick:this.showInfo})))},_toggle:function(){this.setState({active:!this.state.active})},showInfo:function(e){switch(this.props.value){case"peat":this.props.infoDivClass="forest-and-land-cover-peat-lands";break;case"treeDensity":this.props.infoDivClass="forest-and-land-cover-tree-cover-density";break;case"legal":this.props.infoDivClass="forest-and-land-cover-legal-classifications";break;case"protected":this.props.infoDivClass="conservation-protected-areas";break;case"carbon":this.props.infoDivClass="forest-and-land-cover-carbon-stocks";break;case"intact":this.props.infoDivClass="forest-and-land-cover-intact-forest-landscape";break;case"landCoverGlob":this.props.infoDivClass="forest-and-land-cover-land-cover-global";break;case"primForest":this.props.infoDivClass="forest-and-land-cover-primary-forest";break;case"suit":this.props.infoDivClass="land-use-oil-palm";break;case"rspo":this.props.infoDivClass="land-use-rspo-consessions";break;case"landCoverIndo":this.props.infoDivClass="forest-and-land-cover-land-cover-indonesia";break;case"landCoverAsia":this.props.infoDivClass="forest-and-land-cover-land-cover-south-east-asia";break;case"treeCoverLoss":this.props.infoDivClass="forest-change-tree-cover-change"}document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)}})}),define("components/wizard/StepThree",["react","analysis/config","analysis/WizardStore","components/wizard/WizardCheckbox"],function(e,t,n,r){function u(){return{completed:!1,currentSelectionLabel:a()}}function a(){var e=n.get(o.selectedCustomFeatures);return e.length>0?e.map(function(e){return e.attributes.WRI_label}).join(","):"none"}var i=t.stepThree,s=t.stepTwo.labelField,o=t.STORE_KEYS;return e.createClass({getInitialState:function(){return u()},componentDidMount:function(){n.registerCallback(o.selectedCustomFeatures,this.analysisAreaUpdated)},analysisAreaUpdated:function(){var e=n.get(o.selectedCustomFeatures);this.setState({currentSelectionLabel:a()})},componentDidUpdate:function(e){var t=n.get(o.areaOfInterest),r=n.get(o.userStep);t!=="millPointOption"&&e.currentStep===2&&r===3&&this._selectionMade()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(u())},shouldComponentUpdate:function(){return n.get(o.userStep)===3},render:function(){var s=n.get(o.areaOfInterest),u=n.get(o.selectedCustomFeatures),a=u.length>0&&u.some(function(e){return e.geometry.type==="point"});return e.DOM.div({className:"step select-analysis"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-three-top"},e.DOM.div({className:"step-title"},i.title),s===i.millPoint||s===i.customArea?this.createPointContent(a):null,r({label:i.suit.label,value:i.suit.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.DOM.p({className:"layer-description"},i.suit.description),r({label:i.rspo.label,value:i.rspo.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.DOM.p({className:"layer-description"},i.rspo.description),e.DOM.div({className:s==="millPointOption"?"":"hidden",style:{position:"relative"}},e.DOM.div({className:"coming-soon"},"Mill Point Risk Assessment Coming Soon!"),r({label:i.mill.label,value:i.mill.value,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.DOM.p({className:"layer-description"},i.mill.description)),e.DOM.div({className:"step-sub-header"},i.forestChange.label),e.DOM.p({className:"layer-description"},i.forestChange.description)),e.DOM.div({className:"checkbox-list"},i.checkboxes.map(this._mapper,this))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"selected-analysis-area"},e.DOM.div({className:"current-selection-label"},t.stepTwo.currentFeatureText),e.DOM.div({className:"current-selection",title:this.state.currentSelectionLabel},this.state.currentSelectionLabel)),e.DOM.div({onClick:this._proceed,className:"next-button-container "+(this.state.completed?"":"disabled")},e.DOM.span({className:"next-button"},"Perform Analysis"))))},_mapper:function(e){return r({label:e.label,value:e.value,change:this._selectionMade,isResetting:this.props.isResetting,defaultChecked:e.checked||!1,noInfoIcon:e.noInfoIcon||!1})},createPointContent:function(t){var r=n.get(o.areaOfInterest)===i.customArea,s=i.pointRadiusOptions.map(function(t){return e.DOM.option({value:t.value},t.label)});return t?e.DOM.div({className:"point-radius-select-container"},e.DOM.span({className:"instructions"},i.pointRadiusDescription),e.DOM.select({ref:"pointRadiusSelect",className:"point-radius-select"},s)):r?null:e.DOM.p({className:"sub-title"},i.knownMillsDisclaimer)},_selectionMade:function(e){this.setState({completed:this._checkRequirements})},_checkRequirements:function(){var e=!1,t=document.querySelectorAll(".select-analysis .wizard-checkbox.active"),r=n.get(o.areaOfInterest),i;if(t.length>0)if(t.length>1)e=!0;else{i=t[0].dataset?t[0].dataset.value:t[0].getAttribute("data-value");if(r==="millPointOption"||i!=="mill")e=!0}return e},_getPayload:function(){var e=document.querySelectorAll(".select-analysis .wizard-checkbox"),t=n.get(o.areaOfInterest),r={},i=this,s;return Array.prototype.forEach.call(e,function(e){s=e.dataset?e.dataset.value:e.getAttribute("data-value");if(t==="millPointOption"||s!=="mill")r[s]=e.className.search("active")>-1}),r},_proceed:function(){if(this.state.completed){var e=this._getPayload();n.set(o.analysisSets,e);var t=this.refs.pointRadiusSelect;if(t){var r=t.getDOMNode().value;n.set(o.analysisPointRadius,r)}this.props.callback.performAnalysis()}}})}),define("components/wizard/StepFive",["react","analysis/config","analysis/WizardStore"],function(e,t,n){function s(){return{completed:!0}}var r=t.stepFive,i=t.STORE_KEYS;return e.createClass({getInitialState:function(){return s()},render:function(){return e.DOM.div({className:"step"},e.DOM.div({className:"step-body"},e.DOM.div({className:"step-title"},r.title),e.DOM.div({className:"step-one-main-description"},e.DOM.p({},r.beginningText),e.DOM.ul({},r.firstList.map(this._listMapper)),e.DOM.p({},r.secondaryText),e.DOM.ul({},r.secondList.map(this._listMapper)))),e.DOM.div({className:"step-footer"},e.DOM.div({className:"next-button-container",onClick:this._moveOn},e.DOM.span({className:"next-button"},"Next"))))},_listMapper:function(t){return e.DOM.li({},t)},_paragraphMapper:function(t){return e.DOM.p({},t)},_moveOn:function(){var e=n.get(i.userStep)+1;n.set(i.userStep,n.get(i.userStep)+1)}})}),define("map/LayerController",["map/config","map/MapModel","dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","utils/Hasher","utils/Analytics","esri/InfoTemplate","esri/graphic","esri/graphicsUtils","esri/tasks/query","esri/tasks/QueryTask","esri/layers/RasterFunction","esri/layers/LayerDrawingOptions"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){return{toggleLayers:function(t){var n=app.map.getLayer(t.id);if(t.id===e.pal.id){this.updateZoomDependentLayer(t,e.palHelper,6);return}if(t.id===e.gain.id){this.updateZoomDependentLayer(t,e.gainHelper,13);return}if(t.id===e.suit.id){this.showSuitabilityLoader();var r="User toggled Custom Suitabiltiy Layer "+(n.visible?"on.":"off.");c.sendEvent("Event","toggle","Custom Suitability Layer",r)}n&&(n.setVisibility(!n.visible),this.refreshLegendWidget())},updateLayer:function(t){var n=e[t.key],r=app.map.getLayer(n.id),s=t.filter,u=[],a,l,h,p;i(".gfw .filter-list ."+s).forEach(function(t){a=t.dataset?t.dataset.layer:t.getAttribute("data-layer"),l=e[a],l&&l.id===r.id&&o.contains(t,"active")&&u.push(l.layerId)}),r&&(u.length>0?(r.setVisibleLayers(u),r.show()):r.hide(),this.refreshLegendWidget()),h=f.indexOf(u,n.layerId)>-1?"on.":"off.";switch(n){case e.oilPerm:p="User toggled Oil Palm Concessions layer "+h,c.sendEvent("Event","toggle","Oil Palm Concessions",p);break;case e.rspoPerm:p="User toggled RSPO Oil Palm Concessions layer "+h,c.sendEvent("Event","toggle","RSPO Oil Palm Concessions",p);break;case e.mill:p="User toggled RSPO Mills layer "+h,c.sendEvent("Event","toggle","RSPO Mills",p)}},showLayer:function(e){var t=app.map.getLayer(e.id);if(e.layerId!==undefined){this.updateDynamicLayer(e);return}t&&(t.visible||(t.show(),this.refreshLegendWidget()))},hideLayer:function(e){var t=app.map.getLayer(e.id);t&&t.visible&&(t.hide(),this.refreshLegendWidget())},updateDynamicLayer:function(e){var t=app.map.getLayer(e.id),n=[];t&&(n.push(e.layerId),t.setVisibleLayers(n),t.show(),this.refreshLegendWidget())},setWizardDynamicLayerDefinition:function(e,t){var n=app.map.getLayer(e.id),r=[],i;n&&(t!==undefined?(i=e.whereField+" = '"+t+"'",r[e.layerId]=i,n.setVisibleLayers([e.layerId],!0),n.setLayerDefinitions(r),n.show()):n.hide(),this.refreshLegendWidget())},setWizardMillPointsLayerDefinition:function(e){var t=app.map.getLayer(e.id);t&&(t.visible?t.hide():t.show())},setFiresLayerDefinition:function(t,n){var r=new Date,i=[],s,o,u,a;u=app.map.getLayer(e.fires.id),r.setDate(r.getDate()-1*t),o=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),a=t!=="7"?"ACQ_DATE > date '"+o+"'":"1 = 1";for(var f=0,l=e.fires.defaultLayers.length;f<l;f++)i[f]=a;u&&(s=n?[0,1]:[0,1,2,3],u.visibleLayers.length!==s.length&&u.setVisibleLayers(s),u.setLayerDefinitions(i),this.refreshLegendWidget())},setOverlaysVisibleLayers:function(){var t=[],n,r;for(var r in app.map._simpleLegends)app.map._simpleLegends[r].hide();i(".gfw .overlays-container .overlays-checkbox.selected").forEach(function(n){r=n.dataset?n.dataset.layer:n.getAttribute("data-layer"),t.push(e[r].layerId),app.map._simpleLegends[r]&&app.map._simpleLegends[r].show()}),n=app.map.getLayer(e.overlays.id),n&&(t.length===0?(t.push(-1),n.hide()):n.show(),n.setVisibleLayers(t),this.refreshLegendWidget())},updateImageServiceRasterFunction:function(e,t){var n=app.map.getLayer(t.id),r=[1],i,s;if(n){if(t.id==="FormaAlerts"){var o=e[0]===e[1]?e[1]+1:e[1]+2;s=[1,1,e[0]+1,o],r=[0,1]}else s=e[0]===e[1]?[e[0]+1,e[1]+1]:[e[0]+1,e[1]+2];i=this.getSpecificRasterFunction(t.colormap,s,r),n.setRenderingRule(i)}},getSpecificRasterFunction:function(e,t,n){return new g({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:e,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:t,OutputValues:n,AllowUnmatched:!1}}},variableName:"Raster"})},updateCustomSuitabilityLayer:function(n,r){var s=app.map.getLayer(e.suit.id),o=t.get("suitabilitySettings"),u=[];switch(r){case"peat-depth-slider":o.computeBinaryRaster[1].values=this._prepareSuitabilityJSON(0,n);break;case"conservation-area-slider":o.computeBinaryRaster[3].values=n;break;case"water-resource-slider":o.computeBinaryRaster[4].values=n;break;case"slope-slider":o.computeBinaryRaster[2].values=n;break;case"elevation-slider":o.computeBinaryRaster[5].values=n;break;case"rainfall-slider":o.computeBinaryRaster[6].values=parseInt(n[0])+","+parseInt(n[1]);break;case"soil-drainage-slider":o.computeBinaryRaster[7].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"soil-depth-slider":o.computeBinaryRaster[8].values=this._prepareSuitabilityJSON(n,7,[99]);break;case"soil-acid-slider":o.computeBinaryRaster[9].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"landcover-checkbox":u.push("11"),i("#environmental-criteria .suitable-checkbox input:checked").forEach(function(e){u.push(e.value)}),o.computeBinaryRaster[0].values=u.join(",");break;case"soil-type-checkbox":u.push("0"),u.push("6"),i("#environmental-criteria .suitable-checkbox-soil input:checked").forEach(function(e){u.push(e.value)}),o.computeBinaryRaster[10].values=u.join(",")}t.set("suitabilitySettings",o),s&&(s.refresh(),this.showSuitabilityLoader())},showSuitabilityLoader:function(){o.remove("suitability_loader","hidden")},hideSuitabilityLoader:function(){o.add("suitability_loader","hidden")},checkZoomDependentLayers:function(t){var n=e.pal,r=e.palHelper,i=e.gain,s=e.gainHelper;this.toggleZoomDependentLayer(t,n,r,6),this.toggleZoomDependentLayer(t,i,s,13)},toggleZoomDependentLayer:function(e,t,n,r){var i,s;i=app.map.getLayer(n.id),s=app.map.getLayer(t.id);if(s===undefined||i===undefined)return;if(!s.visible&&!i.visible)return;app.map.getLevel()>r?(i.show(),s.hide()):(i.hide(),s.show())},updateZoomDependentLayer:function(e,t,n){var r,i;r=app.map.getLayer(t.id),i=app.map.getLayer(e.id);if(i===undefined||r===undefined)return;i.visible||r.visible?(r.hide(),i.hide()):app.map.getLevel()>n?r.show():i.show(),this.refreshLegendWidget()},refreshLegendWidget:function(){var t=app.map.getLayer(e.legendLayer.id),n=e.tcd,r=e.forma,i=e.loss,s=e.gain,o=e.primForest,u=e.suit,l=[n,r,i,s,o,u],c=[],h=[],p,d=this;ldos=new y,ldos.transparency=100,f.forEach(l,function(e){p=app.map.getLayer(e.id),p&&p.visible&&(c.push(e.legendLayerId),h[e.legendLayerId]=ldos)}),c.length>0?(t.setVisibleLayers(c),t.setLayerDrawingOptions(h),t.visible||t.show()):t.hide(),a.byId("legend").refresh()},changeLayerTransparency:function(e,t,n){switch(t){case"image":this.setLayerOpacity(e,n);break;case"dynamic":this.setDynamicLayerTransparency(e,n);break;case"tiled":this.setLayerOpacity(e,n)}},setLayerOpacity:function(t,n){var r=app.map.getLayer(t.id);if(!r)return;r.setOpacity(n/100),r.id==="ProtectedAreas"&&this.setDynamicLayerTransparency(e.palHelper,n),r.id==="Gain"&&this.setLayerOpacity(e.gainHelper,n)},setDynamicLayerTransparency:function(e,t){var n=app.map.getLayer(e.id),r,i;if(!n)return;i=new y,i.transparency=100-t,r=n.layerDrawingOptions||[],e.layerId!==undefined?r[e.layerId]=i:e.defaultLayers&&f.forEach(e.defaultLayers,function(e){r[e]=i}),n.setLayerDrawingOptions(r)},setSelectedFeature:function(e){var t=new v,n=new m(e.url),r,i,s;t.objectIds=[e.objectId],t.outFields=["*"],t.returnGeometry=!0,n.execute(t).then(function(t){t.features&&t.features[0]&&(r=new p(t.features[0].geometry,null,t.features[0].attributes,null),r.layer=e.layer,i=d.graphicsExtent([r]).getCenter(),s={feature:r,value:r.attributes[t.displayFieldName]},r=e.templateFunction([s])[0],app.map.infoWindow.setFeatures([r]),app.map.infoWindow.show(i))})},_prepareSuitabilityJSON:function(e,t,n){var r=[];for(var i=e;i<=t;i++)r.push(i);return n&&(r=r.concat(n)),r.join(",")}}}),define("map/Controls",["dojo/dom","dojo/query","dojo/Deferred","dojo/_base/fx","dojo/_base/array","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/dom-construct","utils/Hasher","map/config","map/MapModel","map/LayerController","esri/request","esri/TimeExtent","esri/dijit/TimeSlider","dijit/form/CheckBox","dijit/layout/ContentPane","dijit/layout/AccordionContainer"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y){"use strict";var b=jQuery.noConflict(),w=!1,E=!1;return{toggleToolbox:function(e,t){if(e.id==="CustomSuitability"){var n=t==="show"?"block":"none";o.set(e.toolsNode,"display",n),this.resizeRangeSliders()}else this.hideAllToolboxes(),t==="show"&&o.set(e.toolsNode,"display","block")},hideAllToolboxes:function(){t(".gfw .layer-controls-container .toolbox").forEach(function(e){o.get(e,"display")==="block"&&o.set(e,"display","none")})},createDialogBox:function(e){require(["dijit/Dialog","dojo/_base/lang"],function(t,n){var r=n.clone(e),i=r.querySelector(".source_body");i.querySelector(".source_extended")&&i.removeChild(i.querySelector(".source_extended")),i.querySelector(".source_download")&&i.removeChild(i.querySelector(".source_download")),i.querySelector(".overview_title")&&i.querySelector(".source_summary").removeChild(i.querySelector(".overview_title")),r.querySelector(".source_header")&&r.removeChild(r.querySelector(".source_header")),r.getElementsByTagName("input").length&&r.removeChild(r.getElementsByTagName("input")[0]);var s=new t({title:e.querySelector(".source_title").innerHTML.toUpperCase(),style:"height: 600px; width: 600px; overflow-y: auto;",draggable:!1,hide:function(){s.destroy()}});s.onClose(function(){}),s.setContent(r.innerHTML),s.show()})},toggleFiresLayerOptions:function(n){var r=n.target?n.target:n.srcElement,i=r.dataset?r.dataset.filter:r.getAttribute("data-filter"),o;t(".fires_toolbox .toolbox-list li").forEach(function(e){s.remove(e,"selected")}),s.add(r,"selected"),o=e.byId("high-confidence").checked,h.setFiresLayerDefinition(i,o)},toggleFiresConfidenceLevel:function(e){var n=e.target?e.target:e.srcElement,r=n.checked,i,s;i=t(".fires_toolbox .toolbox-list li.selected")[0],s=i.dataset?i.dataset.filter:i.getAttribute("data-filter"),h.setFiresLayerDefinition(s,r)},toggleOverlays:function(t,n){t?s.toggle(t.currentTarget,"selected"):n&&s.toggle(e.byId(n),"selected"),h.setOverlaysVisibleLayers()},generateTimeSliders:function(){this.buildFormaSlider(),this.buildTreeCoverChangeSlider(),this.newTimeSlider()},buildFormaSlider:function(){function E(){function m(e,t,n,i,s){if(r.playing===!1)return;u=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var o=parseInt(t);a=(o+1)%12,f=u[a],$("#playLine3").html(f),$("#playLine3").css("left","+=61px"),$("#sliderProgressLine2").css("left","+=61px");var c=r[0].value.split(";"),p=c[1];t++,i=[s,t],i[0]=parseInt(i[0]),i[1]=parseInt(i[1]),h.updateImageServiceRasterFunction(i,l.forma),p>n&&(n=p);if(t==n||t==p||t>p){$("#newSlider2").html("&#9658"),r.playing=!1;return}r.playing==1&&setTimeout(function(){m(e,t,n,i,s)},1500)}$("#playLine3").hide(),$("#playLine3").css("left","0");if(r.playing===!0){r.playing=!1,$("#sliderProgressLine2").hide(),$("#newSlider2").html("&#9658");return}var e=r[0].value.split(";"),t=e[0],n=e[1],i=t,s=$("#irs-2 > span.irs > span.irs-slider.from.last").css("left"),o=$("#irs-2 > span.irs > span.irs-diapason").css("left");$("#playLine3").css("left",s),$("#sliderProgressLine2").css("left",s),s===undefined&&($("#playLine3").css("left",o),$("#playLine3").css("left","-=7.5pxpx"),$("#sliderProgressLine2").css("left",o),$("#sliderProgressLine2").css("left","-=7.5px")),$("#playLine3").css("left","+=53px");var u=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],a=t%12,f=u[a];$("#playLine3").html(f),$("#playLine3").show(),$("#sliderProgressLine2").css("left","+=82px"),$("#sliderProgressLine2").show(),$("#sliderProgressLine2").css("display","block");if(t==n){r.playing=!1;return}r.playing=!0,$("#newSlider2").html("&#x25A0");var c=[i,t];c[0]=parseInt(c[0]),c[1]=parseInt(c[1]),h.updateImageServiceRasterFunction(c,l.forma);var d=r.playing,v=setTimeout(function(){m(p,t,n,c,i)},1500)}var e=function(){var e=[],t=14,n,i;for(var s=1;s<d+2;s++){i=s%12,i==0&&(i=12),n=Math.floor((s-1)/12+t),e.push(i+"-"+n);var f=a.toDom('<div><g class="tick" transform="translate(120,0)" style="opacity: 1;"><line y2="0" x2="0"></line><text y="0" x="0" dy="0em"></text></g></div>');a.place(f,"yearDotContainer"),o.get(f);var v=s*56+25;v+="px",i===1?o.set(f,{position:"absolute",left:v,top:"17px","font-size":"150%",color:"black"}):o.set(f,{position:"absolute",left:v})}r.ionRangeSlider({type:"double",min:u,max:c,from:p,to:d,playing:!1,prettify:!1,values:e,onChange:function(e){p=e.fromNumber,d=e.toNumber,w(),$(".irs-single").hide(),p==d&&($(".irs-single").hide(),$(".irs-to").show()),p==e.max-1&&d==e.max&&($(".irs-single").hide(),$(".irs-from").show()),d==e.max&&p!=e.max&&$(".irs-diapason").css("width","+=7px"),d==e.max&&p==e.max&&$(".irs-diapason").css("width","-=8px"),$("#yearDotContainer > div:nth-child(13)").css("color","black"),$("#range2").ionRangeSlider("update");if(r.playing!=1){$("#sliderProgressLine2").hide(),$("#playLine3").hide();var t=[p,d];for(var n=1;n<e.max+2;n++){var i=$("#yearDotContainer > div:nth-child("+n+")");n<p+1||n>d?($(i.selector).css("color","grey"),$("#yearDotContainer > div:nth-child(1)").css("color","black")):$(i.selector).css("color","#a1ba42"),(p>12||d<12)&&$("#yearDotContainer > div:nth-child(13)").css("color","black"),p==1&&d==e.max-1&&$("#yearDotContainer > div:nth-child(1)").css("color","black")}$("#yearDotContainer > div:nth-child(25)").css("color","black"),h.updateImageServiceRasterFunction(t,l.forma)}}}),$(".irs-slider.to").css("left","790px"),$(".slider-container").show(),$("#formaAlertSlider").each(function(){var e=this,t=a.create("div",{id:"sliderProgressLine2"});a.place(t,e,"after");var n=a.create("div",{id:"playLine3"});a.place(n,e,"after")}),$(".irs-single").hide();var m=parseInt($("#irs-2 > span.irs > span.irs-from").css("left")),g=parseInt($("#irs-2 > span.irs > span.irs-slider.from.last").css("left")),y=790-g;isNaN(g)===!0&&(y=790-m),$(".irs-diapason").css("width",y+"px"),$(".irs-diapason").css("background-color","#a1ba42"),$("#yearDotContainer > div").css("color","#a1ba42");var b=$("#yearDotContainer > div:nth-child(13)").css("left"),E=$("#yearDotContainer > div:nth-child(13)").css("left");E=E.split("p"),E=E[0]-20+"px",$(".playLineFiller2 > div:nth-child(2)").css("left",E)},t=f.getLayers(),n=t.indexOf("forma")>-1;$(".extra-controls2 #newSlider2").click(function(){E()});var r=$(".gfw .toolbox .slider-container"),i=$(".js-from"),s=$(".js-to"),u="1-14",c,p="0",d,v=0,m=14,g=[],y;this.fetchFORMAAlertsLabels().then(function(t){if(t){d=t.maxValues[0]-t.minValues[0],c=d%12+1+"-"+(Math.floor(d/12)+14);for(var n=t.minValues[0],r=t.maxValues[0];n<=r;n++)y=n%12===0?12:n%12,n%12===0&&++v;var i=f.getLayers(),s=i.indexOf("forma")>-1;s&&e.call()}else console.log("fetching Forma labels failed!!")}),$("#master-layer-list > div > ul > li:nth-child(2)").click(function(){$("#playLine3").hide(),$("#sliderProgressLine2").hide();var t=$(this);setTimeout(function(){e.call()},300),$("#irs-2 > span.irs > span.irs-to").css("left","759px"),$("#irs-2 > span.irs > span.irs-to").html(c)}),i.on("change",function(){p=$(this).prop("value"),p<u&&(p=u),p>d&&(p=d),w(),b()}),s.on("change",function(){d=$(this).prop("value"),d>c&&(d=c),d<p&&(d=p),w(),b()});var b=function(){r.ionRangeSlider("update",{from:p,to:d})},w=function(){i.prop("value",p),s.prop("value",d)}},buildTreeCoverChangeSlider:function(){},newTimeSlider:function(){function p(){function p(t,n,r,i,s){if(e.playing===!1)return;$("#playLine2").css("left","+=61px"),$("#sliderProgressLine").css("left","+=61px");var o=e[0].value.split(";"),u=o[1];n++,$("#playLine2").html(n),i=[s-2001,n-2001],h.updateImageServiceRasterFunction(i,l.loss),u>r&&(r=u);if(n==r||n==u||n>u){i[1]-i[0]>8?($("#playLine2").css("left","-=2px"),$("#sliderProgressLine").css("left","-=2px")):i[1]-i[0]>4&&($("#playLine2").css("left","-=1x"),$("#sliderProgressLine").css("left","-=1px")),$("#newSlider").html("&#9658"),e.playing=!1;return}e.playing===!0&&setTimeout(function(){p(t,n,r,i,s)},1500)}$("#sliderProgressLine").hide(),$("#playLine2").hide(),$("#playLine2").css("left","0"),$("#sliderProgressLine").css("left","0");if(e.playing==1){e.playing=!1,$("#newSlider").html("&#9658");return}var t=e[0].value.split(";"),n=t[0],r=t[1],i=n,o=$(".irs-slider.from.last").css("left"),u=$("#irs-1 > span.irs > span.irs-slider.from").css("left");$("#playLine2").css("left",o),$("#sliderProgressLine").css("left",o);if(o==undefined||o=="0px"&&n!=2001)$("#playLine2").css("left",u),$("#sliderProgressLine").css("left",u);$("#playLine2").css("left","-=21.5px"),$("#playLine2").html(n),$("#playLine2").show(),$("#sliderProgressLine").css("left","+=7.5px"),$("#sliderProgressLine").show();if(n==r){e.playing=!1;return}e.playing=!0,$("#newSlider").html("&#x25A0");var a=[i-2001,n-2001];a[0]=parseInt(a[0]),a[1]=parseInt(a[1]),h.updateImageServiceRasterFunction(a,l.loss);var f=e.playing,c=setTimeout(function(){p(s,n,r,a,i)},1500)}$(".extra-controls #newSlider").click(function(){p()});var e=$(".js-range-slider"),t=$(".js-from"),n=$(".js-to"),r=2001,i=2013,s=2001,o=2013;$(".layer-list-item.forest-change").click(function(){var e=$(this);u.call(this);var t=$("#irs-1 > span.irs > span.irs-to").css("left"),n=t.slice(0,t.length-2);n*=1,o==2013?$(".irs-slider.to").css("left","730px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left")===undefined?$("#irs-1 > span.irs > span.irs-slider.to").css("left",n+8+"px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left",n+8+"px")}),$("#master-layer-list > div > ul > li.layer-list-item.forest-change.active > div").click(function(){var e=$("#irs-1 > span.irs > span.irs-to").css("left"),t=e.slice(0,e.length-2);t*=1,o==2013?$(".irs-slider.to").css("left","730px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left")===undefined?$("#irs-1 > span.irs > span.irs-slider.to").css("left",t+8+"px"):$("#irs-1 > span.irs > span.irs-slider.to.last").css("left",t+8+"px")});var u=function(){e.ionRangeSlider({type:"double",min:r,max:i,from:s,to:o,playing:!1,prettify:!1,onChange:function(t){s=t.fromNumber,o=t.toNumber,c(),s==o&&$(".irs-to").show(),$(".irs-single").hide();if(e.playing!==!0){$("#sliderProgressLine").hide(),$("#playLine2").hide();var n=[s-2001,o-2001];for(var r=1;r<13;r++){var i=$(".playLineFiller > div:nth-child("+r+")"),u=$(".container2 > div:nth-child("+r+")");r<=s-2e3||r>=o-2e3?$(i.selector).css("background-color","transparent"):$(i.selector).css("background-color","#a1ba42"),r<s-1999||r>o-2e3?$(u.selector).css("color","grey"):$(u.selector).css("color","#a1ba42")}var a=$("#irs-1 > span.irs > span.irs-from").css("display");a==="none"&&$(".playLineFiller > div").css("background-color","#a1ba42"),o!=2013?$(".container2 > div:nth-child(13)").css("color","grey"):$(".container2 > div:nth-child(13)").css("color","#a1ba42"),o===s&&($(".playLineFiller > div").css("background-color","transparent"),$(".container2 > div").css("color","grey")),h.updateImageServiceRasterFunction(n,l.loss)}}}),$(".container2 > div:first-child").css("color","grey"),$(".container2 > div:last-child").css("color","grey"),$("#range").ionRangeSlider("update"),$("#playLine2").hide(),$("#sliderProgressLine").hide(),$(".irs-single").hide()};w||(w=!0,u(),$(".irs-diapason").hide(),$(".irs-diapason").css("background-color","transparent"),$(".irs-slider.from.last").each(function(){var e=this,t=a.create("div",{id:"sliderProgressLine"});a.place(t,e,"after");var n=a.create("div",{id:"playLine2"});a.place(n,e,"after")}),$(".irs-slider.to").css("left","730px")),t.on("change",function(){s=$(this).prop("value"),s<r&&(s=r),s>o&&(s=o),c(),f()}),n.on("change",function(){o=$(this).prop("value"),o>i&&(o=i),o<s&&(o=s),c(),f()});var f=function(){e.ionRangeSlider("update",{from:s,to:o})},c=function(){t.prop("value",s),n.prop("value",o)}},fetchFORMAAlertsLabels:function(){var e=new n,t;return t=p({url:l.forma.url,content:{f:"pjson"},handleAs:"json",callbackParamName:"callback"}),t.then(function(t){e.resolve(t)},function(t){e.resolve(!1)}),e.promise},toggleLegendContainer:function(){var t=e.byId("legend-container"),n=t.offsetHeight===280?30:280;r.animateProperty({node:t,properties:{height:n},duration:500,onEnd:function(){n===30?s.add("legend-title","closed"):s.remove("legend-title","closed")}}).play()},generateSuitabilitySliders:function(){this.createCheckboxDijits(),this.createRangeSliders()},createCheckboxDijits:function(){var e;i.forEach(l.checkboxItems,function(t){e=new m({name:t.name,value:t.value,checked:t.checked,onChange:function(){h.updateCustomSuitabilityLayer(null,t.name)}},t.node)})},createRangeSliders:function(){var e=l.suitabilitySliderTooltips;jQuery.browser={},function(){jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)}(),b("#peat-depth-slider").rangeSlider({defaultValues:{min:0,max:3},valueLabels:"change",bounds:{min:0,max:3},step:1,arrows:!1,formatter:function(t){return e.peat[t]}}),b("#peat-depth-slider").addClass("singleValueSlider reverseSlider"),b("#peat-depth-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"peat-depth-slider")}),b("#conservation-area-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"change",bounds:{min:500,max:5e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),b("#conservation-area-slider").addClass("singleValueSlider"),b("#conservation-area-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"conservation-area-slider")}),b("#water-resource-slider").rangeSlider({defaultValues:{min:100,max:1e3},valueLabels:"change",bounds:{min:50,max:1e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),b("#water-resource-slider").addClass("singleValueSlider"),b("#water-resource-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"water-resource-slider")}),b("#slope-slider").rangeSlider({defaultValues:{min:30,max:80},valueLabels:"change",bounds:{min:0,max:80},step:1,arrows:!1,formatter:function(e){return e+"%"}}),b("#slope-slider").addClass("singleValueSlider reverseSlider"),b("#slope-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"slope-slider")}),b("#elevation-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"hide",bounds:{min:0,max:5e3},step:1,arrows:!1,formatter:function(e){return e+"m"}}),b("#elevation-slider").addClass("singleValueSlider reverseSlider"),b("#elevation-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"elevation-slider")}),b("#rainfall-slider").rangeSlider({defaultValues:{min:1500,max:6e3},valueLabels:"hide",bounds:{min:1500,max:6e3},step:1,arrows:!1,formatter:function(t){return t+" "+e.rainfall.label}}),b("#rainfall-slider").addClass("narrowTooltips"),b("#rainfall-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer([t.values.min,t.values.max],"rainfall-slider")}),b("#soil-drainage-slider").rangeSlider({defaultValues:{min:2,max:4},valueLabels:"hide",bounds:{min:1,max:4},step:1,arrows:!1,formatter:function(t){return e.drainage[t]}}),b("#soil-drainage-slider").addClass("narrowTooltips"),b("#soil-drainage-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-drainage-slider")}),b("#soil-depth-slider").rangeSlider({defaultValues:{min:3,max:7},valueLabels:"hide",bounds:{min:1,max:7},step:1,arrows:!1,formatter:function(t){return e.depth[t]}}),b("#soil-depth-slider").addClass("singleValueSlider narrowTooltips"),b("#soil-depth-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer(t.values.min,"soil-depth-slider")}),b("#soil-acid-slider").rangeSlider({defaultValues:{min:1,max:7},valueLabels:"change",bounds:{min:1,max:8},step:1,arrows:!1,formatter:function(t){return e.acidity[t]}}),b("#soil-acid-slider").addClass("narrowTooltips"),b("#soil-acid-slider").bind("valuesChanged",function(e,t){h.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-acid-slider")}),t(".ui-rangeSlider-innerBar").forEach(function(e){a.create("div",{"class":"slider-bar-blocker"},e,"after")})},resetSuitabilitySettings:function(){b("#peat-depth-slider").rangeSlider("values",0,3),b("#conservation-area-slider").rangeSlider("values",1e3,5e3),b("#water-resource-slider").rangeSlider("values",100,1e3),b("#slope-slider").rangeSlider("values",30,80),b("#elevation-slider").rangeSlider("values",1e3,5e3),b("#rainfall-slider").rangeSlider("values",1500,6e3),b("#soil-drainage-slider").rangeSlider("values",2,4),b("#soil-depth-slider").rangeSlider("values",3,7),b("#soil-acid-slider").rangeSlider("values",1,7),this.resizeRangeSliders();var e;i.forEach(l.checkboxItems,function(t){e=u.byId(t.node),e&&e.set("checked",t.checked)})},exportSuitabilitySettings:function(){var t=this;require(["dijit/Dialog","dojo/on","dojo/_base/lang"],function(n,r,i){var s="<p>"+l.suitabilityExportDialog.instruction+"</p>";s+="<p id='export-error-message' style='color: #e50036;font-size: 12px;'></p>",s+="<div id='export-loading-now' class='submit-container' style='display: none; visibility: hidden;'><div class='loading-wheel-container'><div class='loading-wheel'></div></div></div>",s+="<div id='export-buttons-container' class='submit-container'>",s+="<button id='export-cancel-now'>Cancel</button> ",s+="<button id='export-download-now'>Download</button>",s+="</div>";var u=new n({title:l.suitabilityExportDialog.title.toUpperCase(),style:"height: 190px; width: 415px; overflow-y: none;",draggable:!1,hide:function(){u.destroy()}});u.setContent(s),u.show(),r(e.byId("export-cancel-now"),"click",function(){u.destroy()}),r(e.byId("export-download-now"),"click",function(){var n=t._getSettingsCSV(),r=new Blob([n],{type:"text/csv;charset=utf-8;"});saveAs(r,"settings.csv"),o.set(e.byId("export-buttons-container"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"visibility","visible"),o.set(e.byId("export-loading-now"),"display","block"),t._saveTIFF(function(t){console.log("**callback** (error = "+t+")"),o.set(e.byId("export-loading-now"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"display","none"),t==""?u.destroy():e.byId("export-error-message").innerHTML=t})})})},_saveTIFF:function(e){var t=this,n=app.map.extent,r=1460,i=854,s={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",format:"tiff",size:r+","+i,imageSR:3857,bboxSR:3857,f:"json",pixelType:"UNKNOWN"},o=function(t,n){console.log("exporter() :: url = ",t),window.open(t,"geoTiffWin"),e("")},u=l.suit.id;app.map.getLayer(u).getImageUrl(app.map.extent,r,i,o,s)},_getSettingsCSV:function(){var n=["peat-depth-slider","conservation-area-slider","water-resource-slider","slope-slider","elevation-slider","rainfall-slider","soil-drainage-slider","soil-depth-slider","soil-acid-slider"],r="",o,a,f,c,h,p;i.forEach(n,function(t){o=e.byId(t+"-label"),a=b("#"+t).rangeSlider("values"),f=b("#"+t).rangeSlider("bounds"),c=s.contains(t,"reverseSlider"),p=t.split("-"),p[0]!="rainfall"&&(h=l.suitabilitySliderTooltips[p[0]],h==undefined&&(p[1]=="acid"&&(p[1]="acidity"),h=l.suitabilitySliderTooltips[p[1]])),r!=""&&(r+="\n"),r+=o.innerHTML+",";if(c)if(h==undefined)r+=f.min+"-"+a.min;else{var n="";for(var i=f.min;i<=a.min;++i)n!=""&&(n+="; "),n+=h[i].replace(",","/");r+=n}else if(h==undefined)r+=a.min+"-"+a.max;else{var n="";for(var i=a.min;i<=a.max;++i)n!=""&&(n+="; "),n+=h[i].replace(",","/");r+=n}});var d="",v="",m;i.forEach(l.checkboxItems,function(e){m=u.byId(e.node),m&&m.get("checked")&&(o=t("label[for='"+e.node+"']")[0],e.name=="landcover-checkbox"?(d!=""&&(d+="; "),d+=o.innerHTML):e.name=="soil-type-checkbox"&&(v!=""&&(v+="; "),v+=o.innerHTML))});var g=["Suitability Parameter","Suitability Values"],y=g.join(",")+"\n";return y+=r+"\n",y+="Land Cover,"+d+"\n",y+="Soil Type,"+v+"\n",y},resizeRangeSliders:function(){b("#peat-depth-slider").rangeSlider("option","valueLabels","hide"),b("#conservation-area-slider").rangeSlider("option","valueLabels","hide"),b("#water-resource-slider").rangeSlider("option","valueLabels","hide"),b("#slope-slider").rangeSlider("option","valueLabels","hide"),b("#elevation-slider").rangeSlider("option","valueLabels","hide"),b("#rainfall-slider").rangeSlider("option","valueLabels","hide"),b("#soil-drainage-slider").rangeSlider("option","valueLabels","hide"),b("#soil-depth-slider").rangeSlider("option","valueLabels","hide"),b("#soil-acid-slider").rangeSlider("option","valueLabels","hide"),b("#peat-depth-slider").rangeSlider("resize"),b("#conservation-area-slider").rangeSlider("resize"),b("#water-resource-slider").rangeSlider("resize"),b("#slope-slider").rangeSlider("resize"),b("#elevation-slider").rangeSlider("resize"),b("#rainfall-slider").rangeSlider("resize"),b("#soil-drainage-slider").rangeSlider("resize"),b("#soil-depth-slider").rangeSlider("resize"),b("#soil-acid-slider").rangeSlider("resize"),b("#peat-depth-slider").rangeSlider("option","valueLabels","change"),b("#conservation-area-slider").rangeSlider("option","valueLabels","change"),b("#water-resource-slider").rangeSlider("option","valueLabels","change"),b("#slope-slider").rangeSlider("option","valueLabels","change"),b("#elevation-slider").rangeSlider("option","valueLabels","change"),b("#rainfall-slider").rangeSlider("option","valueLabels","change"),b("#soil-drainage-slider").rangeSlider("option","valueLabels","change"),b("#soil-depth-slider").rangeSlider("option","valueLabels","change"),b("#soil-acid-slider").rangeSlider("option","valueLabels","change")},serializeSuitabilitySettings:function(){return{"Peat Depth":b("#peat-depth-slider").rangeSlider("values").min,"Conservation Area":b("#conservation-area-slider").rangeSlider("values").min,"Water Resource":b("#water-resource-slider").rangeSlider("values").min,Slope:b("#slope-slider").rangeSlider("values").min,Elevation:b("#elevation-slider").rangeSlider("values").min,Rainfall:b("#rainfall-slider").rangeSlider("values"),"Soil Drainage":b("#soil-drainage-slider").rangeSlider("values"),"Soil Depth":b("#soil-depth-slider").rangeSlider("values").min,"Soil Acidity":b("#soil-acid-slider").rangeSlider("values"),Shrub:u.byId("shrub-check").checked,Bareland:u.byId("bareland-check").checked,"Secondary Forest":u.byId("secondary-forest-check").checked,"Dryland Agriculture mixed with shrub":u.byId("dryland-agro-check").checked,"Water Body":u.byId("water-check").checked,Mining:u.byId("mining-check").checked,"Plantation Forest":u.byId("plantation-forest-check").checked,"Estate Crop Plantation":u.byId("estate-crop-check").checked,"Swamp shrub":u.byId("swamp-shrub-check").checked,"Primary swamp Forest":u.byId("primary-swamp-check").checked,"Secondary swamp Forest":u.byId("secondary-swamp-check").checked,Settlement:u.byId("settlement-check").checked,Grassland:u.byId("grassland-check").checked,"Secondary mangrove forest":u.byId("secondary-mangrove-check").checked,"Dryland agriculture":u.byId("dryland-check").checked,"Rice field":u.byId("rice-check").checked,"Fish pond":u.byId("fish-check").checked,"Transmigration area":u.byId("transmigration-check").checked,Swamp:u.byId("swamp-check").checked,"Primary mangrove swamp":u.byId("primary-mangrove-check").checked,Airport:u.byId("airport-check").checked,Inceptisol:u.byId("inceptisol-check").checked,Oxisol:u.byId("oxisol-check").checked,Alfisol:u.byId("alfisol-check").checked,Ultisol:u.byId("ultisol-check").checked,Spodosol:u.byId("spodosol-check").checked,Entisol:u.byId("entisol-check").checked,Histosol:u.byId("histosol-check").checked,Mollisol:u.byId("mollisol-check").checked,Rock:u.byId("rock-check").checked}}}}),define("components/wizard/Wizard",["react","analysis/config","analysis/WizardStore","components/wizard/StepOne","components/wizard/StepTwo","components/wizard/StepThree","components/wizard/StepFive","dojo/topic","dojo/_base/array","map/config","dojo/_base/lang","esri/tasks/PrintTask","map/Controls","utils/Analytics","utils/GeoHelper"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){function g(){return{currentStep:n.get(m.userStep)||0,analysisArea:n.get(m.selectedCustomFeatures),usersAreaOfInterest:n.get(m.areaOfInterest)}}var v=t.wizard.breadcrumbs,m=t.STORE_KEYS,y=e.createClass({getInitialState:function(){return g()},componentDidMount:function(){n.registerCallback(m.selectedCustomFeatures,this.analysisAreaUpdated),n.registerCallback(m.userStep,this.currentUserStepUpdated),n.registerCallback(m.areaOfInterest,this.areaOfInterestUpdated),this.props.skipIntro?n.set(m.userStep,3):n.set(m.userStep,this.state.currentStep)},analysisAreaUpdated:function(){var e=n.get(m.selectedCustomFeatures);this.setState({analysisArea:e})},currentUserStepUpdated:function(){var e=n.get(m.userStep);this.setState({currentStep:e})},areaOfInterestUpdated:function(){var e=n.get(m.areaOfInterest);this.setState({usersAreaOfInterest:e})},componentDidUpdate:function(e,t){this.props.isResetting&&this.setProps({isResetting:!1});if(t.currentStep>1&&this.state.currentStep===1){var n=app.map.getLayer(f.wizardGraphicsLayer.id);n&&n.clear()}},render:function(){var t=this.props;return t.callback={performAnalysis:this._performAnalysis},this.state.currentStep===0?($(".breadcrumbs").hide(),$(".gfw .wizard-header").css("height","-=45px"),$(".gfw .wizard-body").css("top","55px"),$(".gfw .wizard-header .button.reset").hide()):($(".breadcrumbs").show(),$(".gfw .wizard-header").css("height","+=45px"),$(".gfw .wizard-body").css("top",""),$(".gfw .wizard-header .button.reset").show(),$(".gfw .wizard-header .button.reset").css("top","0px")),(["commercialEntityOption","certifiedAreaOption"].indexOf(this.state.usersAreaOfInterest)===-1||this.props.currentStep===1)&&u.publish("hideConcessionsLegend"),e.DOM.div({className:"relative wizard-root"},e.DOM.div({className:"wizard-header"},e.DOM.div({className:"title-section"},e.DOM.span({className:"title"},"Analysis"),e.DOM.span({className:"button reset",onClick:this._reset},"Reset"),e.DOM.span({className:"button close",onClick:this._close},"")),e.DOM.div({className:"breadcrumbs"},v.map(this._breadcrumbMapper,this))),e.DOM.div({className:"wizard-body"},e.DOM.div({className:this.state.currentStep!==0?"hidden":""},new o(t)),e.DOM.div({className:this.state.currentStep!==1?"hidden":""},new r(t)),e.DOM.div({className:this.state.currentStep!==2?"hidden":""},new i(t)),e.DOM.div({className:this.state.currentStep!==3?"hidden":""},new s(t))))},_breadcrumbMapper:function(t,n){var r=n<this.state.currentStep-1?"enabled":"";return r+=this.state.currentStep-1===n?" active":"",e.DOM.span({className:r},e.DOM.span({className:"piece","data-index":n,onClick:this._changeStep},t),n<v.length-1?e.DOM.span({className:"carat"}," > "):null)},_changeStep:function(e){var t=e.target.dataset?e.target.dataset.index:e.target.getAttribute("data-index");t*=1,t<this.state.currentStep+1&&n.set(m.userStep,1*t+1)},_reset:function(){this.replaceProps({isResetting:!0}),n.set(m.areaOfInterest,t.stepOne.option3.id,!0),n.set(m.selectedCustomFeatures,[],!0),n.set(m.userStep,1,!0),this.replaceState(g());var e=app.map.getLayer(f.wizardGraphicsLayer.id);e&&e.clear(),e=app.map.getLayer(f.adminUnitsLayer.id),e&&e.hide()},_close:function(){u.publish("toggleWizard")},_externalSetStep:function(e){(e>=0||e<=3)&&n.set(m.userStep,e)},_performAnalysis:function(){var e=this,r=e._prepareGeometry(e.state.analysisArea),i=n.get(m.analysisSets),s,o,u,a,l;s=t.stepTwo.labelField,o=app.map.getLayer(f.suit.id).getRenderingRule(),a={geometry:r,datasets:i,title:e.state.analysisArea.map(function(e){return e.attributes.WRI_label}).join(","),suitability:{renderRule:o,csv:h._getSettingsCSV()}},l=window.open("./app/js/report/Report.html","_blank","menubar=yes,titlebar=yes,scrollbars=yes,resizable=yes"),localStorage?localStorage.setItem("payload",JSON.stringify(a)):l.payload=a,l===null||typeof l===undefined||l===undefined?alert("You need to disable your popup blocker for this feature to work."):(l.focus(),l.document.createEvent&&(u=l.document.createEvent("Event"),u.initEvent("PayloadReady",!0,!0),l.document.dispatchEvent(u))),p.sendEvent("Event","click","Perform Analysis","User clicked perfrom analysis.")},_prepareGeometry:function(e){function i(e){var t=n.get(m.areaOfInterest),r=e.attributes.Entity_ID||e.attributes.WRI_ID||undefined;return t==="millPointOption"?r:undefined}var t=n.get(m.analysisPointRadius)||50,r=[];return Object.prototype.toString.call(e)!=="[object Array]"&&(e=[e]),e.forEach(function(e){e.geometry.type==="point"&&(e=d.preparePointAsPolygon(e,t)),r.push({geometry:e.geometry,type:e.geometry.radius?"circle":"polygon",isCustom:e.attributes.WRI_ID!==undefined,label:e.attributes.WRI_label||undefined,millId:i(e),isRSPO:e.attributes.isRSPO||undefined,buffer:t})}),JSON.stringify(r)},_getStepAndActiveArea:function(){return{currentStep:this.state.currentStep,selectedArea:this.state.usersAreaOfInterest||"none"}}});return function(t,n){return e.renderComponent(new y(t),document.getElementById(n))}}),define("analysis/WizardHelper",["dojo/fx","dojo/dom","dojo/_base/fx","dojo/Deferred","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/_base/array","dojo/topic","map/config","utils/Hasher","utils/GeoHelper","utils/AlertsHelper","analysis/Query","analysis/config","analysis/WizardStore","components/wizard/Wizard"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m){"use strict";var g,y=d.STORE_KEYS;return{toggleWizard:function(e){var u=o.position(t.byId("map")).w,a=t.byId("wizard-container"),f=new r,c=460,h=460,d=u/2,v,y=500,b,w,E;return E=d>=h&&d<=c?d:d<h?h:c,v=app.map.extent.getCenter(),i.contains(a,"activated")&&(s.set("wizard","display","none"),E=0),i.toggle(a,"activated"),b=n.animateProperty({node:a,properties:{width:E},duration:y}),w=n.animateProperty({node:t.byId("wizard-tab"),properties:{opacity:E===0?1:0},duration:y,onEnd:function(){E>0&&s.set("wizard","display","block"),f.resolve(!0)}}),g===undefined&&(p.getSetupData(),setTimeout(function(){g=new m({skipIntro:e},"wizard")},y-100)),E===0?this.cleanupWizard():(g&&g.forceUpdate(),this.showWizardRelatedLayers()),E===0?l.removeKey("wiz"):l.setHash("wiz","open"),[b,w]},cleanupWizard:function(){app.map.getLayer(f.adminUnitsLayer.id).hide(),app.map.getLayer(f.wizardGraphicsLayer.id).hide(),app.map._simpleLegends.concessions.hide()},showWizardRelatedLayers:function(){app.map.getLayer(f.adminUnitsLayer.id).show(),app.map.getLayer(f.wizardGraphicsLayer.id).show()},analyzeAreaFromPopup:function(e){function m(e){v.set(y.areaOfInterest,s),v.set(y.selectedCustomFeatures,[e]),g._externalSetStep(3)}var t=e.target?e.target:e.srcElement,n=t.getAttribute("data-label"),r=t.getAttribute("data-type"),i=t.getAttribute("data-id"),s=d.stepOne.option3.id,o=f.oilPerm.url,l=this,h;switch(r){case"Logging concession":h=10;break;case"Mining concession":h=26;break;case"Wood fiber plantation":h=28;break;case"Oil palm concession":h=32;break;case"RSPO Oil palm concession":h=27;break;case"AdminBoundary":s=d.stepOne.option2.id,o=f.adminUnitsLayer.url,h=f.adminUnitsLayer.layerId;break;case"CertScheme":o=f.commercialEntitiesLayer.url,h=f.commercialEntitiesLayer.layerId;break;case"CustomGraphic":s=d.stepOne.option1.id;break;case"MillPoint":s=d.stepOne.option5.id;break;case"WDPA":o=f.palHelper.url,h=f.palHelper.layerId}r==="CustomGraphic"?(h=app.map.getLayer(f.customGraphicsLayer.id),u.some(h.graphics,function(e){return e.attributes.WRI_ID===parseInt(i)?(l.isOpen()?m(e):(a.publish("toggleWizard"),m(e)),!0):!1})):r==="MillPoint"?p.getMillByEntityId(i).then(function(e){e.attributes.WRI_label=n,e=c.preparePointAsPolygon(e),l.isOpen()?(m(e),l.addGraphicFromPopup(e)):(a.publish("toggleWizard"),m(e),l.addGraphicFromPopup(e))}):p.getFeatureById(o+"/"+h,i).then(function(e){e.attributes.WRI_label=n,l.isOpen()?(m(e),l.addGraphicFromPopup(e)):(a.publish("toggleWizard"),m(e),l.addGraphicFromPopup(e))}),app.map.infoWindow.hide()},addGraphicFromPopup:function(e){var t=app.map.getLayer(f.wizardGraphicsLayer.id),n;t&&(t.clear(),e=c.applySelectionSymbolToFeature(e),t.add(e))},isOpen:function(){return i.contains("wizard-container","activated")}}}),define("utils/Helper",["dojo/dom-class","dojo/dom-geometry","analysis/WizardHelper","utils/AlertsHelper","dojo/_base/window","dojo/_base/connect","dojo/_base/fx","dojo/fx","dojo/on"],function(e,t,n,r,i,s,o,u,a){"use strict";var f,l,c=500,h=460,p=this;return l=function(e,t,n){f=f||document.getElementById("map-container");var t=t||!0,r=function(){t===!0&&a.once(app.map,"resize",function(){app.map.centerAt(n)})},i=function(){t===!0&&app.map.resize(!0)},s={node:f,properties:{left:e},duration:c,beforeBegin:r,onEnd:i};return o.animateProperty(s)},{enableLayout:function(){var n=i.body(),r=t.position(n).w;r<960&&e.add(n,"mobile")},toggleWizard:function(){var e,t=app.map.extent.getCenter();r.isOpen()===!0?(e=u.combine([r.toggleAlertsForm()].concat([l(0,!1)])),s.connect(e,"onEnd",function(){u.combine(n.toggleWizard().concat(l(n.isOpen()?h:0,!0,t))).play()}),e.play()):u.combine(n.toggleWizard().concat(l(n.isOpen()?h:0,!0,t))).play()},toggleAlerts:function(){var e,t=app.map.extent.getCenter();n.isOpen()===!0?(e=u.combine(n.toggleWizard().concat([l(0,!1)])),s.connect(e,"onEnd",function(){u.combine([r.toggleAlertsForm(),l(r.isOpen()?0:h,!0,t)]).play()}),e.play()):u.combine([r.toggleAlertsForm(),l(r.isOpen()?0:h,!0,t)]).play()}}}),define("map/SuitabilityImageServiceLayer",["dojo/_base/declare","dojo/Evented","dojo/_base/lang","dojo/_base/array","esri/layers/RasterFunction","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","map/MapModel","esri/request"],function(e,t,n,r,i,s,o,u,a){return e("SuitabilityImageServiceLayer",[t,o],{constructor:function(){this.declaredClass="esri.layers.ArcGISImageServiceLayer",this.rasterFunctionArguments={},this.rasterFunctionArguments.ElevRaster="$1",this.rasterFunctionArguments.SlopeRaster="$2",this.rasterFunctionArguments.WaterRaster="$3",this.rasterFunctionArguments.ConsRaster="$4",this.rasterFunctionArguments.STypeRaster="$5",this.rasterFunctionArguments.SDepthRaster="$6",this.rasterFunctionArguments.PeatRaster="$7",this.rasterFunctionArguments.SAcidRaster="$8",this.rasterFunctionArguments.SDrainRaster="$9",this.rasterFunctionArguments.RainfallRaster="$10",this.rasterFunctionArguments.LCRaster="$11",this.rasterFunctionScalars={},this.rasterFunctionScalars.Elev=10,this.rasterFunctionScalars.Slope=1,this.rasterFunctionScalars.Water=10,this.rasterFunctionScalars.Cons=100,this.rasterFunctionScalars.SType=1,this.rasterFunctionScalars.SDepth=1,this.rasterFunctionScalars.Peat=1,this.rasterFunctionScalars.SAcid=1,this.rasterFunctionScalars.SDrain=1,this.rasterFunctionScalars.Rainfall=10,this.rasterFunctionScalars.LC=1,this.renderingRule={};var e=new i;e.functionName="RemapColormap2Prashant",e.arguments=this.rasterFunctionArguments;var t=new s;t.noData=0,t.renderingRule=e,this.imageServiceParameters=t},getExportUrl:function(e,t,n,r,i){},getRenderingRule:function(){var e=this,t=e.returnRasterSettingsAsObject(),r={};n.mixin(r,this.rasterFunctionArguments),e.addThresholdArgument(t,r,"Elev",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Slope",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Water",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Cons",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Rainfall",e.rasterFunctionScalars,"BETWEEN"),e.addMembershipArgument(t,r,"SDepth",[0,1,2,3,4,5,6,7,99]),e.addMembershipArgument(t,r,"Peat",[0,1,2,3,4,5,6]),e.addMembershipArgument(t,r,"SAcid",[0,1,2,3,4,5,6,7,8,99]),e.addMembershipArgument(t,r,"SDrain",[0,1,2,3,4,99]),e.addMembershipArgument(t,r,"LC",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),e.addMembershipArgument(t,r,"SType",[0,1,2,3,4,5,6,7,8,9,10]);var s=new i;return s.rasterFunction="PalmOilSuitabilityNew",s.rasterFunctionArguments=r,s},getImageUrl:function(e,t,n,r,i){var s=this;e=e._normalize();var o=[e.xmin,e.ymin,e.xmax,e.ymax],u,f,l,c,h,p,d=s.getRenderingRule();i?(u=i,u.renderingRule=JSON.stringify(d),u.bbox=o.join(","),u.f="json",s.renderingRule=d,p=a({url:s.url+"/exportImage",content:u,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),p.then(function(e){try{r(e.href),s.emit("image-ready",{})}catch(t){s.refresh()}},function(e){console.dir(e),s.emit("image-ready",{})})):(u={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",renderingRule:JSON.stringify(d),format:"png8",size:t+","+n,imageSR:3857,bboxSR:3857,f:"json",pixelType:"U8",bbox:o.join(",")},s.renderingRule=d,s.renderingRule.toJson=function(){return s.getRenderingRule()},p=a({url:s.url+"/exportImage",content:u,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),p.then(function(e){try{r(e.href),s.emit("image-ready",{})}catch(t){s.refresh()}},function(e){console.dir(e),s.emit("image-ready",{})}))},returnRasterSettingsAsObject:function(){var e={},t=u.get("suitabilitySettings").computeBinaryRaster;return r.forEach(t,function(t){e[t.name]=t.values}),e},returnNumericArray:function(e){var t=e.split(","),n=[];return r.forEach(t,function(e){n.push(parseInt(e,10))}),n},addThresholdArgument:function(e,t,n,r,i){var s=this;scalar=r[n];if(i==="BETWEEN"){var o=s.returnNumericArray(e[n+"InpR"]),u=o[0],a=o[o.length-1];t[n+"InpR"]=[0,u/scalar,u/scalar,a/scalar,a/scalar,1e6],t[n+"OutV"]=[1,1,0]}else{var f=parseInt(e[n+"InpR"],10);t[n+"InpR"]=[0,f/scalar,f/scalar,1e6],t[n+"OutV"]=i==="MIN"?[0,1]:[1,0]}},addMembershipArgument:function(e,t,n,r){var i=this,s=i.returnNumericArray(e[n+"InpR"]),o=[],u=[],a=["SDepth","SAcid","SDrain","LC"],f,l;a.indexOf(n)>-1&&s[0]!==0&&s.unshift(0);for(l=0;l<r.length;l++)f=r[l],o.push(f,f),s.indexOf(f)===-1?u.push(0):u.push(1);t[n+"InpR"]=o,t[n+"OutV"]=u}})}),define("map/SimpleLegend",[],function(){return SimpleLegend=function(e){return this.config=e,this.CLASS_NAME="simple-legend",this.onHide=function(){},this.onShow=function(){},this.items=[],this},SimpleLegend.prototype.init=function(e){var t=new XMLHttpRequest,n=0,r="",i,s,o,u=this.config,a=this;t.onreadystatechange=function(f){t.readyState===4&&(t.status===200?(s=JSON.parse(t.response),r+='<div id="'+u.id+'" class="'+a.CLASS_NAME+'">',u.title&&(r+='<div id="'+u.id+'-title" class="simple-legend-title">'+u.title+"</div>"),i=u.layers.map(function(e){return e.id}),o=s.layers.filter(function(e){return i.indexOf(e.layerId)>-1}),o.forEach(function(e){e.config=u.layers.filter(function(t){return t.id===e.layerId},this)[0],e.legend.forEach(function(e,t){var i=u.id+"-layer-"+n+"-"+t,s=e.label;a.items.push(i),u.layers[n].labels!==undefined&&u.layers[n].labels[t]&&(s=u.layers[n].labels[t]),r+='<div id="'+i+'" class="simple-legend-layer">'+'<img class="simple-legend-image" src="data:image/png;base64,'+e.imageData+'" height="'+e.height+'px" width="'+e.width+'px">'+'<span class="simple-legend-label">'+s+"</span>"+"</div>"}),n+=1}),u.title&&(r+="</div>"),r+="</div>",document.getElementById(u.parentId).insertAdjacentHTML("afterbegin",r),e&&e.bind(a)()):console.log("Error"))},t.addEventListener("error",function(e){e&&console.log(e)},!1),t.open("GET",u.url,!0),t.send()},SimpleLegend.prototype.show=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="block"),this.onShow(),this},SimpleLegend.prototype.hide=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="none"),this.onHide(),this},SimpleLegend.prototype.filterItem=function(e){return this.items.forEach(function(t,n){n===e?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}),this},SimpleLegend}),define("map/Map",["dojo/Evented","dojo/_base/declare","dojo/on","dojo/dom","dojo/topic","dijit/registry","dojo/_base/array","dojo/dom-construct","map/config","analysis/WizardHelper","map/SuitabilityImageServiceLayer","map/SimpleLegend","esri/map","esri/config","esri/InfoTemplate","esri/layers/GraphicsLayer","esri/layers/RasterFunction","esri/layers/ImageParameters","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/dijit/Legend","esri/dijit/Geocoder","esri/dijit/Scalebar","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/dijit/BasemapGallery"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k){"use strict";var L=t([e],{element:"map",constructor:function(e){t.safeMixin(this,e),this.addConfigurations(),this.createMap()},addConfigurations:function(){},createMap:function(){var e=this;e.map=new h(this.element,{basemap:this.basemap,center:[this.centerX,this.centerY],sliderPosition:this.sliderPosition,zoom:this.zoom}),e.map.on("load",function(){e.mapLoaded(),e.map.resize(),e.emit("map-ready",{})})},mapLoaded:function(){this.map.graphics.clear(),this.addWidgets(),this.addLayers()},addWidgets:function(){var e,t,n,r,i,s={},o,f,l,h,p;u.create("div",{id:"home-button","class":"home-button"},document.querySelector(".esriSimpleSliderIncrementButton"),"after"),e=new N({map:this.map},"home-button"),e.startup(),i=new k({map:this.map,showArcGISBasemaps:!0},"basemap-gallery"),i.startup(),n=new C({map:this.map,highlightLocation:!1},"location-widget"),n.startup(),r=new x({map:this.map,autoComplete:!0,arcgisGeocoder:{placeholder:"Enter address or region"}},"simple-geocoder"),r.startup(),t=new S({map:this.map,layerInfos:[],autoUpdate:!0},"legend"),t.startup(),o=new T({map:this.map,scalebarUnit:"metric"}),l=new c(a.simpleLegends.settle),l.init(l.hide),f=new c(a.simpleLegends.road),f.init(f.hide),h=new c(a.simpleLegends.poBounds),h.init(h.hide),p=new c(a.simpleLegends.concessions),p.init(p.hide),s.road=f,s.settle=l,s.poBounds=h,s.concessions=p,this.map._simpleLegends=s},addLayers:function(){var e,t,r,u,f,c,h,p,d,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K=this;t=new g,t.layerOption=g.LAYER_OPTION_SHOW,t.layerIds=a.fires.defaultLayers,t.format="png32",e=new E(a.fires.url,{imageParameters:t,id:a.fires.id,visible:!1}),u=new g,u.layerOption=g.LAYER_OPTION_SHOW,u.layerIds=[],u.format="png32",r=new E(a.legendLayer.url,{imageParameters:u,id:a.legendLayer.id,visible:!1}),c=new y,c.renderingRule=new m({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:a.forma.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:a.forma.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),f=new b(a.forma.url,{imageServiceParameters:c,id:a.forma.id,visible:!1,opacity:1}),S=new y,S.renderingRule=new m({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:a.loss.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:a.loss.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),d=new b(a.loss.url,{imageServiceParameters:S,id:a.loss.id,visible:!1,opacity:1}),h=new w(a.gain.url,{id:a.gain.id,visible:!1}),p=new b(a.gainHelper.url,{id:a.gainHelper.id,visible:!1}),x=new b(a.tcd.url,{id:a.tcd.id,visible:!1}),T=new b(a.primForest.url,{id:a.primForest.id,visible:!1}),_=new l(a.suit.url,{id:a.suit.id,visible:!1}),C=new g,C.layerOption=g.LAYER_OPTION_SHOW,C.layerIds=[],C.format="png32",N=new E(a.ifl.url,{imageParameters:C,id:a.ifl.id,visible:!1}),L=new g,L.layerOption=g.LAYER_OPTION_SHOW,L.layerIds=[],L.format="png32",k=new E(a.oilPerm.url,{imageParameters:L,id:a.oilPerm.id,visible:!1}),W=new g,W.layerOption=g.LAYER_OPTION_SHOW,W.layerIds=[a.mill.layerId],W.format="png32",X=new E(a.mill.url,{imageParameters:W,id:a.mill.id,visible:!1}),A=new w(a.pal.url,{id:a.pal.id,visible:!1}),O=new g,O.layerOption=g.LAYER_OPTION_SHOW,O.layerIds=[a.palHelper.layerId],O.format="png32",M=new E(a.palHelper.url,{imageParameters:O,id:a.palHelper.id,visible:!1}),U=new g,U.layerOption=g.LAYER_OPTION_SHOW,U.layerIds=[a.biodiversity.layerId],U.format="png32",z=new E(a.biodiversity.url,{imageParameters:U,id:a.biodiversity.id,visible:!1}),P=new g,P.layerOption=g.LAYER_OPTION_SHOW,P.layerIds=[],P.format="png32",D=new E(a.opsd.url,{imageParameters:P,id:a.opsd.id,visible:!1}),B=new g,B.layerOption=g.LAYER_OPTION_SHOW,B.layerIds=a.overlays.defaultLayers,B.format="png32",H=new E(a.overlays.url,{imageParameters:B,id:a.overlays.id,visible:!1}),q=new g,q.layerOption=g.LAYER_OPTION_SHOW,q.layerIds=[],q.format="png32",R=new E(a.adminUnitsLayer.url,{imageParameters:q,id:a.adminUnitsLayer.id,visible:!1}),J=new v({id:a.wizardGraphicsLayer.id}),j=new v({id:a.customGraphicsLayer.id}),app.map.addLayers([r,x,T,N,D,_,k,A,M,z,f,d,h,p,e,R,X,H,j,J]),n.once(app.map,"layers-add-result",function(e){K.emit("layers-loaded",{response:e});var t=o.map(e.layers,function(e){return{layer:e.layer}});t=o.filter(t,function(e){return e.layer.url?e.layer.url.search("ImageServer")<0&&e.layer.id.search("Gain")<0&&e.layer.id!==a.adminUnitsLayer.id:!1}),s.byId("legend").refresh(t)}),e.on("error",this.addLayerError),f.on("error",this.addLayerError),d.on("error",this.addLayerError),h.on("error",this.addLayerError),p.on("error",this.addLayerError),x.on("error",this.addLayerError),T.on("error",this.addLayerError),_.on("error",this.addLayerError),N.on("error",this.addLayerError),k.on("error",this.addLayerError),A.on("error",this.addLayerError),M.on("error",this.addLayerError),D.on("error",this.addLayerError),R.on("error",this.addLayerError),H.on("error",this.addLayerError),j.on("error",this.addLayerError),X.on("error",this.addLayerError),z.on("error",this.addLayerError),_.on("image-ready",function(){i.publish("customSuitabilityImageReady")})},addLayerError:function(e){console.error(e)}});return L}),define("map/Finder",["dojo/on","dojo/dom","dojo/Deferred","dojo/promise/all","map/config","map/MapModel","analysis/WizardHelper","utils/AlertsHelper","esri/graphic","dojo/_base/array","esri/InfoTemplate","esri/geometry/Point","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/geometry/webMercatorUtils","esri/symbols/PictureMarkerSymbol"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v){"use strict";return{searchAreaByCoordinates:function(){var e={},n,r,i=!1,o="You did not enter a valid value.  Please check that your location values are all filled in and nubmers only.",u=new v("app/css/images/RedStickpin.png",32,32),l={},h,p,m=function(e){return i||(i=isNaN(parseInt(e))),isNaN(parseInt(e))?0:parseInt(e)},g=function(){var e=0;return f.forEach(app.map.graphics.graphics,function(t){t.attributes&&t.attributes.locatorValue&&(e=Math.max(e,parseInt(t.attributes.locatorValue)))}),e};s.get("showDMSInputs")?(e.dlat=m(t.byId("degreesLatInput").value),e.mlat=m(t.byId("minutesLatInput").value),e.slat=m(t.byId("secondsLatInput").value),e.dlon=m(t.byId("degreesLonInput").value),e.mlon=m(t.byId("minutesLonInput").value),e.slon=m(t.byId("secondsLonInput").value),n=e.dlat+e.mlat/60+e.slat/3600,r=e.dlon+e.mlon/60+e.slon/3600):(n=m(t.byId("latitudeInput").value),r=m(t.byId("longitudeInput").value)),i?alert(o):(h=d.geographicToWebMercator(new c(r,n)),l.locatorValue=g(),l.id="LOCATOR_"+l.locatorValue,p=new a(h,u,l),app.map.graphics.add(p),app.map.centerAndZoom(h,7),s.set("showClearPinsOption",!0))},performIdentify:function(e){var t=e.mapPoint,n=[],o=[],u=this,a,l;app.map.infoWindow.clearFeatures(),l=app.map.getLayer(i.fires.id),l&&l.visible&&n.push(u.identifyFires(t)),a=app.map.getLayer(i.palHelper.id),l=app.map.getLayer(i.pal.id),l&&a&&(l.visible||a.visible)&&n.push(u.identifyWDPA(t)),l=app.map.getLayer(i.oilPerm.id),l&&l.visible&&n.push(u.identifyConcessions(t)),l=app.map.getLayer(i.adminUnitsLayer.id),l&&l.visible&&n.push(u.identifyWizardDynamicLayer(t)),l=app.map.getLayer(i.mill.id),l&&l.visible&&n.push(u.identifyMillPoints(t)),l=app.map.getLayer(i.customGraphicsLayer.id),l&&l.visible&&n.push(u.getCustomGraphics(e));if(n.length===0)return;if(s.get("drawToolsEnabled"))return;r(n).then(function(e){f.forEach(e,function(e){switch(e.layer){case"Fires":o=o.concat(u.setFireTemplates(e.features));break;case"WDPA":o=o.concat(u.setWDPATemplates(e.features));break;case"Concessions":o=o.concat(u.setConcessionTemplates(e.features));break;case"WizardDynamic":o=o.concat(u.setWizardTemplates(e.features));break;case"MillPoints":o=o.concat(u.setMillPointTemplates(e.features));break;case"CustomGraphics":o.push(u.setCustomGraphicTemplates(e.feature));break;default:}}),o.length>0&&(app.map.infoWindow.setFeatures(o),app.map.infoWindow.show(t))})},identifyFires:function(e){var t=new n,r=new h(i.fires.url),s=new p;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[0,1,2,3],s.layerOption=p.LAYER_OPTION_VISIBLE,r.execute(s,function(e){e.length>0?t.resolve({layer:"Fires",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setFireTemplates:function(e){var t,n=[];return f.forEach(e,function(e){t=new l(e.layerName,i.fires.infoTemplate.content),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyWDPA:function(e){var t=new n,r=new h(i.oilPerm.url),s=new p;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=[25],r.execute(s,function(e){e.forEach(function(e){e.feature.layer="WDPA"}),e.length>0?t.resolve({layer:"WDPA",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWDPATemplates:function(e){var t,n=[],r;return f.forEach(e,function(e){r=i.pal.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='WDPA' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='WDPA' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>",t=new l(e.value,r),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyConcessions:function(e){var t=new n,r=new h(i.oilPerm.url),s=new p;return s.tolerance=3,s.returnGeometry=!0,s.width=app.map.width,s.height=app.map.height,s.geometry=e,s.mapExtent=app.map.extent,s.layerIds=app.map.getLayer(i.oilPerm.id).visibleLayers,s.layerOption=p.LAYER_OPTION_VISIBLE,s.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(s,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="Concessions-"+e.layerId}),t.resolve({layer:"Concessions",features:e})):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setConcessionTemplates:function(e){var t,n=[],r=this;return f.forEach(e,function(e){e.layerId===27?(t=new l(e.value,i.rspoPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):e.layerId===16?console.log("Finder >>> setConcessionTemplates"):(t=new l(e.value,i.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='${TYPE}' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='${TYPE}' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature))}),n},identifyWizardDynamicLayer:function(e){var t=new n,r=new h(i.adminUnitsLayer.url),s=app.map.getLayer(i.adminUnitsLayer.id),o=new p,u=[];return u[7]="1 = 1",u[13]=s.layerDefinitions[13],o.tolerance=3,o.returnGeometry=!1,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=s.visibleLayers,o.layerDefinitions=u,o.layerOption=p.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.length>0?t.resolve({layer:"WizardDynamic",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWizardTemplates:function(e){var t,n=[],r=this;return f.forEach(e,function(e){e.layerId===7?t=new l(e.value,i.adminUnitsLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+"${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"):t=new l(e.value,i.certificationSchemeLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>"+"Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyMillPoints:function(e){var t=new n,r=new h(i.mill.url),s=app.map.getLayer(i.mill.id),o=new p,u=[];return u[0]="1 = 1",o.tolerance=3,o.returnGeometry=!0,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=s.visibleLayers,o.layerDefinitions=u,o.layerOption=p.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.forEach(function(e){e.feature.layer="MillPoints"}),e.length>0?t.resolve({layer:"MillPoints",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setMillPointTemplates:function(e){var t,n=[],r=this;return f.forEach(e,function(e){t=new l(e.value,i.mill.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+"${Mill_name}' data-type='MillPoint' data-id='${Entity_ID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+"${Mill_name}' data-type='MillPoint' data-id='${Entity_ID}'>Subscribe</button>"+"</div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},getCustomGraphics:function(e){var t=new n;return e.graphic&&e.graphic._layer.id===i.customGraphicsLayer.id?t.resolve({layer:"CustomGraphics",feature:e.graphic}):t.resolve(!1),t.promise},setCustomGraphicTemplates:function(e){var t=e.attributes.WRI_label,n;return n=new l(t,i.customGraphicsLayer.infoTemplate.content+"<div>"+"<button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+t+"' data-type='CustomGraphic' data-id='${WRI_ID}'>"+"Analyze</button>"+"<button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+t+"' data-type='CustomGraphic' data-id='${WRI_ID}'>"+"Subscribe</button>"+"</div>"),e.setInfoTemplate(n),e},createFormattingFunctions:function(){window.checkAvailable=function(e,t,n){return n[t]===undefined||n[t]==="Null"?"N/A":n[t]}},setupInfowindowListeners:function(){var n,r;e(app.map.infoWindow,"selection-change",function(){setTimeout(function(){t.byId("popup-analyze-area")&&(n&&n.remove(),n=e(t.byId("popup-analyze-area"),"click",o.analyzeAreaFromPopup.bind(o))),t.byId("subscribe-area")&&(r&&r.remove(),r=e(t.byId("subscribe-area"),"click",u.subscribeFromPopup))},0)}),e(app.map.infoWindow,"hide",function(){n&&n.remove(),r&&r.remove()})}}}),function(e,t){e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var n={},r=1e3/60;n.fadeIn=function(t,n,i){function a(){o.style.opacity=1*o.style.opacity+u,o.style.opacity<1?e.requestAnimationFrame(a):(s=t.shift(),o=document.getElementById(s),o?e.requestAnimationFrame(a):typeof i=="function"&&i())}Object.prototype.toString.call(t)!=="[object Array]"&&(t=[t]);var s=t.shift(),o=document.getElementById(s),u=r/(n.duration||500);e.requestAnimationFrame(a)},typeof define=="function"&&define.amd?define("utils/Animator",[],function(){return n}):typeof module=="object"&&module.exports?module.exports=n:e.animator=n}(window,document,define),define("components/Check",["react","dojo/topic","dojo/dom-class","utils/Hasher","dijit/form/HorizontalSlider"],function(e,t,n,r,i){return e.createClass({getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=r.getLayers(),n=e.indexOf(this.props.key)>-1,s=this;n&&(this.setState({active:n}),this.props.useRadioCallback||this.props.key==="suit"?t.publish("toggleLayer",this.props.key):requestAnimationFrame(function(){t.publish("updateLayer",s.props)})),document.getElementById(this.props.key+"_slider")&&(new i({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){t.publish("changeLayerTransparency",s.props.key,s.props.layerType,e)}},this.props.key+"_slider")).startup()},toggle:function(e){!n.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(e){document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.visible?"":" hidden");return e.DOM.li({className:t,"data-layer":this.props.key},e.DOM.div({id:this.props.key+"_checkbox",onClick:this.toggle},e.DOM.span({className:"custom-check"},e.DOM.span(null)),e.DOM.a({className:"layer-title"},this.props.title),this.props.title!=="Loss"&&this.props.title!=="Gain"&&this.props.infoDivClass!==undefined?e.DOM.span({className:"layer-info-icon",onClick:this.showInfo}):null,e.DOM.p({className:"layer-sub-title"},this.props.subtitle),e.DOM.div({title:"Layer Transparency",className:"sliderContainer"+(this.state.active?"":" hidden")},e.DOM.div({id:this.props.key+"_slider"}))))}})}),define("components/Radio",["react","dojo/topic","dojo/dom-class","utils/Hasher","components/Check","dijit/form/HorizontalSlider"],function(e,t,n,r,i,s){var o=e.createClass({displayName:"Radio",getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=r.getLayers(),n=e.indexOf(this.props.key)>-1,i=this;n&&(t.publish("showLayer",this.props.key),this.setState({active:n})),document.getElementById(this.props.key+"_slider")&&!this.props.noSlider&&(new s({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){t.publish("changeLayerTransparency",i.props.key,i.props.layerType,e)}},this.props.key+"_slider")).startup()},toggle:function(e){!n.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(e){document.getElementsByClassName(this.props.infoDivClass).length?t.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):t.publish("showInfoPanel",this.props.infoDivClass)},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.visible?"":" hidden");return e.DOM.li({className:t,"data-layer":this.props.key,"data-name":this.props.filter},e.DOM.div({onClick:this.toggle},e.DOM.span({className:"radio-icon"},e.DOM.span(null)),e.DOM.a({className:"layer-title"},this.props.title),this.props.title!=="None"&&this.props.title!=="Loss"&&this.props.title!=="Gain"&&!this.props.noSlider?e.DOM.span({className:"layer-info-icon",onClick:this.showInfo}):null,e.DOM.p({className:"layer-sub-title"},this.props.subtitle)),this.props.children?e.DOM.ul(null," ",this.props.children.map(this._mapper)," "):this.props.layerType!=="none"&&!this.props.noSlider?e.DOM.div({title:"Layer Transparency",className:"sliderContainer"+(this.state.active?"":" hidden")},e.DOM.div({id:this.props.key+"_slider"})):null)},_mapper:function(e){return e.visible=this.state.active,e.handle=this.props.handle,e.postCreate=this.props.postCreate,e.useRadioCallback=!0,e.type==="radio"?new o(e):new i(e)}});return o}),define("components/LayerList",["react","dojo/topic","utils/Hasher","components/Radio","components/Check"],function(e,t,n,r,i){var s=[],o=e.createClass({displayName:"List",getInitialState:function(){return{title:this.props.title,filter:this.props.filter}},componentDidMount:function(){},componentWillReceiveProps:function(e,t){this.setState(e)},render:function(){return e.DOM.div({className:"smart-list"},e.DOM.div({className:"filter-list-title"},this.props.title),e.DOM.div({className:"layer-line"}),e.DOM.ul({className:"filter-list"},this.props.items.map(this._mapper,this)))},_mapper:function(e){return e.visible=this.state.filter===e.filter,e.handle=this._handle,e.postCreate=this._postCreate,e.type==="radio"?new r(e):new i(e)},_handle:function(e){e.props.type==="radio"?this._radio(e):this._check(e)},_check:function(e){var r=!e.state.active;e.setState({active:r}),n.toggleLayers(e.props.key),e.props.useRadioCallback||e.props.key==="suit"?t.publish("toggleLayer",e.props.key):requestAnimationFrame(function(){t.publish("updateLayer",e.props)})},_radio:function(e){var r,i;s.forEach(function(t,n){t.props.filter===e.props.filter&&t.state.active&&(r=t)}),r?(i=r.props.key!==e.props.key,i?(r.props.type!=="check"&&(r.setState({active:!1}),r.props.key.search("none_")===-1&&(n.toggleLayers(r.props.key),t.publish("hideLayer",r.props.key)),this._toggleChildren(r,"remove")),e.props.key.search("none_")===-1&&(n.toggleLayers(e.props.key),t.publish("showLayer",e.props.key))):(e.setState({active:!1}),this._toggleChildren(e,"remove"),n.removeLayers(e.props.key),t.publish("hideLayer",e.props.key))):e.props.key.search("none_")===-1&&(n.toggleLayers(e.props.key),t.publish("showLayer",e.props.key)),i!==!1&&(e.setState({active:!0}),this._toggleChildren(e,"add"))},_toggleChildren:function(e,r){var i=[];e.props.children&&(e.props.children.forEach(function(e){s.forEach(function(t){t.props.key===e.key&&i.push(t)})}),r==="remove"?i.forEach(function(e){e.state.active&&(t.publish("hideLayer",e.props.key),n.removeLayers(e.props.key))}):i.forEach(function(e){e.state.active&&(t.publish("showLayer",e.props.key),n.toggleLayers(e.props.key))}))},_postCreate:function(e){s.push(e)},toggleFormElement:function(e){s.forEach(function(t){t.props.key===e&&t.props.handle(t)})}});return function(t,n){return e.renderComponent(new o(t),document.getElementById(n))}}),define("utils/Loader",["dojo/Deferred"],function(e){"use strict";return{getTemplate:function(t){var n=new e,r="./app/templates/"+t+".html",i;return i=new XMLHttpRequest,i.onreadystatechange=function(){i.readyState===4&&i.status===200&&n.resolve(i.responseText)},i.open("GET",r,!0),i.send(),n.promise},loadCSS:function(e){var t=doc.createElement("link"),n=doc.getElementsByTagName("head")[0];t.rel="stylesheet",t.type="text/css",t.href=e,n.appendChild(t)}}}),define("controllers/MapController",["dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","dojo/dom-geometry","dojo/number","map/config","map/Map","map/Finder","map/MapModel","utils/Hasher","utils/Animator","utils/Helper","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/graphicsUtils","map/Controls","map/LayerController","analysis/WizardStore","components/LayerList","utils/Loader","map/Uploader","map/CoordinatesModal","utils/Analytics"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k){"use strict";var L=!1,A,O,M=!1,_,D=document.createElement("infoDiv");return{init:function(r){var i=this,s=[],u;if(L){o.byId("stackContainer").selectChild("mapView"),u=location.href.split("#")[0]+"#v=map",k.sendPageview(u,"Map");return}L=!0,o.byId("mapView").set("content",r),o.byId("stackContainer").selectChild("mapView");var a=d.getHash("x"),y=d.getHash("y"),b=d.getHash("l"),w={};for(var S in l.mapOptions)w[S]=l.mapOptions[S];a!=undefined&&a!=""&&(w.centerX=a),a!=undefined&&a!=""&&(w.centerY=y),a!=undefined&&a!=""&&(w.zoom=b),_=new c(w),app.map=_.map,_.on("layers-loaded",function(){var e=d.getHash("f"),t,n,r,i;if(e!==undefined){t=e.split("-"),n=t[0];switch(n){case"WDPA":i={layer:n,url:l.pal.url+"/0",objectId:t[1],templateFunction:h.setWDPATemplates},E.setSelectedFeature(i);break;case"MillPoints":i={layer:n,url:l.mill.url+"/0",objectId:t[1],templateFunction:h.setMillPointTemplates},E.setSelectedFeature(i);break;case"Concessions":i={layer:n+"-"+t[1],url:l.concession.url+"/"+t[1],objectId:t[2],templateFunction:h.setConcessionTemplates},E.setSelectedFeature(i)}}}),_.on("map-ready",function(){var e=g.webMercatorToGeographic(_.map.extent),t=f.round(e.getCenter().x,2),n=f.round(e.getCenter().y,2);d.setHash("x",t),d.setHash("y",n),d.setHash("l",5),A=p.initialize("map-container"),i.renderComponents(),i.bindUIEvents(),i.registerStoreCallbacks();var r=d.getHash("wiz");r!==undefined&&r==="open"&&m.toggleWizard()}),app.map.on("zoom-end",E.checkZoomDependentLayers.bind(E)),app.map.on("click",h.performIdentify.bind(h)),h.createFormattingFunctions(),h.setupInfowindowListeners(),n(".gfw .map-layer-controls li").forEach(function(e){s.push(e.id)}),v.fadeIn(s,{duration:100});try{addthis.init()}catch(x){t.byId("sharing-modal").innerHTML="Sorry.  AddThis is temporarily down."}e(app.map.infoWindow,"hide",function(){d.removeKey("f")});var T,N=["attributes","geometry","infoTemplate","symbol"],C=e.pausable(app.map.infoWindow,"selection-change",function(){if(this.features){if(JSON.stringify(this.features,N)!=JSON.stringify(T,N)){var e=[],t,n,r=this;r.features.forEach(function(r){n=r.attributes.Mill_name!=undefined,n?(t=!0,e.unshift(r)):e.push(r)}),t&&(C.pause(),r.hide(),r.clearFeatures(),r.setFeatures(e),T=e,r.show(r.location,{closestFirst:!1}),C.resume())}d.setHash("f",this.getSelectedFeature().layer+"-"+this.getSelectedFeature().attributes.OBJECTID)}else d.removeKey("f")});u=location.href.split("#")[0]+"#v=map",k.sendPageview(u,"Map")},bindUIEvents:function(){var r=this;e(app.map,"mouse-move",function(e){p.set("currentLatitude",e.mapPoint.getLatitude().toFixed(4)),p.set("currentLongitude",e.mapPoint.getLongitude().toFixed(4))}),e(app.map,"extent-change",function(e){var t=e.delta,n=g.webMercatorToGeographic(e.extent),r=e.levelChange,i=e.lod,s=e.target,o=f.round(n.getCenter().x,2),u=f.round(n.getCenter().y,2);d.setHash("x",o),d.setHash("y",u),d.setHash("l",i.level)}),e(t.byId("locator-widget-button"),"click",function(){p.set("showBasemapGallery",!1),p.set("showSharingOptions",!1),p.set("showLocatorOptions",!p.get("showLocatorOptions"))}),e(t.byId("basemap-gallery-button"),"click",function(){p.set("showLocatorOptions",!1),p.set("showSharingOptions",!1),p.set("showBasemapGallery",!p.get("showBasemapGallery"))}),e(t.byId("share-button"),"click",function(){p.set("showLocatorOptions",!1),p.set("showBasemapGallery",!1),p.set("showSharingOptions",!p.get("showSharingOptions")),k.sendEvent("Event","click","Share Button","User clicked the share button.")}),e(t.byId("alert-button"),"click",function(){m.toggleAlerts()}),e(t.byId("dms-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(p.set("showDMSInputs",!0),p.set("showLatLongInputs",!1))}),e(t.byId("lat-long-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(p.set("showDMSInputs",!1),p.set("showLatLongInputs",!0))}),e(t.byId("search-option-go-button"),"click",function(){h.searchAreaByCoordinates()}),e(t.byId("clear-search-pins"),"click",function(){_.map.graphics.clear(),p.set("showClearPinsOption",!1)}),n(".map-layer-controls li").forEach(function(t){e(t,"mouseover",function(e){r.toggleLayerList(t)})}),e(t.byId("master-layer-list"),"mouseleave",function(){s.set("master-layer-list","opacity",0),s.set("master-layer-list","left","-1000px")}),n(".fires_toolbox .toolbox-list li").forEach(function(t){e(t,"click",w.toggleFiresLayerOptions)}),e(t.byId("high-confidence"),"change",w.toggleFiresConfidenceLevel),n(".gfw .overlays-container .overlays-checkbox").forEach(function(t){e(t,"click",w.toggleOverlays)}),e(t.byId("legend-title"),"click",function(){w.toggleLegendContainer()}),e(t.byId("reset-suitability"),"click",function(){w.resetSuitabilitySettings()}),e(t.byId("export-suitability"),"click",function(){w.exportSuitabilitySettings()}),e(t.byId("close-suitability"),"click",function(){r.toggleItemInLayerList("suit")}),e(t.byId("wizard-tab"),"click",function(){m.toggleWizard()}),n(".suitability-accordion .slider-name .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),n(".suitability-accordion .criteria-separator .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),e(t.byId("upload-form"),"change",N.beginUpload.bind(N)),e(document.querySelector(".coordinates-modal-enter-button"),"click",C.savePoint.bind(C))},registerStoreCallbacks:function(){S.set("customFeatures",[]),S.set("removedCustomFeatures",[]),S.set("selectedCustomFeatures",[]),S.set("selectedPresetFeature",null),S.registerCallback("customFeatures",function(){var e=_.map.getLayer(l.customGraphicsLayer.id),t=S.get("customFeatures"),n=e.graphics.length-t.length,r,i,s;i=function(){t.slice(e.graphics.length-t.length).forEach(function(t){e.add(t)})},s=function(){S.get("removedCustomFeatures").forEach(function(t){e.remove(t)})},t.length>0&&n<0?i():n>0?s():t.length===0&&e.clear()}),S.registerCallback("selectedCustomFeatures",function(){var e=S.get("selectedCustomFeatures"),t;e.length>0&&_.map.setExtent(b.graphicsExtent(e),!0)})},toggleLayerList:function(e){var t=e.dataset?e.dataset.filter:e.getAttribute("data-filter"),n=e.dataset?e.dataset.class:e.getAttribute("data-class"),r=a.position(e,!0),o=180,u;u=(r.w-o)/2,s.set("master-layer-list","left",r.x+u+"px"),v.fadeIn("master-layer-list",{duration:100}),i.remove("master-layer-list"),i.add("master-layer-list",n),O&&O.setProps({title:e.children[0].innerHTML,filter:t})},renderComponents:function(){var e=d.getHash();e.lyrs===undefined&&(d.toggleLayers("tcc"),d.toggleLayers("loss")),w.generateSuitabilitySliders(),O=new x({items:l.layersUI},"master-layer-list"),w.generateTimeSliders()},toggleItemInLayerList:function(e){O.toggleFormElement(e)},centerChange:function(e,t,n){if(!L)return;var r=g.webMercatorToGeographic(_.map.extent),i=g.webMercatorToGeographic(_.map.extent),e=f.round(i.getCenter().x,2),t=f.round(i.getCenter().y,2),s=_.map.getLevel(),o=d.getHash(),u=parseFloat(o.x)!=e||parseFloat(o.y)!=t||parseInt(o.l)!=s;if(u){var a=g.geographicToWebMercator(new y(parseFloat(o.x),parseFloat(o.y)));_.map.centerAndZoom(a,parseInt(o.l))}},showInfoPanel:function(e){if(typeof e=="object"){var t=e;w.createDialogBox(t)}else if(M){var t=D.querySelector("."+e);w.createDialogBox(t)}else T.getTemplate("data").then(function(t){M=!0,D.innerHTML=t;var n=D.querySelector("."+e);w.createDialogBox(n)})}}}),define("utils/NavListController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dojo/hash","dojo/io-query","utils/Hasher","utils/Analytics"],function(e,t,n,r,i,s,o,u){function a(e){return e.split(" ").map(function(e){return e==="GFW"?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")}return{loadNavControl:function(e){function i(e,i){t(".nav-item-a.selected ").forEach(function(e){e.parentElement.id.indexOf(i)>-1&&(n.remove(e,"selected"),r.set(e.parentElement.id.match(/(.*)Nav/)[1],"display","none"),n.remove(e.parentElement.id.match(/(.*)Nav/)[1],"selected"))}),n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block");var s=e.id;s=s.replace("Nav","").replace(i,""),o.setHash("n",s);var f=a(i)+" - "+a(e.children[0].innerHTML),l=location.href.split("#")[0]+"#v="+i+"&n="+s;u.sendPageview(l,f)}t(".nav-item").forEach(function(t){t.id.indexOf(e)>-1&&(t.onclick=function(){i(t,e)})})},loadNavView:function(o){var f=s.queryToObject(i()),l=!0,c;f.hasOwnProperty("n")&&t(".nav-item").forEach(function(e){e.id.indexOf(o)>-1&&f.n===e.id.replace("Nav","").replace(o,"")&&(n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block"),n.add(e.id.match(/(.*)Nav/)[1],"selected"),l=!1,c=e.children[0])}),l&&(t(".nav-item-a.default-selection").forEach(function(e){e.parentElement.id.indexOf(o)>-1&&(n.add(e,"selected"),c=e)}),t(".nav-subpage.default-selection").forEach(function(e){e.id.indexOf(o)>-1&&r.set(e,"display","block")})),f.hasOwnProperty("s")&&e.byId(f.s)&&(e.byId(f.s).checked=!0);var h=a(o)+" - "+a(c.innerHTML),p=c.parentElement.id.replace("Nav","").replace(o,""),d=location.href.split("#")[0]+"#v="+o+"&n="+p;u.sendPageview(d,h)},urlControl:function(e){var n={},r,i;n.v=e;var s=t(".nav-item-a.selected");s.length>0?s.forEach(function(t){t.parentElement.id.indexOf(e)>-1&&(n.n=t.parentElement.id.replace("Nav","").replace(e,""))}):n.n&&delete n.n,r=document.getElementsByTagName("input");for(i=0;i<r.length;i++)r[i].checked?n.s=r[i].id:n.s&&delete n.s;var u=!0;r=document.getElementsByTagName("input");for(i=0;i<r.length;i++)r[i].checked&&(n.s=r[i].id,u=!1);var a=e.indexOf("data")>-1;(u||!a)&&n.s&&delete n.s,o.setHashFromState(n)}}}),define("controllers/Header",["dojo/on","dojo/dom","dojo/query","dojo/dom-class","dijit/Dialog","utils/Hasher","main/config","utils/NavListController"],function(e,t,n,r,i,s,o,u){"use strict";var a="large",f=!1;return{init:function(e){if(f)return;this.addSubscriptionDialog(),t.byId("app-header").innerHTML=t.byId("app-header").innerHTML+e,this.bindEvents(),f=!0},setState:function(e){r.remove("app-header",a),r.add("app-header",e),a=e},bindEvents:function(){var t=this;n(".header .nav-link").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r=n.dataset?n.dataset.view:n.getAttribute("data-view"),i=n.dataset?n.dataset.external:n.getAttribute("data-external");t.updateView(r,i,f)})}),n("#dijit_Dialog_0 > div.dijitDialogPaneContent > p > a").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r="map",i=!1;$("#dijit_Dialog_0 > div.dijitDialogTitleBar > span.dijitDialogCloseIcon").click(),t.updateView(r,i,f)})})},updateView:function(e,t,i){if(t==="true"){this.redirectPage(e);return}n(".header .nav-link.selected").forEach(function(e){r.remove(e,"selected")}),n('.nav-link-list [data-view="'+e+'"]').forEach(function(e){r.add(e,"selected")}),i&&s.setHash("v",e)},toggleForView:function(e){e==="map"?this.setForMap():e==="home"?this.setForHome():this.setForGenericView()},setForMap:function(){r.add("nav-content","outer"),r.remove("nav-content","inner"),r.add("app-header","mapView"),r.remove("app-header","generalView")},setForGenericView:function(){this.setForHome(),r.remove("app-header","mapView"),r.add("app-header","generalView"),$(".footerModesContainer").hide()},setForHome:function(){r.add("nav-content","inner"),r.remove("nav-content","outer"),r.remove("app-header","mapView"),r.remove("app-header","generalView"),$(".footerModesContainer").show()},redirectPage:function(e){window.open(o.urls[e],"_blank")},addSubscriptionDialog:function(){var t=new i({style:"width: 300px; text-align: center;"}),r=this,s="<p>To sign up for clearance or fire alerts, go to the Map and select an area to analyze. You can sign up for alerts on that area through the Subscribe button on the analysis report.</p>";t.setContent(s),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").html(function(e,t){return t.replace(/\b(Map)\b/g,'<a style="cursor:pointer;color:#e98300;"><strong>Map</strong></a>')}),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-top","-30px"),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-bottom","-10px"),n("#app-footer > div.footerModesContainer > div > div > div:nth-child(2) > div > div:nth-child(5) > a").forEach(function(n){e(n,"click",function(e){t.show()})})}}}),define("models/FooterModel",["dojo/_base/declare","dojo/dom","main/config","knockout"],function(e,t,n,r){var i=e(null,{constructor:function(e){var n={};n.vm={};var i=n.vm;i.root=e,n.applyBindings=function(e){r.applyBindings(i,t.byId(e))}}});return i.get=function(e){return e==="model"?i.vm:i.vm[e]()},i.set=function(e,t){i.vm[e](t)},i.applyTo=function(e){r.applyBindings(i.vm,document.getElementById(e))},i.initialize=function(e){return i.instance||(i.instance=new i(e)),i.instance},i}),define("controllers/Footer",["dojo/dom","dojo/dom-style","models/FooterModel"],function(e,t,n){"use strict";var r=!1;return{init:function(t){if(r)return;r=!0,e.byId("app-footer").innerHTML=t+e.byId("app-footer").innerHTML},toggle:function(e){e?t.set("app-footer","display","none"):t.set("app-footer","display","block")}}}),define("models/HomeModel",["dojo/_base/declare","main/config","knockout"],function(e,t,n){var r=e(null,{constructor:function(e){r.vm={},r.root=e,r.vm.homeModeOptions=n.observableArray(t.homeModeOptions),r.vm.modeSelect=function(e,t){var n=e.eventName;require(["controllers/HomeController"],function(e){e.handleModeClick(n)})},r.vm.dotSelect=function(e,t){require(["controllers/HomeController"],function(t){t.handleDotClick(e)})},n.applyBindings(r.vm,document.getElementById(e))}});return r.get=function(e){return e==="model"?r.vm:r.vm[e]()},r.set=function(e,t){r.vm[e](t)},r.applyTo=function(e){n.applyBindings(r.vm,document.getElementById(e))},r.initialize=function(e){return r.instance||(r.instance=new r(e)),r.instance},r}),define("controllers/HomeController",["main/config","dojo/dom","dojo/cookie","dijit/Dialog","dijit/registry","dojo/_base/array","models/HomeModel"],function(e,t,n,r,i,s,o){"use strict";var u={},a=!1,f="homeView",l={viewId:"homeView",viewName:"home"},c=!1;return u.startModeAnim=function(){var e=0,t=function(e){var t=o.vm.homeModeOptions(),n=s.map(t,function(t,n){return n===e?t.display=!0:t.display=!1,t});o.vm.homeModeOptions([]),o.vm.homeModeOptions(n)};t(e),require(["dojo/fx","dojo/_base/fx","dojo/query"],function(n,r,i){var s=function(o){var u=i(".modeGroup"),a=u.length,f=n.chain([r.animateProperty({node:u[o],properties:{marginLeft:{start:0,end:-350},opacity:{start:1,end:0}},onEnd:function(){var n;e<a-1?(n=e+1,e++):(n=0,e=0),setTimeout(function(){c||(t(n),setTimeout(function(){c||s(n)},1e3))},250)},units:"px",duration:1e3,delay:2e3})]);f.play()};s(e)})},u.stopModeAnim=function(e){c=!0;if(e){var t=e.id,n=o.vm.homeModeOptions();o.vm.homeModeOptions([]);var r=s.map(n,function(e,n){return t==n?e.display=!0:e.display=!1,o.vm.homeModeOptions.push(e),e})}},{init:function(e){if(a){i.byId("stackContainer").selectChild("homeView");return}a=!0,i.byId("stackContainer").selectChild("homeView"),i.byId("homeView").set("content",e),o.initialize("homeView"),u.startModeAnim()},handleModeClick:function(e){require(["controllers/Header"],function(t){e=="goToMap"?t.updateView("map",!1,!0):e=="goToFires"?t.updateView("fires","true",!0):e=="goToBlogs"?t.updateView("blog","true",!0):e=="goToZSL"&&t.updateView("SPOTT","true",!0)})},handleDotClick:function(e){u.stopModeAnim(e)},showSplashScreen:function(){var t=n("hideSplashScreen"),i,s,o;t||(i="<label><input id='hideSplashScreen' type='checkbox' />&nbsp;&nbsp;Don't ask me again.</label>",s=new r({id:"splashDialog",title:"Welcome to GFW Commodities Analyzer",style:"width: 550px;",content:e.homeDialog.html+i}),s.show(),s.on("cancel",function(){o=document.getElementById("hideSplashScreen").checked,o&&n("hideSplashScreen",o,{expires:31})}))}}}),define("controllers/AboutController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/NavListController"],function(e,t,n,r,i,s){"use strict";var o=!1;return{init:function(e){if(o){i.byId("stackContainer").selectChild("aboutView");return}o=!0,i.byId("stackContainer").selectChild("aboutView"),i.byId("aboutView").set("content",e);var t="about";s.loadNavControl(t),s.loadNavView(t)}}}),define("controllers/DataController",["dijit/registry","utils/NavListController","utils/Hasher","dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style"],function(e,t,n,r,i,s,o){"use strict";var u=!1;return{init:function(r){if(u){e.byId("stackContainer").selectChild("dataView");return}u=!0,e.byId("stackContainer").selectChild("dataView"),e.byId("dataView").set("content",r);var i="data";t.loadNavControl(i),t.loadNavView(i);var s=document.getElementsByTagName("input");for(var o=0;o<s.length;o+=1)s[o].onclick=function(){this.checked?n.setHash("s",this.id):n.removeKey("s");for(var e=0;e<s.length;e++)s[e]!==this&&(s[e].checked=!1)};this.initializeCountryDropdowns()},initializeCountryDropdowns:function(){var e=document.getElementsByClassName("source_download_container"),t=document.getElementsByClassName("source_dropdown_body");e.length>0&&[].map.call(e,function(e){e.onchange=function(){[].map.call(t,function(e){e.value!=="none"&&(e.className="source_dropdown_body")});var n=e.options[e.selectedIndex].value;if(n!=="none"){var r=document.getElementById(n);r.className=r.className+" active"}}})}}}),define("controllers/MethodsController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/NavListController"],function(e,t,n,r,i,s){"use strict";var o=!1;return{init:function(e){if(o){i.byId("stackContainer").selectChild("methodsView");return}o=!0,i.byId("stackContainer").selectChild("methodsView"),i.byId("methodsView").set("content",e);var t="methods";s.loadNavControl(t),s.loadNavView(t)}}}),define("controllers/PublicationsController",["dojo/dom","dijit/registry"],function(e,t){"use strict";var n=!1;return{init:function(e){if(n){t.byId("stackContainer").selectChild("publicationsView");return}n=!0,t.byId("stackContainer").selectChild("publicationsView"),t.byId("publicationsView").set("content",e)}}}),define("controllers/ViewController",["dojo/dom-class","dojo/query","dojo/io-query","dijit/registry","utils/Loader","controllers/Header","controllers/Footer","controllers/MapController","controllers/HomeController","controllers/AboutController","controllers/DataController","controllers/MethodsController","controllers/PublicationsController","utils/Hasher","utils/NavListController"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){"use strict";var v={};return{init:function(e){var t=this;t.load("header",function(n){s.init(n),s.updateView(e,!1),t.load(e)}),t.load("footer",o.init)},load:function(e,t){var n=this;t||(t=this.getCallback(e)),v[e]?(t(),n.viewLoaded(e),r.byId("stackContainer").resize()):(v[e]=!0,i.getTemplate(e).then(function(i){t(i),n.viewLoaded(e),r.byId("stackContainer").resize()}))},viewLoaded:function(t){if(t==="header"||t==="footer")return;o.toggle(t==="map"),s.toggleForView(t),e.remove("app-body"),e.add("app-body",t+"View"),d.urlControl(t)},getCallback:function(e){switch(e){case"home":return a.init.bind(a);case"map":return u.init.bind(u);case"data":return l.init.bind(l);case"methods":return c.init.bind(c);case"about":return f.init.bind(f);case"publications":return h.init.bind(h);default:return}}}}),define("utils/Delegator",["dojo/topic","map/config","map/Controls","map/MapModel","analysis/Query","analysis/config","utils/Helper","map/LayerController","controllers/MapController","controllers/ViewController"],function(e,t,n,r,i,s,o,u,a,f){"use strict";return{startListening:function(){e.subscribe("changeView",function(e){f.load(e)}),e.subscribe("toggleWizard",function(){o.toggleWizard()}),e.subscribe("toggleAlerts",function(){o.toggleAlerts()}),e.subscribe("setAdminBoundariesDefinition",function(n){u.setWizardDynamicLayerDefinition(t.adminUnitsLayer,n),n&&i.zoomToFeatures(s.adminUnit.countryBoundaries,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCertificationSchemeDefinition",function(n){u.setWizardDynamicLayerDefinition(t.certificationSchemeLayer,n),n&&i.zoomToFeatures(s.certifiedArea.schemeQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCommercialEntityDefinition",function(n){u.setWizardDynamicLayerDefinition(t.commercialEntitiesLayer,n),n&&i.zoomToFeatures(s.commercialEntity.commodityQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(u.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("showMillPoints",function(){u.setWizardDynamicLayerDefinition(t.certificationSchemeLayer),u.setWizardMillPointsLayerDefinition(t.mill)}),e.subscribe("toggleLayer",function(e){var r=t[e];if(r){if(r.toolsNode){var i=app.map.getLayer(r.id).visible?"hide":"show";n.toggleToolbox(r,i)}u.toggleLayers(r)}}),e.subscribe("showLayer",function(e){var r=t[e];r&&(u.showLayer(r),r.toolsNode&&n.toggleToolbox(r,"show"))}),e.subscribe("hideLayer",function(e){var r=t[e];r&&(u.hideLayer(r),r.toolsNode&&n.toggleToolbox(r,"hide"))}),e.subscribe("updateLayer",function(e){if(e.layerType==="tiled"){var n=t[e.key];n&&u.toggleLayers(n)}else e.layerType==="dynamic"&&u.updateLayer(e)}),e.subscribe("changeLayerTransparency",function(e,n,r){var i=t[e];i&&u.changeLayerTransparency(i,n,r)}),e.subscribe("customSuitabilityImageReady",function(){u.hideSuitabilityLoader()}),e.subscribe("showInfoPanel",a.showInfoPanel),e.subscribe("toggleItemInLayerList",a.toggleItemInLayerList),e.subscribe("centerChange",function(e,t,n){a.centerChange(e,t,n)}),e.subscribe("showConcessionsLegend",function(){app.map._simpleLegends.concessions.show()}),e.subscribe("hideConcessionsLegend",function(){app.map._simpleLegends.concessions.hide()}),e.subscribe("filterConcessionsLegendItems",function(e){app.map._simpleLegends.concessions.filterItem(e)})}}}),define("main/Main",["dojox/mobile/parser","main/config","esri/config","esri/urlUtils","dojo/_base/array","dojo/has","utils/Hasher","utils/Helper","utils/Delegator","controllers/ViewController","dijit/layout/ContentPane","dijit/layout/StackContainer"],function(e,t,n,r,i,s,o,u,a,f){"use strict";return{init:function(){var t=navigator.userAgent,n=/\(.*?(\d+\.\d+).*?\)/,r,i;t.search("Windows NT")>-1&&(i=n.exec(t),r=i?parseFloat(i[1]):undefined,r>=6.2?document.body.className+=" windows_8":document.body.className+=" windows_7"),s("trident")&&(document.documentElement.className+=" dj_ie"),e.parse(),window.app={},this.applyConfigurations(),this.launchApp()},applyConfigurations:function(){i.forEach(t.corsEnabledServers,function(e){n.defaults.io.corsEnabledServers.push(e)})},launchApp:function(){var e=o.init();u.enableLayout(),a.startListening(),f.init(e)}}}),function(){require(["main/Main"],function(e){e.init()})}(),define("app/js/bundle",function(){});