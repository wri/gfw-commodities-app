/**
 * @license
 * lodash 3.8.0 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */

/**
 * React v0.13.3
 *
 * Copyright 2013-2015, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the BSD-style license found in the
 * LICENSE file in the root directory of this source tree. An additional grant
 * of patent rights can be found in the PATENTS file in the same directory.
 *
 */

// Knockout JavaScript library v3.1.0
// (c) Steven Sanderson - http://knockoutjs.com/
// License: MIT (http://www.opensource.org/licenses/mit-license.php)

define("main/config",{title:"Global Forest Watch Commodities",urls:{gfw:"http://commodities.globalforestwatch.org/#v=map&x=104.27&y=2.08&l=5&lyrs=tcc%2ChansenLoss&wiz=open",blog:"http://commodities.globalforestwatch.org/#v=map&x=114.37&y=2.08&l=5&lyrs=tcc%2ChansenLoss",fires:"http://fires.globalforestwatch.org/map/#activeLayers=activeFires&activeBasemap=topo&x=115&y=0&z=5",partnership:"http://blog.globalforestwatch.org/supplychain/partnership-launches-to-increase-transparency-and-traceability-across-supply-chains-and-meet-zero-deforestation-commitments.html",supplierMonitoring:"http://commodities.globalforestwatch.org/#v=map&x=104.27&y=2.08&l=5&lyrs=tcc%2ChansenLoss&wiz=open",SPOTT:"#"},corsEnabledServers:["https://api-ssl.bitly.com","http://globalforestwatch.org","http://firms.modaps.eosdis.nasa.gov","http://gfw-staging.wri.org","http://gfw-apis.appspot.com","https://storage.googleapis.com"],homeModeOptions:[{html:'<div class="home-slider-container">\n<h3>INITIATIVE LAUNCHED</h3>\n<h4><span>20 PARTNERS TO BUILD GLOBAL DECISION-SUPPORT TOOL</span>\n</h4>\n<div><a href="#">More Info</a></div>\n</div>',eventName:"goToPartnership",display:!0,id:0,tooltip:"Partnership",imageBg:"./app/css/images/Slide-Picture7.jpg"},{html:'<div class="home-slider-container">\n<h3>PALM OIL RISK TOOL</h3>\n<h4><span>NEW GFW COMMODITIES TOOL MEASURES</span>\n<span>DEFORESTATION RISK AROUND PALM OIL MILLS</span></h4>\n<div><a href="./#v=map&x=-17.62&y=-0.89&l=3&lyrs=tcc%2ChansenLoss&wiz=open">More Info</a></div>\n</div>',eventName:"goToWizard",display:!1,id:1,tooltip:"Palm Oil Risk Tool",imageBg:"./app/css/images/Slide-Picture6.jpg"},{html:'<div class="home-slider-container">\n<h3>COMMODITIES MAP</h3>\n<h4><span>EXPLORE THE</span>\n<span>COMMODITIES MAP</span></h4>\n<div><a href="./#v=map&x=114.37&y=1.99&l=5&lyrs=tcc%2ChansenLoss">More Info</a></div>\n</div>',eventName:"goToMap",display:!1,id:2,tooltip:"Commodities Map",imageBg:"./app/css/images/Slide-Picture2.jpg"},{html:'<div class="home-slider-container">\n<h3>ANALYSIS</h3>\n<h4><span>ANALYZE FOREST COVER</span>\n<span>CHANGE IN A CONCESSION</span>\n<span>OR CUSTOM AREA</span></h4>\n<div><a href="./#v=map&x=104.27&y=1.99&l=5&lyrs=tcc%2ChansenLoss&wiz=open">More Info</a></div>\n</div>',eventName:"goToAnalysis",display:!0,id:3,tooltip:"Analysis",imageBg:"./app/css/images/Slide-Picture1.jpg"},{html:'<div class="home-slider-container">\n<h3>SUPPLIER MONITORING</h3>\n<h4><span>MONITOR THE</span>\n<span>ACTIVITY NEAR</span>\n<span>PALM OIL MILLS</span></h4>\n<div><a href="./#v=map&x=104.27&y=2.08&l=5&lyrs=tcc%2ChansenLoss&wiz=open">More Info</a></div>\n</div>',eventName:"goToSupplier",display:!1,id:4,tooltip:"Supplier Monitoring",imageBg:"./app/css/images/Slide-Picture4.jpg"},{html:'<div class="home-slider-container">\n<h3>COMMODITIES</h3>\n<h4><span>ANALYZE LAND USE</span>\n<span>CHANGE WITHIN RSPO</span>\n<span>CERTIFIED AREAS</span></h4>\n<div><a href="#">More Info</a></div>\n</div>',eventName:"goToPalm",display:!1,id:5,tooltip:"Explore Commodities",imageBg:"./app/css/images/Slide-Picture5.jpg"}],homeDialog:{html:"<p>GFW Commodities is constantly undergoing site enhancements including interface redesigns based on user feedback and the incorporation of new datasets and new tools you asked for.</p><p>If you'd like to be kept informed of these kinds of updates, please <a href='http://www.wri.org/global-forest-watch-updates-and-newsletter' target='_blank'>join our mailing list</a>.</p><p>We will <strong>NEVER</strong> sell your email address to anyone, ever. We will only use your email address to send you useful newsletters about updates to the site or request your user feedback. You can unsubscribe at any time.</p>"}}),define("utils/Hasher",["dojo/hash","dojo/io-query","dojo/topic","dojo/_base/array","dojo/query"],function(e,t,n,r,a){"use strict";var i,o,s,l,c;return{init:function(){var r=t.queryToObject(e()),a="home",u=this;return r.hasOwnProperty("v")?a=r.v:(r.v="home",e(t.objectToQuery(r))),i=r.v,s=r.x,l=r.y,c=r.l,o=r.f,n.subscribe("/dojo/hashchange",function(e){r=t.queryToObject(e),r.x===s&&r.y===l||"map"!=r.v||n.publish("centerChange",s,l,c),r.v!==i&&(i=r.v,u.changeView(i))}),a},handleHashChange:function(e,t){t.x!=e.x||t.y!=e.y||t.y!=e.y;EventsController.centerChange(e),MapController.centerChange()},getHash:function(n){return n?t.queryToObject(e())[n]:t.queryToObject(e())},setHash:function(n,r){var a=t.queryToObject(e());a[n]=r,e(t.objectToQuery(a))},setHashFromState:function(n){var r=this.getHash();r.x&&r.y&&(n.x=r.x,n.y=r.y,n.l=r.l),r.lyrs&&(n.lyrs=r.lyrs),r.wiz&&(n.wiz=r.wiz),r.f&&"map"===n.v&&(n.f=r.f),e(t.objectToQuery(n))},removeKey:function(n){var r=t.queryToObject(e());r[n]&&delete r[n],e(t.objectToQuery(r))},toggleLayers:function(n){var r,a,i=t.queryToObject(e());r=i.lyrs?i.lyrs.split(","):[],a=r.indexOf(n),a>-1?r.splice(a,1):r.push(n),0===r.length?delete i.lyrs:i.lyrs=r.join(","),e(t.objectToQuery(i))},forceLayer:function(n,r){var a,i,o=t.queryToObject(e());a=o.lyrs?o.lyrs.split(","):[],i=a.indexOf(n),r?i===-1&&a.push(n):i>-1&&a.splice(i,1),0===a.length?delete o.lyrs:o.lyrs=a.join(","),e(t.objectToQuery(o))},getLayers:function(){var n=t.queryToObject(e()).lyrs;return n?n.split(","):[]},removeLayers:function(n){var r=t.queryToObject(e()),a=r.lyrs.split(",");a.splice(a.indexOf(n),1),r.lyrs=a.join(","),e(t.objectToQuery(r))},changeView:function(e){n.publish("changeView",e)}}}),define("map/config",[],function(){var e="http://gis-gfw.wri.org/arcgis/rest/services/legends/MapServer",t="http://gis-gfw.wri.org/arcgis/rest/services/forest_cover/MapServer",n="http://gis-gfw.wri.org/arcgis/rest/services/image_services/whrc_carbon/ImageServer",r="http://gis-gfw.wri.org/arcgis/rest/services/commodities/MapServer",a="http://gis-gfw.wri.org/arcgis/rest/services/protected_services/MapServer",i="http://gis-gfw.wri.org/arcgis/rest/services/land_use/MapServer",o="http://gis-treecover.wri.org/arcgis/rest/services/ForestGain_2000_2012_map/MapServer",s="http://gis-treecover.wri.org/arcgis/rest/services/ForestGain_2000_2012/ImageServer",l="http://gis-gfw.wri.org/arcgis/rest/services/forest_change/MapServer",c="http://wri-tiles.s3.amazonaws.com/glad_prod/tiles/{z}/{x}/{y}.png",u="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_10/{z}/{x}/{y}.png",d="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_15/{z}/{x}/{y}.png",p="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_20/{z}/{x}/{y}.png",f="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_25/{z}/{x}/{y}.png",m="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_30/{z}/{x}/{y}.png",h="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_50/{z}/{x}/{y}.png",g="https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfw2015/loss_tree_year_75/{z}/{x}/{y}.png",v="http://earthengine.google.org/static/hansen_2013/gain_alpha/{z}/{x}/{y}.png",y="http://gis-treecover.wri.org/arcgis/rest/services/ForestCover_lossyear_density/ImageServer",b="http://gis-gfw.wri.org/arcgis/rest/services/image_services/forma_500/ImageServer",_="http://gis-potico.wri.org/arcgis/rest/services/Fires/Global_Fires/MapServer",C="http://gis-treecover.wri.org/arcgis/rest/services/TreeCover2000/ImageServer",w="http://gis-gfw.wri.org/arcgis/rest/services/cached/wdpa_protected_areas/MapServer",E="https://gfw-staging.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",S="http://gis-gfw.wri.org/arcgis/rest/services/image_services/soy_total_display/ImageServer",I="http://gis-gfw.wri.org/arcgis/rest/services/image_services/prodes/ImageServer",L="http://gis-gfw.wri.org/arcgis/rest/services/cached/gran_chaco_deforestation/MapServer",x="http://gfw-staging.wri.org/arcgis/rest/services/image_services/kpss_mosaic/ImageServer",T="http://gfw-staging.wri.org/arcgis/rest/services/commodities/MapServer",k="http://gis-gfw.wri.org/arcgis/rest/services/Utilities/Geometry/GeometryServer";return{geometryServiceUrl:k,mapOptions:{basemap:"gray",centerX:4,centerY:45,zoom:3,sliderPosition:"top-right"},uploadForm:{title:"Upload Shapefile or CSV",shapefileHeader:"Shapefile Upload Instructions",csvHeader:"CSV Upload Instructions",shapefileInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coordinate System (WGS84).","The shapefile must not exceed 1 MB."],csvInstructions:"Or, select a CSV from your local file system.  The CSV should contain a header row with columns for Name, Latitude, and Longitude."},uploader:{portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate",labelField:"WRI_label",errors:{}},calendars:[{selectedDate:"01/01/2015",domId:"gladCalendarStart",domClass:"glad-calendar",method:"changeGladStart"},{selectedDate:new window.Kalendae.moment("03/10/2017"),domId:"gladCalendarEnd",domClass:"glad-calendar",method:"changeGladEnd"}],submitMessages:[{domId:"storyName",domClass:"submision-message",message:"You must submit a name!"},{domId:"storyCompany",domClass:"submision-message",message:"You must submit a company!"},{domId:"storyPosition",domClass:"submision-message",message:"You must submit a position!"},{domId:"storyEmail",domClass:"submision-message",message:"You must submit an email!"},{domId:"storyData",domClass:"submision-message",message:"You must submit data with your story!"},{domId:"s3Error",domClass:"submision-message",message:"An error occurred during the data upload."},{domId:"layersRequestError",domClass:"submision-message",message:"An error occurred during the data upload to ArcGIS Online."},{domId:"submissionSuccess",domClass:"submision-message",message:"Success! Your data has been uploaded and our team has been notified of your contribution."}],tcdModal:{label:"Adjust the minimum canopy density for tree cover and tree cover loss",densityValue:30},coordinatesDialog:{coordinatesModalHeader:"Enter Point Coordinates",coordinatesEnterButton:"Enter",latitudePlaceholder:"Latitude",longitudePlaceholder:"Longitude",errors:{invalidLatitude:"You did not enter a valid value for Latitude.",invalidLongitude:"You did not enter a valid value for Longitude."}},submissionDialog:{submissionModalHeader:"Enter Point Coordinates",submissionEnterButton:"Ok",submissionPlaceholder:"Latitude",errors:{invalidSubmission:"You did not enter a valid value for Latitude."}},overlays:{id:"MapOverlaysLayer",url:E,defaultLayers:[1,5,8,11],infoTemplate:{content:"<table><tr><td>Name:</td><td>${NAME_1}</td></tr></table><tr><td>Type:</td><td>${TYPE_1}</td></tr></table>"}},road:{layerId:8},river:{layerId:11},settle:{layerId:1},poBounds:{layerId:5},metadataIds:{"forest-change-tree-cover-loss":"tree_cover_loss","forest-change-tree-cover-gain":"tree_cover_gain","forest-change-forma-alerts":"forma","forest-change-gran-chaco":"gran_chaco_deforestation","forest-change-nasa-active-fires":"firms_active_fires","forest-change-prodes-alerts":"prodes","forest-change-glad-alerts":"umd_landsat_alerts","forest-and-land-cover-tree-cover-density":"tree_cover","forest-and-land-cover-intact-forest-landscape":"intact_forest_landscapes_change","forest-and-land-cover-peat-lands":"idn_peat_lands","forest-and-land-cover-carbon-stocks":"aboveground_biomass","forest-and-land-cover-plantations":"gfw_plantations","forest-and-land-cover-brazil-biomes":"bra_biomes","forest-and-land-cover-primary-forest":"idn_primary_forests","forest-and-land-cover-land-cover-global":"global_landcover","forest-and-land-cover-land-cover-indonesia":"idn_land_cover_metadata","forest-and-land-cover-land-cover-south-east-asia":"khm_economic_land_concession","forest-and-land-cover-legal-classifications":"idn_conservation_areas","land-use-oil-palm":"gfw_oil_palm","land-use-rspo-consessions":"rspo_oil_palm","land-use-logging":"gfw_logging","land-use-mining":"gfw_mining","land-use-wood-fiber-plantation":"gfw_wood_fiber","land-use-mill-points":"rspo_mills","land-use-gfw-mill-points":"oil_palm_mills","land-use-moratorium-areas":"idn_forest_moratorium","conservation-protected-areas":"wdpa_protected_areas","conservation-biodiversity-hotspots":"biodiversity_hotspots","suitability-soy-layer":"rtrs","forest-change-soy":"agrosatelite_cerrado_soy_layer_1314","suitability-custom-suitability-mapper":"idn_suitability","suitability-wri-standard-suitability":"idn_suitability","suitability-conservation-areas":"idn_conservation_areas","suitability-elevation":"idn_elevation","suitability-slope":"idn_slope","suitability-rainfall":"idn_rainfall","suitability-soil-drainage":"idn_soil_drainage","suitability-soil-depth":"idn_soil_depth","suitability-soil-acidity":"idn_soil_acidity","suitability-soil-type":"idn_soil_type"},customGraphicsLayer:{id:"CustomFeatures",infoTemplate:{content:"<table><tr><td>Unique ID:</td><td>${WRI_ID:checkAvailable}</td></tr></table>"}},wizardGraphicsLayer:{id:"WizardTempGraphics"},wizardPointGraphicsLayer:{id:"WizardTempPointGraphics"},adminUnitsLayer:{id:"WizardDynamicLayer",url:E,whereField:"NAME_0",layerId:7,infoTemplate:{content:"<table><tr><td>Name:</td><td>${NAME_2}</td></tr></table>"}},certificationSchemeLayer:{id:"WizardDynamicLayer",url:E,whereField:"CERT_SCHEME",layerId:13,infoTemplate:{content:"<table><tr><td>Group:</td><td>${GROUP_NAME}</td></tr><tr><td>Type:</td><td>${TYPE}</td></tr></table>"}},millPointsLayer:{id:"WizardMillPointsLayer",url:T,layerId:27,infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${Parent_Com}</td></tr><tr><td>Mill Name:</td><td>${Mill_name}</td></tr></table>"}},commercialEntitiesLayer:{id:"WizardDynamicLayer",url:E,whereField:"TYPE",layerId:13},tcc:{id:"TreeCoverChange"},gain:{id:"Gain",url:o,legendLayerId:1},gainHelper:{id:"GainHelper",url:s},granChaco:{id:"granChaco",url:L,defaultLayers:[0],toolsNode:"guyra_toolbox"},loss:{id:"Loss",url:y,legendLayerId:0,defaultRange:[1,14],colormap:[[1,219,101,152]],toolsNode:"treecover_change_toolbox"},forma:{id:"FormaAlerts",url:b,legendLayerId:3,defaultRange:[1,19],colormap:[[1,255,0,197]],toolsNode:"forma_toolbox"},prodes:{id:"ProdesAlerts",url:I,legendLayerId:0,defaultRange:[1,15],colormap:[[1,255,0,197]],toolsNode:"prodes_toolbox"},soy:{id:"soy",url:S,legendLayerId:25},fires:{id:"ActiveFires",url:_,defaultLayers:[0,1,2,3],toolsNode:"fires_toolbox",infoTemplate:{content:"<table><tr><td>Latitude: </td><td>${LATITUDE}</td></tr><tr><td>Longitude: </td><td>${LONGITUDE}</td></tr><tr><td>Brightness: </td><td>${BRIGHTNESS}</td></tr><tr><td>Confidence: </td><td>${CONFIDENCE}</td></tr><tr><td>Acquisition Date: </td><td>${ACQ_DATE}</td></tr><tr><td>Acquisition Time: </td><td>${ACQ_TIME}</td></tr></table>"}},gladAlerts:{id:"gladAlerts",url:c,minDateValue:15e3,maxDateValue:9999999,confidence:[0,1],legendLayerId:7,defaultStartRange:[0,1,1,365,365,366],defaultEndRange:[0,1,1,365,365,366],colormap:[[1,255,102,153]],outputValues:[0,1,0],toolsNode:"glad_toolbox"},gladFootprints:{id:"gladFootprints",url:l,layerId:8,defaultLayers:[8]},hansenLoss:{id:"hansenLoss",url:m,levels:[{url:u,id:"hansenLoss10",value:10},{url:d,id:"hansenLoss15",value:15},{url:p,id:"hansenLoss20",value:20},{url:f,id:"hansenLoss25",value:25},{url:m,id:"hansenLoss",value:30},{url:h,id:"hansenLoss50",value:50},{url:g,id:"hansenLoss75",value:75}],minYear:1,maxYear:14,confidence:[0,1],legendLayerId:0,defaultStartRange:[0,1,1,365,365,366],defaultEndRange:[0,1,1,365,365,366],colormap:[[1,255,102,153]],outputValues:[0,1,0],toolsNode:"hansen_change_toolbox"},hansenGain:{id:"hansenGain",url:v,legendLayerId:1},tcd:{id:"TreeCoverDensity",url:C,legendLayerId:2,colormap:[[50,14,204,14]],outputValue:[50]},primForest:{id:"forestCover_commodities",url:r,infoTemplate:{content:"<div>Area: ${area_ha:NumberFormat(places:0)}</div>"},layerId:8},suit:{id:"CustomSuitability",url:x,legendLayerId:4,toolsNode:"suitability_toolbox"},biomes:{id:"forestCover_commodities",url:r,layerId:9,infoTemplate:{content:"<div>Area: ${area_ha:NumberFormat(places:0)}</div>"}},byType:{id:"byType",url:t,layerId:5,defaultLayers:[5]},bySpecies:{id:"bySpecies",url:t,defaultLayers:[8],layerId:8,infoTemplate:{content:"<table><tr><td>type: </td><td>${type}</td></tr><tr><td>country: </td><td>${country}</td></tr><tr><td>percent: </td><td>${percent}</td></tr><tr><td>type_text: </td><td>${type_text}</td></tr><tr><td>area_ha: </td><td>${area_ha}</td></tr><tr><td>spec_org: </td><td>${spec_org}</td></tr></table>"}},ifl:{id:"forestCover_forestCover",url:t,layerId:0},peat:{id:"forestCover_commodities",url:r,layerId:22},tfcs:{id:"forestCover_tropical",legendLayerId:8,url:n},ldcover:{id:"forestCover_landCover",url:a,layerId:4},ldcoverIndo:{id:"forestCover_commodities",url:r,layerId:12},ldcoverAsia:{id:"forestCover_commodities",url:r,layerId:10},legal:{id:"forestCover_commodities",url:r,layerId:13},oilPerm:{id:"forestUse_landUse",url:i,layerId:1,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${Concession Type}</td></tr><tr><td>Country: </td><td>${Country}</td></tr><tr><td>Group: </td><td>${Group:checkAvailable}</td></tr><tr><td>Certification Status: </td><td>${Certification Status:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha): </td><td>${GIS Calculated Area (ha):NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},rspoPerm:{id:"forestCover_landCover",url:a,layerId:0,infoTemplate:{content:"<table><tr><td>Concession Type: </td><td>${Concession Type:checkAvailable}</td></tr><tr><td>Country:</td><td>${Country:checkAvailable}</td></tr><tr><td>Group:</td><td>${group_comp:checkAvailable}</td></tr><tr><td>Certification Status:</td><td>${cert_schem:checkAvailable}</td></tr><tr><td>GIS Calculated Area (ha):</td><td>${GIS Calculated Area (ha):NumberFormat}</td></tr><tr><td>Certificate ID:</td><td>${certificat:checkAvailable}</td></tr><tr><td>Certificate Issue Date:</td><td>${issued:checkAvailable}</td></tr><tr><td>Certificate Expiry Date:</td><td>${expired:checkAvailable}</td></tr><tr><td>Mill name:</td><td>${mill:checkAvailable}</td></tr><tr><td>Mill location:</td><td>${location:checkAvailable}</td></tr><tr><td>Mill capacity (t/hour):</td><td>${capacity:NumberFormat}</td></tr><tr><td>Certified CPO (mt):</td><td>${cpo:NumberFormat}</td></tr><tr><td>Certified PK (mt):</td><td>${pk:NumberFormat}</td></tr><tr><td>Estate Suppliers:</td><td>${estate:checkAvailable}</td></tr><tr><td>Estate Area (ha):</td><td>${estate_1:NumberFormat}</td></tr><tr><td>Outgrower Area (ha):</td><td>${outgrower:NumberFormat}</td></tr><tr><td>Scheme Smallholder area (ha):</td><td>${sh:NumberFormat}</td></tr><tr><td>Source: </td><td>${Source:checkAvailable}</td></tr></table>"}},logPerm:{id:"forestUse_landUse",url:i,layerId:0},minePerm:{id:"forestUse_landUse",url:i,layerId:2},woodPerm:{id:"forestUse_landUse",url:i,layerId:3},moratorium:{id:"forestUse_commodities",url:r,layerId:7},mill:{id:"forestUse_commodities",url:r,layerId:27,query:"certificat = 'RSPO Certified'",infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${group_name}</td></tr><tr><td>Mill Name:</td><td>${mill_name_}</td></tr><tr><td>Certification Status:</td><td>${certificat}</td></tr></table>"}},gfwMill:{id:"forestUse_commodities",url:r,layerId:27,query:"certificat = 'None'",infoTemplate:{content:"<table><tr><td>Parent Company:</td><td>${group_name}</td></tr><tr><td>Mill Name:</td><td>${mill_name_}</td></tr><tr><td>Certification Status:</td><td>${certificat}</td></tr></table>"}},pal:{id:"ProtectedAreas",url:w,infoTemplate:{content:"<table><tr><td>Local Name:</td><td>${Local Name}</td></tr><tr><td>Local Designation:</td><td>${Local Designation}</td></tr><tr><td>WDPA ID:</td><td>${WDPA ID}</td></tr><tr><td>Source:</td><td>${Source:checkAvailable}</td></tr></table>"}},biodiversity:{id:"Biodiversity",url:a,layerId:2},palHelper:{id:"ProtectedAreasHelper",url:w,layerId:0},concession:{url:e},responsibleSoy:{id:"productionSuitability",url:r,layerId:28},opsd:{id:"productionSuitability",url:r,layerId:23},cons:{id:"productionSuitability",url:r,layerId:14},elev:{id:"productionSuitability",url:r,layerId:19},slope:{id:"productionSuitability",url:r,layerId:20},rain:{id:"productionSuitability",url:r,layerId:21},soilDr:{id:"productionSuitability",url:r,layerId:16},soilDe:{id:"productionSuitability",url:r,layerId:17},soilAc:{id:"productionSuitability",url:r,layerId:18},soilTy:{id:"productionSuitability",url:r,layerId:15},legendLayer:{id:"LegendLayer",url:e},layersUI:[{id:"tcc",title:"Tree Cover Change",subtitle:"",filter:"forest-change",type:"radio",layerType:"none",children:[{id:"hansenLoss",title:"Loss",subtitle:"(annual, 30m, global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-change",type:"check",layerType:"image",infoDivClass:"forest-change-tree-cover-loss"},{id:"hansenGain",title:"Gain",subtitle:"(12 years, 30m, global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-change",type:"check",layerType:"image",infoDivClass:"forest-change-tree-cover-gain"}]},{id:"prodes",title:"Prodes deforestation",subtitle:"(annual, 30m, Brazilian Amazon, INPE)",filter:"forest-change",type:"radio",layerType:"image",infoDivClass:"forest-change-prodes-alerts"},{id:"fires",title:"Active Fires",subtitle:"(past 7 days, 1km, global; NASA)",filter:"forest-change",type:"radio",layerType:"dynamic",forceUnderline:!0,infoDivClass:"forest-change-nasa-active-fires"},{id:"granChaco",title:"Gran Chaco deforestation (Guyra Paraguay)",subtitle:"(monthly, 30m, Gran Chaco, Guyra)",filter:"forest-change",type:"radio",layerType:"dynamic",forceUnderline:!0,visible:!0,infoDivClass:"forest-change-gran-chaco",endChild:!0},{kids:["gladAlerts","forma"],id:"treeCoverLossAlerts",title:"Tree Cover Loss Alerts",subtitle:"(near real-time)",filter:"forest-change",layerType:"dynamic"},{id:"gladAlerts",title:"GLAD alerts",subtitle:"(weekly, 30m, select countries, UMD/GLAD)",filter:"forest-change",type:"radio",layerType:"image",visible:!0,infoDivClass:"forest-change-glad-alerts",parent:"treeCoverLossAlerts",endChild:!1,children:[{id:"gladFootprints",title:"Geographic Coverage",filter:"forest-change",type:"check",layerType:"dynamic",infoDivClass:"forest-change-glad-footprints",metadata:{title:"GLAD ALERTS GEOGRAPHIC COVERAGE",overview:"<p>This layer displays the geographic coverage of GLAD alerts, which currently span Brazil, Peru, Republic of the Congo, and Kalimantan (Indonesia)</p>"}},{id:"gladConfidence",title:"Show only confirmed alerts",filter:"forest-change",type:"check",layerType:"none",infoDivClass:"forest-change-glad-confidence",metadata:{title:"SHOW ONLY CONFIRMED ALERTS",overview:"<p>Alerts become confirmed when a second satellite pass has alsoidentified the pixel as an alert. Most of the alerts that are not confirmed have not had another satellite pass, due to the 8-day revisit time or cloud cover.</p>"}}]},{id:"forma",title:"FORMA Alerts",subtitle:"(monthly, 500m, humid tropics)",filter:"forest-change",type:"radio",layerType:"image",forceUnderline:!0,visible:!0,infoDivClass:"forest-change-forma-alerts",parent:"treeCoverLossAlerts",endChild:!1},{id:"tcd",title:"Tree Cover Density",subtitle:"(year 2000, 30m global, Hansen/UMD/Google/USGS/NASA)",filter:"forest-cover",type:"radio",layerType:"image",infoDivClass:"forest-and-land-cover-tree-cover-density"},{id:"ifl",title:"Intact Forest Landscapes",subtitle:"(year 2013, 30m global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-intact-forest-landscape"},{id:"peat",title:"Peat Lands",subtitle:"(year 2011, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-peat-lands"},{id:"tfcs",title:"Aboveground Biomass Density",subtitle:"(early 2000s, 1km, tropics)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-carbon-stocks"},{id:"biomes",title:"Brazil Biomes",subtitle:"(year 2004, Brazil)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-brazil-biomes"},{kids:["byType","bySpecies"],id:"plantations",title:"Tree plantations",filter:"forest-cover",type:"check",layerType:"dynamic"},{id:"byType",title:"by type",filter:"forest-cover",type:"radio",layerType:"dynamic",parent:"plantations",visible:!0,infoDivClass:"forest-and-land-cover-plantations"},{id:"bySpecies",title:"by species",filter:"forest-cover",type:"radio",layerType:"dynamic",parent:"plantations",visible:!0,infoDivClass:"forest-and-land-cover-plantations"},{id:"primForest",title:"Primary Forests",subtitle:"(2000, 30m, Indonesia)",filter:"forest-cover",type:"radio",forceUnderline:!0,layerType:"image",infoDivClass:"forest-and-land-cover-primary-forest"},{id:"ldcover",title:"Land Cover",subtitle:"(mid 2000s, global)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-global"},{id:"ldcoverIndo",title:"Land Cover Indonesia",subtitle:"(mid 2000s, Indonesia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-indonesia"},{id:"ldcoverAsia",title:"Land Cover Southeast Asia",subtitle:"(mid 2000s, Southeast Asia)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-land-cover-south-east-asia"},{id:"legal",title:"Legal Classifications",subtitle:"(year 2010, select countries)",filter:"forest-cover",type:"radio",layerType:"dynamic",infoDivClass:"forest-and-land-cover-legal-classifications"},{kids:["oilPerm","rspoPerm","woodPerm","minePerm","logPerm","soy"],id:"newConcessions",title:"Concessions",filter:"forest-use",type:"check",layerType:"dynamic"},{id:"oilPerm",title:"Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-oil-palm",parent:"newConcessions"},{id:"rspoPerm",title:"RSPO Oil Palm",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-rspo-consessions",parent:"newConcessions"},{id:"soy",title:"Soy in Cerrado Biome",subtitle:"(Brazil Cerrado, 2013/2014 crop, 30m, AgrosatÃ©lite)",filter:"forest-use",type:"check",layerType:"image",forceUnderline:!0,parent:"newConcessions",infoDivClass:"forest-change-soy"},{id:"logPerm",title:"Wood Fiber",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-wood-fiber-plantation",parent:"newConcessions"},{id:"minePerm",title:"Mining",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mining",parent:"newConcessions"},{id:"woodPerm",title:"Managed Forests",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-logging",parent:"newConcessions",endChild:!0},{kids:["mill","gfwMill"],id:"newInfrastructure",title:"Infrastructure",filter:"forest-use",type:"check",layerType:"dynamic"},{id:"mill",title:"RSPO Palm Oil Mills",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-mill-points",parent:"newInfrastructure"},{id:"gfwMill",title:"Palm Oil Mills",subtitle:"(varies, select countries)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-gfw-mill-points",parent:"newInfrastructure",endChild:!0},{kids:["moratorium"],id:"newOther",title:"Other",filter:"forest-use",type:"check",layerType:"dynamic"},{id:"moratorium",title:"Indonesia Moratorium Areas",subtitle:"(IMM V7/V6, 2014, Indonesia)",filter:"forest-use",type:"check",layerType:"dynamic",infoDivClass:"land-use-moratorium-areas",parent:"newOther",endChild:!0},{id:"pal",title:"Protected Areas",subtitle:"(varies, global)",filter:"conservation",type:"check",layerType:"tiled",infoDivClass:"conservation-protected-areas"},{id:"biodiversity",title:"Biodiversity Hotspots",subtitle:"(year 2011, global)",filter:"conservation",type:"check",layerType:"dynamic",infoDivClass:"conservation-biodiversity-hotspots"},{kids:["responsibleSoy"],id:"soyBean",title:"Soybean",filter:"agro-suitability",type:"check",layerType:"dynamic"},{id:"responsibleSoy",title:"RTRS Guides for Responsible Soy Expansion",subtitle:"",filter:"agro-suitability",type:"radio",layerType:"image",parent:"soyBean",infoDivClass:"suitability-soy-layer"},{kids:["suit","opsd","cons","elev","slope","rain","soilDr","soilDe","soilAc","soilTy"],id:"oilPalm",title:"Oil Palm",filter:"agro-suitability",type:"check",layerType:"dynamic"},{id:"suit",title:"Custom Suitability Map",subtitle:"",filter:"agro-suitability",type:"check",parent:"oilPalm",layerType:"image",infoDivClass:"suitability-custom-suitability-mapper"},{id:"opsd",title:"WRI Suitability Standard - Oil Palm",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-wri-standard-suitability"},{id:"cons",title:"Conservation Areas",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-conservation-areas"},{id:"elev",title:"Elevation",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-elevation"},{id:"slope",title:"Slope",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-slope"},{id:"rain",title:"Rainfall",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-rainfall"},{id:"soilDr",title:"Soil Drainage",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-drainage"},{id:"soilDe",title:"Soil Depth",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-depth"},{id:"soilAc",title:"Soil Acidity",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-acidity"},{id:"soilTy",title:"Soil Type",subtitle:"",filter:"agro-suitability",type:"radio",parent:"oilPalm",layerType:"dynamic",infoDivClass:"suitability-soil-type"}],treeCoverLossSlider:{baseYear:2e3,numYears:12},customSuitabilityDefaults:{computeBinaryRaster:[{id:0,values:"2,3,5,8,9,11,15,17,18",classCount:32,operator:"in",name:"LCInpR"},{id:1,values:"0",classCount:32,operator:"in",name:"PeatInpR"},{id:2,values:"30",operator:"lt",name:"SlopeInpR"},{id:3,values:"1000",operator:"gt",name:"ConsInpR"},{id:4,values:"100",operator:"gt",name:"WaterInpR"},{id:5,values:"1000",operator:"lt",name:"ElevInpR"},{id:6,values:"1500,6000",operator:"between",name:"RainfallInpR"},{id:7,values:"2,3,4,99",classCount:32,operator:"in",name:"SDrainInpR"},{id:8,values:"3,4,5,6,7,99",classCount:32,operator:"in",name:"SDepthInpR"},{id:9,values:"1,2,3,4,5,6,7,99",classCount:32,operator:"in",name:"SAcidInpR"},{id:10,values:"0,1,2,3,5,6,7,8,9",classCount:32,operator:"in",name:"STypeInpR"}]},checkboxItems:[{node:"shrub-check",name:"landcover-checkbox",value:"2",checked:!0},{node:"bareland-check",name:"landcover-checkbox",value:"3",checked:!0},{node:"secondary-forest-check",name:"landcover-checkbox",value:"4",checked:!1},{node:"dryland-agro-check",name:"landcover-checkbox",value:"5",checked:!0},{node:"water-check",name:"landcover-checkbox",value:"6",checked:!1},{node:"mining-check",name:"landcover-checkbox",value:"7",checked:!1},{node:"plantation-forest-check",name:"landcover-checkbox",value:"8",checked:!0},{node:"estate-crop-check",name:"landcover-checkbox",value:"9",checked:!0},{node:"swamp-shrub-check",name:"landcover-checkbox",value:"10",checked:!1},{node:"primary-swamp-check",name:"landcover-checkbox",value:"12",checked:!1},{node:"secondary-swamp-check",name:"landcover-checkbox",value:"13",checked:!1},{node:"settlement-check",name:"landcover-checkbox",value:"14",checked:!1},{node:"grassland-check",name:"landcover-checkbox",value:"15",checked:!0},{node:"secondary-mangrove-check",name:"landcover-checkbox",value:"16",
checked:!1},{node:"dryland-check",name:"landcover-checkbox",value:"17",checked:!0},{node:"rice-check",name:"landcover-checkbox",value:"18",checked:!0},{node:"fish-check",name:"landcover-checkbox",value:"19",checked:!1},{node:"transmigration-check",name:"landcover-checkbox",value:"20",checked:!1},{node:"swamp-check",name:"landcover-checkbox",value:"21",checked:!1},{node:"primary-mangrove-check",name:"landcover-checkbox",value:"22",checked:!1},{node:"airport-check",name:"landcover-checkbox",value:"23",checked:!1},{node:"inceptisol-check",name:"soil-type-checkbox",value:"1",checked:!0},{node:"oxisol-check",name:"soil-type-checkbox",value:"7",checked:!0},{node:"alfisol-check",name:"soil-type-checkbox",value:"5",checked:!0},{node:"ultisol-check",name:"soil-type-checkbox",value:"2",checked:!0},{node:"spodosol-check",name:"soil-type-checkbox",value:"8",checked:!0},{node:"entisol-check",name:"soil-type-checkbox",value:"3",checked:!0},{node:"histosol-check",name:"soil-type-checkbox",value:"4",checked:!1},{node:"mollisol-check",name:"soil-type-checkbox",value:"9",checked:!0},{node:"rock-check",name:"soil-type-checkbox",value:"10",checked:!1}],suitabilitySliderTooltips:{peat:{0:"0 cm",1:"Less than 50 cm",2:"50 - 100 cm",3:"100- 200 cm"},rainfall:{label:"mm/yr"},drainage:{1:"very poor",2:"poor, imperfect",3:"well, moderately well",4:"excessive, slightly excessive"},depth:{1:"none, very shallow (0-10 cm)",2:"shallow (11-25 cm)",3:"mod shallow (26-50 cm)",4:"mod deep (51-75 cm)",5:"deep (76-100 cm)",6:"very deep (101-150 cm)",7:"extremely deep (> 150 cm)"},acidity:{1:"excessively acid (< 4.0)",2:"extremely acid (4.0 - 4.5)",3:"very strongly acid (4.6 - 5.0)",4:"strongly acid (5.1 - 5.5)",5:"moderately acid (5.6 - 6.0)",6:"slightly acid (6.1 - 6.5)",7:"neutral (6.6 - 7.3)",8:"slightly alkaline (7.4 - 7.8)"},treeCover:{0:"2001",1:"2002",2:"2003",3:"2004",4:"2005",5:"2006",6:"2007",7:"2008",8:"2009",9:"2010",10:"2011",11:"2012"}},firesConfidenceDialog:{title:"High Confidence Fires",text:"GFW employs a recommendation for detecting forest clearing fires (described in Morton and Defries, 2008), identifying fires with a Brightness value greater than or equal to 330 Kelvin and a Confidence value greater than or equal to 30% to indicate fires that have a higher confidence for being forest-clearing fires. Low confidence fires are lower intensity fires that could either be from non-forest-clearing fire activity (clearing fields or grass burning), or could be older fires that have decreased in intensity (smoldering rather than flaming fires). The use of this classification establishes a higher standard for fire detection than using all fire alerts equally."},suitabilityExportDialog:{title:"Export Suitability Settings and GeoTiff",instruction:"The resolution downloaded for the Suitability Map is based on your current zoom extent. For a higher resolution download, zoom in closer to your area of interest."},simpleLegends:{concessions:{url:E+"/legend?f=json",parentId:"legend-content",title:"Concessions",id:"concessions-legend",layers:[{id:13}]},road:{url:E+"/legend?f=json",parentId:"legend-content",id:"roads-legend",title:"Roads",layers:[{id:9,labels:["Primary"]},{id:10,labels:["Secondary"]}]},settle:{url:E+"/legend?f=json",parentId:"legend-content",id:"settle-legend",title:"Settlements",layers:[{id:2},{id:3,labels:["Cities and Towns"]}]},poBounds:{url:E+"/legend?f=json",parentId:"legend-content",id:"po-bounds-legend",title:"Political Boundaries",layers:[{id:6,labels:["Admin Level 1"]},{id:7,labels:["Admin Level 2"]}]}}}}),define("map/Symbols",["esri/Color","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(e,t,n,r){"use strict";var a={getPolygonSymbol:function(){return new t(t.STYLE_SOLID,new n(n.STYLE_SOLID,new e([255,0,0]),2),new e([103,200,255,0]))},getPointSymbol:function(){return new r(r.STYLE_CIRCLE,10,new n(n.STYLE_SOLID,new e([255,0,0]),1),new e([0,0,0,.25]))},getHighlightPolygonSymbol:function(){return new t(t.STYLE_SOLID,new n(n.STYLE_SOLID,new e([0,255,255]),2),new e([103,200,255,0]))},getHighlightPointSymbol:function(){return new r(r.STYLE_CIRCLE,10,new n(n.STYLE_SOLID,new e([0,255,255]),1),new e([0,0,0,.25]))}};return a}),define("utils/assert",[],function(){"use strict";return function(e,t){if(!e)throw new Error(["Assertion Error:",t].join(" "))}}),define("utils/GeoHelper",["map/config","map/Symbols","esri/units","esri/graphic","esri/geometry/Point","esri/geometry/Circle","esri/SpatialReference","esri/tasks/GeometryService","esri/geometry/webMercatorUtils","dojo/Deferred","dojo/_base/array","utils/assert"],function(e,t,n,r,a,i,o,s,l,c,u,d){var p;return{getSpatialReference:function(){return p=p||new o(102100)},generatePointGraphicFromGeometric:function(e,n,i){return new r(l.geographicToWebMercator(new a(e,n)),t.getPointSymbol(),i)},preparePointAsPolygon:function(e,o){var s=new i(new a(e.geometry),{radius:o||50,radiusUnit:n.KILOMETERS});return new r(s,t.getPolygonSymbol(),e.attributes)},applySelectionSymbolToFeature:function(e){var n="point"===e.geometry.type?t.getHighlightPointSymbol():t.getHighlightPolygonSymbol();return new r(e.geometry,n,e.attributes)},zoomToFeature:function(e){e.geometry.x?app.map.centerAndZoom(e.geometry,9):e.geometry.center?app.map.centerAndZoom(e.geometry.center,9):app.map.setExtent(e.geometry.getExtent(),!0)},nextCustomFeatureId:function(){var t,n,r=app.map.getLayer(e.customGraphicsLayer.id),a=r.graphics,i=a.length,o=0;for(t=0;t<i;t++)n=parseInt(a[t].attributes.WRI_ID),isNaN(n)||(o=Math.max(o,n));return o+1},convertGeometryToGeometric:function(e){function t(e,t){var n=!1;return u.forEach(e,function(e){e[0]===t[0]&&e[1]===t[1]&&(n=!0)}),n}var n,r,i=[],o=[],s=this;return u.forEach(e.rings,function(e){u.forEach(e,function(e){r=new a(e,s.getSpatialReference()),n=l.xyToLngLat(r.x,r.y),t(o,n)?(o.push(n),i.push(o),o=[]):o.push(n)})}),{geom:i.length>1?i:i[0],type:i.length>1?"MultiPolygon":"Polygon"}},union:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new Error("Method expects polygons paramter to be of type Array");var n=new c,r=r||new s(e.geometryServiceUrl);return 1===t.length?n.resolve(t[0]):r.union(t,n.resolve,n.resolve),n},removeGraphicByField:function(e,t,n){d(e&&t&&n,"Invalid Parameters for 'GeoHelper.removeGraphicByField'");var r=app.map.getLayer(e);r&&u.some(r.graphics,function(e){if(e.attributes[t]===n)return r.remove(e),!0})}}}),function(){function e(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||e===_&&r)return 1;if(e<t||!r||t===_&&n)return-1}return 0}function t(e,t,n){for(var r=e.length,a=n?r:-1;n?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function n(e,t,n){if(t!==t)return p(e,n);n-=1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function r(e){return"function"==typeof e||!1}function a(e){return"string"==typeof e?e:null==e?"":e+""}function i(e){return e.charCodeAt(0)}function o(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function s(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function l(t,n){return e(t.a,n.a)||t.b-n.b}function c(e){return Fe[e]}function u(e){return Re[e]}function d(e){return"\\"+Ue[e]}function p(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var a=e[t];if(a!==a)return t}return-1}function f(e){return!!e&&"object"==typeof e}function m(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function h(e,t){for(var n=-1,r=e.length,a=-1,i=[];++n<r;)e[n]===t&&(e[n]=B,i[++a]=n);return i}function g(e){for(var t=-1,n=e.length;++t<n&&m(e.charCodeAt(t)););return t}function v(e){for(var t=e.length;t--&&m(e.charCodeAt(t)););return t}function y(e){return je[e]}function b(m){function Fe(e){if(f(e)&&!(Ai(e)||e instanceof Be)){if(e instanceof je)return e;if(Kr.call(e,"__chain__")&&Kr.call(e,"__wrapped__"))return jn(e)}return new je(e)}function Re(){}function je(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Be(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Ta,this.__views__=null}function Ue(){this.__data__={}}function ze(e){var t=e?e.length:0;for(this.data={hash:ya(null),set:new ua};t--;)this.push(e[t])}function Ve(e,t){var n=e.data;return("string"==typeof t||dr(t)?n.set.has(t):n.hash[t])?0:-1}function We(e,t){var n=-1,r=e.length;for(t||(t=Mr(r));++n<r;)t[n]=e[n];return t}function Ge(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function He(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ye(e,t){for(var n=-1,r=e.length,a=-1,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[++a]=o)}return i}function Ke(e,t){for(var n=-1,r=e.length,a=Mr(r);++n<r;)a[n]=t(e[n],n,e);return a}function Qe(e,t,n,r){var a=-1,i=e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}function Je(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Xe(e,t){return e===_?t:e}function Ze(e,t,n,r){return e!==_&&Kr.call(r,n)?e:t}function et(e,t,n){var r=Gi(t);sa.apply(r,Ya(t));for(var a=-1,i=r.length;++a<i;){var o=r[a],s=e[o],l=n(s,t[o],o,e,t);(l===l?l===s:s!==s)&&(s!==_||o in e)||(e[o]=l)}return e}function tt(e,t){for(var n=-1,r=null==e,a=!r&&Sn(e),i=a&&e.length,o=t.length,s=Mr(o);++n<o;){var l=t[n];s[n]=a?In(l,i)?e[l]:_:r?_:e[l]}return s}function nt(e,t,n){n||(n={});for(var r=-1,a=t.length;++r<a;){var i=t[r];n[i]=e[i]}return n}function rt(e,t,n){var r=typeof e;return"function"==r?t===_?e:jt(e,t,n):null==e?kr:"object"==r?bt(e):t===_?Or(e):_t(e,t)}function at(e,t,n,r,a,i,o){var s;if(n&&(s=a?n(e,r,a):n(e)),s!==_)return s;if(!dr(e))return e;if(r=Ai(e)){if(s=_n(e),!t)return We(e,s)}else{var l=Jr.call(e),c=l==H;if(l!=$&&l!=U&&(!c||a))return Me[l]?wn(e,l,t):a?e:{};if(s=Cn(c?{}:e),!t)return Ra(s,e)}for(i||(i=[]),o||(o=[]),a=i.length;a--;)if(i[a]==e)return o[a];return i.push(e),o.push(s),(r?Ge:pt)(e,function(r,a){s[a]=at(r,t,n,a,e,i,o)}),s}function it(e,t,n){if("function"!=typeof e)throw new Wr(j);return da(function(){e.apply(_,n)},t)}function ot(e,t){var r=e?e.length:0,a=[];if(!r)return a;var i=-1,o=bn(),s=o==n,l=s&&200<=t.length?Ga(t):null,c=t.length;l&&(o=Ve,s=!1,t=l);e:for(;++i<r;)if(l=e[i],s&&l===l){for(var u=c;u--;)if(t[u]===l)continue e;a.push(l)}else 0>o(t,l,0)&&a.push(l);return a}function st(e,t){var n=!0;return Ba(e,function(e,r,a){return n=!!t(e,r,a)}),n}function lt(e,t){var n=[];return Ba(e,function(e,r,a){t(e,r,a)&&n.push(e)}),n}function ct(e,t,n,r){var a;return n(e,function(e,n,i){return t(e,n,i)?(a=r?n:e,!1):void 0}),a}function ut(e,t,n){for(var r=-1,a=e.length,i=-1,o=[];++r<a;){var s=e[r];if(f(s)&&Sn(s)&&(n||Ai(s)||lr(s))){t&&(s=ut(s,t,n));for(var l=-1,c=s.length;++l<c;)o[++i]=s[l]}else n||(o[++i]=s)}return o}function dt(e,t){za(e,t,br)}function pt(e,t){return za(e,t,Gi)}function ft(e,t){return Va(e,t,Gi)}function mt(e,t){for(var n=-1,r=t.length,a=-1,i=[];++n<r;){var o=t[n];Mi(e[o])&&(i[++a]=o)}return i}function ht(e,t,n){if(null!=e){n!==_&&n in Fn(e)&&(t=[n]),n=-1;for(var r=t.length;null!=e&&++n<r;)e=e[t[n]];return n&&n==r?e:_}}function gt(e,t,n,r,a,i){if(e===t)return!0;var o=typeof e,s=typeof t;if("function"!=o&&"object"!=o&&"function"!=s&&"object"!=s||null==e||null==t)e=e!==e&&t!==t;else e:{var o=gt,s=Ai(e),l=Ai(t),c=z,u=z;s||(c=Jr.call(e),c==U?c=$:c!=$&&(s=gr(e))),l||(u=Jr.call(t),u==U?u=$:u!=$&&gr(t));var d=c==$,l=u==$,u=c==u;if(!u||s||d){if(!r&&(c=d&&Kr.call(e,"__wrapped__"),l=l&&Kr.call(t,"__wrapped__"),c||l)){e=o(c?e.value():e,l?t.value():t,n,r,a,i);break e}if(u){for(a||(a=[]),i||(i=[]),c=a.length;c--;)if(a[c]==e){e=i[c]==t;break e}a.push(e),i.push(t),e=(s?mn:gn)(e,t,o,n,r,a,i),a.pop(),i.pop()}else e=!1}else e=hn(e,t,c)}return e}function vt(e,t,n,r,a){for(var i=-1,o=t.length,s=!a;++i<o;)if(s&&r[i]?n[i]!==e[t[i]]:!(t[i]in e))return!1;for(i=-1;++i<o;){var l=t[i],c=e[l],u=n[i];if(s&&r[i]?l=c!==_||l in e:(l=a?a(c,u,l):_,l===_&&(l=gt(u,c,a,!0))),!l)return!1}return!0}function yt(e,t){var n=-1,r=Sn(e)?Mr(e.length):[];return Ba(e,function(e,a,i){r[++n]=t(e,a,i)}),r}function bt(e){var t=Gi(e),n=t.length;if(!n)return Tr(!0);if(1==n){var r=t[0],a=e[r];if(Nn(a))return function(e){return null!=e&&(e[r]===a&&(a!==_||r in Fn(e)))}}for(var i=Mr(n),o=Mr(n);n--;)a=e[t[n]],i[n]=a,o[n]=Nn(a);return function(e){return null!=e&&vt(Fn(e),t,i,o)}}function _t(e,t){var n=Ai(e),r=xn(e)&&Nn(t),a=e+"";return e=Rn(e),function(i){if(null==i)return!1;var o=a;if(i=Fn(i),!(!n&&r||o in i)){if(i=1==e.length?i:ht(i,xt(e,0,-1)),null==i)return!1;o=Wn(e),i=Fn(i)}return i[o]===t?t!==_||o in i:gt(t,i[o],null,!0)}}function Ct(e,t,n,r,a){if(!dr(e))return e;var i=Sn(t)&&(Ai(t)||gr(t));if(!i){var o=Gi(t);sa.apply(o,Ya(t))}return Ge(o||t,function(s,l){if(o&&(l=s,s=t[l]),f(s)){r||(r=[]),a||(a=[]);e:{for(var c=l,u=r,d=a,p=u.length,m=t[c];p--;)if(u[p]==m){e[c]=d[p];break e}var p=e[c],h=n?n(p,m,c,e,t):_,g=h===_;g&&(h=m,Sn(m)&&(Ai(m)||gr(m))?h=Ai(p)?p:Sn(p)?We(p):[]:Pi(m)||lr(m)?h=lr(p)?vr(p):Pi(p)?p:{}:g=!1),u.push(m),d.push(h),g?e[c]=Ct(h,m,n,u,d):(h===h?h!==p:p===p)&&(e[c]=h)}}else c=e[l],u=n?n(c,s,l,e,t):_,(d=u===_)&&(u=s),!i&&u===_||!d&&(u===u?u===c:c!==c)||(e[l]=u)}),e}function wt(e){return function(t){return null==t?_:t[e]}}function Et(e){var t=e+"";return e=Rn(e),function(n){return ht(n,e,t)}}function St(e,t){for(var n=e?t.length:0;n--;){var r=parseFloat(t[n]);if(r!=a&&In(r)){var a=r;pa.call(e,r,1)}}}function It(e,t){return e+aa(La()*(t-e+1))}function Lt(e,t,n,r,a){return a(e,function(e,a,i){n=r?(r=!1,e):t(n,e,a,i)}),n}function xt(e,t,n){var r=-1,a=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>a?0:a+t),n=n===_||n>a?a:+n||0,0>n&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0,n=Mr(a);++r<a;)n[r]=e[r+t];return n}function Tt(e,t){var n;return Ba(e,function(e,r,a){return n=t(e,r,a),!n}),!!n}function kt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function Nt(t,n,r){var a=yn(),i=-1;return n=Ke(n,function(e){return a(e)}),t=yt(t,function(e){return{a:Ke(n,function(t){return t(e)}),b:++i,c:e}}),kt(t,function(t,n){var a;e:{a=-1;for(var i=t.a,o=n.a,s=i.length,l=r.length;++a<s;){var c=e(i[a],o[a]);if(c){a=a<l?c*(r[a]?1:-1):c;break e}}a=t.b-n.b}return a})}function Dt(e,t){var n=0;return Ba(e,function(e,r,a){n+=+t(e,r,a)||0}),n}function At(e,t){var r=-1,a=bn(),i=e.length,o=a==n,s=o&&200<=i,l=s?Ga():null,c=[];l?(a=Ve,o=!1):(s=!1,l=t?[]:c);e:for(;++r<i;){var u=e[r],d=t?t(u,r,e):u;if(o&&u===u){for(var p=l.length;p--;)if(l[p]===d)continue e;t&&l.push(d),c.push(u)}else 0>a(l,d,0)&&((t||s)&&l.push(d),c.push(u))}return c}function Ot(e,t){for(var n=-1,r=t.length,a=Mr(r);++n<r;)a[n]=e[t[n]];return a}function Mt(e,t,n,r){for(var a=e.length,i=r?a:-1;(r?i--:++i<a)&&t(e[i],i,e););return n?xt(e,r?0:i,r?i+1:a):xt(e,r?i+1:0,r?a:i)}function Pt(e,t){var n=e;n instanceof Be&&(n=n.value());for(var r=-1,a=t.length;++r<a;){var n=[n],i=t[r];sa.apply(n,i.args),n=i.func.apply(i.thisArg,n)}return n}function Ft(e,t,n){var r=0,a=e?e.length:r;if("number"==typeof t&&t===t&&a<=Da){for(;r<a;){var i=r+a>>>1,o=e[i];(n?o<=t:o<t)?r=i+1:a=i}return a}return Rt(e,t,kr,n)}function Rt(e,t,n,r){t=n(t);for(var a=0,i=e?e.length:0,o=t!==t,s=t===_;a<i;){var l=aa((a+i)/2),c=n(e[l]),u=c===c;(o?u||r:s?u&&(r||c!==_):r?c<=t:c<t)?a=l+1:i=l}return wa(i,Na)}function jt(e,t,n){if("function"!=typeof e)return kr;if(t===_)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,i){return e.call(t,n,r,a,i)};case 5:return function(n,r,a,i,o){return e.call(t,n,r,a,i,o)}}return function(){return e.apply(t,arguments)}}function Bt(e){return ta.call(e,0)}function Ut(e,t,n){for(var r=n.length,a=-1,i=Ca(e.length-r,0),o=-1,s=t.length,l=Mr(i+s);++o<s;)l[o]=t[o];for(;++a<r;)l[n[a]]=e[a];for(;i--;)l[o++]=e[a++];return l}function zt(e,t,n){for(var r=-1,a=n.length,i=-1,o=Ca(e.length-a,0),s=-1,l=t.length,c=Mr(o+l);++i<o;)c[i]=e[i];for(o=i;++s<l;)c[o+s]=t[s];for(;++r<a;)c[o+n[r]]=e[i++];return c}function Vt(e,t){return function(n,r,a){var i=t?t():{};if(r=yn(r,a,3),Ai(n)){a=-1;for(var o=n.length;++a<o;){var s=n[a];e(i,s,r(s,a,n),n)}}else Ba(n,function(t,n,a){e(i,t,r(t,n,a),a)});return i}}function Wt(e){return sr(function(t,n){var r=-1,a=null==t?0:n.length,i=2<a&&n[a-2],o=2<a&&n[2],s=1<a&&n[a-1];for("function"==typeof i?(i=jt(i,s,5),a-=2):(i="function"==typeof s?s:null,a-=i?1:0),o&&Ln(n[0],n[1],o)&&(i=3>a?null:i,a=1);++r<a;)(o=n[r])&&e(t,o,i);return t})}function Gt(e,t){return function(n,r){var a=n?$a(n):0;if(!kn(a))return e(n,r);for(var i=t?a:-1,o=Fn(n);(t?i--:++i<a)&&!1!==r(o[i],i,o););return n}}function Ht(e){return function(t,n,r){var a=Fn(t);r=r(t);for(var i=r.length,o=e?i:-1;e?o--:++o<i;){var s=r[o];if(!1===n(a[s],s,a))break}return t}}function qt(e,t){function n(){return(this&&this!==qe&&this instanceof n?r:e).apply(t,arguments)}var r=Yt(e);return n}function $t(e){return function(t){var n=-1;t=Lr(Cr(t));for(var r=t.length,a="";++n<r;)a=e(a,t[n],n);return a}}function Yt(e){return function(){var t=ja(e.prototype),n=e.apply(t,arguments);return dr(n)?n:t}}function Kt(e){function t(n,r,a){return a&&Ln(n,r,a)&&(r=null),n=fn(n,e,null,null,null,null,null,r),n.placeholder=t.placeholder,n}return t}function Qt(e,t){return function(n,r,a){a&&Ln(n,r,a)&&(r=null);var o=yn(),s=null==r;if(o===rt&&s||(s=!1,r=o(r,a,3)),s){if(r=Ai(n),r||!hr(n))return e(r?n:Pn(n));r=i}return vn(n,r,t)}}function Jt(e,n){return function(r,a,i){return a=yn(a,i,3),Ai(r)?(a=t(r,a,n),-1<a?r[a]:_):ct(r,a,e)}}function Xt(e){return function(n,r,a){return n&&n.length?(r=yn(r,a,3),t(n,r,e)):-1}}function Zt(e){return function(t,n,r){return n=yn(n,r,3),ct(t,n,e,!0)}}function en(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var n,r=e?t:-1,a=0,i=Mr(t);e?r--:++r<t;){var o=i[a++]=arguments[r];if("function"!=typeof o)throw new Wr(j);var s=n?"":qa(o);n="wrapper"==s?new je([]):n}for(r=n?-1:t;++r<t;)o=i[r],s=qa(o),n=(a="wrapper"==s?Ha(o):null)&&Tn(a[0])&&a[1]==(k|I|x|N)&&!a[4].length&&1==a[9]?n[qa(a[0])].apply(n,a[3]):1==o.length&&Tn(o)?n[s]():n.thru(o);return function(){var e=arguments;if(n&&1==e.length&&Ai(e[0]))return n.plant(e[0]).value();for(var r=0,e=i[r].apply(this,e);++r<t;)e=i[r].call(this,e);return e}}}function tn(e,t){return function(n,r,a){return"function"==typeof r&&a===_&&Ai(n)?e(n,r):t(n,jt(r,a,3))}}function nn(e){return function(t,n,r){return("function"!=typeof n||r!==_)&&(n=jt(n,r,3)),e(t,n,br)}}function rn(e){return function(t,n,r){return("function"!=typeof n||r!==_)&&(n=jt(n,r,3)),e(t,n)}}function an(e){return function(t,n,r){var a={};return n=yn(n,r,3),pt(t,function(t,r,i){i=n(t,r,i),r=e?i:r,t=e?t:i,a[r]=t}),a}}function on(e){return function(t,n,r){return t=a(t),(e?t:"")+un(t,n,r)+(e?"":t)}}function sn(e){var t=sr(function(n,r){var a=h(r,t.placeholder);return fn(n,e,null,r,a)});return t}function ln(e,t){return function(n,r,a,i){var o=3>arguments.length;return"function"==typeof r&&i===_&&Ai(n)?e(n,r,a,o):Lt(n,yn(r,i,4),a,o,t)}}function cn(e,t,n,r,a,i,o,s,l,c){function u(){for(var C=arguments.length,S=C,I=Mr(C);S--;)I[S]=arguments[S];if(r&&(I=Ut(I,r,a)),i&&(I=zt(I,i,o)),m||v){var S=u.placeholder,L=h(I,S),C=C-L.length;if(C<c){var k=s?We(s):null,C=Ca(c-C,0),N=m?L:null,L=m?null:L,D=m?I:null,I=m?null:I;return t|=m?x:T,t&=~(m?T:x),g||(t&=~(w|E)),I=[e,t,n,D,N,I,L,k,l,C],k=cn.apply(_,I),Tn(e)&&Ka(k,I),k.placeholder=S,k}}if(S=p?n:this,f&&(e=S[b]),s)for(k=I.length,C=wa(s.length,k),N=We(I);C--;)L=s[C],I[C]=In(L,k)?N[L]:_;return d&&l<I.length&&(I.length=l),(this&&this!==qe&&this instanceof u?y||Yt(e):e).apply(S,I)}var d=t&k,p=t&w,f=t&E,m=t&I,g=t&S,v=t&L,y=!f&&Yt(e),b=e;return u}function un(e,t,n){return e=e.length,t=+t,e<t&&ba(t)?(t-=e,n=null==n?" ":n+"",Sr(n,na(t/n.length)).slice(0,t)):""}function dn(e,t,n,r){function a(){for(var t=-1,s=arguments.length,l=-1,c=r.length,u=Mr(s+c);++l<c;)u[l]=r[l];for(;s--;)u[l++]=arguments[++t];return(this&&this!==qe&&this instanceof a?o:e).apply(i?n:this,u)}var i=t&w,o=Yt(e);return a}function pn(e){return function(t,n,r,a){var i=yn(r);return i===rt&&null==r?Ft(t,n,e):Rt(t,n,i(r,a,1),e)}}function fn(e,t,n,r,a,i,o,s){var l=t&E;if(!l&&"function"!=typeof e)throw new Wr(j);var c=r?r.length:0;if(c||(t&=~(x|T),r=a=null),c-=a?a.length:0,t&T){var u=r,d=a;r=a=null}var p=l?null:Ha(e);return n=[e,t,n,r,a,u,d,i,o,s],p&&(r=n[1],t=p[1],s=r|t,a=t==k&&r==I||t==k&&r==N&&n[7].length<=p[8]||t==(k|N)&&r==I,(s<k||a)&&(t&w&&(n[2]=p[2],s|=r&w?0:S),(r=p[3])&&(a=n[3],n[3]=a?Ut(a,r,p[4]):We(r),n[4]=a?h(n[3],B):We(p[4])),(r=p[5])&&(a=n[5],n[5]=a?zt(a,r,p[6]):We(r),n[6]=a?h(n[5],B):We(p[6])),(r=p[7])&&(n[7]=We(r)),t&k&&(n[8]=null==n[8]?p[8]:wa(n[8],p[8])),null==n[9]&&(n[9]=p[9]),n[0]=p[0],n[1]=s),t=n[1],s=n[9]),n[9]=null==s?l?0:e.length:Ca(s-c,0)||0,(p?Wa:Ka)(t==w?qt(n[0],n[2]):t!=x&&t!=(w|x)||n[4].length?cn.apply(_,n):dn.apply(_,n),n)}function mn(e,t,n,r,a,i,o){var s=-1,l=e.length,c=t.length,u=!0;if(l!=c&&(!a||c<=l))return!1;for(;u&&++s<l;){var d=e[s],p=t[s],u=_;if(r&&(u=a?r(p,d,s):r(d,p,s)),u===_)if(a)for(var f=c;f--&&(p=t[f],!(u=d&&d===p||n(d,p,r,a,i,o))););else u=d&&d===p||n(d,p,r,a,i,o)}return!!u}function hn(e,t,n){switch(n){case V:case W:return+e==+t;case G:return e.name==t.name&&e.message==t.message;case q:return e!=+e?t!=+t:e==+t;case Y:case K:return e==t+""}return!1}function gn(e,t,n,r,a,i,o){var s=Gi(e),l=s.length,c=Gi(t).length;if(l!=c&&!a)return!1;for(var c=a,u=-1;++u<l;){var d=s[u],p=a?d in t:Kr.call(t,d);if(p){var f=e[d],m=t[d],p=_;r&&(p=a?r(m,f,d):r(f,m,d)),p===_&&(p=f&&f===m||n(f,m,r,a,i,o))}if(!p)return!1;c||(c="constructor"==d)}return!(!c&&(n=e.constructor,r=t.constructor,n!=r&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)))}function vn(e,t,n){var r=n?Ta:xa,a=r,i=a;return Ba(e,function(e,o,s){o=t(e,o,s),((n?o<a:o>a)||o===r&&o===i)&&(a=o,i=e)}),i}function yn(e,t,n){var r=Fe.callback||xr,r=r===xr?rt:r;return n?r(e,t,n):r}function bn(e,t,r){var a=Fe.indexOf||Vn,a=a===Vn?n:a;return e?a(e,t,r):a}function _n(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Kr.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Cn(e){return e=e.constructor,"function"==typeof e&&e instanceof e||(e=Ur),new e}function wn(e,t,n){var r=e.constructor;switch(t){case Q:return Bt(e);case V:case W:return new r(+e);case J:case X:case Z:case ee:case te:case ne:case re:case ae:case ie:return t=e.buffer,new r(n?Bt(t):t,e.byteOffset,e.length);case q:case K:return new r(e);case Y:var a=new r(e.source,Se.exec(e));a.lastIndex=e.lastIndex}return a}function En(e,t,n){return null==e||xn(t,e)||(t=Rn(t),e=1==t.length?e:ht(e,xt(t,0,-1)),t=Wn(t)),t=null==e?e:e[t],null==t?_:t.apply(e,n)}function Sn(e){return null!=e&&kn($a(e))}function In(e,t){return e=+e,t=null==t?Oa:t,-1<e&&0==e%1&&e<t}function Ln(e,t,n){if(!dr(n))return!1;var r=typeof t;return!!("number"==r?Sn(n)&&In(t,n.length):"string"==r&&t in n)&&(t=n[t],e===e?e===t:t!==t)}function xn(e,t){var n=typeof e;return!!("string"==n&&ve.test(e)||"number"==n)||!Ai(e)&&(!ge.test(e)||null!=t&&e in Fn(t))}function Tn(e){var t=qa(e);return!!t&&e===Fe[t]&&t in Be.prototype}function kn(e){return"number"==typeof e&&-1<e&&0==e%1&&e<=Oa}function Nn(e){return e===e&&!dr(e)}function Dn(e,t){e=Fn(e);for(var n=-1,r=t.length,a={};++n<r;){var i=t[n];i in e&&(a[i]=e[i])}return a}function An(e,t){var n={};return dt(e,function(e,r,a){t(e,r,a)&&(n[r]=e)}),n}function On(e){var t;if(!f(e)||Jr.call(e)!=$||!(Kr.call(e,"constructor")||(t=e.constructor,"function"!=typeof t||t instanceof t)))return!1;var n;return dt(e,function(e,t){n=t}),n===_||Kr.call(e,n)}function Mn(e){for(var t=br(e),n=t.length,r=n&&e.length,a=Fe.support,a=r&&kn(r)&&(Ai(e)||a.nonEnumArgs&&lr(e)),i=-1,o=[];++i<n;){var s=t[i];(a&&In(s,r)||Kr.call(e,s))&&o.push(s)}return o}function Pn(e){return null==e?[]:Sn(e)?dr(e)?e:Ur(e):_r(e)}function Fn(e){return dr(e)?e:Ur(e)}function Rn(e){if(Ai(e))return e;var t=[];return a(e).replace(ye,function(e,n,r,a){t.push(r?a.replace(we,"$1"):n||e)}),t}function jn(e){return e instanceof Be?e.clone():new je(e.__wrapped__,e.__chain__,We(e.__actions__))}function Bn(e,t,n){return e&&e.length?((n?Ln(e,t,n):null==t)&&(t=1),xt(e,0>t?0:t)):[]}function Un(e,t,n){var r=e?e.length:0;return r?((n?Ln(e,t,n):null==t)&&(t=1),t=r-(+t||0),xt(e,0,0>t?0:t)):[]}function zn(e){return e?e[0]:_}function Vn(e,t,r){var a=e?e.length:0;if(!a)return-1;if("number"==typeof r)r=0>r?Ca(a+r,0):r;else if(r)return r=Ft(e,t),e=e[r],(t===t?t===e:e!==e)?r:-1;return n(e,t,r||0)}function Wn(e){var t=e?e.length:0;return t?e[t-1]:_}function Gn(e){return Bn(e,1)}function Hn(e,t,r,a){if(!e||!e.length)return[];null!=t&&"boolean"!=typeof t&&(a=r,r=Ln(e,t,a)?null:t,t=!1);var i=yn();if((i!==rt||null!=r)&&(r=i(r,a,3)),t&&bn()==n){t=r;var o;r=-1,a=e.length;for(var i=-1,s=[];++r<a;){var l=e[r],c=t?t(l,r,e):l;r&&o===c||(o=c,s[++i]=l)}e=s}else e=At(e,r);return e}function qn(e){if(!e||!e.length)return[];var t=-1,n=0;e=Ye(e,function(e){return Sn(e)?(n=Ca(e.length,n),!0):void 0});for(var r=Mr(n);++t<n;)r[t]=Ke(e,wt(t));return r}function $n(e,t,n){return e&&e.length?(e=qn(e),null==t?e:(t=jt(t,n,4),Ke(e,function(e){return Qe(e,t,_,!0)}))):[]}function Yn(e,t){var n=-1,r=e?e.length:0,a={};for(!r||t||Ai(e[0])||(t=[]);++n<r;){var i=e[n];t?a[i]=t[n]:i&&(a[i[0]]=i[1])}return a}function Kn(e){return e=Fe(e),e.__chain__=!0,e}function Qn(e,t,n){return t.call(n,e)}function Jn(e,t,n){var r=Ai(e)?He:st;return n&&Ln(e,t,n)&&(t=null),("function"!=typeof t||n!==_)&&(t=yn(t,n,3)),r(e,t)}function Xn(e,t,n){var r=Ai(e)?Ye:lt;return t=yn(t,n,3),r(e,t)}function Zn(e,t,n,r){var a=e?$a(e):0;return kn(a)||(e=_r(e),a=e.length),!!a&&(n="number"!=typeof n||r&&Ln(t,n,r)?0:0>n?Ca(a+n,0):n||0,"string"==typeof e||!Ai(e)&&hr(e)?n<a&&-1<e.indexOf(t,n):-1<bn(e,t,n))}function er(e,t,n){var r=Ai(e)?Ke:yt;return t=yn(t,n,3),r(e,t)}function tr(e,t,n){return(n?Ln(e,t,n):null==t)?(e=Pn(e),t=e.length,0<t?e[It(0,t-1)]:_):(e=nr(e),e.length=wa(0>t?0:+t||0,e.length),e)}function nr(e){e=Pn(e);for(var t=-1,n=e.length,r=Mr(n);++t<n;){var a=It(0,t);t!=a&&(r[t]=r[a]),r[a]=e[t]}return r}function rr(e,t,n){var r=Ai(e)?Je:Tt;return n&&Ln(e,t,n)&&(t=null),("function"!=typeof t||n!==_)&&(t=yn(t,n,3)),r(e,t)}function ar(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Wr(j);var r=e;e=t,t=r}return function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}}function ir(e,t,n){function r(){var n=t-(bi()-c);0>=n||n>t?(s&&ra(s),n=p,s=d=p=_,n&&(f=bi(),l=e.apply(u,o),d||s||(o=u=null))):d=da(r,n)}function a(){d&&ra(d),s=d=p=_,(h||m!==t)&&(f=bi(),l=e.apply(u,o),d||s||(o=u=null))}function i(){if(o=arguments,c=bi(),u=this,p=h&&(d||!g),!1===m)var n=g&&!d;else{s||g||(f=c);var i=m-(c-f),v=0>=i||i>m;v?(s&&(s=ra(s)),f=c,l=e.apply(u,o)):s||(s=da(a,i))}return v&&d?d=ra(d):d||t===m||(d=da(r,t)),n&&(v=!0,l=e.apply(u,o)),!v||d||s||(o=u=null),l}var o,s,l,c,u,d,p,f=0,m=!1,h=!0;if("function"!=typeof e)throw new Wr(j);if(t=0>t?0:+t||0,!0===n)var g=!0,h=!1;else dr(n)&&(g=n.leading,m="maxWait"in n&&Ca(+n.maxWait||0,t),h="trailing"in n?n.trailing:h);return i.cancel=function(){d&&ra(d),s&&ra(s),s=d=p=_},i}function or(e,t){function n(){var r=arguments,a=n.cache,i=t?t.apply(this,r):r[0];return a.has(i)?a.get(i):(r=e.apply(this,r),a.set(i,r),r)}if("function"!=typeof e||t&&"function"!=typeof t)throw new Wr(j);return n.cache=new or.Cache,n}function sr(e,t){if("function"!=typeof e)throw new Wr(j);return t=Ca(t===_?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,a=Ca(n.length-t,0),i=Mr(a);++r<a;)i[r]=n[t+r];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,n[0],i);case 2:return e.call(this,n[0],n[1],i)}for(a=Mr(t+1),r=-1;++r<t;)a[r]=n[r];return a[t]=i,e.apply(this,a)}}function lr(e){return f(e)&&Sn(e)&&Jr.call(e)==U}function cr(e){return!!e&&1===e.nodeType&&f(e)&&-1<Jr.call(e).indexOf("Element")}function ur(e){return f(e)&&"string"==typeof e.message&&Jr.call(e)==G}function dr(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function pr(e){return null!=e&&(Jr.call(e)==H?Zr.test(Yr.call(e)):f(e)&&Le.test(e))}function fr(e){return"number"==typeof e||f(e)&&Jr.call(e)==q}function mr(e){return f(e)&&Jr.call(e)==Y}function hr(e){return"string"==typeof e||f(e)&&Jr.call(e)==K}function gr(e){return f(e)&&kn(e.length)&&!!Oe[Jr.call(e)]}function vr(e){return nt(e,br(e))}function yr(e){return mt(e,br(e))}function br(e){if(null==e)return[];dr(e)||(e=Ur(e));for(var t=e.length,t=t&&kn(t)&&(Ai(e)||Fa.nonEnumArgs&&lr(e))&&t||0,n=e.constructor,r=-1,n="function"==typeof n&&n.prototype===e,a=Mr(t),i=0<t;++r<t;)a[r]=r+"";for(var o in e)i&&In(o,t)||"constructor"==o&&(n||!Kr.call(e,o))||a.push(o);return a}function _r(e){return Ot(e,Gi(e))}function Cr(e){return(e=a(e))&&e.replace(xe,c).replace(Ce,"")}function wr(e){return(e=a(e))&&_e.test(e)?e.replace(be,"\\$&"):e}function Er(e,t,n){return n&&Ln(e,t,n)&&(t=0),Ia(e,t)}function Sr(e,t){var n="";if(e=a(e),t=+t,1>t||!e||!ba(t))return n;do t%2&&(n+=e),t=aa(t/2),e+=e;while(t);return n}function Ir(e,t,n){var r=e;return(e=a(e))?(n?Ln(r,t,n):null==t)?e.slice(g(e),v(e)+1):(t+="",e.slice(o(e,t),s(e,t)+1)):e}function Lr(e,t,n){return n&&Ln(e,t,n)&&(t=null),e=a(e),e.match(t||Ne)||[]}function xr(e,t,n){return n&&Ln(e,t,n)&&(t=null),f(e)?Nr(e):rt(e,t)}function Tr(e){return function(){return e}}function kr(e){return e}function Nr(e){return bt(at(e,!0))}function Dr(e,t,n){if(null==n){var r=dr(t),a=r&&Gi(t);((a=a&&a.length&&mt(t,a))?a.length:r)||(a=!1,n=t,t=e,e=this)}a||(a=mt(t,Gi(t)));var i=!0,r=-1,o=Mi(e),s=a.length;!1===n?i=!1:dr(n)&&"chain"in n&&(i=n.chain);for(;++r<s;){n=a[r];var l=t[n];e[n]=l,o&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(i||n){var r=e(this.__wrapped__);return(r.__actions__=We(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return n=[this.value()],sa.apply(n,arguments),t.apply(e,n)}}(l))}return e}function Ar(){}function Or(e){return xn(e)?wt(e):Et(e)}m=m?$e.defaults(qe.Object(),m,$e.pick(qe,Ae)):qe;var Mr=m.Array,Pr=m.Date,Fr=m.Error,Rr=m.Function,jr=m.Math,Br=m.Number,Ur=m.Object,zr=m.RegExp,Vr=m.String,Wr=m.TypeError,Gr=Mr.prototype,Hr=Ur.prototype,qr=Vr.prototype,$r=($r=m.window)&&$r.document,Yr=Rr.prototype.toString,Kr=Hr.hasOwnProperty,Qr=0,Jr=Hr.toString,Xr=m._,Zr=zr("^"+wr(Jr).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=pr(ea=m.ArrayBuffer)&&ea,ta=pr(ta=ea&&new ea(0).slice)&&ta,na=jr.ceil,ra=m.clearTimeout,aa=jr.floor,ia=pr(ia=Ur.getOwnPropertySymbols)&&ia,oa=pr(oa=Ur.getPrototypeOf)&&oa,sa=Gr.push,la=pr(la=Ur.preventExtensions)&&la,ca=Hr.propertyIsEnumerable,ua=pr(ua=m.Set)&&ua,da=m.setTimeout,pa=Gr.splice,fa=pr(fa=m.Uint8Array)&&fa,ma=pr(ma=m.WeakMap)&&ma,ha=function(){try{var e=pr(e=m.Float64Array)&&e,t=new e(new ea(10),0,1)&&e}catch(e){}return t}(),ga=function(){var e=la&&pr(e=Ur.assign)&&e;try{if(e){var t=la({1:0});t[0]=1}}catch(n){try{e(t,"xo")}catch(e){}return!t[1]&&e}return!1}(),va=pr(va=Mr.isArray)&&va,ya=pr(ya=Ur.create)&&ya,ba=m.isFinite,_a=pr(_a=Ur.keys)&&_a,Ca=jr.max,wa=jr.min,Ea=pr(Ea=Pr.now)&&Ea,Sa=pr(Sa=Br.isFinite)&&Sa,Ia=m.parseInt,La=jr.random,xa=Br.NEGATIVE_INFINITY,Ta=Br.POSITIVE_INFINITY,ka=jr.pow(2,32)-1,Na=ka-1,Da=ka>>>1,Aa=ha?ha.BYTES_PER_ELEMENT:0,Oa=jr.pow(2,53)-1,Ma=ma&&new ma,Pa={},Fa=Fe.support={};!function(e){function t(){this.x=e}var n=arguments,r=[];t.prototype={valueOf:e,y:e};for(var a in new t)r.push(a);Fa.funcDecomp=/\bthis\b/.test(function(){return this}),Fa.funcNames="string"==typeof Rr.name;try{Fa.dom=11===$r.createDocumentFragment().nodeType}catch(e){Fa.dom=!1}try{Fa.nonEnumArgs=!ca.call(n,1)}catch(e){Fa.nonEnumArgs=!0}}(1,0),Fe.templateSettings={escape:fe,evaluate:me,interpolate:he,variable:"",imports:{_:Fe}};var Ra=ga||function(e,t){return null==t?e:nt(t,Ya(t),nt(t,Gi(t),e))},ja=function(){function e(){}return function(t){if(dr(t)){e.prototype=t;var n=new e;e.prototype=null}return n||m.Object()}}(),Ba=Gt(pt),Ua=Gt(ft,!0),za=Ht(),Va=Ht(!0),Wa=Ma?function(e,t){return Ma.set(e,t),e}:kr;ta||(Bt=ea&&fa?function(e){var t=e.byteLength,n=ha?aa(t/Aa):0,r=n*Aa,a=new ea(t);
if(n){var i=new ha(a,0,n);i.set(new ha(e,0,n))}return t!=r&&(i=new fa(a,r),i.set(new fa(e,r))),a}:Tr(null));var Ga=ya&&ua?function(e){return new ze(e)}:Tr(null),Ha=Ma?function(e){return Ma.get(e)}:Ar,qa=function(){return Fa.funcNames?"constant"==Tr.name?wt("name"):function(e){for(var t=e.name,n=Pa[t],r=n?n.length:0;r--;){var a=n[r],i=a.func;if(null==i||i==e)return a.name}return t}:Tr("")}(),$a=wt("length"),Ya=ia?function(e){return ia(Fn(e))}:Tr([]),Ka=function(){var e=0,t=0;return function(n,r){var a=bi(),i=M-(a-t);if(t=a,0<i){if(++e>=O)return n}else e=0;return Wa(n,r)}}(),Qa=sr(function(e,t){return Sn(e)?ot(e,ut(t,!1,!0)):[]}),Ja=Xt(),Xa=Xt(!0),Za=sr(function(t,n){n=ut(n);var r=tt(t,n);return St(t,n.sort(e)),r}),ei=pn(),ti=pn(!0),ni=sr(function(e){return At(ut(e,!1,!0))}),ri=sr(function(e,t){return Sn(e)?ot(e,t):[]}),ai=sr(qn),ii=sr(function(e){var t=e.length,n=e[t-2],r=e[t-1];return 2<t&&"function"==typeof n?t-=2:(n=1<t&&"function"==typeof r?(--t,r):_,r=_),e.length=t,$n(e,n,r)}),oi=sr(function(e,t){return tt(e,ut(t))}),si=Vt(function(e,t,n){Kr.call(e,n)?++e[n]:e[n]=1}),li=Jt(Ba),ci=Jt(Ua,!0),ui=tn(Ge,Ba),di=tn(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},Ua),pi=Vt(function(e,t,n){Kr.call(e,n)?e[n].push(t):e[n]=[t]}),fi=Vt(function(e,t,n){e[n]=t}),mi=sr(function(e,t,n){var r=-1,a="function"==typeof t,i=xn(t),o=Sn(e)?Mr(e.length):[];return Ba(e,function(e){var s=a?t:i&&null!=e&&e[t];o[++r]=s?s.apply(e,n):En(e,t,n)}),o}),hi=Vt(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),gi=ln(Qe,Ba),vi=ln(function(e,t,n,r){var a=e.length;for(r&&a&&(n=e[--a]);a--;)n=t(n,e[a],a,e);return n},Ua),yi=sr(function(e,t){if(null==e)return[];var n=t[2];return n&&Ln(t[0],t[1],n)&&(t.length=1),Nt(e,ut(t),[])}),bi=Ea||function(){return(new Pr).getTime()},_i=sr(function(e,t,n){var r=w;if(n.length)var a=h(n,_i.placeholder),r=r|x;return fn(e,r,t,n,a)}),Ci=sr(function(e,t){t=t.length?ut(t):yr(e);for(var n=-1,r=t.length;++n<r;){var a=t[n];e[a]=fn(e[a],w,e)}return e}),wi=sr(function(e,t,n){var r=w|E;if(n.length)var a=h(n,wi.placeholder),r=r|x;return fn(t,r,e,n,a)}),Ei=Kt(I),Si=Kt(L),Ii=sr(function(e,t){return it(e,1,t)}),Li=sr(function(e,t,n){return it(e,t,n)}),xi=en(),Ti=en(!0),ki=sn(x),Ni=sn(T),Di=sr(function(e,t){return fn(e,N,null,null,null,ut(t))}),Ai=va||function(e){return f(e)&&kn(e.length)&&Jr.call(e)==z};Fa.dom||(cr=function(e){return!!e&&1===e.nodeType&&f(e)&&!Pi(e)});var Oi=Sa||function(e){return"number"==typeof e&&ba(e)},Mi=r(/x/)||fa&&!r(fa)?function(e){return Jr.call(e)==H}:r,Pi=oa?function(e){if(!e||Jr.call(e)!=$)return!1;var t=e.valueOf,n=pr(t)&&(n=oa(t))&&oa(n);return n?e==n||oa(e)==n:On(e)}:On,Fi=Wt(function(e,t,n){return n?et(e,t,n):Ra(e,t)}),Ri=sr(function(e){var t=e[0];return null==t?t:(e.push(Xe),Fi.apply(_,e))}),ji=Zt(pt),Bi=Zt(ft),Ui=nn(za),zi=nn(Va),Vi=rn(pt),Wi=rn(ft),Gi=_a?function(e){var t=null!=e&&e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Sn(e)?Mn(e):dr(e)?_a(e):[]}:Mn,Hi=an(!0),qi=an(),$i=Wt(Ct),Yi=sr(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Ke(ut(t),Vr),Dn(e,ot(br(e),t));var n=jt(t[0],t[1],3);return An(e,function(e,t,r){return!n(e,t,r)})}),Ki=sr(function(e,t){return null==e?{}:"function"==typeof t[0]?An(e,jt(t[0],t[1],3)):Dn(e,ut(t))}),Qi=$t(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ji=$t(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Xi=on(),Zi=on(!0);8!=Ia(De+"08")&&(Er=function(e,t,n){return(n?Ln(e,t,n):null==t)?t=0:t&&(t=+t),e=Ir(e),Ia(e,t||(Ie.test(e)?16:10))});var eo=$t(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),to=$t(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),no=sr(function(e,t){try{return e.apply(_,t)}catch(e){return ur(e)?e:new Fr(e)}}),ro=sr(function(e,t){return function(n){return En(n,e,t)}}),ao=sr(function(e,t){return function(n){return En(e,n,t)}}),io=Qt(function(e){for(var t=-1,n=e.length,r=xa;++t<n;){var a=e[t];a>r&&(r=a)}return r}),oo=Qt(function(e){for(var t=-1,n=e.length,r=Ta;++t<n;){var a=e[t];a<r&&(r=a)}return r},!0);return Fe.prototype=Re.prototype,je.prototype=ja(Re.prototype),je.prototype.constructor=je,Be.prototype=ja(Re.prototype),Be.prototype.constructor=Be,Ue.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ue.prototype.get=function(e){return"__proto__"==e?_:this.__data__[e]},Ue.prototype.has=function(e){return"__proto__"!=e&&Kr.call(this.__data__,e)},Ue.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},ze.prototype.push=function(e){var t=this.data;"string"==typeof e||dr(e)?t.set.add(e):t.hash[e]=!0},or.Cache=Ue,Fe.after=function(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Wr(j);var n=e;e=t,t=n}return e=ba(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},Fe.ary=function(e,t,n){return n&&Ln(e,t,n)&&(t=null),t=e&&null==t?e.length:Ca(+t||0,0),fn(e,k,null,null,null,null,t)},Fe.assign=Fi,Fe.at=oi,Fe.before=ar,Fe.bind=_i,Fe.bindAll=Ci,Fe.bindKey=wi,Fe.callback=xr,Fe.chain=Kn,Fe.chunk=function(e,t,n){t=(n?Ln(e,t,n):null==t)?1:Ca(+t||1,1),n=0;for(var r=e?e.length:0,a=-1,i=Mr(na(r/t));n<r;)i[++a]=xt(e,n,n+=t);return i},Fe.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,a=[];++t<n;){var i=e[t];i&&(a[++r]=i)}return a},Fe.constant=Tr,Fe.countBy=si,Fe.create=function(e,t,n){var r=ja(e);return n&&Ln(e,t,n)&&(t=null),t?Ra(r,t):r},Fe.curry=Ei,Fe.curryRight=Si,Fe.debounce=ir,Fe.defaults=Ri,Fe.defer=Ii,Fe.delay=Li,Fe.difference=Qa,Fe.drop=Bn,Fe.dropRight=Un,Fe.dropRightWhile=function(e,t,n){return e&&e.length?Mt(e,yn(t,n,3),!0,!0):[]},Fe.dropWhile=function(e,t,n){return e&&e.length?Mt(e,yn(t,n,3),!0):[]},Fe.fill=function(e,t,n,r){var a=e?e.length:0;if(!a)return[];for(n&&"number"!=typeof n&&Ln(e,t,n)&&(n=0,r=a),a=e.length,n=null==n?0:+n||0,0>n&&(n=-n>a?0:a+n),r=r===_||r>a?a:+r||0,0>r&&(r+=a),a=n>r?0:r>>>0,n>>>=0;n<a;)e[n++]=t;return e},Fe.filter=Xn,Fe.flatten=function(e,t,n){var r=e?e.length:0;return n&&Ln(e,t,n)&&(t=!1),r?ut(e,t):[]},Fe.flattenDeep=function(e){return e&&e.length?ut(e,!0):[]},Fe.flow=xi,Fe.flowRight=Ti,Fe.forEach=ui,Fe.forEachRight=di,Fe.forIn=Ui,Fe.forInRight=zi,Fe.forOwn=Vi,Fe.forOwnRight=Wi,Fe.functions=yr,Fe.groupBy=pi,Fe.indexBy=fi,Fe.initial=function(e){return Un(e,1)},Fe.intersection=function(){for(var e=[],t=-1,r=arguments.length,a=[],i=bn(),o=i==n,s=[];++t<r;){var l=arguments[t];Sn(l)&&(e.push(l),a.push(o&&120<=l.length?Ga(t&&l):null))}if(r=e.length,2>r)return s;var o=e[0],c=-1,u=o?o.length:0,d=a[0];e:for(;++c<u;)if(l=o[c],0>(d?Ve(d,l):i(s,l,0))){for(t=r;--t;){var p=a[t];if(0>(p?Ve(p,l):i(e[t],l,0)))continue e}d&&d.push(l),s.push(l)}return s},Fe.invert=function(e,t,n){n&&Ln(e,t,n)&&(t=null),n=-1;for(var r=Gi(e),a=r.length,i={};++n<a;){var o=r[n],s=e[o];t?Kr.call(i,s)?i[s].push(o):i[s]=[o]:i[s]=o}return i},Fe.invoke=mi,Fe.keys=Gi,Fe.keysIn=br,Fe.map=er,Fe.mapKeys=Hi,Fe.mapValues=qi,Fe.matches=Nr,Fe.matchesProperty=function(e,t){return _t(e,at(t,!0))},Fe.memoize=or,Fe.merge=$i,Fe.method=ro,Fe.methodOf=ao,Fe.mixin=Dr,Fe.negate=function(e){if("function"!=typeof e)throw new Wr(j);return function(){return!e.apply(this,arguments)}},Fe.omit=Yi,Fe.once=function(e){return ar(2,e)},Fe.pairs=function(e){for(var t=-1,n=Gi(e),r=n.length,a=Mr(r);++t<r;){var i=n[t];a[t]=[i,e[i]]}return a},Fe.partial=ki,Fe.partialRight=Ni,Fe.partition=hi,Fe.pick=Ki,Fe.pluck=function(e,t){return er(e,Or(t))},Fe.property=Or,Fe.propertyOf=function(e){return function(t){return ht(e,Rn(t),t+"")}},Fe.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=bn(),a=e.length;++n<a;)for(var i=0,o=e[n];-1<(i=r(t,o,i));)pa.call(t,i,1);return t},Fe.pullAt=Za,Fe.range=function(e,t,n){n&&Ln(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var r=-1;t=Ca(na((t-e)/(n||1)),0);for(var a=Mr(t);++r<t;)a[r]=e,e+=n;return a},Fe.rearg=Di,Fe.reject=function(e,t,n){var r=Ai(e)?Ye:lt;return t=yn(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},Fe.remove=function(e,t,n){var r=[];if(!e||!e.length)return r;var a=-1,i=[],o=e.length;for(t=yn(t,n,3);++a<o;)n=e[a],t(n,a,e)&&(r.push(n),i.push(a));return St(e,i),r},Fe.rest=Gn,Fe.restParam=sr,Fe.set=function(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||xn(t,e)?[r]:Rn(t);for(var r=-1,a=t.length,i=a-1,o=e;null!=o&&++r<a;){var s=t[r];dr(o)&&(r==i?o[s]=n:null==o[s]&&(o[s]=In(t[r+1])?[]:{})),o=o[s]}return e},Fe.shuffle=nr,Fe.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Ln(e,t,n)&&(t=0,n=r),xt(e,t,n)):[]},Fe.sortBy=function(e,t,n){if(null==e)return[];n&&Ln(e,t,n)&&(t=null);var r=-1;return t=yn(t,n,3),e=yt(e,function(e,n,a){return{a:t(e,n,a),b:++r,c:e}}),kt(e,l)},Fe.sortByAll=yi,Fe.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&Ln(t,n,r)&&(n=null),Ai(t)||(t=null==t?[]:[t]),Ai(n)||(n=null==n?[]:[n]),Nt(e,t,n))},Fe.spread=function(e){if("function"!=typeof e)throw new Wr(j);return function(t){return e.apply(this,t)}},Fe.take=function(e,t,n){return e&&e.length?((n?Ln(e,t,n):null==t)&&(t=1),xt(e,0,0>t?0:t)):[]},Fe.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?Ln(e,t,n):null==t)&&(t=1),t=r-(+t||0),xt(e,0>t?0:t)):[]},Fe.takeRightWhile=function(e,t,n){return e&&e.length?Mt(e,yn(t,n,3),!1,!0):[]},Fe.takeWhile=function(e,t,n){return e&&e.length?Mt(e,yn(t,n,3)):[]},Fe.tap=function(e,t,n){return t.call(n,e),e},Fe.throttle=function(e,t,n){var r=!0,a=!0;if("function"!=typeof e)throw new Wr(j);return!1===n?r=!1:dr(n)&&(r="leading"in n?!!n.leading:r,a="trailing"in n?!!n.trailing:a),Pe.leading=r,Pe.maxWait=+t,Pe.trailing=a,ir(e,t,Pe)},Fe.thru=Qn,Fe.times=function(e,t,n){if(e=aa(e),1>e||!ba(e))return[];var r=-1,a=Mr(wa(e,ka));for(t=jt(t,n,1);++r<e;)r<ka?a[r]=t(r):t(r);return a},Fe.toArray=function(e){var t=e?$a(e):0;return kn(t)?t?We(e):[]:_r(e)},Fe.toPlainObject=vr,Fe.transform=function(e,t,n,r){var a=Ai(e)||gr(e);return t=yn(t,r,4),null==n&&(a||dr(e)?(r=e.constructor,n=a?Ai(e)?new r:[]:ja(Mi(r)&&r.prototype)):n={}),(a?Ge:pt)(e,function(e,r,a){return t(n,e,r,a)}),n},Fe.union=ni,Fe.uniq=Hn,Fe.unzip=qn,Fe.unzipWith=$n,Fe.values=_r,Fe.valuesIn=function(e){return Ot(e,br(e))},Fe.where=function(e,t){return Xn(e,bt(t))},Fe.without=ri,Fe.wrap=function(e,t){return t=null==t?kr:t,fn(t,x,null,[e],[])},Fe.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Sn(n))var r=r?ot(r,n).concat(ot(n,r)):n}return r?At(r):[]},Fe.zip=ai,Fe.zipObject=Yn,Fe.zipWith=ii,Fe.backflow=Ti,Fe.collect=er,Fe.compose=Ti,Fe.each=ui,Fe.eachRight=di,Fe.extend=Fi,Fe.iteratee=xr,Fe.methods=yr,Fe.object=Yn,Fe.select=Xn,Fe.tail=Gn,Fe.unique=Hn,Dr(Fe,Fe),Fe.add=function(e,t){return(+e||0)+(+t||0)},Fe.attempt=no,Fe.camelCase=Qi,Fe.capitalize=function(e){return(e=a(e))&&e.charAt(0).toUpperCase()+e.slice(1)},Fe.clone=function(e,t,n,r){return t&&"boolean"!=typeof t&&Ln(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),n="function"==typeof n&&jt(n,r,1),at(e,t,n)},Fe.cloneDeep=function(e,t,n){return t="function"==typeof t&&jt(t,n,1),at(e,!0,t)},Fe.deburr=Cr,Fe.endsWith=function(e,t,n){e=a(e),t+="";var r=e.length;return n=n===_?r:wa(0>n?0:+n||0,r),n-=t.length,0<=n&&e.indexOf(t,n)==n},Fe.escape=function(e){return(e=a(e))&&pe.test(e)?e.replace(ue,u):e},Fe.escapeRegExp=wr,Fe.every=Jn,Fe.find=li,Fe.findIndex=Ja,Fe.findKey=ji,Fe.findLast=ci,Fe.findLastIndex=Xa,Fe.findLastKey=Bi,Fe.findWhere=function(e,t){return li(e,bt(t))},Fe.first=zn,Fe.get=function(e,t,n){return e=null==e?_:ht(e,Rn(t),t+""),e===_?n:e},Fe.has=function(e,t){if(null==e)return!1;var n=Kr.call(e,t);return n||xn(t)||(t=Rn(t),e=1==t.length?e:ht(e,xt(t,0,-1)),t=Wn(t),n=null!=e&&Kr.call(e,t)),n},Fe.identity=kr,Fe.includes=Zn,Fe.indexOf=Vn,Fe.inRange=function(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=wa(t,n)&&e<Ca(t,n)},Fe.isArguments=lr,Fe.isArray=Ai,Fe.isBoolean=function(e){return!0===e||!1===e||f(e)&&Jr.call(e)==V},Fe.isDate=function(e){return f(e)&&Jr.call(e)==W},Fe.isElement=cr,Fe.isEmpty=function(e){return null==e||(Sn(e)&&(Ai(e)||hr(e)||lr(e)||f(e)&&Mi(e.splice))?!e.length:!Gi(e).length)},Fe.isEqual=function(e,t,n,r){return n="function"==typeof n&&jt(n,r,3),!n&&Nn(e)&&Nn(t)?e===t:(r=n?n(e,t):_,r===_?gt(e,t,n):!!r)},Fe.isError=ur,Fe.isFinite=Oi,Fe.isFunction=Mi,Fe.isMatch=function(e,t,n,r){var a=Gi(t),i=a.length;if(!i)return!0;if(null==e)return!1;if(n="function"==typeof n&&jt(n,r,3),e=Fn(e),!n&&1==i){var o=a[0];if(r=t[o],Nn(r))return r===e[o]&&(r!==_||o in e)}for(var o=Mr(i),s=Mr(i);i--;)r=o[i]=t[a[i]],s[i]=Nn(r);return vt(e,a,o,s,n)},Fe.isNaN=function(e){return fr(e)&&e!=+e},Fe.isNative=pr,Fe.isNull=function(e){return null===e},Fe.isNumber=fr,Fe.isObject=dr,Fe.isPlainObject=Pi,Fe.isRegExp=mr,Fe.isString=hr,Fe.isTypedArray=gr,Fe.isUndefined=function(e){return e===_},Fe.kebabCase=Ji,Fe.last=Wn,Fe.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var a=r;if("number"==typeof n)a=(0>n?Ca(r+n,0):wa(n||0,r-1))+1;else if(n)return a=Ft(e,t,!0)-1,e=e[a],(t===t?t===e:e!==e)?a:-1;if(t!==t)return p(e,a,!0);for(;a--;)if(e[a]===t)return a;return-1},Fe.max=io,Fe.min=oo,Fe.noConflict=function(){return m._=Xr,this},Fe.noop=Ar,Fe.now=bi,Fe.pad=function(e,t,n){e=a(e),t=+t;var r=e.length;return r<t&&ba(t)?(r=(t-r)/2,t=aa(r),r=na(r),n=un("",r,n),n.slice(0,t)+e+n):e},Fe.padLeft=Xi,Fe.padRight=Zi,Fe.parseInt=Er,Fe.random=function(e,t,n){n&&Ln(e,t,n)&&(t=n=null);var r=null==e,a=null==t;return null==n&&(a&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,a=!0)),r&&a&&(t=1,a=!1),e=+e||0,a?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=La(),wa(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):It(e,t)},Fe.reduce=gi,Fe.reduceRight=vi,Fe.repeat=Sr,Fe.result=function(e,t,n){var r=null==e?_:e[t];return r===_&&(null==e||xn(t,e)||(t=Rn(t),e=1==t.length?e:ht(e,xt(t,0,-1)),r=null==e?_:e[Wn(t)]),r=r===_?n:r),Mi(r)?r.call(e):r},Fe.runInContext=b,Fe.size=function(e){var t=e?$a(e):0;return kn(t)?t:Gi(e).length},Fe.snakeCase=eo,Fe.some=rr,Fe.sortedIndex=ei,Fe.sortedLastIndex=ti,Fe.startCase=to,Fe.startsWith=function(e,t,n){return e=a(e),n=null==n?0:wa(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},Fe.sum=function(e,t,n){n&&Ln(e,t,n)&&(t=null);var r=yn(),a=null==t;if(r===rt&&a||(a=!1,t=r(t,n,3)),a){for(e=Ai(e)?e:Pn(e),t=e.length,n=0;t--;)n+=+e[t]||0;e=n}else e=Dt(e,t);return e},Fe.template=function(e,t,n){var r=Fe.templateSettings;n&&Ln(e,t,n)&&(t=n=null),e=a(e),t=et(Ra({},n||t),r,Ze),n=et(Ra({},t.imports),r.imports,Ze);var i,o,s=Gi(n),l=Ot(n,s),c=0;n=t.interpolate||Te;var u="__p+='";n=zr((t.escape||Te).source+"|"+n.source+"|"+(n===he?Ee:Te).source+"|"+(t.evaluate||Te).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,a,s,l){return r||(r=a),u+=e.slice(c,l).replace(ke,d),n&&(i=!0,u+="'+__e("+n+")+'"),s&&(o=!0,u+="';"+s+";\n__p+='"),r&&(u+="'+((__t=("+r+"))==null?'':__t)+'"),c=l+t.length,t}),u+="';",(t=t.variable)||(u="with(obj){"+u+"}"),u=(o?u.replace(oe,""):u).replace(se,"$1").replace(le,"$1;"),u="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(i?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+u+"return __p}",t=no(function(){return Rr(s,p+"return "+u).apply(_,l)}),t.source=u,ur(t))throw t;return t},Fe.trim=Ir,Fe.trimLeft=function(e,t,n){var r=e;return(e=a(e))?e.slice((n?Ln(r,t,n):null==t)?g(e):o(e,t+"")):e},Fe.trimRight=function(e,t,n){var r=e;return(e=a(e))?(n?Ln(r,t,n):null==t)?e.slice(0,v(e)+1):e.slice(0,s(e,t+"")+1):e},Fe.trunc=function(e,t,n){n&&Ln(e,t,n)&&(t=null);var r=D;if(n=A,null!=t)if(dr(t)){var i="separator"in t?t.separator:i,r="length"in t?+t.length||0:r;n="omission"in t?a(t.omission):n}else r=+t||0;if(e=a(e),r>=e.length)return e;if(r-=n.length,1>r)return n;if(t=e.slice(0,r),null==i)return t+n;if(mr(i)){if(e.slice(r).search(i)){var o,s=e.slice(0,r);for(i.global||(i=zr(i.source,(Se.exec(i)||"")+"g")),i.lastIndex=0;e=i.exec(s);)o=e.index;t=t.slice(0,null==o?r:o)}}else e.indexOf(i,r)!=r&&(i=t.lastIndexOf(i),-1<i&&(t=t.slice(0,i)));return t+n},Fe.unescape=function(e){return(e=a(e))&&de.test(e)?e.replace(ce,y):e},Fe.uniqueId=function(e){var t=++Qr;return a(e)+t},Fe.words=Lr,Fe.all=Jn,Fe.any=rr,Fe.contains=Zn,Fe.detect=li,Fe.foldl=gi,Fe.foldr=vi,Fe.head=zn,Fe.include=Zn,Fe.inject=gi,Dr(Fe,function(){var e={};return pt(Fe,function(t,n){Fe.prototype[n]||(e[n]=t)}),e}(),!1),Fe.sample=tr,Fe.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return tr(t,e)}):tr(this.value())},Fe.VERSION=C,Ge("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Fe[e].placeholder=Fe}),Ge(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=R,r=t==P;Be.prototype[e]=function(e,a){var i=this.__filtered__,o=i&&r?new Be(this):this.clone();return(o.__iteratees__||(o.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:yn(e,a,1),limit:-1,type:t}),o.__filtered__=i||n,o}}),Ge(["drop","take"],function(e,t){var n=e+"While";Be.prototype[e]=function(n){var r=this.__filtered__,a=r&&!t?this.dropWhile():this.clone();return n=null==n?1:Ca(aa(n)||0,0),r?t?a.__takeCount__=wa(a.__takeCount__,n):Wn(a.__iteratees__).limit=n:(a.__views__||(a.__views__=[])).push({size:n,type:e+(0>a.__dir__?"Right":"")}),a},Be.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Be.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),Ge(["first","last"],function(e,t){var n="take"+(t?"Right":"");Be.prototype[e]=function(){return this[n](1).value()[0]}}),Ge(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Be.prototype[e]=function(){return this[n](1)}}),Ge(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?bt:Or;Be.prototype[e]=function(e){return this[n](r(e))}}),Be.prototype.compact=function(){return this.filter(kr)},Be.prototype.reject=function(e,t){return e=yn(e,t,1),this.filter(function(t){return!e(t)})},Be.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return 0>e?n=this.takeRight(-e):e&&(n=this.drop(e)),t!==_&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Be.prototype.toArray=function(){return this.drop(0)},pt(Be.prototype,function(e,t){var n=Fe[t];if(n){var r=/^(?:filter|map|reject)|While$/.test(t),a=/^(?:first|last)$/.test(t);Fe.prototype[t]=function(){function t(e){return e=[e],sa.apply(e,i),n.apply(Fe,e)}var i=arguments,o=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,c=s instanceof Be,u=i[0],d=c||Ai(s);return d&&r&&"function"==typeof u&&1!=u.length&&(c=d=!1),c=c&&!l,a&&!o?c?e.call(s):n.call(Fe,this.value()):d?(s=e.apply(c?s:new Be(this),i),a||!l&&!s.__actions__||(s.__actions__||(s.__actions__=[])).push({func:Qn,args:[t],thisArg:Fe}),new je(s,o)):this.thru(t)}}}),Ge("concat join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?qr:Gr)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);Fe.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),pt(Be.prototype,function(e,t){var n=Fe[t];if(n){var r=n.name;(Pa[r]||(Pa[r]=[])).push({name:t,func:n})}}),Pa[cn(null,E).name]=[{name:"wrapper",func:null}],Be.prototype.clone=function(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Be(this.__wrapped__);return r.__actions__=e?We(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?We(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?We(n):null,r},Be.prototype.reverse=function(){if(this.__filtered__){var e=new Be(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Be.prototype.value=function(){var e=this.__wrapped__.value();if(!Ai(e))return Pt(e,this.__actions__);var t,n=this.__dir__,r=0>n;t=e.length;for(var a=this.__views__,i=0,o=-1,s=a?a.length:0;++o<s;){var l=a[o],c=l.size;switch(l.type){case"drop":i+=c;break;case"dropRight":t-=c;break;case"take":t=wa(t,i+c);break;case"takeRight":i=Ca(i,t-c)}}t={start:i,end:t},a=t.start,i=t.end,t=i-a,a=r?i:a-1,i=wa(t,this.__takeCount__),s=(o=this.__iteratees__)?o.length:0,l=0,c=[];e:for(;t--&&l<i;){for(var a=a+n,u=-1,d=e[a];++u<s;){var p=o[u],f=p.iteratee,m=p.type;if(m==P){if(p.done&&(r?a>p.index:a<p.index)&&(p.count=0,p.done=!1),p.index=a,!(p.done||(m=p.limit,p.done=-1<m?p.count++>=m:!f(d))))continue e}else if(p=f(d),m==R)d=p;else if(!p){if(m==F)continue e;break e}}c[l++]=d}return c},Fe.prototype.chain=function(){return Kn(this)},Fe.prototype.commit=function(){return new je(this.value(),this.__chain__)},Fe.prototype.plant=function(e){for(var t,n=this;n instanceof Re;){var r=jn(n);t?a.__wrapped__=r:t=r;var a=r,n=n.__wrapped__}return a.__wrapped__=e,t},Fe.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Be?(this.__actions__.length&&(e=new Be(this)),new je(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})},Fe.prototype.toString=function(){return this.value()+""},Fe.prototype.run=Fe.prototype.toJSON=Fe.prototype.valueOf=Fe.prototype.value=function(){return Pt(this.__wrapped__,this.__actions__)},Fe.prototype.collect=Fe.prototype.map,Fe.prototype.head=Fe.prototype.first,Fe.prototype.select=Fe.prototype.filter,Fe.prototype.tail=Fe.prototype.rest,Fe}var _,C="3.8.0",w=1,E=2,S=4,I=8,L=16,x=32,T=64,k=128,N=256,D=30,A="...",O=150,M=16,P=0,F=1,R=2,j="Expected a function",B="__lodash_placeholder__",U="[object Arguments]",z="[object Array]",V="[object Boolean]",W="[object Date]",G="[object Error]",H="[object Function]",q="[object Number]",$="[object Object]",Y="[object RegExp]",K="[object String]",Q="[object ArrayBuffer]",J="[object Float32Array]",X="[object Float64Array]",Z="[object Int8Array]",ee="[object Int16Array]",te="[object Int32Array]",ne="[object Uint8Array]",re="[object Uint8ClampedArray]",ae="[object Uint16Array]",ie="[object Uint32Array]",oe=/\b__p\+='';/g,se=/\b(__p\+=)''\+/g,le=/(__e\(.*?\)|\b__t\))\+'';/g,ce=/&(?:amp|lt|gt|quot|#39|#96);/g,ue=/[&<>"'`]/g,de=RegExp(ce.source),pe=RegExp(ue.source),fe=/<%-([\s\S]+?)%>/g,me=/<%([\s\S]+?)%>/g,he=/<%=([\s\S]+?)%>/g,ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,ve=/^\w*$/,ye=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,be=/[.*+?^${}()|[\]\/\\]/g,_e=RegExp(be.source),Ce=/[\u0300-\u036f\ufe20-\ufe23]/g,we=/\\(\\)?/g,Ee=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Se=/\w*$/,Ie=/^0[xX]/,Le=/^\[object .+?Constructor\]$/,xe=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Te=/($^)/,ke=/['\n\r\u2028\u2029\\]/g,Ne=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),De=" \t\v\fÂ \ufeff\n\r\u2028\u2029áá ââââââââââââ¯âã",Ae="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Oe={};Oe[J]=Oe[X]=Oe[Z]=Oe[ee]=Oe[te]=Oe[ne]=Oe[re]=Oe[ae]=Oe[ie]=!0,Oe[U]=Oe[z]=Oe[Q]=Oe[V]=Oe[W]=Oe[G]=Oe[H]=Oe["[object Map]"]=Oe[q]=Oe[$]=Oe[Y]=Oe["[object Set]"]=Oe[K]=Oe["[object WeakMap]"]=!1;var Me={};Me[U]=Me[z]=Me[Q]=Me[V]=Me[W]=Me[J]=Me[X]=Me[Z]=Me[ee]=Me[te]=Me[q]=Me[$]=Me[Y]=Me[K]=Me[ne]=Me[re]=Me[ae]=Me[ie]=!0,Me[G]=Me[H]=Me["[object Map]"]=Me["[object Set]"]=Me["[object WeakMap]"]=!1;var Pe={leading:!1,maxWait:0,trailing:!1},Fe={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss"},Re={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},je={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Be={function:!0,object:!0},Ue={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=Be[typeof exports]&&exports&&!exports.nodeType&&exports,Ve=Be[typeof module]&&module&&!module.nodeType&&module,We=Be[typeof self]&&self&&self.Object&&self,Ge=Be[typeof window]&&window&&window.Object&&window,He=Ve&&Ve.exports===ze&&ze,qe=ze&&Ve&&"object"==typeof global&&global&&global.Object&&global||Ge!==(this&&this.window)&&Ge||We||this,$e=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(qe._=$e,define("lodash",[],function(){return $e})):ze&&Ve?He?(Ve.exports=$e)._=$e:ze._=$e:qe._=$e}.call(this),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return a(n?n:e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";var r=e(19),a=e(32),i=e(34),o=e(33),s=e(38),l=e(39),c=e(55),u=(e(56),e(40)),d=e(51),p=e(54),f=e(64),m=e(68),h=e(73),g=e(76),v=e(79),y=e(82),b=e(27),_=e(115),C=e(142);p.inject();var w=c.createElement,E=c.createFactory,S=c.cloneElement,I=h.measure("React","render",m.render),L={Children:{map:a.map,forEach:a.forEach,count:a.count,only:C},Component:i,DOM:u,PropTypes:g,initializeTouchEvents:function(e){r.useTouchEvents=e},createClass:o.createClass,createElement:w,cloneElement:S,createFactory:E,createMixin:function(e){return e},constructAndRenderComponent:m.constructAndRenderComponent,constructAndRenderComponentByID:m.constructAndRenderComponentByID,findDOMNode:_,render:I,renderToString:y.renderToString,renderToStaticMarkup:y.renderToStaticMarkup,unmountComponentAtNode:m.unmountComponentAtNode,isValidElement:c.isValidElement,withContext:s.withContext,__spread:b};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:l,InstanceHandles:f,Mount:m,Reconciler:v,TextComponent:d}),L.version="0.13.3",t.exports=L},{115:115,142:142,19:19,27:27,32:32,33:33,34:34,38:38,39:39,40:40,51:51,54:54,55:55,56:56,64:64,68:68,73:73,76:76,79:79,82:82}],2:[function(e,t,n){"use strict";var r=e(117),a={componentDidMount:function(){this.props.autoFocus&&r(this.getDOMNode())}};t.exports=a},{117:117}],3:[function(e,t,n){"use strict";function r(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function a(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function i(e){switch(e){case T.topCompositionStart:return k.compositionStart;case T.topCompositionEnd:return k.compositionEnd;case T.topCompositionUpdate:return k.compositionUpdate}}function o(e,t){return e===T.topKeyDown&&t.keyCode===C}function s(e,t){switch(e){case T.topKeyUp:return-1!==_.indexOf(t.keyCode);case T.topKeyDown:return t.keyCode!==C;case T.topKeyPress:case T.topMouseDown:case T.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function c(e,t,n,r){var a,c;if(w?a=i(e):D?s(e,r)&&(a=k.compositionEnd):o(e,r)&&(a=k.compositionStart),!a)return null;I&&(D||a!==k.compositionStart?a===k.compositionEnd&&D&&(c=D.getData()):D=g.getPooled(t));var u=v.getPooled(a,n,r);if(c)u.data=c;else{var d=l(r);null!==d&&(u.data=d)}return m.accumulateTwoPhaseDispatches(u),u}function u(e,t){switch(e){case T.topCompositionEnd:return l(t);case T.topKeyPress:var n=t.which;return n!==L?null:(N=!0,x);case T.topTextInput:var r=t.data;return r===x&&N?null:r;default:return null}}function d(e,t){if(D){if(e===T.topCompositionEnd||s(e,t)){var n=D.getData();return g.release(D),D=null,n}return null}switch(e){case T.topPaste:return null;case T.topKeyPress:return t.which&&!a(t)?String.fromCharCode(t.which):null;case T.topCompositionEnd:return I?null:t.data;default:return null}}function p(e,t,n,r){var a;if(a=S?u(e,r):d(e,r),!a)return null;var i=y.getPooled(k.beforeInput,n,r);return i.data=a,m.accumulateTwoPhaseDispatches(i),i}var f=e(15),m=e(20),h=e(21),g=e(22),v=e(91),y=e(95),b=e(139),_=[9,13,27,32],C=229,w=h.canUseDOM&&"CompositionEvent"in window,E=null;h.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var S=h.canUseDOM&&"TextEvent"in window&&!E&&!r(),I=h.canUseDOM&&(!w||E&&E>8&&11>=E),L=32,x=String.fromCharCode(L),T=f.topLevelTypes,k={beforeInput:{phasedRegistrationNames:{bubbled:b({onBeforeInput:null}),captured:b({onBeforeInputCapture:null})},dependencies:[T.topCompositionEnd,T.topKeyPress,T.topTextInput,T.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:b({onCompositionEnd:null}),captured:b({onCompositionEndCapture:null})},dependencies:[T.topBlur,T.topCompositionEnd,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:b({onCompositionStart:null}),captured:b({onCompositionStartCapture:null})},dependencies:[T.topBlur,T.topCompositionStart,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:b({onCompositionUpdate:null}),captured:b({onCompositionUpdateCapture:null})},dependencies:[T.topBlur,T.topCompositionUpdate,T.topKeyDown,T.topKeyPress,T.topKeyUp,T.topMouseDown]}},N=!1,D=null,A={eventTypes:k,extractEvents:function(e,t,n,r){return[c(e,t,n,r),p(e,t,n,r)]}};t.exports=A},{139:139,15:15,20:20,21:21,22:22,91:91,95:95}],4:[function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var a={boxFlex:!0,boxFlexGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},i=["Webkit","ms","Moz","O"];Object.keys(a).forEach(function(e){i.forEach(function(t){a[r(t,e)]=a[e]})});var o={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:a,shorthandPropertyExpansions:o};t.exports=s},{}],5:[function(e,t,n){"use strict";var r=e(4),a=e(21),i=(e(106),e(111)),o=e(131),s=e(141),l=(e(150),s(function(e){return o(e)})),c="cssFloat";a.canUseDOM&&void 0===document.documentElement.style.cssFloat&&(c="styleFloat");var u={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!=r&&(t+=l(n)+":",t+=i(n,r)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var a in t)if(t.hasOwnProperty(a)){var o=i(a,t[a]);if("float"===a&&(a=c),o)n[a]=o;else{var s=r.shorthandPropertyExpansions[a];if(s)for(var l in s)n[l]="";else n[a]=""}}}};t.exports=u},{106:106,111:111,131:131,141:141,150:150,21:21,4:4}],6:[function(e,t,n){"use strict";function r(){this._callbacks=null,this._contexts=null}var a=e(28),i=e(27),o=e(133);i(r.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;
if(e){o(e.length===t.length),this._callbacks=null,this._contexts=null;for(var n=0,r=e.length;r>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(r),t.exports=r},{133:133,27:27,28:28}],7:[function(e,t,n){"use strict";function r(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function a(e){var t=E.getPooled(T.change,N,e);_.accumulateTwoPhaseDispatches(t),w.batchedUpdates(i,t)}function i(e){b.enqueueEvents(e),b.processEventQueue()}function o(e,t){k=e,N=t,k.attachEvent("onchange",a)}function s(){k&&(k.detachEvent("onchange",a),k=null,N=null)}function l(e,t,n){return e===x.topChange?n:void 0}function c(e,t,n){e===x.topFocus?(s(),o(t,n)):e===x.topBlur&&s()}function u(e,t){k=e,N=t,D=e.value,A=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(k,"value",P),k.attachEvent("onpropertychange",p)}function d(){k&&(delete k.value,k.detachEvent("onpropertychange",p),k=null,N=null,D=null,A=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==D&&(D=t,a(e))}}function f(e,t,n){return e===x.topInput?n:void 0}function m(e,t,n){e===x.topFocus?(d(),u(t,n)):e===x.topBlur&&d()}function h(e,t,n){return e!==x.topSelectionChange&&e!==x.topKeyUp&&e!==x.topKeyDown||!k||k.value===D?void 0:(D=k.value,N)}function g(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===x.topClick?n:void 0}var y=e(15),b=e(17),_=e(20),C=e(21),w=e(85),E=e(93),S=e(134),I=e(136),L=e(139),x=y.topLevelTypes,T={change:{phasedRegistrationNames:{bubbled:L({onChange:null}),captured:L({onChangeCapture:null})},dependencies:[x.topBlur,x.topChange,x.topClick,x.topFocus,x.topInput,x.topKeyDown,x.topKeyUp,x.topSelectionChange]}},k=null,N=null,D=null,A=null,O=!1;C.canUseDOM&&(O=S("change")&&(!("documentMode"in document)||document.documentMode>8));var M=!1;C.canUseDOM&&(M=S("input")&&(!("documentMode"in document)||document.documentMode>9));var P={get:function(){return A.get.call(this)},set:function(e){D=""+e,A.set.call(this,e)}},F={eventTypes:T,extractEvents:function(e,t,n,a){var i,o;if(r(t)?O?i=l:o=c:I(t)?M?i=f:(i=h,o=m):g(t)&&(i=v),i){var s=i(e,t,n);if(s){var u=E.getPooled(T.change,s,a);return _.accumulateTwoPhaseDispatches(u),u}}o&&o(e,t,n)}};t.exports=F},{134:134,136:136,139:139,15:15,17:17,20:20,21:21,85:85,93:93}],8:[function(e,t,n){"use strict";var r=0,a={createReactRootIndex:function(){return r++}};t.exports=a},{}],9:[function(e,t,n){"use strict";function r(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var a=e(12),i=e(70),o=e(145),s=e(133),l={dangerouslyReplaceNodeWithMarkup:a.dangerouslyReplaceNodeWithMarkup,updateTextContent:o,processUpdates:function(e,t){for(var n,l=null,c=null,u=0;u<e.length;u++)if(n=e[u],n.type===i.MOVE_EXISTING||n.type===i.REMOVE_NODE){var d=n.fromIndex,p=n.parentNode.childNodes[d],f=n.parentID;s(p),l=l||{},l[f]=l[f]||[],l[f][d]=p,c=c||[],c.push(p)}var m=a.dangerouslyRenderMarkup(t);if(c)for(var h=0;h<c.length;h++)c[h].parentNode.removeChild(c[h]);for(var g=0;g<e.length;g++)switch(n=e[g],n.type){case i.INSERT_MARKUP:r(n.parentNode,m[n.markupIndex],n.toIndex);break;case i.MOVE_EXISTING:r(n.parentNode,l[n.parentID][n.fromIndex],n.toIndex);break;case i.TEXT_CONTENT:o(n.parentNode,n.textContent);break;case i.REMOVE_NODE:}}};t.exports=l},{12:12,133:133,145:145,70:70}],10:[function(e,t,n){"use strict";function r(e,t){return(e&t)===t}var a=e(133),i={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},o=e.DOMPropertyNames||{},l=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var c in t){a(!s.isStandardName.hasOwnProperty(c)),s.isStandardName[c]=!0;var u=c.toLowerCase();if(s.getPossibleStandardName[u]=c,n.hasOwnProperty(c)){var d=n[c];s.getPossibleStandardName[d]=c,s.getAttributeName[c]=d}else s.getAttributeName[c]=u;s.getPropertyName[c]=o.hasOwnProperty(c)?o[c]:c,l.hasOwnProperty(c)?s.getMutationMethod[c]=l[c]:s.getMutationMethod[c]=null;var p=t[c];s.mustUseAttribute[c]=r(p,i.MUST_USE_ATTRIBUTE),s.mustUseProperty[c]=r(p,i.MUST_USE_PROPERTY),s.hasSideEffects[c]=r(p,i.HAS_SIDE_EFFECTS),s.hasBooleanValue[c]=r(p,i.HAS_BOOLEAN_VALUE),s.hasNumericValue[c]=r(p,i.HAS_NUMERIC_VALUE),s.hasPositiveNumericValue[c]=r(p,i.HAS_POSITIVE_NUMERIC_VALUE),s.hasOverloadedBooleanValue[c]=r(p,i.HAS_OVERLOADED_BOOLEAN_VALUE),a(!s.mustUseAttribute[c]||!s.mustUseProperty[c]),a(s.mustUseProperty[c]||!s.hasSideEffects[c]),a(!!s.hasBooleanValue[c]+!!s.hasNumericValue[c]+!!s.hasOverloadedBooleanValue[c]<=1)}}},o={},s={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,r=o[e];return r||(o[e]=r={}),t in r||(n=document.createElement(e),r[t]=n[t]),r[t]},injection:i};t.exports=s},{133:133}],11:[function(e,t,n){"use strict";function r(e,t){return null==t||a.hasBooleanValue[e]&&!t||a.hasNumericValue[e]&&isNaN(t)||a.hasPositiveNumericValue[e]&&1>t||a.hasOverloadedBooleanValue[e]&&t===!1}var a=e(10),i=e(143),o=(e(150),{createMarkupForID:function(e){return a.ID_ATTRIBUTE_NAME+"="+i(e)},createMarkupForProperty:function(e,t){if(a.isStandardName.hasOwnProperty(e)&&a.isStandardName[e]){if(r(e,t))return"";var n=a.getAttributeName[e];return a.hasBooleanValue[e]||a.hasOverloadedBooleanValue[e]&&t===!0?n:n+"="+i(t)}return a.isCustomAttribute(e)?null==t?"":e+"="+i(t):null},setValueForProperty:function(e,t,n){if(a.isStandardName.hasOwnProperty(t)&&a.isStandardName[t]){var i=a.getMutationMethod[t];if(i)i(e,n);else if(r(t,n))this.deleteValueForProperty(e,t);else if(a.mustUseAttribute[t])e.setAttribute(a.getAttributeName[t],""+n);else{var o=a.getPropertyName[t];a.hasSideEffects[t]&&""+e[o]==""+n||(e[o]=n)}}else a.isCustomAttribute(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForProperty:function(e,t){if(a.isStandardName.hasOwnProperty(t)&&a.isStandardName[t]){var n=a.getMutationMethod[t];if(n)n(e,void 0);else if(a.mustUseAttribute[t])e.removeAttribute(a.getAttributeName[t]);else{var r=a.getPropertyName[t],i=a.getDefaultValueForProperty(e.nodeName,r);a.hasSideEffects[t]&&""+e[r]===i||(e[r]=i)}}else a.isCustomAttribute(t)&&e.removeAttribute(t)}});t.exports=o},{10:10,143:143,150:150}],12:[function(e,t,n){"use strict";function r(e){return e.substring(1,e.indexOf(" "))}var a=e(21),i=e(110),o=e(112),s=e(125),l=e(133),c=/^(<[^ \/>]+)/,u="data-danger-index",d={dangerouslyRenderMarkup:function(e){l(a.canUseDOM);for(var t,n={},d=0;d<e.length;d++)l(e[d]),t=r(e[d]),t=s(t)?t:"*",n[t]=n[t]||[],n[t][d]=e[d];var p=[],f=0;for(t in n)if(n.hasOwnProperty(t)){var m,h=n[t];for(m in h)if(h.hasOwnProperty(m)){var g=h[m];h[m]=g.replace(c,"$1 "+u+'="'+m+'" ')}for(var v=i(h.join(""),o),y=0;y<v.length;++y){var b=v[y];b.hasAttribute&&b.hasAttribute(u)&&(m=+b.getAttribute(u),b.removeAttribute(u),l(!p.hasOwnProperty(m)),p[m]=b,f+=1)}}return l(f===p.length),l(p.length===e.length),p},dangerouslyReplaceNodeWithMarkup:function(e,t){l(a.canUseDOM),l(t),l("html"!==e.tagName.toLowerCase());var n=i(t,o)[0];e.parentNode.replaceChild(n,e)}};t.exports=d},{110:110,112:112,125:125,133:133,21:21}],13:[function(e,t,n){"use strict";var r=e(139),a=[r({ResponderEventPlugin:null}),r({SimpleEventPlugin:null}),r({TapEventPlugin:null}),r({EnterLeaveEventPlugin:null}),r({ChangeEventPlugin:null}),r({SelectEventPlugin:null}),r({BeforeInputEventPlugin:null}),r({AnalyticsEventPlugin:null}),r({MobileSafariClickEventPlugin:null})];t.exports=a},{139:139}],14:[function(e,t,n){"use strict";var r=e(15),a=e(20),i=e(97),o=e(68),s=e(139),l=r.topLevelTypes,c=o.getFirstReactDOM,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},d=[null,null],p={eventTypes:u,extractEvents:function(e,t,n,r){if(e===l.topMouseOver&&(r.relatedTarget||r.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var s;if(t.window===t)s=t;else{var p=t.ownerDocument;s=p?p.defaultView||p.parentWindow:window}var f,m;if(e===l.topMouseOut?(f=t,m=c(r.relatedTarget||r.toElement)||s):(f=s,m=t),f===m)return null;var h=f?o.getID(f):"",g=m?o.getID(m):"",v=i.getPooled(u.mouseLeave,h,r);v.type="mouseleave",v.target=f,v.relatedTarget=m;var y=i.getPooled(u.mouseEnter,g,r);return y.type="mouseenter",y.target=m,y.relatedTarget=f,a.accumulateEnterLeaveDispatches(v,y,h,g),d[0]=v,d[1]=y,d}};t.exports=p},{139:139,15:15,20:20,68:68,97:97}],15:[function(e,t,n){"use strict";var r=e(138),a=r({bubbled:null,captured:null}),i=r({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:i,PropagationPhases:a};t.exports=o},{138:138}],16:[function(e,t,n){var r=e(112),a={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};t.exports=a},{112:112}],17:[function(e,t,n){"use strict";var r=e(18),a=e(19),i=e(103),o=e(118),s=e(133),l={},c=null,u=function(e){if(e){var t=a.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),a.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},d=null,p={injection:{injectMount:a.injection.injectMount,injectInstanceHandle:function(e){d=e},getInstanceHandle:function(){return d},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){s(!n||"function"==typeof n);var r=l[t]||(l[t]={});r[e]=n},getListener:function(e,t){var n=l[t];return n&&n[e]},deleteListener:function(e,t){var n=l[t];n&&delete n[e]},deleteAllListeners:function(e){for(var t in l)delete l[t][e]},extractEvents:function(e,t,n,a){for(var o,s=r.plugins,l=0,c=s.length;c>l;l++){var u=s[l];if(u){var d=u.extractEvents(e,t,n,a);d&&(o=i(o,d))}}return o},enqueueEvents:function(e){e&&(c=i(c,e))},processEventQueue:function(){var e=c;c=null,o(e,u),s(!c)},__purge:function(){l={}},__getListenerBank:function(){return l}};t.exports=p},{103:103,118:118,133:133,18:18,19:19}],18:[function(e,t,n){"use strict";function r(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(o(n>-1),!c.plugins[n]){o(t.extractEvents),c.plugins[n]=t;var r=t.eventTypes;for(var i in r)o(a(r[i],t,i))}}}function a(e,t,n){o(!c.eventNameDispatchConfigs.hasOwnProperty(n)),c.eventNameDispatchConfigs[n]=e;var r=e.phasedRegistrationNames;if(r){for(var a in r)if(r.hasOwnProperty(a)){var s=r[a];i(s,t,n)}return!0}return!!e.registrationName&&(i(e.registrationName,t,n),!0)}function i(e,t,n){o(!c.registrationNameModules[e]),c.registrationNameModules[e]=t,c.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=e(133),s=null,l={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){o(!s),s=Array.prototype.slice.call(e),r()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];l.hasOwnProperty(n)&&l[n]===a||(o(!l[n]),l[n]=a,t=!0)}t&&r()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var r=c.registrationNameModules[t.phasedRegistrationNames[n]];if(r)return r}return null},_resetEventPlugins:function(){s=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var r=c.registrationNameModules;for(var a in r)r.hasOwnProperty(a)&&delete r[a]}};t.exports=c},{133:133}],19:[function(e,t,n){"use strict";function r(e){return e===g.topMouseUp||e===g.topTouchEnd||e===g.topTouchCancel}function a(e){return e===g.topMouseMove||e===g.topTouchMove}function i(e){return e===g.topMouseDown||e===g.topTouchStart}function o(e,t){var n=e._dispatchListeners,r=e._dispatchIDs;if(Array.isArray(n))for(var a=0;a<n.length&&!e.isPropagationStopped();a++)t(e,n[a],r[a]);else n&&t(e,n,r)}function s(e,t,n){e.currentTarget=h.Mount.getNode(n);var r=t(e,n);return e.currentTarget=null,r}function l(e,t){o(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(t)){for(var r=0;r<t.length&&!e.isPropagationStopped();r++)if(t[r](e,n[r]))return n[r]}else if(t&&t(e,n))return n;return null}function u(e){var t=c(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function d(e){var t=e._dispatchListeners,n=e._dispatchIDs;m(!Array.isArray(t));var r=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,r}function p(e){return!!e._dispatchListeners}var f=e(15),m=e(133),h={Mount:null,injectMount:function(e){h.Mount=e}},g=f.topLevelTypes,v={isEndish:r,isMoveish:a,isStartish:i,executeDirectDispatch:d,executeDispatch:s,executeDispatchesInOrder:l,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,injection:h,useTouchEvents:!1};t.exports=v},{133:133,15:15}],20:[function(e,t,n){"use strict";function r(e,t,n){var r=t.dispatchConfig.phasedRegistrationNames[n];return g(e,r)}function a(e,t,n){var a=t?h.bubbled:h.captured,i=r(e,n,a);i&&(n._dispatchListeners=f(n._dispatchListeners,i),n._dispatchIDs=f(n._dispatchIDs,e))}function i(e){e&&e.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,a,e)}function o(e,t,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,a=g(e,r);a&&(n._dispatchListeners=f(n._dispatchListeners,a),n._dispatchIDs=f(n._dispatchIDs,e))}}function s(e){e&&e.dispatchConfig.registrationName&&o(e.dispatchMarker,null,e)}function l(e){m(e,i)}function c(e,t,n,r){p.injection.getInstanceHandle().traverseEnterLeave(n,r,o,e,t)}function u(e){m(e,s)}var d=e(15),p=e(17),f=e(103),m=e(118),h=d.PropagationPhases,g=p.getListener,v={accumulateTwoPhaseDispatches:l,accumulateDirectDispatches:u,accumulateEnterLeaveDispatches:c};t.exports=v},{103:103,118:118,15:15,17:17}],21:[function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=a},{}],22:[function(e,t,n){"use strict";function r(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var a=e(28),i=e(27),o=e(128);i(r.prototype,{getText:function(){return"value"in this._root?this._root.value:this._root[o()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,r=n.length,a=this.getText(),i=a.length;for(e=0;r>e&&n[e]===a[e];e++);var o=r-e;for(t=1;o>=t&&n[r-t]===a[i-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=a.slice(e,s),this._fallbackText}}),a.addPoolingTo(r),t.exports=r},{128:128,27:27,28:28}],23:[function(e,t,n){"use strict";var r,a=e(10),i=e(21),o=a.injection.MUST_USE_ATTRIBUTE,s=a.injection.MUST_USE_PROPERTY,l=a.injection.HAS_BOOLEAN_VALUE,c=a.injection.HAS_SIDE_EFFECTS,u=a.injection.HAS_NUMERIC_VALUE,d=a.injection.HAS_POSITIVE_NUMERIC_VALUE,p=a.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(i.canUseDOM){var f=document.implementation;r=f&&f.hasFeature&&f.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var m={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:o|l,allowTransparency:o,alt:null,async:l,autoComplete:null,autoPlay:l,cellPadding:null,cellSpacing:null,charSet:o,checked:s|l,classID:o,className:r?o:s,cols:o|d,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:s|l,coords:null,crossOrigin:null,data:null,dateTime:o,defer:l,dir:null,disabled:o|l,download:p,draggable:null,encType:null,form:o,formAction:o,formEncType:o,formMethod:o,formNoValidate:l,formTarget:o,frameBorder:o,headers:null,height:o,hidden:o|l,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:s,label:null,lang:null,list:o,loop:s|l,low:null,manifest:o,marginHeight:null,marginWidth:null,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:s|l,muted:s|l,name:null,noValidate:l,open:l,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:s|l,rel:null,required:l,role:o,rows:o|d,rowSpan:null,sandbox:null,scope:null,scoped:l,scrolling:null,seamless:o|l,selected:s|l,shape:null,size:o|d,sizes:o,span:d,spellCheck:null,src:null,srcDoc:s,srcSet:o,start:u,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:s|c,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|l,itemType:o,itemID:o,itemRef:o,property:null,unselectable:o},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};t.exports=m},{10:10,21:21}],24:[function(e,t,n){"use strict";function r(e){c(null==e.props.checkedLink||null==e.props.valueLink)}function a(e){r(e),c(null==e.props.value&&null==e.props.onChange)}function i(e){r(e),c(null==e.props.checked&&null==e.props.onChange)}function o(e){this.props.valueLink.requestChange(e.target.value)}function s(e){this.props.checkedLink.requestChange(e.target.checked)}var l=e(76),c=e(133),u={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},d={Mixin:{propTypes:{value:function(e,t,n){return!e[t]||u[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func}},getValue:function(e){return e.props.valueLink?(a(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(i(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(a(e),o):e.props.checkedLink?(i(e),s):e.props.onChange}};t.exports=d},{133:133,76:76}],25:[function(e,t,n){"use strict";function r(e){e.remove()}var a=e(30),i=e(103),o=e(118),s=e(133),l={trapBubbledEvent:function(e,t){s(this.isMounted());var n=this.getDOMNode();s(n);var r=a.trapBubbledEvent(e,t,n);this._localEventListeners=i(this._localEventListeners,r)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,r)}};t.exports=l},{103:103,118:118,133:133,30:30}],26:[function(e,t,n){"use strict";var r=e(15),a=e(112),i=r.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,r){if(e===i.topTouchStart){var o=r.target;o&&!o.onclick&&(o.onclick=a)}}};t.exports=o},{112:112,15:15}],27:[function(e,t,n){"use strict";function r(e,t){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(e),r=Object.prototype.hasOwnProperty,a=1;a<arguments.length;a++){var i=arguments[a];if(null!=i){var o=Object(i);for(var s in o)r.call(o,s)&&(n[s]=o[s])}}return n}t.exports=r},{}],28:[function(e,t,n){"use strict";var r=e(133),a=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},i=function(e,t){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,e,t),r}return new n(e,t)},o=function(e,t,n){var r=this;if(r.instancePool.length){var a=r.instancePool.pop();return r.call(a,e,t,n),a}return new r(e,t,n)},s=function(e,t,n,r,a){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,e,t,n,r,a),o}return new i(e,t,n,r,a)},l=function(e){var t=this;r(e instanceof t),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,u=a,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||u,n.poolSize||(n.poolSize=c),n.release=l,n},p={addPoolingTo:d,oneArgumentPooler:a,twoArgumentPooler:i,threeArgumentPooler:o,fiveArgumentPooler:s};t.exports=p},{133:133}],29:[function(e,t,n){"use strict";var r=e(115),a={getDOMNode:function(){return r(this)}};t.exports=a},{115:115}],30:[function(e,t,n){"use strict";function r(e){return Object.prototype.hasOwnProperty.call(e,h)||(e[h]=f++,d[e[h]]={}),d[e[h]]}var a=e(15),i=e(17),o=e(18),s=e(59),l=e(102),c=e(27),u=e(134),d={},p=!1,f=0,m={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},h="_reactListenersID"+String(Math.random()).slice(2),g=c({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,i=r(n),s=o.registrationNameDependencies[e],l=a.topLevelTypes,c=0,d=s.length;d>c;c++){var p=s[c];i.hasOwnProperty(p)&&i[p]||(p===l.topWheel?u("wheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):u("mousewheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):p===l.topScroll?u("scroll",!0)?g.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):p===l.topFocus||p===l.topBlur?(u("focus",!0)?(g.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):u("focusin")&&(g.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),i[l.topBlur]=!0,i[l.topFocus]=!0):m.hasOwnProperty(p)&&g.ReactEventListener.trapBubbledEvent(p,m[p],n),i[p]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!p){var e=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),p=!0}},eventNameDispatchConfigs:i.eventNameDispatchConfigs,registrationNameModules:i.registrationNameModules,putListener:i.putListener,getListener:i.getListener,deleteListener:i.deleteListener,deleteAllListeners:i.deleteAllListeners});t.exports=g},{102:102,134:134,15:15,17:17,18:18,27:27,59:59}],31:[function(e,t,n){"use strict";var r=e(79),a=e(116),i=e(132),o=e(147),s={instantiateChildren:function(e,t,n){var r=a(e);for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],l=i(s,null);r[o]=l}return r},updateChildren:function(e,t,n,s){var l=a(t);if(!l&&!e)return null;var c;for(c in l)if(l.hasOwnProperty(c)){var u=e&&e[c],d=u&&u._currentElement,p=l[c];if(o(d,p))r.receiveComponent(u,p,n,s),l[c]=u;else{u&&r.unmountComponent(u,c);var f=i(p,null);l[c]=f}}for(c in e)!e.hasOwnProperty(c)||l&&l.hasOwnProperty(c)||r.unmountComponent(e[c]);return l},unmountChildren:function(e){for(var t in e){var n=e[t];r.unmountComponent(n)}}};t.exports=s},{116:116,132:132,147:147,79:79}],32:[function(e,t,n){"use strict";function r(e,t){this.forEachFunction=e,this.forEachContext=t}function a(e,t,n,r){var a=e;a.forEachFunction.call(a.forEachContext,t,r)}function i(e,t,n){if(null==e)return e;var i=r.getPooled(t,n);f(e,a,i),r.release(i)}function o(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function s(e,t,n,r){var a=e,i=a.mapResult,o=!i.hasOwnProperty(n);if(o){var s=a.mapFunction.call(a.mapContext,t,r);i[n]=s}}function l(e,t,n){if(null==e)return e;var r={},a=o.getPooled(r,t,n);return f(e,s,a),o.release(a),p.create(r)}function c(e,t,n,r){return null}function u(e,t){return f(e,c,null)}var d=e(28),p=e(61),f=e(149),m=(e(150),d.twoArgumentPooler),h=d.threeArgumentPooler;d.addPoolingTo(r,m),d.addPoolingTo(o,h);var g={forEach:i,map:l,count:u};t.exports=g},{149:149,150:150,28:28,61:61}],33:[function(e,t,n){"use strict";function r(e,t){var n=S.hasOwnProperty(t)?S[t]:null;L.hasOwnProperty(t)&&y(n===w.OVERRIDE_BASE),e.hasOwnProperty(t)&&y(n===w.DEFINE_MANY||n===w.DEFINE_MANY_MERGED)}function a(e,t){if(t){y("function"!=typeof t),y(!p.isValidElement(t));var n=e.prototype;t.hasOwnProperty(C)&&I.mixins(e,t.mixins);for(var a in t)if(t.hasOwnProperty(a)&&a!==C){var i=t[a];if(r(n,a),I.hasOwnProperty(a))I[a](e,i);else{var o=S.hasOwnProperty(a),c=n.hasOwnProperty(a),u=i&&i.__reactDontBind,d="function"==typeof i,f=d&&!o&&!c&&!u;if(f)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[a]=i,n[a]=i;else if(c){var m=S[a];y(o&&(m===w.DEFINE_MANY_MERGED||m===w.DEFINE_MANY)),m===w.DEFINE_MANY_MERGED?n[a]=s(n[a],i):m===w.DEFINE_MANY&&(n[a]=l(n[a],i))}else n[a]=i}}}}function i(e,t){if(t)for(var n in t){var r=t[n];if(t.hasOwnProperty(n)){var a=n in I;y(!a);var i=n in e;y(!i),e[n]=r}}}function o(e,t){y(e&&t&&"object"==typeof e&&"object"==typeof t);for(var n in t)t.hasOwnProperty(n)&&(y(void 0===e[n]),e[n]=t[n]);return e}function s(e,t){return function(){var n=e.apply(this,arguments),r=t.apply(this,arguments);if(null==n)return r;if(null==r)return n;var a={};return o(a,n),o(a,r),a}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function c(e,t){var n=t.bind(e);return n}function u(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=c(e,f.guard(n,e.constructor.displayName+"."+t))}}var d=e(34),p=(e(39),e(55)),f=e(58),m=e(65),h=e(66),g=(e(75),e(74),e(84)),v=e(27),y=e(133),b=e(138),_=e(139),C=(e(150),_({mixins:null})),w=b({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),E=[],S={mixins:w.DEFINE_MANY,statics:w.DEFINE_MANY,propTypes:w.DEFINE_MANY,contextTypes:w.DEFINE_MANY,childContextTypes:w.DEFINE_MANY,getDefaultProps:w.DEFINE_MANY_MERGED,getInitialState:w.DEFINE_MANY_MERGED,getChildContext:w.DEFINE_MANY_MERGED,render:w.DEFINE_ONCE,componentWillMount:w.DEFINE_MANY,componentDidMount:w.DEFINE_MANY,componentWillReceiveProps:w.DEFINE_MANY,shouldComponentUpdate:w.DEFINE_ONCE,componentWillUpdate:w.DEFINE_MANY,componentDidUpdate:w.DEFINE_MANY,componentWillUnmount:w.DEFINE_MANY,updateComponent:w.OVERRIDE_BASE},I={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)a(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=v({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=v({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=s(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=v({},e.propTypes,t)},statics:function(e,t){i(e,t)}},L={replaceState:function(e,t){g.enqueueReplaceState(this,e),t&&g.enqueueCallback(this,t)},isMounted:function(){var e=m.get(this);return e&&e!==h.currentlyMountingInstance},setProps:function(e,t){g.enqueueSetProps(this,e),t&&g.enqueueCallback(this,t)},replaceProps:function(e,t){g.enqueueReplaceProps(this,e),t&&g.enqueueCallback(this,t)}},x=function(){};v(x.prototype,d.prototype,L);var T={createClass:function(e){var t=function(e,t){this.__reactAutoBindMap&&u(this),this.props=e,this.context=t,this.state=null;var n=this.getInitialState?this.getInitialState():null;y("object"==typeof n&&!Array.isArray(n)),this.state=n};t.prototype=new x,t.prototype.constructor=t,E.forEach(a.bind(null,t)),a(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),y(t.prototype.render);for(var n in S)t.prototype[n]||(t.prototype[n]=null);return t.type=t,t},injection:{injectMixin:function(e){E.push(e)}}};t.exports=T},{133:133,138:138,139:139,150:150,27:27,34:34,39:39,55:55,58:58,65:65,66:66,74:74,75:75,84:84}],34:[function(e,t,n){"use strict";function r(e,t){this.props=e,this.context=t}var a=e(84),i=e(133);e(150),r.prototype.setState=function(e,t){i("object"==typeof e||"function"==typeof e||null==e),a.enqueueSetState(this,e),t&&a.enqueueCallback(this,t)},r.prototype.forceUpdate=function(e){a.enqueueForceUpdate(this),e&&a.enqueueCallback(this,e)},t.exports=r},{133:133,150:150,84:84}],35:[function(e,t,n){"use strict";var r=e(44),a=e(68),i={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:r.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){a.purgeID(e)}};t.exports=i},{44:44,68:68}],36:[function(e,t,n){"use strict";var r=e(133),a=!1,i={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r(!a),i.unmountIDFromEnvironment=e.unmountIDFromEnvironment,i.replaceNodeWithMarkupByID=e.replaceNodeWithMarkupByID,i.processChildrenUpdates=e.processChildrenUpdates,a=!0}}};t.exports=i},{133:133}],37:[function(e,t,n){"use strict";function r(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}var a=e(36),i=e(38),o=e(39),s=e(55),l=(e(56),e(65)),c=e(66),u=e(71),d=e(73),p=e(75),f=(e(74),e(79)),m=e(85),h=e(27),g=e(113),v=e(133),y=e(147),b=(e(150),1),_={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,
this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._isTopLevel=!1,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=b++,this._rootNodeID=e;var r=this._processProps(this._currentElement.props),a=this._processContext(this._currentElement._context),i=u.getComponentClassForElement(this._currentElement),o=new i(r,a);o.props=r,o.context=a,o.refs=g,this._instance=o,l.set(o,this);var s=o.state;void 0===s&&(o.state=s=null),v("object"==typeof s&&!Array.isArray(s)),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var d,p,m=c.currentlyMountingInstance;c.currentlyMountingInstance=this;try{o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),d=this._getValidatedChildContext(n),p=this._renderValidatedComponent(d)}finally{c.currentlyMountingInstance=m}this._renderedComponent=this._instantiateReactComponent(p,this._currentElement.type);var h=f.mountComponent(this._renderedComponent,e,t,this._mergeChildContext(n,d));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),h},unmountComponent:function(){var e=this._instance;if(e.componentWillUnmount){var t=c.currentlyUnmountingInstance;c.currentlyUnmountingInstance=this;try{e.componentWillUnmount()}finally{c.currentlyUnmountingInstance=t}}f.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,l.remove(e)},_setPropsInternal:function(e,t){var n=this._pendingElement||this._currentElement;this._pendingElement=s.cloneAndReplaceProps(n,h({},n.props,e)),m.enqueueUpdate(this,t)},_maskContext:function(e){var t=null;if("string"==typeof this._currentElement.type)return g;var n=this._currentElement.type.contextTypes;if(!n)return g;t={};for(var r in n)t[r]=e[r];return t},_processContext:function(e){var t=this._maskContext(e);return t},_getValidatedChildContext:function(e){var t=this._instance,n=t.getChildContext&&t.getChildContext();if(n){v("object"==typeof t.constructor.childContextTypes);for(var r in n)v(r in t.constructor.childContextTypes);return n}return null},_mergeChildContext:function(e,t){return t?h({},e,t):e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var a=this.getName();for(var i in e)if(e.hasOwnProperty(i)){var o;try{v("function"==typeof e[i]),o=e[i](t,i,a,n)}catch(e){o=e}o instanceof Error&&(r(this),n===p.prop)}},receiveComponent:function(e,t,n){var r=this._currentElement,a=this._context;this._pendingElement=null,this.updateComponent(t,r,e,a,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&f.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},_warnIfContextsDiffer:function(e,t){e=this._maskContext(e),t=this._maskContext(t);for(var n=Object.keys(t).sort(),r=(this.getName()||"ReactCompositeComponent",0);r<n.length;r++)n[r]},updateComponent:function(e,t,n,r,a){var i=this._instance,o=i.context,s=i.props;t!==n&&(o=this._processContext(n._context),s=this._processProps(n.props),i.componentWillReceiveProps&&i.componentWillReceiveProps(s,o));var l=this._processPendingState(s,o),c=this._pendingForceUpdate||!i.shouldComponentUpdate||i.shouldComponentUpdate(s,l,o);c?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,s,l,o,e,a)):(this._currentElement=n,this._context=a,i.props=s,i.state=l,i.context=o)},_processPendingState:function(e,t){var n=this._instance,r=this._pendingStateQueue,a=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(a&&1===r.length)return r[0];for(var i=h({},a?r[0]:n.state),o=a?1:0;o<r.length;o++){var s=r[o];h(i,"function"==typeof s?s.call(n,i,e,t):s)}return i},_performComponentUpdate:function(e,t,n,r,a,i){var o=this._instance,s=o.props,l=o.state,c=o.context;o.componentWillUpdate&&o.componentWillUpdate(t,n,r),this._currentElement=e,this._context=i,o.props=t,o.state=n,o.context=r,this._updateRenderedComponent(a,i),o.componentDidUpdate&&a.getReactMountReady().enqueue(o.componentDidUpdate.bind(o,s,l,c),o)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,r=n._currentElement,a=this._getValidatedChildContext(),i=this._renderValidatedComponent(a);if(y(r,i))f.receiveComponent(n,i,e,this._mergeChildContext(t,a));else{var o=this._rootNodeID,s=n._rootNodeID;f.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i,this._currentElement.type);var l=f.mountComponent(this._renderedComponent,o,e,this._mergeChildContext(t,a));this._replaceNodeWithMarkupByID(s,l)}},_replaceNodeWithMarkupByID:function(e,t){a.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(e){var t,n=i.current;i.current=this._mergeChildContext(this._currentElement._context,e),o.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{i.current=n,o.current=null}return v(null===t||t===!1||s.isValidElement(t)),t},attachRef:function(e,t){var n=this.getPublicInstance(),r=n.refs===g?n.refs={}:n.refs;r[e]=t.getPublicInstance()},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){return this._instance},_instantiateReactComponent:null};d.measureMethods(_,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var C={Mixin:_};t.exports=C},{113:113,133:133,147:147,150:150,27:27,36:36,38:38,39:39,55:55,56:56,65:65,66:66,71:71,73:73,74:74,75:75,79:79,85:85}],38:[function(e,t,n){"use strict";var r=e(27),a=e(113),i=(e(150),{current:a,withContext:function(e,t){var n,a=i.current;i.current=r({},a,e);try{n=t()}finally{i.current=a}return n}});t.exports=i},{113:113,150:150,27:27}],39:[function(e,t,n){"use strict";var r={current:null};t.exports=r},{}],40:[function(e,t,n){"use strict";function r(e){return a.createFactory(e)}var a=e(55),i=(e(56),e(140)),o=i({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},r);t.exports=o},{140:140,55:55,56:56}],41:[function(e,t,n){"use strict";var r=e(2),a=e(29),i=e(33),o=e(55),s=e(138),l=o.createFactory("button"),c=s({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),u=i.createClass({displayName:"ReactDOMButton",tagName:"BUTTON",mixins:[r,a],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&c[t]||(e[t]=this.props[t]);return l(e,this.props.children)}});t.exports=u},{138:138,2:2,29:29,33:33,55:55}],42:[function(e,t,n){"use strict";function r(e){e&&(null!=e.dangerouslySetInnerHTML&&(v(null==e.children),v("object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML)),v(null==e.style||"object"==typeof e.style))}function a(e,t,n,r){var a=p.findReactContainerForID(e);if(a){var i=a.nodeType===S?a.ownerDocument:a;_(t,i)}r.getPutListenerQueue().enqueuePutListener(e,t,n)}function i(e){k.call(T,e)||(v(x.test(e)),T[e]=!0)}function o(e){i(e),this._tag=e,this._renderedChildren=null,this._previousStyleCopy=null,this._rootNodeID=null}var s=e(5),l=e(10),c=e(11),u=e(30),d=e(35),p=e(68),f=e(69),m=e(73),h=e(27),g=e(114),v=e(133),y=(e(134),e(139)),b=(e(150),u.deleteListener),_=u.listenTo,C=u.registrationNameModules,w={string:!0,number:!0},E=y({style:null}),S=1,I=null,L={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},x=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,T={},k={}.hasOwnProperty;o.displayName="ReactDOMComponent",o.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,n){this._rootNodeID=e,r(this._currentElement.props);var a=L[this._tag]?"":"</"+this._tag+">";return this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t,n)+a},_createOpenTagMarkupAndPutListeners:function(e){var t=this._currentElement.props,n="<"+this._tag;for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];if(null!=i)if(C.hasOwnProperty(r))a(this._rootNodeID,r,i,e);else{r===E&&(i&&(i=this._previousStyleCopy=h({},t.style)),i=s.createMarkupForStyles(i));var o=c.createMarkupForProperty(r,i);o&&(n+=" "+o)}}if(e.renderToStaticMarkup)return n+">";var l=c.createMarkupForID(this._rootNodeID);return n+" "+l+">"},_createContentMarkup:function(e,t){var n="";("listing"===this._tag||"pre"===this._tag||"textarea"===this._tag)&&(n="\n");var r=this._currentElement.props,a=r.dangerouslySetInnerHTML;if(null!=a){if(null!=a.__html)return n+a.__html}else{var i=w[typeof r.children]?r.children:null,o=null!=i?null:r.children;if(null!=i)return n+g(i);if(null!=o){var s=this.mountChildren(o,e,t);return n+s.join("")}}return n},receiveComponent:function(e,t,n){var r=this._currentElement;this._currentElement=e,this.updateComponent(t,r,e,n)},updateComponent:function(e,t,n,a){r(this._currentElement.props),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e,a)},_updateDOMProperties:function(e,t){var n,r,i,o=this._currentElement.props;for(n in e)if(!o.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===E){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(i=i||{},i[r]="");this._previousStyleCopy=null}else C.hasOwnProperty(n)?b(this._rootNodeID,n):(l.isStandardName[n]||l.isCustomAttribute(n))&&I.deletePropertyByID(this._rootNodeID,n);for(n in o){var c=o[n],u=n===E?this._previousStyleCopy:e[n];if(o.hasOwnProperty(n)&&c!==u)if(n===E)if(c?c=this._previousStyleCopy=h({},c):this._previousStyleCopy=null,u){for(r in u)!u.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(i=i||{},i[r]="");for(r in c)c.hasOwnProperty(r)&&u[r]!==c[r]&&(i=i||{},i[r]=c[r])}else i=c;else C.hasOwnProperty(n)?a(this._rootNodeID,n,c,t):(l.isStandardName[n]||l.isCustomAttribute(n))&&I.updatePropertyByID(this._rootNodeID,n,c)}i&&I.updateStylesByID(this._rootNodeID,i)},_updateDOMChildren:function(e,t,n){var r=this._currentElement.props,a=w[typeof e.children]?e.children:null,i=w[typeof r.children]?r.children:null,o=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=r.dangerouslySetInnerHTML&&r.dangerouslySetInnerHTML.__html,l=null!=a?null:e.children,c=null!=i?null:r.children,u=null!=a||null!=o,d=null!=i||null!=s;null!=l&&null==c?this.updateChildren(null,t,n):u&&!d&&this.updateTextContent(""),null!=i?a!==i&&this.updateTextContent(""+i):null!=s?o!==s&&I.updateInnerHTMLByID(this._rootNodeID,s):null!=c&&this.updateChildren(c,t,n)},unmountComponent:function(){this.unmountChildren(),u.deleteAllListeners(this._rootNodeID),d.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null}},m.measureMethods(o,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),h(o.prototype,o.Mixin,f.Mixin),o.injection={injectIDOperations:function(e){o.BackendIDOperations=I=e}},t.exports=o},{10:10,11:11,114:114,133:133,134:134,139:139,150:150,27:27,30:30,35:35,5:5,68:68,69:69,73:73}],43:[function(e,t,n){"use strict";var r=e(15),a=e(25),i=e(29),o=e(33),s=e(55),l=s.createFactory("form"),c=o.createClass({displayName:"ReactDOMForm",tagName:"FORM",mixins:[i,a],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(r.topLevelTypes.topSubmit,"submit")}});t.exports=c},{15:15,25:25,29:29,33:33,55:55}],44:[function(e,t,n){"use strict";var r=e(5),a=e(9),i=e(11),o=e(68),s=e(73),l=e(133),c=e(144),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},d={updatePropertyByID:function(e,t,n){var r=o.getNode(e);l(!u.hasOwnProperty(t)),null!=n?i.setValueForProperty(r,t,n):i.deleteValueForProperty(r,t)},deletePropertyByID:function(e,t,n){var r=o.getNode(e);l(!u.hasOwnProperty(t)),i.deleteValueForProperty(r,t,n)},updateStylesByID:function(e,t){var n=o.getNode(e);r.setValueForStyles(n,t)},updateInnerHTMLByID:function(e,t){var n=o.getNode(e);c(n,t)},updateTextContentByID:function(e,t){var n=o.getNode(e);a.updateTextContent(n,t)},dangerouslyReplaceNodeWithMarkupByID:function(e,t){var n=o.getNode(e);a.dangerouslyReplaceNodeWithMarkup(n,t)},dangerouslyProcessChildrenUpdates:function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);a.processUpdates(e,t)}};s.measureMethods(d,"ReactDOMIDOperations",{updatePropertyByID:"updatePropertyByID",deletePropertyByID:"deletePropertyByID",updateStylesByID:"updateStylesByID",updateInnerHTMLByID:"updateInnerHTMLByID",updateTextContentByID:"updateTextContentByID",dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),t.exports=d},{11:11,133:133,144:144,5:5,68:68,73:73,9:9}],45:[function(e,t,n){"use strict";var r=e(15),a=e(25),i=e(29),o=e(33),s=e(55),l=s.createFactory("iframe"),c=o.createClass({displayName:"ReactDOMIframe",tagName:"IFRAME",mixins:[i,a],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load")}});t.exports=c},{15:15,25:25,29:29,33:33,55:55}],46:[function(e,t,n){"use strict";var r=e(15),a=e(25),i=e(29),o=e(33),s=e(55),l=s.createFactory("img"),c=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[i,a],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(r.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(r.topLevelTypes.topError,"error")}});t.exports=c},{15:15,25:25,29:29,33:33,55:55}],47:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var a=e(2),i=e(11),o=e(24),s=e(29),l=e(33),c=e(55),u=e(68),d=e(85),p=e(27),f=e(133),m=c.createFactory("input"),h={},g=l.createClass({displayName:"ReactDOMInput",tagName:"INPUT",mixins:[a,o.Mixin,s],getInitialState:function(){var e=this.props.defaultValue;return{initialChecked:this.props.defaultChecked||!1,initialValue:null!=e?e:null}},render:function(){var e=p({},this.props);e.defaultChecked=null,e.defaultValue=null;var t=o.getValue(this);e.value=null!=t?t:this.state.initialValue;var n=o.getChecked(this);return e.checked=null!=n?n:this.state.initialChecked,e.onChange=this._handleChange,m(e,this.props.children)},componentDidMount:function(){var e=u.getID(this.getDOMNode());h[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=u.getID(e);delete h[t]},componentDidUpdate:function(e,t,n){var r=this.getDOMNode();null!=this.props.checked&&i.setValueForProperty(r,"checked",this.props.checked||!1);var a=o.getValue(this);null!=a&&i.setValueForProperty(r,"value",""+a)},_handleChange:function(e){var t,n=o.getOnChange(this);n&&(t=n.call(this,e)),d.asap(r,this);var a=this.props.name;if("radio"===this.props.type&&null!=a){for(var i=this.getDOMNode(),s=i;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),c=0,p=l.length;p>c;c++){var m=l[c];if(m!==i&&m.form===i.form){var g=u.getID(m);f(g);var v=h[g];f(v),d.asap(r,v)}}}return t}});t.exports=g},{11:11,133:133,2:2,24:24,27:27,29:29,33:33,55:55,68:68,85:85}],48:[function(e,t,n){"use strict";var r=e(29),a=e(33),i=e(55),o=(e(150),i.createFactory("option")),s=a.createClass({displayName:"ReactDOMOption",tagName:"OPTION",mixins:[r],componentWillMount:function(){},render:function(){return o(this.props,this.props.children)}});t.exports=s},{150:150,29:29,33:33,55:55}],49:[function(e,t,n){"use strict";function r(){if(this._pendingUpdate){this._pendingUpdate=!1;var e=s.getValue(this);null!=e&&this.isMounted()&&i(this,e)}}function a(e,t,n){if(null==e[t])return null;if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function i(e,t){var n,r,a,i=e.getDOMNode().options;if(e.props.multiple){for(n={},r=0,a=t.length;a>r;r++)n[""+t[r]]=!0;for(r=0,a=i.length;a>r;r++){var o=n.hasOwnProperty(i[r].value);i[r].selected!==o&&(i[r].selected=o)}}else{for(n=""+t,r=0,a=i.length;a>r;r++)if(i[r].value===n)return void(i[r].selected=!0);i.length&&(i[0].selected=!0)}}var o=e(2),s=e(24),l=e(29),c=e(33),u=e(55),d=e(85),p=e(27),f=u.createFactory("select"),m=c.createClass({displayName:"ReactDOMSelect",tagName:"SELECT",mixins:[o,s.Mixin,l],propTypes:{defaultValue:a,value:a},render:function(){var e=p({},this.props);return e.onChange=this._handleChange,e.value=null,f(e,this.props.children)},componentWillMount:function(){this._pendingUpdate=!1},componentDidMount:function(){var e=s.getValue(this);null!=e?i(this,e):null!=this.props.defaultValue&&i(this,this.props.defaultValue)},componentDidUpdate:function(e){var t=s.getValue(this);null!=t?(this._pendingUpdate=!1,i(this,t)):!e.multiple!=!this.props.multiple&&(null!=this.props.defaultValue?i(this,this.props.defaultValue):i(this,this.props.multiple?[]:""))},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(t=n.call(this,e)),this._pendingUpdate=!0,d.asap(r,this),t}});t.exports=m},{2:2,24:24,27:27,29:29,33:33,55:55,85:85}],50:[function(e,t,n){"use strict";function r(e,t,n,r){return e===n&&t===r}function a(e){var t=document.selection,n=t.createRange(),r=n.text.length,a=n.duplicate();a.moveToElementText(e),a.setEndPoint("EndToStart",n);var i=a.text.length,o=i+r;return{start:i,end:o}}function i(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,a=t.anchorOffset,i=t.focusNode,o=t.focusOffset,s=t.getRangeAt(0),l=r(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=l?0:s.toString().length,u=s.cloneRange();u.selectNodeContents(e),u.setEnd(s.startContainer,s.startOffset);var d=r(u.startContainer,u.startOffset,u.endContainer,u.endOffset),p=d?0:u.toString().length,f=p+c,m=document.createRange();m.setStart(n,a),m.setEnd(i,o);var h=m.collapsed;return{start:h?f:p,end:h?p:f}}function o(e,t){var n,r,a=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,r=n):t.start>t.end?(n=t.end,r=t.start):(n=t.start,r=t.end),a.moveToElementText(e),a.moveStart("character",n),a.setEndPoint("EndToStart",a),a.moveEnd("character",r-n),a.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),r=e[u()].length,a=Math.min(t.start,r),i="undefined"==typeof t.end?a:Math.min(t.end,r);if(!n.extend&&a>i){var o=i;i=a,a=o}var s=c(e,a),l=c(e,i);if(s&&l){var d=document.createRange();d.setStart(s.node,s.offset),n.removeAllRanges(),a>i?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=e(21),c=e(126),u=e(128),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:d?a:i,setOffsets:d?o:s};t.exports=p},{126:126,128:128,21:21}],51:[function(e,t,n){"use strict";var r=e(11),a=e(35),i=e(42),o=e(27),s=e(114),l=function(e){};o(l.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){this._rootNodeID=e;var a=s(this._stringText);return t.renderToStaticMarkup?a:"<span "+r.createMarkupForID(e)+">"+a+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;n!==this._stringText&&(this._stringText=n,i.BackendIDOperations.updateTextContentByID(this._rootNodeID,n))}},unmountComponent:function(){a.unmountIDFromEnvironment(this._rootNodeID)}}),t.exports=l},{11:11,114:114,27:27,35:35,42:42}],52:[function(e,t,n){"use strict";function r(){this.isMounted()&&this.forceUpdate()}var a=e(2),i=e(11),o=e(24),s=e(29),l=e(33),c=e(55),u=e(85),d=e(27),p=e(133),f=(e(150),c.createFactory("textarea")),m=l.createClass({displayName:"ReactDOMTextarea",tagName:"TEXTAREA",mixins:[a,o.Mixin,s],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;null!=t&&(p(null==e),Array.isArray(t)&&(p(t.length<=1),t=t[0]),e=""+t),null==e&&(e="");var n=o.getValue(this);return{initialValue:""+(null!=n?n:e)}},render:function(){var e=d({},this.props);return p(null==e.dangerouslySetInnerHTML),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,f(e,this.state.initialValue)},componentDidUpdate:function(e,t,n){var r=o.getValue(this);if(null!=r){var a=this.getDOMNode();i.setValueForProperty(a,"value",""+r)}},_handleChange:function(e){var t,n=o.getOnChange(this);return n&&(t=n.call(this,e)),u.asap(r,this),t}});t.exports=m},{11:11,133:133,150:150,2:2,24:24,27:27,29:29,33:33,55:55,85:85}],53:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction()}var a=e(85),i=e(101),o=e(27),s=e(112),l={initialize:s,close:function(){p.isBatchingUpdates=!1}},c={initialize:s,close:a.flushBatchedUpdates.bind(a)},u=[c,l];o(r.prototype,i.Mixin,{getTransactionWrappers:function(){return u}});var d=new r,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,r,a){var i=p.isBatchingUpdates;p.isBatchingUpdates=!0,i?e(t,n,r,a):d.perform(e,null,t,n,r,a)}};t.exports=p},{101:101,112:112,27:27,85:85}],54:[function(e,t,n){"use strict";function r(e){return m.createClass({tagName:e.toUpperCase(),render:function(){return new T(e,null,null,null,null,this.props)}})}function a(){N.EventEmitter.injectReactEventListener(k),N.EventPluginHub.injectEventPluginOrder(l),N.EventPluginHub.injectInstanceHandle(D),N.EventPluginHub.injectMount(A),N.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:F,EnterLeaveEventPlugin:c,ChangeEventPlugin:o,MobileSafariClickEventPlugin:p,SelectEventPlugin:M,BeforeInputEventPlugin:i}),N.NativeComponent.injectGenericComponentClass(v),N.NativeComponent.injectTextComponentClass(x),N.NativeComponent.injectAutoWrapper(r),N.Class.injectMixin(f),N.NativeComponent.injectComponentClasses({button:y,form:b,iframe:w,img:_,input:E,option:S,select:I,textarea:L,html:j("html"),head:j("head"),body:j("body")}),N.DOMProperty.injectDOMPropertyConfig(d),N.DOMProperty.injectDOMPropertyConfig(R),N.EmptyComponent.injectEmptyComponent("noscript"),N.Updates.injectReconcileTransaction(O),N.Updates.injectBatchingStrategy(g),N.RootIndex.injectCreateReactRootIndex(u.canUseDOM?s.createReactRootIndex:P.createReactRootIndex),N.Component.injectEnvironment(h),N.DOMComponent.injectIDOperations(C)}var i=e(3),o=e(7),s=e(8),l=e(13),c=e(14),u=e(21),d=e(23),p=e(26),f=e(29),m=e(33),h=e(35),g=e(53),v=e(42),y=e(41),b=e(43),_=e(46),C=e(44),w=e(45),E=e(47),S=e(48),I=e(49),L=e(52),x=e(51),T=e(55),k=e(60),N=e(62),D=e(64),A=e(68),O=e(78),M=e(87),P=e(88),F=e(89),R=e(86),j=e(109);t.exports={inject:a}},{109:109,13:13,14:14,21:21,23:23,26:26,29:29,3:3,33:33,35:35,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,51:51,52:52,53:53,55:55,60:60,62:62,64:64,68:68,7:7,78:78,8:8,86:86,87:87,88:88,89:89}],55:[function(e,t,n){"use strict";var r=e(38),a=e(39),i=e(27),o=(e(150),{key:!0,ref:!0}),s=function(e,t,n,r,a,i){this.type=e,this.key=t,this.ref=n,this._owner=r,this._context=a,this.props=i};s.prototype={_isReactElement:!0},s.createElement=function(e,t,n){var i,l={},c=null,u=null;if(null!=t){u=void 0===t.ref?null:t.ref,c=void 0===t.key?null:""+t.key;for(i in t)t.hasOwnProperty(i)&&!o.hasOwnProperty(i)&&(l[i]=t[i])}var d=arguments.length-2;if(1===d)l.children=n;else if(d>1){for(var p=Array(d),f=0;d>f;f++)p[f]=arguments[f+2];l.children=p}if(e&&e.defaultProps){var m=e.defaultProps;for(i in m)"undefined"==typeof l[i]&&(l[i]=m[i])}return new s(e,c,u,a.current,r.current,l)},s.createFactory=function(e){var t=s.createElement.bind(null,e);return t.type=e,t},s.cloneAndReplaceProps=function(e,t){var n=new s(e.type,e.key,e.ref,e._owner,e._context,t);return n},s.cloneElement=function(e,t,n){var r,l=i({},e.props),c=e.key,u=e.ref,d=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,d=a.current),void 0!==t.key&&(c=""+t.key);for(r in t)t.hasOwnProperty(r)&&!o.hasOwnProperty(r)&&(l[r]=t[r])}var p=arguments.length-2;if(1===p)l.children=n;else if(p>1){for(var f=Array(p),m=0;p>m;m++)f[m]=arguments[m+2];l.children=f}return new s(e.type,c,u,d,e._context,l)},s.isValidElement=function(e){var t=!(!e||!e._isReactElement);return t},t.exports=s},{150:150,27:27,38:38,39:39}],56:[function(e,t,n){"use strict";function r(){if(y.current){var e=y.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function a(e){var t=e&&e.getPublicInstance();if(t){var n=t.constructor;return n?n.displayName||n.name||void 0:void 0}}function i(){var e=y.current;return e&&a(e)||void 0}function o(e,t){e._store.validated||null!=e.key||(e._store.validated=!0,l('Each child in an array or iterator should have a unique "key" prop.',e,t))}function s(e,t,n){S.test(e)&&l("Child objects should have non-numeric keys so ordering is preserved.",t,n)}function l(e,t,n){var r=i(),o="string"==typeof n?n:n.displayName||n.name,s=r||o,l=w[e]||(w[e]={});if(!l.hasOwnProperty(s)){l[s]=!0;var c="";if(t&&t._owner&&t._owner!==y.current){var u=a(t._owner);c=" It was passed a child from "+u+"."}}}function c(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];h.isValidElement(r)&&o(r,t)}else if(h.isValidElement(e))e._store.validated=!0;else if(e){var a=_(e);if(a){if(a!==e.entries)for(var i,l=a.call(e);!(i=l.next()).done;)h.isValidElement(i.value)&&o(i.value,t)}else if("object"==typeof e){var c=g.extractIfFragment(e);for(var u in c)c.hasOwnProperty(u)&&s(u,c[u],t)}}}function u(e,t,n,a){for(var i in t)if(t.hasOwnProperty(i)){var o;try{C("function"==typeof t[i]),o=t[i](n,i,e,a)}catch(e){o=e}o instanceof Error&&!(o.message in E)&&(E[o.message]=!0,r(this))}}function d(e,t){var n=t.type,r="string"==typeof n?n:n.displayName,a=t._owner?t._owner.getPublicInstance().constructor.displayName:null,i=e+"|"+r+"|"+a;if(!I.hasOwnProperty(i)){I[i]=!0;var o="";r&&(o=" <"+r+" />");var s="";a&&(s=" The element was created by "+a+".")}}function p(e,t){return e!==e?t!==t:0===e&&0===t?1/e===1/t:e===t}function f(e){if(e._store){var t=e._store.originalProps,n=e.props;for(var r in n)n.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&p(t[r],n[r])||(d(r,e),t[r]=n[r]))}}function m(e){if(null!=e.type){var t=b.getComponentClassForElement(e),n=t.displayName||t.name;t.propTypes&&u(n,t.propTypes,e.props,v.prop),"function"==typeof t.getDefaultProps}}var h=e(55),g=e(61),v=e(75),y=(e(74),e(39)),b=e(71),_=e(124),C=e(133),w=(e(150),{}),E={},S=/^\d+$/,I={},L={checkAndWarnForMutatedProps:f,createElement:function(e,t,n){var r=h.createElement.apply(this,arguments);if(null==r)return r;for(var a=2;a<arguments.length;a++)c(arguments[a],e);return m(r),r},createFactory:function(e){var t=L.createElement.bind(null,e);return t.type=e,t},cloneElement:function(e,t,n){for(var r=h.cloneElement.apply(this,arguments),a=2;a<arguments.length;a++)c(arguments[a],r.type);return m(r),r}};t.exports=L},{124:124,133:133,150:150,39:39,55:55,61:61,71:71,74:74,75:75}],57:[function(e,t,n){"use strict";function r(e){u[e]=!0}function a(e){delete u[e]}function i(e){return!!u[e]}var o,s=e(55),l=e(65),c=e(133),u={},d={injectEmptyComponent:function(e){o=s.createFactory(e)}},p=function(){};p.prototype.componentDidMount=function(){var e=l.get(this);e&&r(e._rootNodeID)},p.prototype.componentWillUnmount=function(){var e=l.get(this);e&&a(e._rootNodeID)},p.prototype.render=function(){return c(o),o()};var f=s.createElement(p),m={emptyElement:f,injection:d,isNullComponentID:i};t.exports=m},{133:133,55:55,65:65}],58:[function(e,t,n){"use strict";var r={guard:function(e,t){return e}};t.exports=r},{}],59:[function(e,t,n){"use strict";function r(e){a.enqueueEvents(e),a.processEventQueue()}var a=e(17),i={handleTopLevel:function(e,t,n,i){var o=a.extractEvents(e,t,n,i);r(o)}};t.exports=i},{17:17}],60:[function(e,t,n){"use strict";function r(e){var t=d.getID(e),n=u.getReactRootIDFromNodeID(t),r=d.findReactContainerForID(n),a=d.getFirstReactDOM(r);return a}function a(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function i(e){for(var t=d.getFirstReactDOM(m(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=r(n);for(var a=0,i=e.ancestors.length;i>a;a++){t=e.ancestors[a];var o=d.getID(t)||"";g._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function o(e){var t=h(window);e(t)}var s=e(16),l=e(21),c=e(28),u=e(64),d=e(68),p=e(85),f=e(27),m=e(123),h=e(129);f(a.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(a,c.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){g._handleTopLevel=e},setEnabled:function(e){g._enabled=!!e},isEnabled:function(){return g._enabled},trapBubbledEvent:function(e,t,n){var r=n;return r?s.listen(r,t,g.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var r=n;return r?s.capture(r,t,g.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=o.bind(null,e);s.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(g._enabled){var n=a.getPooled(e,t);try{p.batchedUpdates(i,n)}finally{a.release(n)}}}};t.exports=g},{123:123,129:129,16:16,21:21,27:27,28:28,64:64,68:68,85:85}],61:[function(e,t,n){"use strict";var r=(e(55),e(150),{create:function(e){return e},extract:function(e){return e},extractIfFragment:function(e){return e}});t.exports=r},{150:150,55:55}],62:[function(e,t,n){"use strict";var r=e(10),a=e(17),i=e(36),o=e(33),s=e(57),l=e(30),c=e(71),u=e(42),d=e(73),p=e(81),f=e(85),m={Component:i.injection,Class:o.injection,DOMComponent:u.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:a.injection,EventEmitter:l.injection,NativeComponent:c.injection,Perf:d.injection,RootIndex:p.injection,Updates:f.injection};t.exports=m},{10:10,17:17,30:30,33:33,36:36,42:42,57:57,71:71,73:73,81:81,85:85}],63:[function(e,t,n){"use strict";function r(e){return i(document.documentElement,e)}var a=e(50),i=e(107),o=e(117),s=e(119),l={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable);
},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,a=e.selectionRange;t!==n&&r(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,a),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=a.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,r=t.end;if("undefined"==typeof r&&(r=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(r,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var i=e.createTextRange();i.collapse(!0),i.moveStart("character",n),i.moveEnd("character",r-n),i.select()}else a.setOffsets(e,t)}};t.exports=l},{107:107,117:117,119:119,50:50}],64:[function(e,t,n){"use strict";function r(e){return f+e.toString(36)}function a(e,t){return e.charAt(t)===f||t===e.length}function i(e){return""===e||e.charAt(0)===f&&e.charAt(e.length-1)!==f}function o(e,t){return 0===t.indexOf(e)&&a(t,e.length)}function s(e){return e?e.substr(0,e.lastIndexOf(f)):""}function l(e,t){if(p(i(e)&&i(t)),p(o(e,t)),e===t)return e;var n,r=e.length+m;for(n=r;n<t.length&&!a(t,n);n++);return t.substr(0,n)}function c(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var r=0,o=0;n>=o;o++)if(a(e,o)&&a(t,o))r=o;else if(e.charAt(o)!==t.charAt(o))break;var s=e.substr(0,r);return p(i(s)),s}function u(e,t,n,r,a,i){e=e||"",t=t||"",p(e!==t);var c=o(t,e);p(c||o(e,t));for(var u=0,d=c?s:l,f=e;;f=d(f,t)){var m;if(a&&f===e||i&&f===t||(m=n(f,c,r)),m===!1||f===t)break;p(u++<h)}}var d=e(81),p=e(133),f=".",m=f.length,h=100,g={createReactRootID:function(){return r(d.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===f&&e.length>1){var t=e.indexOf(f,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,r,a){var i=c(e,t);i!==e&&u(e,i,n,r,!1,!0),i!==t&&u(i,t,n,a,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(u("",e,t,n,!0,!1),u(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){u("",e,t,n,!0,!1)},_getFirstCommonAncestorID:c,_getNextDescendantID:l,isAncestorIDOf:o,SEPARATOR:f};t.exports=g},{133:133,81:81}],65:[function(e,t,n){"use strict";var r={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=r},{}],66:[function(e,t,n){"use strict";var r={currentlyMountingInstance:null,currentlyUnmountingInstance:null};t.exports=r},{}],67:[function(e,t,n){"use strict";var r=e(104),a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=r(e);return e.replace(">"," "+a.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var i=r(e);return i===n}};t.exports=a},{104:104}],68:[function(e,t,n){"use strict";function r(e,t){for(var n=Math.min(e.length,t.length),r=0;n>r;r++)if(e.charAt(r)!==t.charAt(r))return r;return e.length===t.length?-1:n}function a(e){var t=k(e);return t&&W.getID(t)}function i(e){var t=o(e);if(t)if(F.hasOwnProperty(t)){var n=F[t];n!==e&&(D(!u(n,t)),F[t]=e)}else F[t]=e;return t}function o(e){return e&&e.getAttribute&&e.getAttribute(P)||""}function s(e,t){var n=o(e);n!==t&&delete F[n],e.setAttribute(P,t),F[t]=e}function l(e){return F.hasOwnProperty(e)&&u(F[e],e)||(F[e]=W.findReactNodeByID(e)),F[e]}function c(e){var t=C.get(e)._rootNodeID;return b.isNullComponentID(t)?null:(F.hasOwnProperty(t)&&u(F[t],t)||(F[t]=W.findReactNodeByID(t)),F[t])}function u(e,t){if(e){D(o(e)===t);var n=W.findReactContainerForID(t);if(n&&T(n,e))return!0}return!1}function d(e){delete F[e]}function p(e){var t=F[e];return!(!t||!u(t,e))&&void(V=t)}function f(e){V=null,_.traverseAncestors(e,p);var t=V;return V=null,t}function m(e,t,n,r,a){var i=S.mountComponent(e,t,r,x);e._isTopLevel=!0,W._mountImageIntoNode(i,n,a)}function h(e,t,n,r){var a=L.ReactReconcileTransaction.getPooled();a.perform(m,null,e,t,n,a,r),L.ReactReconcileTransaction.release(a)}var g=e(10),v=e(30),y=(e(39),e(55)),b=(e(56),e(57)),_=e(64),C=e(65),w=e(67),E=e(73),S=e(79),I=e(84),L=e(85),x=e(113),T=e(107),k=e(127),N=e(132),D=e(133),A=e(144),O=e(147),M=(e(150),_.SEPARATOR),P=g.ID_ATTRIBUTE_NAME,F={},R=1,j=9,B={},U={},z=[],V=null,W={_instancesByReactRootID:B,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){return W.scrollMonitor(n,function(){I.enqueueElementInternal(e,t),r&&I.enqueueCallbackInternal(e,r)}),e},_registerComponent:function(e,t){D(t&&(t.nodeType===R||t.nodeType===j)),v.ensureScrollValueMonitoring();var n=W.registerContainer(t);return B[n]=e,n},_renderNewRootComponent:function(e,t,n){var r=N(e,null),a=W._registerComponent(r,t);return L.batchedUpdates(h,r,a,t,n),r},render:function(e,t,n){D(y.isValidElement(e));var r=B[a(t)];if(r){var i=r._currentElement;if(O(i,e))return W._updateRootComponent(r,e,t,n).getPublicInstance();W.unmountComponentAtNode(t)}var o=k(t),s=o&&W.isRenderedByReact(o),l=s&&!r,c=W._renderNewRootComponent(e,t,l).getPublicInstance();return n&&n.call(c),c},constructAndRenderComponent:function(e,t,n){var r=y.createElement(e,t);return W.render(r,n)},constructAndRenderComponentByID:function(e,t,n){var r=document.getElementById(n);return D(r),W.constructAndRenderComponent(e,t,r)},registerContainer:function(e){var t=a(e);return t&&(t=_.getReactRootIDFromNodeID(t)),t||(t=_.createReactRootID()),U[t]=e,t},unmountComponentAtNode:function(e){D(e&&(e.nodeType===R||e.nodeType===j));var t=a(e),n=B[t];return!!n&&(W.unmountComponentFromNode(n,e),delete B[t],delete U[t],!0)},unmountComponentFromNode:function(e,t){for(S.unmountComponent(e),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=_.getReactRootIDFromNodeID(e),n=U[t];return n},findReactNodeByID:function(e){var t=W.findReactContainerForID(e);return W.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=W.getID(e);return!!t&&t.charAt(0)===M},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(W.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=z,r=0,a=f(t)||e;for(n[0]=a.firstChild,n.length=1;r<n.length;){for(var i,o=n[r++];o;){var s=W.getID(o);s?t===s?i=o:_.isAncestorIDOf(s,t)&&(n.length=r=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(i)return n.length=0,i}n.length=0,D(!1)},_mountImageIntoNode:function(e,t,n){if(D(t&&(t.nodeType===R||t.nodeType===j)),n){var a=k(t);if(w.canReuseMarkup(e,a))return;var i=a.getAttribute(w.CHECKSUM_ATTR_NAME);a.removeAttribute(w.CHECKSUM_ATTR_NAME);var o=a.outerHTML;a.setAttribute(w.CHECKSUM_ATTR_NAME,i);var s=r(e,o);" (client) "+e.substring(s-20,s+20)+"\n (server) "+o.substring(s-20,s+20),D(t.nodeType!==j)}D(t.nodeType!==j),A(t,e)},getReactRootID:a,getID:i,setID:s,getNode:l,getNodeFromInstance:c,purgeID:d};E.measureMethods(W,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),t.exports=W},{10:10,107:107,113:113,127:127,132:132,133:133,144:144,147:147,150:150,30:30,39:39,55:55,56:56,57:57,64:64,65:65,67:67,73:73,79:79,84:84,85:85}],69:[function(e,t,n){"use strict";function r(e,t,n){m.push({parentID:e,parentNode:null,type:u.INSERT_MARKUP,markupIndex:h.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function a(e,t,n){m.push({parentID:e,parentNode:null,type:u.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function i(e,t){m.push({parentID:e,parentNode:null,type:u.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){m.push({parentID:e,parentNode:null,type:u.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function s(){m.length&&(c.processChildrenUpdates(m,h),l())}function l(){m.length=0,h.length=0}var c=e(36),u=e(70),d=e(79),p=e(31),f=0,m=[],h=[],g={Mixin:{mountChildren:function(e,t,n){var r=p.instantiateChildren(e,t,n);this._renderedChildren=r;var a=[],i=0;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o],l=this._rootNodeID+o,c=d.mountComponent(s,l,t,n);s._mountIndex=i,a.push(c),i++}return a},updateTextContent:function(e){f++;var t=!0;try{var n=this._renderedChildren;p.unmountChildren(n);for(var r in n)n.hasOwnProperty(r)&&this._unmountChildByName(n[r],r);this.setTextContent(e),t=!1}finally{f--,f||(t?l():s())}},updateChildren:function(e,t,n){f++;var r=!0;try{this._updateChildren(e,t,n),r=!1}finally{f--,f||(r?l():s())}},_updateChildren:function(e,t,n){var r=this._renderedChildren,a=p.updateChildren(r,e,t,n);if(this._renderedChildren=a,a||r){var i,o=0,s=0;for(i in a)if(a.hasOwnProperty(i)){var l=r&&r[i],c=a[i];l===c?(this.moveChild(l,s,o),o=Math.max(l._mountIndex,o),l._mountIndex=s):(l&&(o=Math.max(l._mountIndex,o),this._unmountChildByName(l,i)),this._mountChildByNameAtIndex(c,i,s,t,n)),s++}for(i in r)!r.hasOwnProperty(i)||a&&a.hasOwnProperty(i)||this._unmountChildByName(r[i],i)}},unmountChildren:function(){var e=this._renderedChildren;p.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&a(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){r(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){i(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,r,a){var i=this._rootNodeID+t,o=d.mountComponent(e,i,r,a);e._mountIndex=n,this.createChild(e,o)},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null}}};t.exports=g},{31:31,36:36,70:70,79:79}],70:[function(e,t,n){"use strict";var r=e(138),a=r({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});t.exports=a},{138:138}],71:[function(e,t,n){"use strict";function r(e){if("function"==typeof e.type)return e.type;var t=e.type,n=d[t];return null==n&&(d[t]=n=c(t)),n}function a(e){return l(u),new u(e.type,e.props)}function i(e){return new p(e)}function o(e){return e instanceof p}var s=e(27),l=e(133),c=null,u=null,d={},p=null,f={injectGenericComponentClass:function(e){u=e},injectTextComponentClass:function(e){p=e},injectComponentClasses:function(e){s(d,e)},injectAutoWrapper:function(e){c=e}},m={getComponentClassForElement:r,createInternalComponent:a,createInstanceForText:i,isTextComponent:o,injection:f};t.exports=m},{133:133,27:27}],72:[function(e,t,n){"use strict";var r=e(133),a={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r(a.isValidOwner(n)),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(a.isValidOwner(n)),n.getPublicInstance().refs[t]===e.getPublicInstance()&&n.detachRef(t)}};t.exports=a},{133:133}],73:[function(e,t,n){"use strict";function r(e,t,n){return n}var a={enableMeasure:!1,storedMeasure:r,measureMethods:function(e,t,n){},measure:function(e,t,n){return n},injection:{injectMeasure:function(e){a.storedMeasure=e}}};t.exports=a},{}],74:[function(e,t,n){"use strict";var r={};t.exports=r},{}],75:[function(e,t,n){"use strict";var r=e(138),a=r({prop:null,context:null,childContext:null});t.exports=a},{138:138}],76:[function(e,t,n){"use strict";function r(e){function t(t,n,r,a,i){if(a=a||C,null==n[r]){var o=b[i];return t?new Error("Required "+o+" `"+r+"` was not specified in "+("`"+a+"`.")):null}return e(n,r,a,i)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,n,r,a){var i=t[n],o=h(i);if(o!==e){var s=b[a],l=g(i);return new Error("Invalid "+s+" `"+n+"` of type `"+l+"` "+("supplied to `"+r+"`, expected `"+e+"`."))}return null}return r(t)}function i(){return r(_.thatReturns(null))}function o(e){function t(t,n,r,a){var i=t[n];if(!Array.isArray(i)){var o=b[a],s=h(i);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+s+"` supplied to `"+r+"`, expected an array."))}for(var l=0;l<i.length;l++){var c=e(i,l,r,a);if(c instanceof Error)return c}return null}return r(t)}function s(){function e(e,t,n,r){if(!v.isValidElement(e[t])){var a=b[r];return new Error("Invalid "+a+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactElement."))}return null}return r(e)}function l(e){function t(t,n,r,a){if(!(t[n]instanceof e)){var i=b[a],o=e.name||C;return new Error("Invalid "+i+" `"+n+"` supplied to "+("`"+r+"`, expected instance of `"+o+"`."))}return null}return r(t)}function c(e){function t(t,n,r,a){for(var i=t[n],o=0;o<e.length;o++)if(i===e[o])return null;var s=b[a],l=JSON.stringify(e);return new Error("Invalid "+s+" `"+n+"` of value `"+i+"` "+("supplied to `"+r+"`, expected one of "+l+"."))}return r(t)}function u(e){function t(t,n,r,a){var i=t[n],o=h(i);if("object"!==o){var s=b[a];return new Error("Invalid "+s+" `"+n+"` of type "+("`"+o+"` supplied to `"+r+"`, expected an object."))}for(var l in i)if(i.hasOwnProperty(l)){var c=e(i,l,r,a);if(c instanceof Error)return c}return null}return r(t)}function d(e){function t(t,n,r,a){for(var i=0;i<e.length;i++){var o=e[i];if(null==o(t,n,r,a))return null}var s=b[a];return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+r+"`."))}return r(t)}function p(){function e(e,t,n,r){if(!m(e[t])){var a=b[r];return new Error("Invalid "+a+" `"+t+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return r(e)}function f(e){function t(t,n,r,a){var i=t[n],o=h(i);if("object"!==o){var s=b[a];return new Error("Invalid "+s+" `"+n+"` of type `"+o+"` "+("supplied to `"+r+"`, expected `object`."))}for(var l in e){var c=e[l];if(c){var u=c(i,l,r,a);if(u)return u}}return null}return r(t)}function m(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(m);if(null===e||v.isValidElement(e))return!0;e=y.extractIfFragment(e);for(var t in e)if(!m(e[t]))return!1;return!0;default:return!1}}function h(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=h(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var v=e(55),y=e(61),b=e(74),_=e(112),C="<<anonymous>>",w=s(),E=p(),S={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),any:i(),arrayOf:o,element:w,instanceOf:l,node:E,objectOf:u,oneOf:c,oneOfType:d,shape:f};t.exports=S},{112:112,55:55,61:61,74:74}],77:[function(e,t,n){"use strict";function r(){this.listenersToPut=[]}var a=e(28),i=e(30),o=e(27);o(r.prototype,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];i.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),a.addPoolingTo(r),t.exports=r},{27:27,28:28,30:30}],78:[function(e,t,n){"use strict";function r(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=a.getPooled(null),this.putListenerQueue=l.getPooled()}var a=e(6),i=e(28),o=e(30),s=e(63),l=e(77),c=e(101),u=e(27),d={initialize:s.getSelectionInformation,close:s.restoreSelection},p={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},m={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},h=[m,d,p,f],g={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){a.release(this.reactMountReady),this.reactMountReady=null,l.release(this.putListenerQueue),this.putListenerQueue=null}};u(r.prototype,c.Mixin,g),i.addPoolingTo(r),t.exports=r},{101:101,27:27,28:28,30:30,6:6,63:63,77:77}],79:[function(e,t,n){"use strict";function r(){a.attachRefs(this,this._currentElement)}var a=e(80),i=(e(56),{mountComponent:function(e,t,n,a){var i=e.mountComponent(t,n,a);return n.getReactMountReady().enqueue(r,e),i},unmountComponent:function(e){a.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,i){var o=e._currentElement;if(t!==o||null==t._owner){var s=a.shouldUpdateRefs(o,t);s&&a.detachRefs(e,o),e.receiveComponent(t,n,i),s&&n.getReactMountReady().enqueue(r,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}});t.exports=i},{56:56,80:80}],80:[function(e,t,n){"use strict";function r(e,t,n){"function"==typeof e?e(t.getPublicInstance()):i.addComponentAsRefTo(t,e,n)}function a(e,t,n){"function"==typeof e?e(null):i.removeComponentAsRefFrom(t,e,n)}var i=e(72),o={};o.attachRefs=function(e,t){var n=t.ref;null!=n&&r(n,e,t._owner)},o.shouldUpdateRefs=function(e,t){return t._owner!==e._owner||t.ref!==e.ref},o.detachRefs=function(e,t){var n=t.ref;null!=n&&a(n,e,t._owner)},t.exports=o},{72:72}],81:[function(e,t,n){"use strict";var r={injectCreateReactRootIndex:function(e){a.createReactRootIndex=e}},a={createReactRootIndex:null,injection:r};t.exports=a},{}],82:[function(e,t,n){"use strict";function r(e){d(i.isValidElement(e));var t;try{var n=o.createReactRootID();return t=l.getPooled(!1),t.perform(function(){var r=u(e,null),a=r.mountComponent(n,t,c);return s.addChecksumToMarkup(a)},null)}finally{l.release(t)}}function a(e){d(i.isValidElement(e));var t;try{var n=o.createReactRootID();return t=l.getPooled(!0),t.perform(function(){var r=u(e,null);return r.mountComponent(n,t,c)},null)}finally{l.release(t)}}var i=e(55),o=e(64),s=e(67),l=e(83),c=e(113),u=e(132),d=e(133);t.exports={renderToString:r,renderToStaticMarkup:a}},{113:113,132:132,133:133,55:55,64:64,67:67,83:83}],83:[function(e,t,n){"use strict";function r(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=i.getPooled(null),this.putListenerQueue=o.getPooled()}var a=e(28),i=e(6),o=e(77),s=e(101),l=e(27),c=e(112),u={initialize:function(){this.reactMountReady.reset()},close:c},d={initialize:function(){this.putListenerQueue.reset()},close:c},p=[d,u],f={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){i.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};l(r.prototype,s.Mixin,f),a.addPoolingTo(r),t.exports=r},{101:101,112:112,27:27,28:28,6:6,77:77}],84:[function(e,t,n){"use strict";function r(e){e!==i.currentlyMountingInstance&&c.enqueueUpdate(e)}function a(e,t){d(null==o.current);var n=l.get(e);return n?n===i.currentlyUnmountingInstance?null:n:null}var i=e(66),o=e(39),s=e(55),l=e(65),c=e(85),u=e(27),d=e(133),p=(e(150),{enqueueCallback:function(e,t){d("function"==typeof t);var n=a(e);return n&&n!==i.currentlyMountingInstance?(n._pendingCallbacks?n._pendingCallbacks.push(t):n._pendingCallbacks=[t],void r(n)):null},enqueueCallbackInternal:function(e,t){d("function"==typeof t),e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],r(e)},enqueueForceUpdate:function(e){var t=a(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,r(t))},enqueueReplaceState:function(e,t){var n=a(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(e,t){var n=a(e,"setState");if(n){var i=n._pendingStateQueue||(n._pendingStateQueue=[]);i.push(t),r(n)}},enqueueSetProps:function(e,t){var n=a(e,"setProps");if(n){d(n._isTopLevel);var i=n._pendingElement||n._currentElement,o=u({},i.props,t);n._pendingElement=s.cloneAndReplaceProps(i,o),r(n)}},enqueueReplaceProps:function(e,t){var n=a(e,"replaceProps");if(n){d(n._isTopLevel);var i=n._pendingElement||n._currentElement;n._pendingElement=s.cloneAndReplaceProps(i,t),r(n)}},enqueueElementInternal:function(e,t){e._pendingElement=t,r(e)}});t.exports=p},{133:133,150:150,27:27,39:39,55:55,65:65,66:66,85:85}],85:[function(e,t,n){"use strict";function r(){g(L.ReactReconcileTransaction&&_)}function a(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=u.getPooled(),this.reconcileTransaction=L.ReactReconcileTransaction.getPooled()}function i(e,t,n,a,i){r(),_.batchedUpdates(e,t,n,a,i)}function o(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;g(t===v.length),v.sort(o);for(var n=0;t>n;n++){var r=v[n],a=r._pendingCallbacks;if(r._pendingCallbacks=null,f.performUpdateIfNecessary(r,e.reconcileTransaction),a)for(var i=0;i<a.length;i++)e.callbackQueue.enqueue(a[i],r.getPublicInstance())}}function l(e){return r(),_.isBatchingUpdates?void v.push(e):void _.batchedUpdates(l,e)}function c(e,t){g(_.isBatchingUpdates),y.enqueue(e,t),b=!0}var u=e(6),d=e(28),p=(e(39),e(73)),f=e(79),m=e(101),h=e(27),g=e(133),v=(e(150),[]),y=u.getPooled(),b=!1,_=null,C={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),S()):v.length=0}},w={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},E=[C,w];h(a.prototype,m.Mixin,{getTransactionWrappers:function(){return E},destructor:function(){this.dirtyComponentsLength=null,u.release(this.callbackQueue),this.callbackQueue=null,L.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return m.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),d.addPoolingTo(a);var S=function(){for(;v.length||b;){if(v.length){var e=a.getPooled();e.perform(s,null,e),a.release(e)}if(b){b=!1;var t=y;y=u.getPooled(),t.notifyAll(),u.release(t)}}};S=p.measure("ReactUpdates","flushBatchedUpdates",S);var I={injectReconcileTransaction:function(e){g(e),L.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){g(e),g("function"==typeof e.batchedUpdates),g("boolean"==typeof e.isBatchingUpdates),_=e}},L={ReactReconcileTransaction:null,batchedUpdates:i,enqueueUpdate:l,flushBatchedUpdates:S,injection:I,asap:c};t.exports=L},{101:101,133:133,150:150,27:27,28:28,39:39,6:6,73:73,79:79}],86:[function(e,t,n){"use strict";var r=e(10),a=r.injection.MUST_USE_ATTRIBUTE,i={Properties:{clipPath:a,cx:a,cy:a,d:a,dx:a,dy:a,fill:a,fillOpacity:a,fontFamily:a,fontSize:a,fx:a,fy:a,gradientTransform:a,gradientUnits:a,markerEnd:a,markerMid:a,markerStart:a,offset:a,opacity:a,patternContentUnits:a,patternUnits:a,points:a,preserveAspectRatio:a,r:a,rx:a,ry:a,spreadMethod:a,stopColor:a,stopOpacity:a,stroke:a,strokeDasharray:a,strokeLinecap:a,strokeOpacity:a,strokeWidth:a,textAnchor:a,transform:a,version:a,viewBox:a,x1:a,x2:a,x:a,y1:a,y2:a,y:a},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};t.exports=i},{10:10}],87:[function(e,t,n){"use strict";function r(e){if("selectionStart"in e&&s.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function a(e){if(y||null==h||h!==c())return null;var t=r(h);if(!v||!p(v,t)){v=t;var n=l.getPooled(m.select,g,e);return n.type="select",n.target=h,o.accumulateTwoPhaseDispatches(n),n}}var i=e(15),o=e(20),s=e(63),l=e(93),c=e(119),u=e(136),d=e(139),p=e(146),f=i.topLevelTypes,m={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[f.topBlur,f.topContextMenu,f.topFocus,f.topKeyDown,f.topMouseDown,f.topMouseUp,f.topSelectionChange]}},h=null,g=null,v=null,y=!1,b={eventTypes:m,extractEvents:function(e,t,n,r){switch(e){case f.topFocus:(u(t)||"true"===t.contentEditable)&&(h=t,g=n,v=null);break;case f.topBlur:h=null,g=null,v=null;break;case f.topMouseDown:y=!0;break;case f.topContextMenu:case f.topMouseUp:return y=!1,a(r);case f.topSelectionChange:case f.topKeyDown:case f.topKeyUp:return a(r)}}};t.exports=b},{119:119,136:136,139:139,146:146,15:15,20:20,63:63,93:93}],88:[function(e,t,n){"use strict";var r=Math.pow(2,53),a={createReactRootIndex:function(){return Math.ceil(Math.random()*r)}};t.exports=a},{}],89:[function(e,t,n){"use strict";var r=e(15),a=e(19),i=e(20),o=e(90),s=e(93),l=e(94),c=e(96),u=e(97),d=e(92),p=e(98),f=e(99),m=e(100),h=e(120),g=e(133),v=e(139),y=(e(150),r.topLevelTypes),b={blur:{phasedRegistrationNames:{bubbled:v({onBlur:!0}),captured:v({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:v({onClick:!0}),captured:v({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:v({onContextMenu:!0}),captured:v({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:v({onCopy:!0}),captured:v({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:v({onCut:!0}),captured:v({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:v({onDoubleClick:!0}),captured:v({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:v({onDrag:!0}),captured:v({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:v({onDragEnd:!0}),captured:v({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:v({onDragEnter:!0}),captured:v({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:v({onDragExit:!0}),captured:v({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:v({onDragLeave:!0}),captured:v({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:v({onDragOver:!0}),captured:v({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:v({onDragStart:!0}),captured:v({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:v({onDrop:!0}),captured:v({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:v({onFocus:!0}),captured:v({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:v({onInput:!0}),captured:v({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:v({onKeyDown:!0}),captured:v({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:v({onKeyPress:!0}),captured:v({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:v({onKeyUp:!0}),captured:v({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:v({onLoad:!0}),captured:v({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:v({onError:!0}),captured:v({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:v({onMouseDown:!0}),captured:v({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:v({onMouseMove:!0}),captured:v({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:v({onMouseOut:!0}),captured:v({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:v({onMouseOver:!0}),captured:v({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:v({onMouseUp:!0}),captured:v({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:v({onPaste:!0}),captured:v({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:v({onReset:!0}),captured:v({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:v({onScroll:!0}),captured:v({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:v({onSubmit:!0}),captured:v({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:v({onTouchCancel:!0}),captured:v({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:v({onTouchEnd:!0}),captured:v({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:v({onTouchMove:!0}),captured:v({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:v({onTouchStart:!0}),captured:v({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:v({onWheel:!0}),captured:v({onWheelCapture:!0})}}},_={topBlur:b.blur,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topReset:b.reset,topScroll:b.scroll,topSubmit:b.submit,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topWheel:b.wheel};for(var C in _)_[C].dependencies=[C];var w={eventTypes:b,executeDispatch:function(e,t,n){var r=a.executeDispatch(e,t,n);r===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,r){var a=_[e];if(!a)return null;var v;switch(e){case y.topInput:case y.topLoad:case y.topError:case y.topReset:case y.topSubmit:v=s;break;case y.topKeyPress:if(0===h(r))return null;case y.topKeyDown:case y.topKeyUp:v=c;break;case y.topBlur:case y.topFocus:v=l;break;case y.topClick:if(2===r.button)return null;case y.topContextMenu:case y.topDoubleClick:case y.topMouseDown:case y.topMouseMove:case y.topMouseOut:case y.topMouseOver:case y.topMouseUp:v=u;break;case y.topDrag:case y.topDragEnd:case y.topDragEnter:case y.topDragExit:case y.topDragLeave:case y.topDragOver:case y.topDragStart:case y.topDrop:v=d;break;case y.topTouchCancel:case y.topTouchEnd:case y.topTouchMove:case y.topTouchStart:v=p;break;case y.topScroll:v=f;break;case y.topWheel:v=m;break;case y.topCopy:case y.topCut:case y.topPaste:v=o}g(v);var b=v.getPooled(a,n,r);return i.accumulateTwoPhaseDispatches(b),b}};t.exports=w},{100:100,120:120,133:133,139:139,15:15,150:150,19:19,20:20,90:90,92:92,93:93,94:94,96:96,97:97,98:98,99:99}],90:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(93),i={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};a.augmentClass(r,i),t.exports=r},{93:93}],91:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(93),i={data:null};a.augmentClass(r,i),t.exports=r},{93:93}],92:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(97),i={dataTransfer:null};a.augmentClass(r,i),t.exports=r},{97:97}],93:[function(e,t,n){"use strict";function r(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var a in r)if(r.hasOwnProperty(a)){var i=r[a];i?this[a]=i(n):this[a]=n[a]}var s=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;s?this.isDefaultPrevented=o.thatReturnsTrue:this.isDefaultPrevented=o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse}var a=e(28),i=e(27),o=e(112),s=e(123),l={type:null,target:s,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};i(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,
this.isDefaultPrevented=o.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=o.thatReturnsTrue},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),r.Interface=l,r.augmentClass=function(e,t){var n=this,r=Object.create(n.prototype);i(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=i({},n.Interface,t),e.augmentClass=n.augmentClass,a.addPoolingTo(e,a.threeArgumentPooler)},a.addPoolingTo(r,a.threeArgumentPooler),t.exports=r},{112:112,123:123,27:27,28:28}],94:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(99),i={relatedTarget:null};a.augmentClass(r,i),t.exports=r},{99:99}],95:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(93),i={data:null};a.augmentClass(r,i),t.exports=r},{93:93}],96:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(99),i=e(120),o=e(121),s=e(122),l={key:o,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?i(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?i(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};a.augmentClass(r,l),t.exports=r},{120:120,121:121,122:122,99:99}],97:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(99),i=e(102),o=e(122),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+i.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+i.currentScrollTop}};a.augmentClass(r,s),t.exports=r},{102:102,122:122,99:99}],98:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(99),i=e(122),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:i};a.augmentClass(r,o),t.exports=r},{122:122,99:99}],99:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(93),i=e(123),o={view:function(e){if(e.view)return e.view;var t=i(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};a.augmentClass(r,o),t.exports=r},{123:123,93:93}],100:[function(e,t,n){"use strict";function r(e,t,n){a.call(this,e,t,n)}var a=e(97),i={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};a.augmentClass(r,i),t.exports=r},{97:97}],101:[function(e,t,n){"use strict";var r=e(133),a={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,a,i,o,s,l){r(!this.isInTransaction());var c,u;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),u=e.call(t,n,a,i,o,s,l),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r=t[n];try{this.wrapperInitData[n]=i.OBSERVED_ERROR,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===i.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){r(this.isInTransaction());for(var t=this.transactionWrappers,n=e;n<t.length;n++){var a,o=t[n],s=this.wrapperInitData[n];try{a=!0,s!==i.OBSERVED_ERROR&&o.close&&o.close.call(this,s),a=!1}finally{if(a)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}},i={Mixin:a,OBSERVED_ERROR:{}};t.exports=i},{133:133}],102:[function(e,t,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};t.exports=r},{}],103:[function(e,t,n){"use strict";function r(e,t){if(a(null!=t),null==e)return t;var n=Array.isArray(e),r=Array.isArray(t);return n&&r?(e.push.apply(e,t),e):n?(e.push(t),e):r?[e].concat(t):[e,t]}var a=e(133);t.exports=r},{133:133}],104:[function(e,t,n){"use strict";function r(e){for(var t=1,n=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%a,n=(n+t)%a;return t|n<<16}var a=65521;t.exports=r},{}],105:[function(e,t,n){function r(e){return e.replace(a,function(e,t){return t.toUpperCase()})}var a=/-(.)/g;t.exports=r},{}],106:[function(e,t,n){"use strict";function r(e){return a(e.replace(i,"ms-"))}var a=e(105),i=/^-ms-/;t.exports=r},{105:105}],107:[function(e,t,n){function r(e,t){return!(!e||!t)&&(e===t||!a(e)&&(a(t)?r(e,t.parentNode):e.contains?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var a=e(137);t.exports=r},{137:137}],108:[function(e,t,n){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function a(e){return r(e)?Array.isArray(e)?e.slice():i(e):[e]}var i=e(148);t.exports=a},{148:148}],109:[function(e,t,n){"use strict";function r(e){var t=i.createFactory(e),n=a.createClass({tagName:e.toUpperCase(),displayName:"ReactFullPageComponent"+e,componentWillUnmount:function(){o(!1)},render:function(){return t(this.props)}});return n}var a=e(33),i=e(55),o=e(133);t.exports=r},{133:133,33:33,55:55}],110:[function(e,t,n){function r(e){var t=e.match(u);return t&&t[1].toLowerCase()}function a(e,t){var n=c;l(!!c);var a=r(e),i=a&&s(a);if(i){n.innerHTML=i[1]+e+i[2];for(var u=i[0];u--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(l(t),o(d).forEach(t));for(var p=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var i=e(21),o=e(108),s=e(125),l=e(133),c=i.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;t.exports=a},{108:108,125:125,133:133,21:21}],111:[function(e,t,n){"use strict";function r(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var r=isNaN(t);return r||0===t||i.hasOwnProperty(e)&&i[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var a=e(4),i=a.isUnitlessNumber;t.exports=r},{4:4}],112:[function(e,t,n){function r(e){return function(){return e}}function a(){}a.thatReturns=r,a.thatReturnsFalse=r(!1),a.thatReturnsTrue=r(!0),a.thatReturnsNull=r(null),a.thatReturnsThis=function(){return this},a.thatReturnsArgument=function(e){return e},t.exports=a},{}],113:[function(e,t,n){"use strict";var r={};t.exports=r},{}],114:[function(e,t,n){"use strict";function r(e){return i[e]}function a(e){return(""+e).replace(o,r)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},o=/[&><"']/g;t.exports=a},{}],115:[function(e,t,n){"use strict";function r(e){return null==e?null:s(e)?e:a.has(e)?i.getNodeFromInstance(e):(o(null==e.render||"function"!=typeof e.render),void o(!1))}var a=(e(39),e(65)),i=e(68),o=e(133),s=e(135);e(150),t.exports=r},{133:133,135:135,150:150,39:39,65:65,68:68}],116:[function(e,t,n){"use strict";function r(e,t,n){var r=e,a=!r.hasOwnProperty(n);a&&null!=t&&(r[n]=t)}function a(e){if(null==e)return e;var t={};return i(e,r,t),t}var i=e(149);e(150),t.exports=a},{149:149,150:150}],117:[function(e,t,n){"use strict";function r(e){try{e.focus()}catch(e){}}t.exports=r},{}],118:[function(e,t,n){"use strict";var r=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};t.exports=r},{}],119:[function(e,t,n){function r(){try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=r},{}],120:[function(e,t,n){"use strict";function r(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=r},{}],121:[function(e,t,n){"use strict";function r(e){if(e.key){var t=i[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=a(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":""}var a=e(120),i={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=r},{120:120}],122:[function(e,t,n){"use strict";function r(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return!!r&&!!n[r]}function a(e){return r}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=a},{}],123:[function(e,t,n){"use strict";function r(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}t.exports=r},{}],124:[function(e,t,n){"use strict";function r(e){var t=e&&(a&&e[a]||e[i]);return"function"==typeof t?t:void 0}var a="function"==typeof Symbol&&Symbol.iterator,i="@@iterator";t.exports=r},{}],125:[function(e,t,n){function r(e){return i(!!o),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?o.innerHTML="<link />":o.innerHTML="<"+e+"></"+e+">",s[e]=!o.firstChild),s[e]?p[e]:null}var a=e(21),i=e(133),o=a.canUseDOM?document.createElement("div"):null,s={circle:!0,clipPath:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},l=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:u,th:u,circle:d,clipPath:d,defs:d,ellipse:d,g:d,line:d,linearGradient:d,path:d,polygon:d,polyline:d,radialGradient:d,rect:d,stop:d,text:d};t.exports=r},{133:133,21:21}],126:[function(e,t,n){"use strict";function r(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function a(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,t){for(var n=r(e),i=0,o=0;n;){if(3===n.nodeType){if(o=i+n.textContent.length,t>=i&&o>=t)return{node:n,offset:t-i};i=o}n=r(a(n))}}t.exports=i},{}],127:[function(e,t,n){"use strict";function r(e){return e?e.nodeType===a?e.documentElement:e.firstChild:null}var a=9;t.exports=r},{}],128:[function(e,t,n){"use strict";function r(){return!i&&a.canUseDOM&&(i="textContent"in document.documentElement?"textContent":"innerText"),i}var a=e(21),i=null;t.exports=r},{21:21}],129:[function(e,t,n){"use strict";function r(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=r},{}],130:[function(e,t,n){function r(e){return e.replace(a,"-$1").toLowerCase()}var a=/([A-Z])/g;t.exports=r},{}],131:[function(e,t,n){"use strict";function r(e){return a(e).replace(i,"-ms-")}var a=e(130),i=/^ms-/;t.exports=r},{130:130}],132:[function(e,t,n){"use strict";function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function a(e,t){var n;if((null===e||e===!1)&&(e=o.emptyElement),"object"==typeof e){var a=e;n=t===a.type&&"string"==typeof a.type?s.createInternalComponent(a):r(a.type)?new a.type(a):new u}else"string"==typeof e||"number"==typeof e?n=s.createInstanceForText(e):c(!1);return n.construct(e),n._mountIndex=0,n._mountImage=null,n}var i=e(37),o=e(57),s=e(71),l=e(27),c=e(133),u=(e(150),function(){});l(u.prototype,i.Mixin,{_instantiateReactComponent:a}),t.exports=a},{133:133,150:150,27:27,37:37,57:57,71:71}],133:[function(e,t,n){"use strict";var r=function(e,t,n,r,a,i,o,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,i,o,s],u=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[u++]}))}throw l.framesToPop=1,l}};t.exports=r},{}],134:[function(e,t,n){"use strict";function r(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,r=n in document;if(!r){var o=document.createElement("div");o.setAttribute(n,"return;"),r="function"==typeof o[n]}return!r&&a&&"wheel"===e&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var a,i=e(21);i.canUseDOM&&(a=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=r},{21:21}],135:[function(e,t,n){function r(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=r},{}],136:[function(e,t,n){"use strict";function r(e){return e&&("INPUT"===e.nodeName&&a[e.type]||"TEXTAREA"===e.nodeName)}var a={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=r},{}],137:[function(e,t,n){function r(e){return a(e)&&3==e.nodeType}var a=e(135);t.exports=r},{135:135}],138:[function(e,t,n){"use strict";var r=e(133),a=function(e){var t,n={};r(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=a},{133:133}],139:[function(e,t,n){var r=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=r},{}],140:[function(e,t,n){"use strict";function r(e,t,n){if(!e)return null;var r={};for(var i in e)a.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}var a=Object.prototype.hasOwnProperty;t.exports=r},{}],141:[function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=r},{}],142:[function(e,t,n){"use strict";function r(e){return i(a.isValidElement(e)),e}var a=e(55),i=e(133);t.exports=r},{133:133,55:55}],143:[function(e,t,n){"use strict";function r(e){return'"'+a(e)+'"'}var a=e(114);t.exports=r},{114:114}],144:[function(e,t,n){"use strict";var r=e(21),a=/^[ \r\n\t\f]/,i=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,o=function(e,t){e.innerHTML=t};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(o=function(e,t){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=t})}),r.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(o=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&i.test(t)){e.innerHTML="\ufeff"+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}t.exports=o},{21:21}],145:[function(e,t,n){"use strict";var r=e(21),a=e(114),i=e(144),o=function(e,t){e.textContent=t};r.canUseDOM&&("textContent"in document.documentElement||(o=function(e,t){i(e,a(t))})),t.exports=o},{114:114,144:144,21:21}],146:[function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}t.exports=r},{}],147:[function(e,t,n){"use strict";function r(e,t){if(null!=e&&null!=t){var n=typeof e,r=typeof t;if("string"===n||"number"===n)return"string"===r||"number"===r;if("object"===r&&e.type===t.type&&e.key===t.key){var a=e._owner===t._owner;return a}}return!1}e(150),t.exports=r},{150:150}],148:[function(e,t,n){function r(e){var t=e.length;if(a(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e)),a("number"==typeof t),a(0===t||t-1 in e),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;t>r;r++)n[r]=e[r];return n}var a=e(133);t.exports=r},{133:133}],149:[function(e,t,n){"use strict";function r(e){return g[e]}function a(e,t){return e&&null!=e.key?o(e.key):t.toString(36)}function i(e){return(""+e).replace(v,r)}function o(e){return"$"+i(e)}function s(e,t,n,r,i){var l=typeof e;if(("undefined"===l||"boolean"===l)&&(e=null),null===e||"string"===l||"number"===l||c.isValidElement(e))return r(i,e,""===t?m+a(e,0):t,n),1;var d,g,v,y=0;if(Array.isArray(e))for(var b=0;b<e.length;b++)d=e[b],g=(""!==t?t+h:m)+a(d,b),v=n+y,y+=s(d,g,v,r,i);else{var _=p(e);if(_){var C,w=_.call(e);if(_!==e.entries)for(var E=0;!(C=w.next()).done;)d=C.value,g=(""!==t?t+h:m)+a(d,E++),v=n+y,y+=s(d,g,v,r,i);else for(;!(C=w.next()).done;){var S=C.value;S&&(d=S[1],g=(""!==t?t+h:m)+o(S[0])+h+a(d,0),v=n+y,y+=s(d,g,v,r,i))}}else if("object"===l){f(1!==e.nodeType);var I=u.extract(e);for(var L in I)I.hasOwnProperty(L)&&(d=I[L],g=(""!==t?t+h:m)+o(L)+h+a(d,0),v=n+y,y+=s(d,g,v,r,i))}}return y}function l(e,t,n){return null==e?0:s(e,"",0,t,n)}var c=e(55),u=e(61),d=e(64),p=e(124),f=e(133),m=(e(150),d.SEPARATOR),h=":",g={"=":"=0",".":"=1",":":"=2"},v=/[=.:]/g;t.exports=l},{124:124,133:133,150:150,55:55,61:61,64:64}],150:[function(e,t,n){"use strict";var r=e(112),a=r;t.exports=a},{112:112}]},{},[1])(1)}),define("analysis/WizardStore",["lodash"],function(e){var t={},n={},r={get:function(e){return n[e]},clone:function(t){return e.cloneDeep(n[t])},set:function(e,t,r){n[e]=t,r||this.updateSubscribers(e)},registerCallback:function(e,n){t[e]?t[e].push(n):(t[e]=[],t[e].push(n))},updateSubscribers:function(e){var n=t[e];n&&n.forEach(function(e){e()})},debug:function(){console.dir(n)}};return r}),define("analysis/config",[],function(){var e="customAreaOption",t="adminUnitOption",n="commercialEntityOption",r="certifiedAreaOption",a="millPointOption",i="http://gfw-staging.wri.org/arcgis/rest/services/CommoditiesAnalyzer/mapfeatures/MapServer",o="http://gis-gfw.wri.org/arcgis/rest/services/commodities/MapServer";return{noNameField:"No Group Information Available",wizard:{breadcrumbs:["Select Area","Refine Area","Select Analysis"]},intro:{beginningText:"Create custom analysis of your area of interest â such as a commodity concession or group of concessions -- considering factors such as:",firstList:["Tree cover change","Fire activity","Primary or intact forest areas","Protected areas","Legal classification of land"],secondaryText:"You can also: ",secondList:["Upload your own shapefiles for analysis","Draw an area of interest","Sign up for alerts for clearance activity"]},stepOne:{title:"Step 1: Select Area of interest",description:"Set the area to analyze using one of the following options.",option1:{id:e,label:"Create custom area",description:"Draw a polygon or upload a shapefile to analyze."},option2:{id:t,label:"Administrative unit",description:"Analyze provinces, districts, and other subnational areas."},option3:{id:n,label:"Concession area",description:"Analyze an individual concession or a group of concessions."},option4:{id:r,label:"Certified area",description:"Analyze RSPO certified palm oil concessions."},option5:{id:a,label:"Palm oil mill points",description:"Analyze deforestation-related risks for a mill or set of mills."}},stepTwo:{title:"Step 2: Refine area",customArea:e,adminUnit:t,commArea:n,certArea:r,millPoint:a,currentFeatureText:"Current selection: ",labelField:"WRI_label"},stepThree:{title:"Step 3: Select a variable to analyze",description:"Select which types of analysis you would like to perform and then click 'Perform Analysis'.  You must select at least one option.",currentFeatureText:"Current selection: ",millPoint:a,customArea:e,pointRadiusDescription:"Choose a buffer for your points:",knownMillsDisclaimer:"(Analysis based on 50km buffer)",pointRadiusOptions:[{label:"50km",value:50},{label:"40km",value:40},{label:"30km",value:30},{label:"20km",value:20},{label:"10km",value:10}],cb1:{label:"Forest Change",value:"forest"},cb2:{label:"Tree cover loss and fires",value:"loss"},cb3:{label:"FORMA clearance alerts",value:"forma"},cb4:{label:"Suitability",value:"suit"},cb5:{label:"Risk Assessment",value:"risk"},checkboxes:[{label:"ID Primary Forests",value:"primForest",checked:!1},{label:"Tree Cover Density",value:"treeDensity",checked:!1},{label:"Legal Classes",value:"legal",checked:!1},{label:"Protected Areas",value:"protected",checked:!0},{label:"Aboveground Biomass Density",value:"carbon",checked:!1},{label:"Brazil Biomes",value:"biomes",checked:!1},{label:"Intact Forests",value:"intact",checked:!0},{label:"Land Cover - Global",value:"landCoverGlob",checked:!1},{label:"Land Cover - SE Asia",value:"landCoverAsia",checked:!1},{label:"Land Cover - Indonesia",value:"landCoverIndo",checked:!1},{label:"Peat Lands",value:"peat",checked:!1},{label:"Tree Cover Loss",value:"treeCoverLoss",checked:!0},{label:"Indonesia Moratorium",value:"indonesiaMoratorium",checked:!1},{label:"Prodes deforestation",value:"prodes",checked:!1},{label:"Plantations by Type",value:"plantationsTypeLayer",checked:!1},{label:"Plantations by Species",value:"plantationsSpeciesLayer",checked:!1},{label:"Soy on Tree Cover Loss",value:"soy",checked:!1},{label:"GLAD Alerts",value:"gladAlerts",childLabel:"Show only confirmed alerts",childChecked:!1,childValue:"gladConfirmed",checked:!1},{label:"Gran Chaco deforestation (Guyra Paraguay)",value:"guyraAlerts",checked:!1}],suit:{label:"Oil Palm Suitability",value:"suit",description:"Analyze Areas potentially suitable and unsuitable for palm oil development using WRI's methodology."},rspo:{label:"RSPO Land Use Change Analysis",value:"rspo",description:"Analyze tree cover loss according to the RSPO compensation procedure and New Planting Procedure guidelines."},mill:{label:"PALM Risk Tool",value:"mill",description:"Analyze deforestation-related risks for a mill or set of mills."},forestChange:{label:"Forest Change Analysis",value:"fca",description:"Analyze tree cover loss and fire activity according to the selected variable(s)."}},stepFour:{title:"Step 4: Refine Analysis",description:"Select which data sets you would like to include in your analysis and then click 'Perform Analysis'.  You must select at least one data set.",checkboxes:[{label:"Primary Forests",value:"primForest"},{label:"Tree Cover Density",value:"treeDensity"},{label:"Legal Classes",value:"legal"},{label:"Protected Areas",value:"protected"},{label:"Aboveground Biomass Density",value:"carbon"},{label:"Intact Forests",value:"intact"},{label:"Land Cover - Global",value:"landCoverGlob"},{label:"Land Cover - Southeast Asia",value:"landCoverAsia"},{label:"Land Cover - Indonesia",value:"landCoverIndo"},{label:"Peat Lands",value:"peat"},{label:"Soy on Tree Cover Loss",value:"soy"}]},customArea:{instructions:"Select the 'Freehand' or 'Polygon' options below to draw an area of interest on the map, or choose 'Upload' to upload a zipped shapefile of polygons or points or a list of point coordinates to analyze.",instructionsPartTwo:"Select an area from the list below and click 'Next' to proceed.",customCoordLabel:"Enter Coordinates",freehandLabel:"Freehand",uploadLabel:"Upload",polyLabel:"Polygon",uploadInstructions:["Select a zip file(.zip) containing a shapefile(.shp,.dbf,.prj) from your local file system.","The shapefile must be in Geographic Coordinate System (WGS84).","The shapefile must be of POLYGON geometry type.","The shapefile must not exceed 1 Megabyte."],incorrectFileTypeError:"Your shapefile must be of type .zip, please choose another file.",portalUrl:"http://www.arcgis.com/sharing/rest/content/features/generate"},adminUnit:{instructions:"Select a country to view it's first or second level administrative units:",instructionsPartTwo:"Select a province or district from the list below and click 'Next' to proceed.",countriesQuery:{url:i+"/7",where:"NAME_0 IS NOT NULL",outFields:["NAME_0"],orderBy:["NAME_0"],groupBy:["NAME_0"],statistic:{statisticType:"count",onStatisticField:"OBJECTID",outStatisticFieldName:"OBJECTID"},labelValueField:"NAME_0"},lowLevelUnitsQuery:{url:i+"/7",whereField:"NAME_0",requiredField:"NAME_1",outFields:["NAME_0","NAME_1","NAME_2","OBJECTID"],orderBy:["NAME_1","NAME_2"],labelField:"NAME_2",valueField:"OBJECTID"},countryBoundaries:{url:i+"/6",whereField:"NAME_0",requiredField:"NAME_1"}},commercialEntity:{instructions:"Select a commodity type:",instructionsPartTwo:"Select a concession or group from the list below and click 'Next' to proceed.",commodityOptions:[{label:"None",value:"NONE"},{label:"Logging concession",value:"Logging concession"},{label:"Mining concession",value:"Mining concession"},{label:"Oil palm concession",value:"Oil palm concession"},{label:"Wood fiber plantation",value:"Wood fiber plantation"}],commodityQuery:{url:i+"/13",whereField:"TYPE",outFields:["GROUP_NAME","Name","TYPE","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:i+"/27",requiredField:"GROUP_NAME"}},certifiedArea:{instructions:"Select a commodity type:",instructionsPartTwo:"Select a Certification Scheme:",instructionsPartThree:"Select a concession or group from the list below and click 'Next' to proceed",commodityOptions:[{label:"Oil palm concession",value:"Oil palm concession"}],certificationOptions:[{label:"None",value:"NONE"},{label:"RSPO",value:"RSPO"}],schemeQuery:{url:i+"/13",whereField:"CERT_SCHEME",secondaryWhereField:"TYPE",outFields:["GROUP_NAME","Name","CERT_SCHEME","OBJECTID"],orderBy:["GROUP_NAME","Name"],labelField:"Name",valueField:"OBJECTID",requiredField:"GROUP_NAME"},groupQuery:{url:i+"/28",requiredField:"GROUP_NAME"}},millPoints:{instructions:"Select a method for choosing or creating mill points to analyze.",selectInstructions:"Select a commodity type:",listInstructions:"Select mill(s) from the list below and click 'Next' to proceed.",selectFromListButton:"Select from List",selectFromCustomListButton:"Select from my features",enterCoordinatesButton:"Enter Coordinates",uploadButton:"Upload",commodityOptions:[{label:"Oil palm",value:"Oil palm concession"}],url:o+"/27",api:"http://wip.risk-api.appspot.com/",outFields:["group_name","mill_name_","wri_id"],orderBy:["group_name","mill_name_"],labelField:"mill_name_",valueField:"wri_id",requiredField:"group_name"},STORE_KEYS:{customFeatures:"customFeatures",removedCustomFeatures:"removedCustomFeatures",selectedCustomFeatures:"selectedCustomFeatures",selectedPresetFeature:"selectedPresetFeature",currentTreeCoverDensity:"currentTreeCoverDensity",gladConfidence:"gladConfidence",userStep:"userStep",areaOfInterest:"areaOfInterest",analysisSets:"analysisSets",analysisPointRadius:"analysisPointRadius",alertsDialogActive:"alertsDialogActive",forestChangeCheckbox:"forestChangeCheckbox"}}}),define("components/alertsForm/config",["analysis/config"],function(e){return{stepTwo:{labelField:e.stepTwo.labelField},customArea:{instructions:e.customArea.instructions,freehandLabel:e.customArea.freehandLabel,polyLabel:e.customArea.polyLabel,uploadLabel:e.customArea.uploadLabel},STORE_KEYS:e.STORE_KEYS,MODAL_ID:"subscription-modal",TEXT:{title:"Alerts Subscription",selection:"Current selection:",noSelection:"none",modalTitle:"Subscribe to Alerts",subscribe:"Subscribe"}}}),define("components/featureList/config",["analysis/config"],function(e){return{stepTwo:{labelField:e.stepTwo.labelField},STORE_KEYS:e.STORE_KEYS,TEXT:{instruction:"Select areas of interest using the left checkboxes.",noAreas:"No current areas of interest, please draw or upload some.",clear:"Clear Selection",headers:["Type","Area Name","RSPO"]}}}),define("components/featureList/FeatureList",["react","lodash","components/featureList/config","analysis/WizardStore","utils/GeoHelper","map/config"],function(e,t,n,r,a,i){var o=n.TEXT,s=n.STORE_KEYS;return e.createClass({propTypes:{features:e.PropTypes.array.isRequired,selectedFeatures:e.PropTypes.array.isRequired,rspoChecks:e.PropTypes.bool,showClear:e.PropTypes.bool},render:function(){var n,r,a,i,s=!1,l="";return this.props.selectedFeatures&&(n=this.props.features.map(this._featuresIdMapper),r=this.props.selectedFeatures.map(function(e){return e.attributes.WRI_ID}),s=n.length>0&&0===t.difference(n,r).length),this.props.rspoChecks&&(a=this.props.features.length>0&&t.every(this.props.features,function(e){return e.attributes.isRSPO===!0}),l=e.createElement("th",null,e.createElement("label",null,e.createElement("input",{type:"checkbox",onChange:this._toggleAllFeaturesRSPO,checked:a,disabled:0===this.props.features.length}),o.headers[2]))),i=0===this.props.selectedFeatures.length||void 0!==this.props.showClear&&this.props.showClear===!1?"":e.createElement("button",{className:"button-link float-right margin__right no-padding__right",onClick:this._removeFeatureSelection},o.clear),e.createElement("div",{className:"feature-list"},i,e.createElement("div",{className:"padding__wide margin__bottom instructions"},o.instruction),e.createElement("table",{className:"feature-list__table no-border-spacing fill__wide border-box border-orange"},e.createElement("thead",null,e.createElement("tr",{className:"text-white text-center back-orange"},e.createElement("th",null,e.createElement("input",{type:"checkbox",onChange:this._toggleAllFeaturesSelection,checked:s,disabled:0===this.props.features.length})),e.createElement("th",null,o.headers[0]),e.createElement("th",null,o.headers[1]),l)),e.createElement("tbody",null,this._noFeatures(),this.props.features.map(this._featuresMapper,this))))},_featuresMapper:function(r,a){var i=t.find(this.props.selectedFeatures,function(e){return r.attributes.WRI_ID===e.attributes.WRI_ID})||!1,o=a%2===0?"back-light-gray":"",o=i?"text-white back-medium-gray":o,s=this.props.rspoChecks?e.createElement("td",{className:"text-center"},e.createElement("input",{type:"checkbox",onChange:this._toggleFeatureRSPO,checked:r.attributes.isRSPO,"data-feature-id":r.attributes.WRI_ID})):"",l="app/css/images/icon_"+("polygon"===r.geometry.type?"polygon_":"circle_")+(i?"white":"gray")+".png";return e.createElement("tr",{key:a,className:o},e.createElement("td",{className:"text-center"},e.createElement("input",{type:"checkbox",onChange:this._toggleFeatureSelection,checked:i,"data-feature-index":a,"data-feature-id":r.attributes.WRI_ID})),e.createElement("td",{className:"text-center"},e.createElement("img",{className:"vertical-middle",width:"15px",height:"15px",src:l})),e.createElement("td",null,e.createElement("input",{className:"custom-feature-label text-inherit-color vertical-middle feedback-outline-orange",type:"text",onChange:this._renameFeature,value:r.attributes[n.stepTwo.labelField],"data-feature-index":a,"data-feature-id":r.attributes.WRI_ID})),s)},_noFeatures:function(){var t=this.props.rspoChecks?"4":"3";return this.props.features.length>0?e.createElement("tr",{className:"text-center"}):e.createElement("tr",null,e.createElement("td",{className:"text-center text-medium-gray",colSpan:t},e.createElement("i",null,o.noAreas)))},_toggleFeatureSelection:function(e){var n,a,i;e.target.checked?(n=parseInt(e.target.dataset?e.target.dataset.featureIndex:e.target.getAttribute("data-feature-index")),i=this.props.selectedFeatures.concat(this.props.features[n])):(a=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),i=t.filter(this.props.selectedFeatures,function(e){
return e.attributes.WRI_ID!==a})),this.addHighlightFeatures(i),r.set(s.selectedCustomFeatures,i)},_toggleAllFeaturesSelection:function(e){var n,a,i,o=this.props.features,l=o.map(this._featuresIdMapper);e.target.checked?(n=this.props.selectedFeatures.map(this._featuresIdMapper),a=t.difference(l,n).map(function(e){return t.find(o,function(t){return t.attributes.WRI_ID===e})}),i=r.get(s.selectedCustomFeatures).concat(a)):i=r.get(s.selectedCustomFeatures).filter(function(e){return l.indexOf(e.attributes.WRI_ID)<0}),this.addHighlightFeatures(i),r.set(s.selectedCustomFeatures,i)},addHighlightFeatures:function(e){var t=app.map.getLayer(i.wizardGraphicsLayer.id);t&&(t.clear(),e.forEach(function(e){e=a.applySelectionSymbolToFeature(e),t.add(e)}))},_toggleAllFeaturesRSPO:function(){if(0!==this.props.features.length){var e,n=r.get(s.customFeatures),a=this.props.features.map(this._featuresIdMapper),i=t.every(this.props.features,function(e){return e.attributes.isRSPO===!0}),o=!i;a.forEach(function(r){e=t.find(n,function(e){return e.attributes.WRI_ID===r}),e&&(e.attributes.isRSPO=o)}),r.set(s.customFeatures,n)}},_toggleFeatureRSPO:function(e){var n=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),a=r.get(s.customFeatures),i=t.find(a,function(e){return e.attributes.WRI_ID===n});if(!i)throw new Error("Could not find feature to update rspo based on id");i.attributes.isRSPO=!i.attributes.isRSPO,r.set(s.customFeatures,a)},_removeFeatureSelection:function(){var e,n=this.props.selectedFeatures.map(this._featuresIdMapper),a=function(e){return n.indexOf(e.attributes.WRI_ID)<0},o=t.filter(r.get(s.customFeatures),a),l=t.filter(r.get(s.selectedCustomFeatures),a),c=t.reject(r.get(s.selectedCustomFeatures),a);r.set(s.removedCustomFeatures,c),r.set(s.customFeatures,o),r.set(s.selectedCustomFeatures,l),e=app.map.getLayer(i.wizardGraphicsLayer.id),e&&e.clear()},_renameFeature:function(e){var t=parseInt(e.target.dataset?e.target.dataset.featureId:e.target.getAttribute("data-feature-id")),a=r.get(s.customFeatures),i=a.filter(function(e){return e.attributes.WRI_ID===t});if(!i)throw new Error("Undefined: Could not identify feature to rename.");a.some(function(r,i){var o=r.attributes.WRI_ID===t;return o&&(a[i].attributes[n.stepTwo.labelField]=e.target.value),o}),r.set(s.customFeatures,a),e.target.parentNode.className.split(" ").indexOf("active")>-1&&r.set(s.selectedCustomFeatures,feature)},_featuresIdMapper:function(e){return e.attributes.WRI_ID}})}),function(){!function(e){var t=this||(0,eval)("this"),n=t.document,r=t.navigator,a=t.jQuery,i=t.JSON;!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(module.exports||exports):"function"==typeof define&&define.amd?define("knockout",["exports"],e):e(t.ko={})}(function(o){function s(e,t){return(null===e||typeof e in p)&&e===t}function l(t,n){var r;return function(){r||(r=setTimeout(function(){r=e,t()},n))}}function c(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function u(e,t,n,r){d.d[e]={init:function(e,a,i,o,s){var l,c;return d.ba(function(){var i=d.a.c(a()),o=!n!=!i,u=!c;(u||t||o!==l)&&(u&&d.ca.fa()&&(c=d.a.lb(d.e.childNodes(e),!0)),o?(u||d.e.U(e,d.a.lb(c)),d.gb(r?r(s,i):s,e)):d.e.da(e),l=o)},null,{G:e}),{controlsDescendantBindings:!0}}},d.g.aa[e]=!1,d.e.Q[e]=!0}var d="undefined"!=typeof o?o:{};d.b=function(e,t){for(var n=e.split("."),r=d,a=0;a<n.length-1;a++)r=r[n[a]];r[n[n.length-1]]=t},d.s=function(e,t,n){e[t]=n},d.version="3.1.0",d.b("version",d.version),d.a=function(){function o(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function s(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function l(e,t){return e.__proto__=t,e}var c={__proto__:[]}instanceof Array,u={},p={};u[r&&/Firefox\/2/i.test(r.userAgent)?"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"],u.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" "),o(u,function(e,t){if(t.length)for(var n=0,r=t.length;n<r;n++)p[t[n]]=e});var f={propertychange:!0},m=n&&function(){for(var t=3,r=n.createElement("div"),a=r.getElementsByTagName("i");r.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->",a[0];);return 4<t?t:e}();return{mb:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],r:function(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)},l:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},hb:function(e,t,n){for(var r=0,a=e.length;r<a;r++)if(t.call(n,e[r],r))return e[r];return null},ma:function(e,t){var n=d.a.l(e,t);0<n?e.splice(n,1):0===n&&e.shift()},ib:function(e){e=e||[];for(var t=[],n=0,r=e.length;n<r;n++)0>d.a.l(t,e[n])&&t.push(e[n]);return t},ya:function(e,t){e=e||[];for(var n=[],r=0,a=e.length;r<a;r++)n.push(t(e[r],r));return n},la:function(e,t){e=e||[];for(var n=[],r=0,a=e.length;r<a;r++)t(e[r],r)&&n.push(e[r]);return n},$:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;n<r;n++)e.push(t[n]);return e},Y:function(e,t,n){var r=d.a.l(d.a.Sa(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},na:c,extend:s,ra:l,sa:c?l:s,A:o,Oa:function(e,t){if(!e)return e;var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n],n,e));return r},Fa:function(e){for(;e.firstChild;)d.removeNode(e.firstChild)},ec:function(e){e=d.a.R(e);for(var t=n.createElement("div"),r=0,a=e.length;r<a;r++)t.appendChild(d.M(e[r]));return t},lb:function(e,t){for(var n=0,r=e.length,a=[];n<r;n++){var i=e[n].cloneNode(!0);a.push(t?d.M(i):i)}return a},U:function(e,t){if(d.a.Fa(e),t)for(var n=0,r=t.length;n<r;n++)e.appendChild(t[n])},Bb:function(e,t){var n=e.nodeType?[e]:e;if(0<n.length){for(var r=n[0],a=r.parentNode,i=0,o=t.length;i<o;i++)a.insertBefore(t[i],r);for(i=0,o=n.length;i<o;i++)d.removeNode(n[i])}},ea:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.shift();if(1<e.length){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)if(e.push(n),n=n.nextSibling,!n)return;e.push(r)}}return e},Db:function(e,t){7>m?e.setAttribute("selected",t):e.selected=t},ta:function(t){return null===t||t===e?"":t.trim?t.trim():t.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},oc:function(e,t){for(var n=[],r=(e||"").split(t),a=0,i=r.length;a<i;a++){var o=d.a.ta(r[a]);""!==o&&n.push(o)}return n},kc:function(e,t){return e=e||"",!(t.length>e.length)&&e.substring(0,t.length)===t},Sb:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},Ea:function(e){return d.a.Sb(e,e.ownerDocument.documentElement)},eb:function(e){return!!d.a.hb(e,d.a.Ea)},B:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},q:function(e,t,n){var r=m&&f[t];if(!r&&a)a(e).bind(t,n);else if(r||"function"!=typeof e.addEventListener){if("undefined"==typeof e.attachEvent)throw Error("Browser doesn't support addEventListener or attachEvent");var i=function(t){n.call(e,t)},o="on"+t;e.attachEvent(o,i),d.a.u.ja(e,function(){e.detachEvent(o,i)})}else e.addEventListener(t,n,!1)},ha:function(e,r){if(!e||!e.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var i;if("input"===d.a.B(e)&&e.type&&"click"==r.toLowerCase()?(i=e.type,i="checkbox"==i||"radio"==i):i=!1,a&&!i)a(e).trigger(r);else if("function"==typeof n.createEvent){if("function"!=typeof e.dispatchEvent)throw Error("The supplied element doesn't support dispatchEvent");i=n.createEvent(p[r]||"HTMLEvents"),i.initEvent(r,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,e),e.dispatchEvent(i)}else if(i&&e.click)e.click();else{if("undefined"==typeof e.fireEvent)throw Error("Browser doesn't support triggering events");e.fireEvent("on"+r)}},c:function(e){return d.v(e)?e():e},Sa:function(e){return d.v(e)?e.o():e},ua:function(e,t,n){if(t){var r=/\S+/g,a=e.className.match(r)||[];d.a.r(t.match(r),function(e){d.a.Y(a,e,n)}),e.className=a.join(" ")}},Xa:function(t,n){var r=d.a.c(n);null!==r&&r!==e||(r="");var a=d.e.firstChild(t);!a||3!=a.nodeType||d.e.nextSibling(a)?d.e.U(t,[t.ownerDocument.createTextNode(r)]):a.data=r,d.a.Vb(t)},Cb:function(e,t){if(e.name=t,7>=m)try{e.mergeAttributes(n.createElement("<input name='"+e.name+"'/>"),!1)}catch(e){}},Vb:function(e){9<=m&&(e=1==e.nodeType?e:e.parentNode,e.style&&(e.style.zoom=e.style.zoom))},Tb:function(e){if(m){var t=e.style.width;e.style.width=0,e.style.width=t}},ic:function(e,t){e=d.a.c(e),t=d.a.c(t);for(var n=[],r=e;r<=t;r++)n.push(r);return n},R:function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},mc:6===m,nc:7===m,oa:m,ob:function(e,t){for(var n=d.a.R(e.getElementsByTagName("input")).concat(d.a.R(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},a=[],i=n.length-1;0<=i;i--)r(n[i])&&a.push(n[i]);return a},fc:function(e){return"string"==typeof e&&(e=d.a.ta(e))?i&&i.parse?i.parse(e):new Function("return "+e)():null},Ya:function(e,t,n){if(!i||!i.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return i.stringify(d.a.c(e),t,n)},gc:function(e,t,r){r=r||{};var a=r.params||{},i=r.includeFields||this.mb,s=e;if("object"==typeof e&&"form"===d.a.B(e))for(var s=e.action,l=i.length-1;0<=l;l--)for(var c=d.a.ob(e,i[l]),u=c.length-1;0<=u;u--)a[c[u].name]=c[u].value;t=d.a.c(t);var p=n.createElement("form");p.style.display="none",p.action=s,p.method="post";for(var f in t)e=n.createElement("input"),e.name=f,e.value=d.a.Ya(d.a.c(t[f])),p.appendChild(e);o(a,function(e,t){var r=n.createElement("input");r.name=e,r.value=t,p.appendChild(r)}),n.body.appendChild(p),r.submitter?r.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}}(),d.b("utils",d.a),d.b("utils.arrayForEach",d.a.r),d.b("utils.arrayFirst",d.a.hb),d.b("utils.arrayFilter",d.a.la),d.b("utils.arrayGetDistinctValues",d.a.ib),d.b("utils.arrayIndexOf",d.a.l),d.b("utils.arrayMap",d.a.ya),d.b("utils.arrayPushAll",d.a.$),d.b("utils.arrayRemoveItem",d.a.ma),d.b("utils.extend",d.a.extend),d.b("utils.fieldsIncludedWithJsonPost",d.a.mb),d.b("utils.getFormFields",d.a.ob),d.b("utils.peekObservable",d.a.Sa),d.b("utils.postJson",d.a.gc),d.b("utils.parseJson",d.a.fc),d.b("utils.registerEventHandler",d.a.q),d.b("utils.stringifyJson",d.a.Ya),d.b("utils.range",d.a.ic),d.b("utils.toggleDomNodeCssClass",d.a.ua),d.b("utils.triggerEvent",d.a.ha),d.b("utils.unwrapObservable",d.a.c),d.b("utils.objectForEach",d.a.A),d.b("utils.addOrRemoveItem",d.a.Y),d.b("unwrap",d.a.c),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments);return e=n.shift(),function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),d.a.f=new function(){function t(t,i){var o=t[r];if(!o||"null"===o||!a[o]){if(!i)return e;o=t[r]="ko"+n++,a[o]={}}return a[o]}var n=0,r="__ko__"+(new Date).getTime(),a={};return{get:function(n,r){var a=t(n,!1);return a===e?e:a[r]},set:function(n,r,a){a===e&&t(n,!1)===e||(t(n,!0)[r]=a)},clear:function(e){var t=e[r];return!!t&&(delete a[t],e[r]=null,!0)},L:function(){return n++ +r}}},d.b("utils.domData",d.a.f),d.b("utils.domData.clear",d.a.f.clear),d.a.u=new function(){function t(t,n){var a=d.a.f.get(t,r);return a===e&&n&&(a=[],d.a.f.set(t,r,a)),a}function n(e){var r=t(e,!1);if(r)for(var r=r.slice(0),a=0;a<r.length;a++)r[a](e);if(d.a.f.clear(e),d.a.u.cleanExternalData(e),o[e.nodeType])for(r=e.firstChild;e=r;)r=e.nextSibling,8===e.nodeType&&n(e)}var r=d.a.f.L(),i={1:!0,8:!0,9:!0},o={1:!0,9:!0};return{ja:function(e,n){if("function"!=typeof n)throw Error("Callback must be a function");t(e,!0).push(n)},Ab:function(n,a){var i=t(n,!1);i&&(d.a.ma(i,a),0==i.length&&d.a.f.set(n,r,e))},M:function(e){if(i[e.nodeType]&&(n(e),o[e.nodeType])){var t=[];d.a.$(t,e.getElementsByTagName("*"));for(var r=0,a=t.length;r<a;r++)n(t[r])}return e},removeNode:function(e){d.M(e),e.parentNode&&e.parentNode.removeChild(e)},cleanExternalData:function(e){a&&"function"==typeof a.cleanData&&a.cleanData([e])}}},d.M=d.a.u.M,d.removeNode=d.a.u.removeNode,d.b("cleanNode",d.M),d.b("removeNode",d.removeNode),d.b("utils.domNodeDisposal",d.a.u),d.b("utils.domNodeDisposal.addDisposeCallback",d.a.u.ja),d.b("utils.domNodeDisposal.removeDisposeCallback",d.a.u.Ab),function(){d.a.Qa=function(e){var r;if(a){if(a.parseHTML)r=a.parseHTML(e)||[];else if((r=a.clean([e]))&&r[0]){for(e=r[0];e.parentNode&&11!==e.parentNode.nodeType;)e=e.parentNode;e.parentNode&&e.parentNode.removeChild(e)}}else{var i=d.a.ta(e).toLowerCase();for(r=n.createElement("div"),i=i.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!i.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!i.indexOf("<td")||!i.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],e="ignored<div>"+i[1]+e+i[2]+"</div>","function"==typeof t.innerShiv?r.appendChild(t.innerShiv(e)):r.innerHTML=e;i[0]--;)r=r.lastChild;r=d.a.R(r.lastChild.childNodes)}return r},d.a.Va=function(t,n){if(d.a.Fa(t),n=d.a.c(n),null!==n&&n!==e)if("string"!=typeof n&&(n=n.toString()),a)a(t).html(n);else for(var r=d.a.Qa(n),i=0;i<r.length;i++)t.appendChild(r[i])}}(),d.b("utils.parseHtmlFragment",d.a.Qa),d.b("utils.setHtml",d.a.Va),d.w=function(){function t(e,n){if(e)if(8==e.nodeType){var r=d.w.xb(e.nodeValue);null!=r&&n.push({Rb:e,cc:r})}else if(1==e.nodeType)for(var r=0,a=e.childNodes,i=a.length;r<i;r++)t(a[r],n)}var n={};return{Na:function(e){if("function"!=typeof e)throw Error("You can only pass a function to ko.memoization.memoize()");var t=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);return n[t]=e,"<!--[ko_memo:"+t+"]-->"},Hb:function(t,r){var a=n[t];if(a===e)throw Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return a.apply(null,r||[]),!0}finally{delete n[t]}},Ib:function(e,n){var r=[];t(e,r);for(var a=0,i=r.length;a<i;a++){var o=r[a].Rb,s=[o];n&&d.a.$(s,n),d.w.Hb(r[a].cc,s),o.nodeValue="",o.parentNode&&o.parentNode.removeChild(o)}},xb:function(e){return(e=e.match(/^\[ko_memo\:(.*?)\]$/))?e[1]:null}}}(),d.b("memoization",d.w),d.b("memoization.memoize",d.w.Na),d.b("memoization.unmemoize",d.w.Hb),d.b("memoization.parseMemoText",d.w.xb),d.b("memoization.unmemoizeDomNodeAndDescendants",d.w.Ib),d.Ga={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return d.h({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},rateLimit:function(e,t){var n,r,a;"number"==typeof t?n=t:(n=t.timeout,r=t.method),a="notifyWhenChangesStop"==r?c:l,e.Ma(function(e){return a(e,n)})},notify:function(e,t){e.equalityComparer="always"==t?null:s}};var p={undefined:1,boolean:1,number:1,string:1};d.b("extenders",d.Ga),d.Fb=function(e,t,n){this.target=e,this.za=t,this.Qb=n,this.sb=!1,d.s(this,"dispose",this.F)},d.Fb.prototype.F=function(){this.sb=!0,this.Qb()},d.N=function(){d.a.sa(this,d.N.fn),this.H={}};var f="change";o={V:function(e,t,n){var r=this;n=n||f;var a=new d.Fb(r,t?e.bind(t):e,function(){d.a.ma(r.H[n],a)});return r.o&&r.o(),r.H[n]||(r.H[n]=[]),r.H[n].push(a),a},notifySubscribers:function(e,t){if(t=t||f,this.qb(t))try{d.k.jb();for(var n,r=this.H[t].slice(0),a=0;n=r[a];++a)n.sb||n.za(e)}finally{d.k.end()}},Ma:function(e){var t,n,r,a=this,i=d.v(a);a.ia||(a.ia=a.notifySubscribers,a.notifySubscribers=function(e,t){t&&t!==f?"beforeChange"===t?a.bb(e):a.ia(e,t):a.cb(e)});var o=e(function(){i&&r===a&&(r=a()),t=!1,a.Ka(n,r)&&a.ia(n=r)});a.cb=function(e){t=!0,r=e,o()},a.bb=function(e){t||(n=e,a.ia(e,"beforeChange"))}},qb:function(e){return this.H[e]&&this.H[e].length},Wb:function(){var e=0;return d.a.A(this.H,function(t,n){e+=n.length}),e},Ka:function(e,t){return!this.equalityComparer||!this.equalityComparer(e,t)},extend:function(e){var t=this;return e&&d.a.A(e,function(e,n){var r=d.Ga[e];"function"==typeof r&&(t=r(t,n)||t)}),t}},d.s(o,"subscribe",o.V),d.s(o,"extend",o.extend),d.s(o,"getSubscriptionsCount",o.Wb),d.a.na&&d.a.ra(o,Function.prototype),d.N.fn=o,d.tb=function(e){return null!=e&&"function"==typeof e.V&&"function"==typeof e.notifySubscribers},d.b("subscribable",d.N),d.b("isSubscribable",d.tb),d.ca=d.k=function(){function e(e){r.push(n),n=e}function t(){n=r.pop()}var n,r=[],a=0;return{jb:e,end:t,zb:function(e){if(n){if(!d.tb(e))throw Error("Only subscribable things can act as dependencies");n.za(e,e.Kb||(e.Kb=++a))}},t:function(n,r,a){try{return e(),n.apply(r,a||[])}finally{t()}},fa:function(){if(n)return n.ba.fa()},pa:function(){if(n)return n.pa}}}(),d.b("computedContext",d.ca),d.b("computedContext.getDependenciesCount",d.ca.fa),d.b("computedContext.isInitial",d.ca.pa),d.m=function(e){function t(){return 0<arguments.length?(t.Ka(n,arguments[0])&&(t.P(),n=arguments[0],t.O()),this):(d.k.zb(t),n)}var n=e;return d.N.call(t),d.a.sa(t,d.m.fn),t.o=function(){return n},t.O=function(){t.notifySubscribers(n)},t.P=function(){t.notifySubscribers(n,"beforeChange")},d.s(t,"peek",t.o),d.s(t,"valueHasMutated",t.O),d.s(t,"valueWillMutate",t.P),t},d.m.fn={equalityComparer:s};var m=d.m.hc="__ko_proto__";d.m.fn[m]=d.m,d.a.na&&d.a.ra(d.m.fn,d.N.fn),d.Ha=function(t,n){return null!==t&&t!==e&&t[m]!==e&&(t[m]===n||d.Ha(t[m],n))},d.v=function(e){return d.Ha(e,d.m)},d.ub=function(e){return!!("function"==typeof e&&e[m]===d.m||"function"==typeof e&&e[m]===d.h&&e.Yb)},d.b("observable",d.m),d.b("isObservable",d.v),d.b("isWriteableObservable",d.ub),d.T=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");return e=d.m(e),d.a.sa(e,d.T.fn),e.extend({trackArrayChanges:!0})},d.T.fn={remove:function(e){for(var t=this.o(),n=[],r="function"!=typeof e||d.v(e)?function(t){return t===e}:e,a=0;a<t.length;a++){var i=t[a];r(i)&&(0===n.length&&this.P(),n.push(i),t.splice(a,1),a--)}return n.length&&this.O(),n},removeAll:function(t){if(t===e){var n=this.o(),r=n.slice(0);return this.P(),n.splice(0,n.length),this.O(),r}return t?this.remove(function(e){return 0<=d.a.l(t,e)}):[]},destroy:function(e){var t=this.o(),n="function"!=typeof e||d.v(e)?function(t){return t===e}:e;this.P();for(var r=t.length-1;0<=r;r--)n(t[r])&&(t[r]._destroy=!0);this.O()},destroyAll:function(t){return t===e?this.destroy(function(){return!0}):t?this.destroy(function(e){return 0<=d.a.l(t,e)}):[]},indexOf:function(e){var t=this();return d.a.l(t,e)},replace:function(e,t){var n=this.indexOf(e);0<=n&&(this.P(),this.o()[n]=t,this.O())}},d.a.r("pop push reverse shift sort splice unshift".split(" "),function(e){d.T.fn[e]=function(){var t=this.o();return this.P(),this.kb(t,e,arguments),t=t[e].apply(t,arguments),this.O(),t}}),d.a.r(["slice"],function(e){d.T.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),d.a.na&&d.a.ra(d.T.fn,d.m.fn),d.b("observableArray",d.T);var h="arrayChange";d.Ga.trackArrayChanges=function(e){function t(){if(!n){n=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==f||++a,t.apply(this,arguments)};var i=[].concat(e.o()||[]);r=null,e.V(function(t){if(t=[].concat(t||[]),e.qb(h)){var n;(!r||1<a)&&(r=d.a.Aa(i,t,{sparse:!0})),n=r,n.length&&e.notifySubscribers(n,h)}i=t,r=null,a=0})}}if(!e.kb){var n=!1,r=null,a=0,i=e.V;e.V=e.subscribe=function(e,n,r){return r===h&&t(),i.apply(this,arguments)},e.kb=function(e,t,i){function o(e,t,n){return s[s.length]={status:e,value:t,index:n}}if(n&&!a){var s=[],l=e.length,c=i.length,u=0;switch(t){case"push":u=l;case"unshift":for(t=0;t<c;t++)o("added",i[t],u+t);break;case"pop":u=l-1;case"shift":l&&o("deleted",e[u],u);break;case"splice":t=Math.min(Math.max(0,0>i[0]?l+i[0]:i[0]),l);for(var l=1===c?l:Math.min(t+(i[1]||0),l),c=t+c-2,u=Math.max(l,c),p=[],f=[],m=2;t<u;++t,++m)t<l&&f.push(o("deleted",e[t],t)),t<c&&p.push(o("added",i[m],t));d.a.nb(f,p);break;default:return}r=s}}}},d.ba=d.h=function(e,t,n){function r(){f=!0,d.a.A(_,function(e,t){t.F()}),_={},C=0,c=!1}function a(){var e=o.throttleEvaluation;e&&0<=e?(clearTimeout(w),w=setTimeout(i,e)):o.wa?o.wa():i()}function i(){if(!u&&!f){if(y&&y()){if(!p)return void b()}else p=!1;u=!0;try{var e=_,n=C;d.k.jb({za:function(t,r){f||(n&&e[r]?(_[r]=e[r],++C,delete e[r],--n):_[r]||(_[r]=t.V(a),++C))},ba:o,pa:!C}),_={},C=0;try{var r=t?m.call(t):m()}finally{d.k.end(),n&&d.a.A(e,function(e,t){t.F()}),c=!1}o.Ka(l,r)&&(o.notifySubscribers(l,"beforeChange"),l=r,o.wa&&!o.throttleEvaluation||o.notifySubscribers(l))}finally{u=!1}C||b()}}function o(){if(0<arguments.length){if("function"!=typeof h)throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return h.apply(t,arguments),this}return c&&i(),d.k.zb(o),l}function s(){return c||0<C}var l,c=!0,u=!1,p=!1,f=!1,m=e;if(m&&"object"==typeof m?(n=m,m=n.read):(n=n||{},m||(m=n.read)),"function"!=typeof m)throw Error("Pass a function that returns the value of the ko.computed");var h=n.write,g=n.disposeWhenNodeIsRemoved||n.G||null,v=n.disposeWhen||n.Da,y=v,b=r,_={},C=0,w=null;t||(t=n.owner),d.N.call(o),d.a.sa(o,d.h.fn),o.o=function(){return c&&!C&&i(),l},o.fa=function(){return C},o.Yb="function"==typeof n.write,o.F=function(){b()},o.ga=s;var E=o.Ma;return o.Ma=function(e){E.call(o,e),o.wa=function(){o.bb(l),c=!0,o.cb(o)}},d.s(o,"peek",o.o),d.s(o,"dispose",o.F),d.s(o,"isActive",o.ga),d.s(o,"getDependenciesCount",o.fa),g&&(p=!0,g.nodeType&&(y=function(){return!d.a.Ea(g)||v&&v()})),!0!==n.deferEvaluation&&i(),g&&s()&&g.nodeType&&(b=function(){d.a.u.Ab(g,b),r()},d.a.u.ja(g,b)),o},d.$b=function(e){return d.Ha(e,d.h)},o=d.m.hc,d.h[o]=d.m,d.h.fn={equalityComparer:s},d.h.fn[o]=d.h,d.a.na&&d.a.ra(d.h.fn,d.N.fn),d.b("dependentObservable",d.h),d.b("computed",d.h),d.b("isComputed",d.$b),function(){function t(a,i,o){if(o=o||new r,a=i(a),"object"!=typeof a||null===a||a===e||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var s=a instanceof Array?[]:{};return o.save(a,s),n(a,function(n){var r=i(a[n]);switch(typeof r){case"boolean":case"number":case"string":case"function":s[n]=r;break;case"object":case"undefined":var l=o.get(r);s[n]=l!==e?l:t(r,i,o)}}),s}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(n in e)t(n)}function r(){this.keys=[],this.ab=[]}d.Gb=function(e){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return t(e,function(e){for(var t=0;d.v(e)&&10>t;t++)e=e();return e})},d.toJSON=function(e,t,n){return e=d.Gb(e),d.a.Ya(e,t,n)},r.prototype={save:function(e,t){var n=d.a.l(this.keys,e);0<=n?this.ab[n]=t:(this.keys.push(e),this.ab.push(t))},get:function(t){return t=d.a.l(this.keys,t),0<=t?this.ab[t]:e}}}(),d.b("toJS",d.Gb),d.b("toJSON",d.toJSON),function(){d.i={p:function(t){switch(d.a.B(t)){case"option":return!0===t.__ko__hasDomDataOptionValue__?d.a.f.get(t,d.d.options.Pa):7>=d.a.oa?t.getAttributeNode("value")&&t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return 0<=t.selectedIndex?d.i.p(t.options[t.selectedIndex]):e;default:return t.value}},X:function(t,n,r){switch(d.a.B(t)){case"option":switch(typeof n){case"string":d.a.f.set(t,d.d.options.Pa,e),"__ko__hasDomDataOptionValue__"in t&&delete t.__ko__hasDomDataOptionValue__,t.value=n;break;default:d.a.f.set(t,d.d.options.Pa,n),t.__ko__hasDomDataOptionValue__=!0,t.value="number"==typeof n?n:""}break;case"select":""!==n&&null!==n||(n=e);for(var a,i=-1,o=0,s=t.options.length;o<s;++o)if(a=d.i.p(t.options[o]),a==n||""==a&&n===e){i=o;break}(r||0<=i||n===e&&1<t.size)&&(t.selectedIndex=i);break;default:null!==n&&n!==e||(n=""),t.value=n}}}}(),d.b("selectExtensions",d.i),d.b("selectExtensions.readValue",d.i.p),d.b("selectExtensions.writeValue",d.i.X),d.g=function(){function e(e){e=d.a.ta(e),123===e.charCodeAt(0)&&(e=e.slice(1,-1));var t,n,o=[],s=e.match(r),l=0;if(s){s.push(",");for(var c,u=0;c=s[u];++u){var p=c.charCodeAt(0);if(44===p){if(0>=l){t&&o.push(n?{key:t,value:n.join("")}:{unknown:t}),t=n=l=0;continue}}else if(58===p){if(!n)continue}else if(47===p&&u&&1<c.length)(p=s[u-1].match(a))&&!i[p[0]]&&(e=e.substr(e.indexOf(c)+1),s=e.match(r),s.push(","),u=-1,c="/");else if(40===p||123===p||91===p)++l;else if(41===p||125===p||93===p)--l;else if(!t&&!n){t=34===p||39===p?c.slice(1,-1):c;continue}n?n.push(c):n=[c]}}return o}var t=["true","false","null","undefined"],n=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,r=RegExp("\"(?:[^\"\\\\]|\\\\.)*\"|'(?:[^'\\\\]|\\\\.)*'|/(?:[^/\\\\]|\\\\.)*/w*|[^\\s:,/][^,\"'{}()/:[\\]]*[^\\s,\"'{}()/:[\\]]|[^\\s]","g"),a=/[\])"'A-Za-z0-9_$]+$/,i={in:1,return:1,typeof:1},o={};return{aa:[],W:o,Ra:e,qa:function(r,a){function i(e,r){var a,u=d.getBindingHandler(e);(u&&u.preprocess?r=u.preprocess(r,e,i):1)&&((u=o[e])&&(a=r,0<=d.a.l(t,a)?a=!1:(u=a.match(n),a=null!==u&&(u[1]?"Object("+u[1]+")"+u[2]:a)),u=a),u&&l.push("'"+e+"':function(_z){"+a+"=_z}"),c&&(r="function(){return "+r+" }"),s.push("'"+e+"':"+r))}a=a||{};var s=[],l=[],c=a.valueAccessors,u="string"==typeof r?e(r):r;return d.a.r(u,function(e){i(e.key||e.unknown,e.value)}),l.length&&i("_ko_property_writers","{"+l.join(",")+" }"),s.join(",")},bc:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},va:function(e,t,n,r,a){e&&d.v(e)?!d.ub(e)||a&&e.o()===r||e(r):(e=t.get("_ko_property_writers"))&&e[n]&&e[n](r)}}}(),d.b("expressionRewriting",d.g),d.b("expressionRewriting.bindingRewriteValidators",d.g.aa),d.b("expressionRewriting.parseObjectLiteral",d.g.Ra),d.b("expressionRewriting.preProcessBindings",d.g.qa),d.b("expressionRewriting._twoWayBindings",d.g.W),d.b("jsonExpressionRewriting",d.g),d.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",d.g.qa),function(){function e(e){return 8==e.nodeType&&o.test(i?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&s.test(i?e.text:e.nodeValue)}function r(n,r){for(var a=n,i=1,o=[];a=a.nextSibling;){if(t(a)&&(i--,0===i))return o;o.push(a),e(a)&&i++}if(!r)throw Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function a(e,t){var n=r(e,t);return n?0<n.length?n[n.length-1].nextSibling:e.nextSibling:null}var i=n&&"<!--test-->"===n.createComment("test").text,o=i?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,s=i?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};d.e={Q:{},childNodes:function(t){return e(t)?r(t):t.childNodes},da:function(t){if(e(t)){t=d.e.childNodes(t);for(var n=0,r=t.length;n<r;n++)d.removeNode(t[n])}else d.a.Fa(t)},U:function(t,n){if(e(t)){d.e.da(t);for(var r=t.nextSibling,a=0,i=n.length;a<i;a++)r.parentNode.insertBefore(n[a],r)}else d.a.U(t,n)},yb:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},rb:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):d.e.yb(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=a(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},Xb:e,lc:function(e){return(e=(i?e.text:e.nodeValue).match(o))?e[1]:null},wb:function(n){if(l[d.a.B(n)]){var r=n.firstChild;if(r)do if(1===r.nodeType){var i;i=r.firstChild;var o=null;if(i)do if(o)o.push(i);else if(e(i)){var s=a(i,!0);s?i=s:o=[i]}else t(i)&&(o=[i]);while(i=i.nextSibling);if(i=o)for(o=r.nextSibling,s=0;s<i.length;s++)o?n.insertBefore(i[s],o):n.appendChild(i[s])}while(r=r.nextSibling)}}}}(),d.b("virtualElements",d.e),d.b("virtualElements.allowedBindings",d.e.Q),d.b("virtualElements.emptyNode",d.e.da),d.b("virtualElements.insertAfter",d.e.rb),d.b("virtualElements.prepend",d.e.yb),d.b("virtualElements.setDomNodeChildren",d.e.U),function(){d.J=function(){this.Nb={}},d.a.extend(d.J.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute("data-bind");case 8:return d.e.Xb(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute("data-bind");case 8:return d.e.lc(e);default:return null}},parseBindingsString:function(e,t,n,r){try{var a,i=this.Nb,o=e+(r&&r.valueAccessors||"");if(!(a=i[o])){var s,l="with($context){with($data||{}){return{"+d.g.qa(e,r)+"}}}";s=new Function("$context","$element",l),a=i[o]=s}return a(t,n)}catch(t){throw t.message="Unable to parse bindings.\nBindings value: "+e+"\nMessage: "+t.message,t}}}),d.J.instance=new d.J}(),d.b("bindingProvider",d.J),function(){function n(e){return function(){return e}}function r(e){return e()}function i(e){return d.a.Oa(d.k.t(e),function(t,n){return function(){return e()[n]}})}function o(e,t){return i(this.getBindings.bind(this,e,t))}function s(e,t,n){var r,a=d.e.firstChild(t),i=d.J.instance,o=i.preprocessNode;if(o){for(;r=a;)a=d.e.nextSibling(r),o.call(i,r);a=d.e.firstChild(t)}for(;r=a;)a=d.e.nextSibling(r),l(e,r,n)}function l(e,t,n){var r=!0,a=1===t.nodeType;a&&d.e.wb(t),(a&&n||d.J.instance.nodeHasBindings(t))&&(r=u(t,null,e,n).shouldBindDescendants),r&&!f[d.a.B(t)]&&s(e,t,!a)}function c(e){var t=[],n={},r=[];return d.a.A(e,function a(i){if(!n[i]){var o=d.getBindingHandler(i);o&&(o.after&&(r.push(i),d.a.r(o.after,function(t){if(e[t]){if(-1!==d.a.l(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));a(t)}}),r.length--),t.push({key:i,pb:o})),n[i]=!0}}),t}function u(t,n,a,i){var s=d.a.f.get(t,m);if(!n){if(s)throw Error("You cannot apply bindings multiple times to the same element.");d.a.f.set(t,m,!0)}!s&&i&&d.Eb(t,a);var l;if(n&&"function"!=typeof n)l=n;else{var u=d.J.instance,p=u.getBindingAccessors||o,f=d.h(function(){return(l=n?n(a,t):p.call(u,t,a))&&a.D&&a.D(),l},null,{G:t});l&&f.ga()||(f=null)}var h;if(l){var g=f?function(e){return function(){return r(f()[e])}}:function(e){return l[e]},v=function(){return d.a.Oa(f?f():l,r)};v.get=function(e){return l[e]&&r(g(e))},v.has=function(e){return e in l},i=c(l),d.a.r(i,function(n){var r=n.pb.init,i=n.pb.update,o=n.key;if(8===t.nodeType&&!d.e.Q[o])throw Error("The binding '"+o+"' cannot be used with virtual elements");try{"function"==typeof r&&d.k.t(function(){var n=r(t,g(o),v,a.$data,a);if(n&&n.controlsDescendantBindings){if(h!==e)throw Error("Multiple bindings ("+h+" and "+o+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=o}}),"function"==typeof i&&d.h(function(){i(t,g(o),v,a.$data,a)},null,{G:t})}catch(e){throw e.message='Unable to process binding "'+o+": "+l[o]+'"\nMessage: '+e.message,e}})}return{shouldBindDescendants:h===e}}function p(e){return e&&e instanceof d.I?e:new d.I(e)}d.d={};var f={script:!0};d.getBindingHandler=function(e){return d.d[e]},d.I=function(t,n,r,a){var i,o=this,s="function"==typeof t&&!d.v(t),l=d.h(function(){var e=s?t():t,i=d.a.c(e);return n?(n.D&&n.D(),d.a.extend(o,n),l&&(o.D=l)):(o.$parents=[],o.$root=i,o.ko=d),o.$rawData=e,o.$data=i,r&&(o[r]=i),a&&a(o,n,i),o.$data},null,{Da:function(){return i&&!d.a.eb(i)},G:!0});l.ga()&&(o.D=l,l.equalityComparer=null,i=[],l.Jb=function(t){i.push(t),d.a.u.ja(t,function(t){d.a.ma(i,t),i.length||(l.F(),o.D=l=e)})})},d.I.prototype.createChildContext=function(e,t,n){return new d.I(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},d.I.prototype.extend=function(e){return new d.I(this.D||this.$data,this,null,function(t,n){t.$rawData=n.$rawData,
d.a.extend(t,"function"==typeof e?e():e)})};var m=d.a.f.L(),h=d.a.f.L();d.Eb=function(e,t){return 2!=arguments.length?d.a.f.get(e,h):(d.a.f.set(e,h,t),void(t.D&&t.D.Jb(e)))},d.xa=function(e,t,n){return 1===e.nodeType&&d.e.wb(e),u(e,t,p(n),!0)},d.Lb=function(e,t,r){return r=p(r),d.xa(e,"function"==typeof t?i(t.bind(null,r,e)):d.a.Oa(t,n),r)},d.gb=function(e,t){1!==t.nodeType&&8!==t.nodeType||s(p(e),t,!0)},d.fb=function(e,n){if(!a&&t.jQuery&&(a=t.jQuery),n&&1!==n.nodeType&&8!==n.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");n=n||t.document.body,l(p(e),n,!0)},d.Ca=function(t){switch(t.nodeType){case 1:case 8:var n=d.Eb(t);if(n)return n;if(t.parentNode)return d.Ca(t.parentNode)}return e},d.Pb=function(t){return(t=d.Ca(t))?t.$data:e},d.b("bindingHandlers",d.d),d.b("applyBindings",d.fb),d.b("applyBindingsToDescendants",d.gb),d.b("applyBindingAccessorsToNode",d.xa),d.b("applyBindingsToNode",d.Lb),d.b("contextFor",d.Ca),d.b("dataFor",d.Pb)}();var g={class:"className",for:"htmlFor"};d.d.attr={update:function(t,n){var r=d.a.c(n())||{};d.a.A(r,function(n,r){r=d.a.c(r);var a=!1===r||null===r||r===e;a&&t.removeAttribute(n),8>=d.a.oa&&n in g?(n=g[n],a?t.removeAttribute(n):t[n]=r):a||t.setAttribute(n,r.toString()),"name"===n&&d.a.Cb(t,a?"":r.toString())})}},function(){d.d.checked={after:["value","attr"],init:function(t,n,r){function a(){return r.has("checkedValue")?d.a.c(r.get("checkedValue")):t.value}function i(){var e=t.checked,i=p?a():e;if(!d.ca.pa()&&(!l||e)){var o=d.k.t(n);c?u!==i?(e&&(d.a.Y(o,i,!0),d.a.Y(o,u,!1)),u=i):d.a.Y(o,i,e):d.g.va(o,r,"checked",i,!0)}}function o(){var e=d.a.c(n());t.checked=c?0<=d.a.l(e,a()):s?e:a()===e}var s="checkbox"==t.type,l="radio"==t.type;if(s||l){var c=s&&d.a.c(n())instanceof Array,u=c?a():e,p=l||c;l&&!t.name&&d.d.uniqueName.init(t,function(){return!0}),d.ba(i,null,{G:t}),d.a.q(t,"click",i),d.ba(o,null,{G:t})}}},d.g.W.checked=!0,d.d.checkedValue={update:function(e,t){e.value=d.a.c(t())}}}(),d.d.css={update:function(e,t){var n=d.a.c(t());"object"==typeof n?d.a.A(n,function(t,n){n=d.a.c(n),d.a.ua(e,t,n)}):(n=String(n||""),d.a.ua(e,e.__ko__cssValue,!1),e.__ko__cssValue=n,d.a.ua(e,n,!0))}},d.d.enable={update:function(e,t){var n=d.a.c(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},d.d.disable={update:function(e,t){d.d.enable.update(e,function(){return!d.a.c(t())})}},d.d.event={init:function(e,t,n,r,a){var i=t()||{};d.a.A(i,function(i){"string"==typeof i&&d.a.q(e,i,function(e){var o,s=t()[i];if(s){try{var l=d.a.R(arguments);r=a.$data,l.unshift(r),o=s.apply(r,l)}finally{!0!==o&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}!1===n.get(i+"Bubble")&&(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},d.d.foreach={vb:function(e){return function(){var t=e(),n=d.a.Sa(t);return n&&"number"!=typeof n.length?(d.a.c(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:d.K.Ja}):{foreach:t,templateEngine:d.K.Ja}}},init:function(e,t){return d.d.template.init(e,d.d.foreach.vb(t))},update:function(e,t,n,r,a){return d.d.template.update(e,d.d.foreach.vb(t),n,r,a)}},d.g.aa.foreach=!1,d.e.Q.foreach=!0,d.d.hasfocus={init:function(e,t,n){function r(r){e.__ko_hasfocusUpdating=!0;var a=e.ownerDocument;if("activeElement"in a){var i;try{i=a.activeElement}catch(e){i=a.body}r=i===e}a=t(),d.g.va(a,n,"hasfocus",r,!0),e.__ko_hasfocusLastValue=r,e.__ko_hasfocusUpdating=!1}var a=r.bind(null,!0),i=r.bind(null,!1);d.a.q(e,"focus",a),d.a.q(e,"focusin",a),d.a.q(e,"blur",i),d.a.q(e,"focusout",i)},update:function(e,t){var n=!!d.a.c(t());e.__ko_hasfocusUpdating||e.__ko_hasfocusLastValue===n||(n?e.focus():e.blur(),d.k.t(d.a.ha,null,[e,n?"focusin":"focusout"]))}},d.g.W.hasfocus=!0,d.d.hasFocus=d.d.hasfocus,d.g.W.hasFocus=!0,d.d.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){d.a.Va(e,t())}},u("if"),u("ifnot",!1,!0),u("with",!0,!1,function(e,t){return e.createChildContext(t)});var v={};d.d.options={init:function(e){if("select"!==d.a.B(e))throw Error("options binding applies only to SELECT elements");for(;0<e.length;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(t,n,r){function a(){return d.a.la(t.options,function(e){return e.selected})}function i(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function o(e,n){if(p.length){var r=0<=d.a.l(p,d.i.p(n[0]));d.a.Db(n[0],r),f&&!r&&d.k.t(d.a.ha,null,[t,"change"])}}var s=0!=t.length&&t.multiple?t.scrollTop:null,l=d.a.c(n()),c=r.get("optionsIncludeDestroyed");n={};var u,p;p=t.multiple?d.a.ya(a(),d.i.p):0<=t.selectedIndex?[d.i.p(t.options[t.selectedIndex])]:[],l&&("undefined"==typeof l.length&&(l=[l]),u=d.a.la(l,function(t){return c||t===e||null===t||!d.a.c(t._destroy)}),r.has("optionsCaption")&&(l=d.a.c(r.get("optionsCaption")),null!==l&&l!==e&&u.unshift(v)));var f=!1;n.beforeRemove=function(e){t.removeChild(e)},l=o,r.has("optionsAfterRender")&&(l=function(t,n){o(0,n),d.k.t(r.get("optionsAfterRender"),null,[n[0],t!==v?t:e])}),d.a.Ua(t,u,function(n,a,o){return o.length&&(p=o[0].selected?[d.i.p(o[0])]:[],f=!0),a=t.ownerDocument.createElement("option"),n===v?(d.a.Xa(a,r.get("optionsCaption")),d.i.X(a,e)):(o=i(n,r.get("optionsValue"),n),d.i.X(a,d.a.c(o)),n=i(n,r.get("optionsText"),o),d.a.Xa(a,n)),[a]},n,l),d.k.t(function(){r.get("valueAllowUnset")&&r.has("value")?d.i.X(t,d.a.c(r.get("value")),!0):(t.multiple?p.length&&a().length<p.length:p.length&&0<=t.selectedIndex?d.i.p(t.options[t.selectedIndex])!==p[0]:p.length||0<=t.selectedIndex)&&d.a.ha(t,"change")}),d.a.Tb(t),s&&20<Math.abs(s-t.scrollTop)&&(t.scrollTop=s)}},d.d.options.Pa=d.a.f.L(),d.d.selectedOptions={after:["options","foreach"],init:function(e,t,n){d.a.q(e,"change",function(){var r=t(),a=[];d.a.r(e.getElementsByTagName("option"),function(e){e.selected&&a.push(d.i.p(e))}),d.g.va(r,n,"selectedOptions",a)})},update:function(e,t){if("select"!=d.a.B(e))throw Error("values binding applies only to SELECT elements");var n=d.a.c(t());n&&"number"==typeof n.length&&d.a.r(e.getElementsByTagName("option"),function(e){var t=0<=d.a.l(n,d.i.p(e));d.a.Db(e,t)})}},d.g.W.selectedOptions=!0,d.d.style={update:function(e,t){var n=d.a.c(t()||{});d.a.A(n,function(t,n){n=d.a.c(n),e.style[t]=n||""})}},d.d.submit={init:function(e,t,n,r,a){if("function"!=typeof t())throw Error("The value for a submit binding must be a function");d.a.q(e,"submit",function(n){var r,i=t();try{r=i.call(a.$data,e)}finally{!0!==r&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},d.d.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){d.a.Xa(e,t())}},d.e.Q.text=!0,d.d.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++d.d.uniqueName.Ob;d.a.Cb(e,n)}}},d.d.uniqueName.Ob=0,d.d.value={after:["options","foreach"],init:function(e,t,n){function r(){o=!1;var r=t(),a=d.i.p(e);d.g.va(r,n,"value",a)}var a=["change"],i=n.get("valueUpdate"),o=!1;i&&("string"==typeof i&&(i=[i]),d.a.$(a,i),a=d.a.ib(a)),!d.a.oa||"input"!=e.tagName.toLowerCase()||"text"!=e.type||"off"==e.autocomplete||e.form&&"off"==e.form.autocomplete||-1!=d.a.l(a,"propertychange")||(d.a.q(e,"propertychange",function(){o=!0}),d.a.q(e,"focus",function(){o=!1}),d.a.q(e,"blur",function(){o&&r()})),d.a.r(a,function(t){var n=r;d.a.kc(t,"after")&&(n=function(){setTimeout(r,0)},t=t.substring(5)),d.a.q(e,t,n)})},update:function(e,t,n){var r=d.a.c(t());if(t=d.i.p(e),r!==t)if("select"===d.a.B(e)){var a=n.get("valueAllowUnset");n=function(){d.i.X(e,r,a)},n(),a||r===d.i.p(e)?setTimeout(n,0):d.k.t(d.a.ha,null,[e,"change"])}else d.i.X(e,r)}},d.g.W.value=!0,d.d.visible={update:function(e,t){var n=d.a.c(t()),r="none"!=e.style.display;n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},function(e){d.d[e]={init:function(t,n,r,a,i){return d.d.event.init.call(this,t,function(){var t={};return t[e]=n(),t},r,a,i)}}}("click"),d.C=function(){},d.C.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource")},d.C.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock")},d.C.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||n;var r=t.getElementById(e);if(!r)throw Error("Cannot find template with ID "+e);return new d.n.j(r)}if(1==e.nodeType||8==e.nodeType)return new d.n.Z(e);throw Error("Unknown template type: "+e)},d.C.prototype.renderTemplate=function(e,t,n,r){return e=this.makeTemplateSource(e,r),this.renderTemplateSource(e,t,n)},d.C.prototype.isTemplateRewritten=function(e,t){return!1===this.allowTemplateRewriting||this.makeTemplateSource(e,t).data("isRewritten")},d.C.prototype.rewriteTemplate=function(e,t,n){e=this.makeTemplateSource(e,n),t=t(e.text()),e.text(t),e.data("isRewritten",!0)},d.b("templateEngine",d.C),d.Za=function(){function e(e,t,n,r){e=d.g.Ra(e);for(var a=d.g.aa,i=0;i<e.length;i++){var o=e[i].key;if(a.hasOwnProperty(o)){var s=a[o];if("function"==typeof s){if(o=s(e[i].value))throw Error(o)}else if(!s)throw Error("This template engine does not support the '"+o+"' binding within its templates")}}return n="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+d.g.qa(e,{valueAccessors:!0})+" } })()},'"+n.toLowerCase()+"')",r.createJavaScriptEvaluatorBlock(n)+t}var t=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,n=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{Ub:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return d.Za.dc(e,t)},n)},dc:function(r,a){return r.replace(t,function(t,n,r,i,o){return e(o,n,r,a)}).replace(n,function(t,n){return e(n,"<!-- ko -->","#comment",a)})},Mb:function(e,t){return d.w.Na(function(n,r){var a=n.nextSibling;a&&a.nodeName.toLowerCase()===t&&d.xa(a,e,r)})}}}(),d.b("__tr_ambtns",d.Za.Mb),function(){d.n={},d.n.j=function(e){this.j=e},d.n.j.prototype.text=function(){var e=d.a.B(this.j),e="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.j[e];var t=arguments[0];"innerHTML"===e?d.a.Va(this.j,t):this.j[e]=t};var t=d.a.f.L()+"_";d.n.j.prototype.data=function(e){return 1===arguments.length?d.a.f.get(this.j,t+e):void d.a.f.set(this.j,t+e,arguments[1])};var n=d.a.f.L();d.n.Z=function(e){this.j=e},d.n.Z.prototype=new d.n.j,d.n.Z.prototype.text=function(){if(0==arguments.length){var t=d.a.f.get(this.j,n)||{};return t.$a===e&&t.Ba&&(t.$a=t.Ba.innerHTML),t.$a}d.a.f.set(this.j,n,{$a:arguments[0]})},d.n.j.prototype.nodes=function(){return 0==arguments.length?(d.a.f.get(this.j,n)||{}).Ba:void d.a.f.set(this.j,n,{Ba:arguments[0]})},d.b("templateSources",d.n),d.b("templateSources.domElement",d.n.j),d.b("templateSources.anonymousTemplate",d.n.Z)}(),function(){function t(e,t,n){var r;for(t=d.e.nextSibling(t);e&&(r=e)!==t;)e=d.e.nextSibling(r),n(r,e)}function n(e,n){if(e.length){var r=e[0],a=e[e.length-1],i=r.parentNode,o=d.J.instance,s=o.preprocessNode;if(s){if(t(r,a,function(e,t){var n=e.previousSibling,i=s.call(o,e);i&&(e===r&&(r=i[0]||t),e===a&&(a=i[i.length-1]||n))}),e.length=0,!r)return;r===a?e.push(r):(e.push(r,a),d.a.ea(e,i))}t(r,a,function(e){1!==e.nodeType&&8!==e.nodeType||d.fb(n,e)}),t(r,a,function(e){1!==e.nodeType&&8!==e.nodeType||d.w.Ib(e,[n])}),d.a.ea(e,i)}}function r(e){return e.nodeType?e:0<e.length?e[0]:null}function a(e,t,a,o,s){s=s||{};var l=e&&r(e),l=l&&l.ownerDocument,c=s.templateEngine||i;if(d.Za.Ub(a,c,l),a=c.renderTemplate(a,o,s,l),"number"!=typeof a.length||0<a.length&&"number"!=typeof a[0].nodeType)throw Error("Template engine must return an array of DOM nodes");switch(l=!1,t){case"replaceChildren":d.e.U(e,a),l=!0;break;case"replaceNode":d.a.Bb(e,a),l=!0;break;case"ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+t)}return l&&(n(a,o),s.afterRender&&d.k.t(s.afterRender,null,[a,o.$data])),a}var i;d.Wa=function(t){if(t!=e&&!(t instanceof d.C))throw Error("templateEngine must inherit from ko.templateEngine");i=t},d.Ta=function(t,n,o,s,l){if(o=o||{},(o.templateEngine||i)==e)throw Error("Set a template engine before calling renderTemplate");if(l=l||"replaceChildren",s){var c=r(s);return d.h(function(){var e=n&&n instanceof d.I?n:new d.I(d.a.c(n)),i=d.v(t)?t():"function"==typeof t?t(e.$data,e):t,e=a(s,l,i,e,o);"replaceNode"==l&&(s=e,c=r(s))},null,{Da:function(){return!c||!d.a.Ea(c)},G:c&&"replaceNode"==l?c.parentNode:c})}return d.w.Na(function(e){d.Ta(t,n,o,e,"replaceNode")})},d.jc=function(t,r,i,o,s){function l(e,t){n(t,u),i.afterRender&&i.afterRender(t,e)}function c(e,n){u=s.createChildContext(e,i.as,function(e){e.$index=n});var r="function"==typeof t?t(e,u):t;return a(null,"ignoreTargetNode",r,u,i)}var u;return d.h(function(){var t=d.a.c(r)||[];"undefined"==typeof t.length&&(t=[t]),t=d.a.la(t,function(t){return i.includeDestroyed||t===e||null===t||!d.a.c(t._destroy)}),d.k.t(d.a.Ua,null,[o,t,c,i,l])},null,{G:o})};var o=d.a.f.L();d.d.template={init:function(e,t){var n=d.a.c(t());return"string"==typeof n||n.name?d.e.da(e):(n=d.e.childNodes(e),n=d.a.ec(n),new d.n.Z(e).nodes(n)),{controlsDescendantBindings:!0}},update:function(t,n,r,a,i){var s,l=n();n=d.a.c(l),r=!0,a=null,"string"==typeof n?n={}:(l=n.name,"if"in n&&(r=d.a.c(n.if)),r&&"ifnot"in n&&(r=!d.a.c(n.ifnot)),s=d.a.c(n.data)),"foreach"in n?a=d.jc(l||t,r&&n.foreach||[],n,t,i):r?(i="data"in n?i.createChildContext(s,n.as):i,a=d.Ta(l||t,i,n,t)):d.e.da(t),i=a,(s=d.a.f.get(t,o))&&"function"==typeof s.F&&s.F(),d.a.f.set(t,o,i&&i.ga()?i:e)}},d.g.aa.template=function(e){return e=d.g.Ra(e),1==e.length&&e[0].unknown||d.g.bc(e,"name")?null:"This template engine does not support anonymous templates nested within its templates"},d.e.Q.template=!0}(),d.b("setTemplateEngine",d.Wa),d.b("renderTemplate",d.Ta),d.a.nb=function(e,t,n){if(e.length&&t.length){var r,a,i,o,s;for(r=a=0;(!n||r<n)&&(o=e[a]);++a){for(i=0;s=t[i];++i)if(o.value===s.value){o.moved=s.index,s.moved=o.index,t.splice(i,1),r=i=0;break}r+=i}}},d.a.Aa=function(){function e(e,t,n,r,a){var i,o,s,l,c,u=Math.min,p=Math.max,f=[],m=e.length,h=t.length,g=h-m||1,v=m+h+1;for(i=0;i<=m;i++)for(l=s,f.push(s=[]),c=u(h,i+g),o=p(0,i-1);o<=c;o++)s[o]=o?i?e[i-1]===t[o-1]?l[o-1]:u(l[o]||v,s[o-1]||v)+1:o+1:i+1;for(u=[],p=[],g=[],i=m,o=h;i||o;)h=f[i][o]-1,o&&h===f[i][o-1]?p.push(u[u.length]={status:n,value:t[--o],index:o}):i&&h===f[i-1][o]?g.push(u[u.length]={status:r,value:e[--i],index:i}):(--o,--i,a.sparse||u.push({status:"retained",value:t[o]}));return d.a.nb(p,g,10*m),u.reverse()}return function(t,n,r){return r="boolean"==typeof r?{dontLimitMoves:r}:r||{},t=t||[],n=n||[],t.length<=n.length?e(t,n,"added","deleted",r):e(n,t,"deleted","added",r)}}(),d.b("utils.compareArrays",d.a.Aa),function(){function t(t,n,r,a,i){var o=[],s=d.h(function(){var e=n(r,i,d.a.ea(o,t))||[];0<o.length&&(d.a.Bb(o,e),a&&d.k.t(a,null,[r,e,i])),o.length=0,d.a.$(o,e)},null,{G:t,Da:function(){return!d.a.eb(o)}});return{S:o,h:s.ga()?s:e}}var n=d.a.f.L();d.a.Ua=function(r,a,i,o,s){function l(e,t){_=p[t],v!==t&&(E[e]=_),_.Ia(v++),d.a.ea(_.S,r),h.push(_),b.push(_)}function c(e,t){if(e)for(var n=0,r=t.length;n<r;n++)t[n]&&d.a.r(t[n].S,function(r){e(r,n,t[n].ka)})}a=a||[],o=o||{};var u=d.a.f.get(r,n)===e,p=d.a.f.get(r,n)||[],f=d.a.ya(p,function(e){return e.ka}),m=d.a.Aa(f,a,o.dontLimitMoves),h=[],g=0,v=0,y=[],b=[];a=[];for(var _,C,w,E=[],f=[],S=0;C=m[S];S++)switch(w=C.moved,C.status){case"deleted":w===e&&(_=p[g],_.h&&_.h.F(),y.push.apply(y,d.a.ea(_.S,r)),o.beforeRemove&&(a[S]=_,b.push(_))),g++;break;case"retained":l(S,g++);break;case"added":w!==e?l(S,w):(_={ka:C.value,Ia:d.m(v++)},h.push(_),b.push(_),u||(f[S]=_))}c(o.beforeMove,E),d.a.r(y,o.beforeRemove?d.M:d.removeNode);for(var I,S=0,u=d.e.firstChild(r);_=b[S];S++){for(_.S||d.a.extend(_,t(r,i,_.ka,s,_.Ia)),g=0;m=_.S[g];u=m.nextSibling,I=m,g++)m!==u&&d.e.rb(r,m,I);!_.Zb&&s&&(s(_.ka,_.S,_.Ia),_.Zb=!0)}c(o.beforeRemove,a),c(o.afterMove,E),c(o.afterAdd,f),d.a.f.set(r,n,h)}}(),d.b("utils.setDomNodeChildrenFromArrayMapping",d.a.Ua),d.K=function(){this.allowTemplateRewriting=!1},d.K.prototype=new d.C,d.K.prototype.renderTemplateSource=function(e){var t=(9>d.a.oa?0:e.nodes)?e.nodes():null;return t?d.a.R(t.cloneNode(!0).childNodes):(e=e.text(),d.a.Qa(e))},d.K.Ja=new d.K,d.Wa(d.K.Ja),d.b("nativeTemplateEngine",d.K),function(){d.La=function(){var e=this.ac=function(){if(!a||!a.tmpl)return 0;try{if(0<=a.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(e){}return 1}();this.renderTemplateSource=function(t,r,i){if(i=i||{},2>e)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var o=t.data("precompiled");return o||(o=t.text()||"",o=a.template(null,"{{ko_with $item.koBindingContext}}"+o+"{{/ko_with}}"),t.data("precompiled",o)),t=[r.$data],r=a.extend({koBindingContext:r},i.templateOptions),r=a.tmpl(o,t,r),r.appendTo(n.createElement("div")),a.fragments={},r},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){n.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},0<e&&(a.tmpl.tag.ko_code={open:"__.push($1 || '');"},a.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},d.La.prototype=new d.C;var e=new d.La;0<e.ac&&d.Wa(e),d.b("jqueryTmplTemplateEngine",d.La)}()})}()}(),define("map/MapModel",["dojo/_base/declare","main/config","map/config","knockout"],function(e,t,n,r){var a=e(null,{constructor:function(e){a.vm={},a.root=e,a.vm.showDMSInputs=r.observable(!0),a.vm.showLatLongInputs=r.observable(!1),a.vm.showBasemapGallery=r.observable(!1),a.vm.showLocatorOptions=r.observable(!1),a.vm.showSharingOptions=r.observable(!1),a.vm.showClearPinsOption=r.observable(!1),a.vm.currentLatitude=r.observable(),a.vm.currentLongitude=r.observable(),a.vm.suitabilitySettings=r.observable(n.customSuitabilityDefaults),a.vm.uploadModalHeader=r.observable(n.uploadForm.title),a.vm.shapefileUploadInstructionHeader=r.observable(n.uploadForm.shapefileHeader),a.vm.csvUploadInstructionHeader=r.observable(n.uploadForm.csvHeader),a.vm.shapefileInstructions=r.observableArray(n.uploadForm.shapefileInstructions),a.vm.csvInstructions=r.observable(n.uploadForm.csvInstructions),a.vm.coordinatesModalHeader=r.observable(n.coordinatesDialog.coordinatesModalHeader),a.vm.coordinatesEnterButton=r.observable(n.coordinatesDialog.coordinatesEnterButton),a.vm.latitudePlaceholder=r.observable(n.coordinatesDialog.latitudePlaceholder),a.vm.longitudePlaceholder=r.observable(n.coordinatesDialog.longitudePlaceholder),a.vm.tcdModalLabel=r.observable(n.tcdModal.label),a.vm.tcdDensityValue=r.observable(n.tcdModal.densityValue),a.vm.allCountries=r.observableArray([]),a.vm.lowerLevelAdminUnits=r.observableArray([]),a.vm.drawToolsEnabled=r.observable(!1),r.applyBindings(a.vm,document.getElementById(e))}});return a.get=function(e){return"model"===e?a.vm:a.vm[e]()},a.set=function(e,t){a.vm[e](t)},a.applyTo=function(e){r.applyBindings(a.vm,document.getElementById(e))},a.initialize=function(e){return a.instance||(a.instance=new a(e)),a.instance},a}),define("utils/Analytics",[],function(){"use strict";return{sendEvent:function(e,t,n,r){var a={hitType:"event",eventCategory:e,eventAction:t,eventLabel:n,eventValue:r||1};ga&&(ga("A.send",a),ga("B.send",a),ga("C.send",a))},sendPageview:function(e,t){var n={hitType:"pageview"};e&&(n.page=e),t&&(n.title=t),ga&&(ga("A.send",n),ga("B.send",n),ga("C.send",n))}}}),define("map/Uploader",["map/config","map/Symbols","utils/GeoHelper","analysis/config","analysis/WizardStore","utils/Analytics","dojo/on","dojo/sniff","dojo/dom-class","dijit/registry","dojo/store/Memory","dojo/dom-construct","dijit/form/ComboBox","dojox/data/CsvStore","esri/request","esri/graphic","esri/geometry/Point","esri/geometry/Extent","esri/geometry/Polygon","esri/geometry/scaleUtils","esri/geometry/webMercatorUtils"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g,v,y,b,_){"use strict";var C,w=r.STORE_KEYS,E={toggle:function(){l.toggle("upload-modal","active"),C?(C.remove(),C=void 0):C=o.once(document.querySelector("#upload-modal .close-icon"),"click",this.toggle)},close:function(){return C&&(C.remove(),C=void 0),l.remove("upload-modal","active")},beginUpload:function(e){if(""!==e.target.value){var t=e.target.value.toLowerCase();if(s("ie")){var n=t.split("\\");t=n[n.length-1]}t.indexOf(".zip")<0?this.uploadCSV(e):this.uploadShapefile(t,e)}},uploadCSV:function(e){var t,n,r,a=e.target.files[0],o=new FileReader,s=[],l=this;t=function(){r=new f({data:o.result,separator:","}),r.fetch({onComplete:function(e){if(e.length<1)throw new Error("No items found in CSV file.");i.sendEvent("Event","Upload Data","User uploaded CSV.",1),n=r.getAttributes(e[0]),n.forEach(function(e){s.push({name:e,id:e})}),l.generateDropdown(s,function(t){t&&l.formatCSVDataForStore(r,e,t)})},onError:l.uploadError})},o.onload=t,o.readAsText(a)},uploadShapefile:function(t,n){var r,a;t=t.split("."),t=t[0].replace("c:\\fakepath\\",""),r={name:t,targetSR:app.map.spatialReference,generalize:!0,maxRecordCount:1e3,reducePrecision:!0,numberOfDigitsAfterDecimal:0,enforceInputFileSizeLimit:!0,enforceOutputJsonSizeLimit:!0},a=b.getExtentForScale(app.map,4e4),r.maxAllowableOffset=a.getWidth()/app.map.width,m({url:e.uploader.portalUrl,content:{f:"json",filetype:"shapefile","callback.html":"callback",publishParameters:JSON.stringify(r)},form:document.getElementById("upload-form"),handleAs:"json",load:this.uploadSuccess.bind(this),error:this.uploadError})},uploadError:function(e){console.error("Error uplaoding data: ",e)},uploadSuccess:function(e,t){var n=e.featureCollection,r=[],a=this;i.sendEvent("Event","Upload Data","User uploaded zip file.",1),n.layers[0].layerDefinition.fields.forEach(function(e){r.push({name:e.name,id:e.alias})}),a.generateDropdown(r,function(e){e&&a.formatFeaturesToStore(n.layers[0].featureSet,e)})},formatCSVDataForStore:function(t,r,i){var o,s,l,c,u,d,p=n.nextCustomFeatureId(),f=[];r.forEach(function(r,a){o={},l=t.getAttributes(r),l.forEach(function(e){c=t.getValue(r,e),o[e]=isNaN(c)?c:parseFloat(c)}),o[e.uploader.labelField]="ID - "+(p+a)+": "+o[i],o.WRI_ID=p+a,o.isRSPO=!1,u=o.Latitude?o.Latitude:o.latitude,d=o.Longitude?o.Longitude:o.longitude,s=n.generatePointGraphicFromGeometric(d,u,o),f.push(s)}),a.set(w.customFeatures,a.get(w.customFeatures).concat(f))},formatFeaturesToStore:function(r,i){var o,s,l,c,u,d=n.nextCustomFeatureId(),p=[];r.features.forEach(function(n,r){n.attributes[e.uploader.labelField]="ID - "+(d+r)+": "+n.attributes[i],n.attributes.WRI_ID=d+r,n.geometry.x?(c=t.getPointSymbol(),o=new g(n.geometry),u=new v(o.x,o.y,o.x,o.y,o.spatialReference),l=l?l.union(u):u,n.attributes.isRSPO=!1):(c=t.getPolygonSymbol(),o=new y(n.geometry),l=l?l.union(o.getExtent()):o.getExtent()),s=new h(o,c,n.attributes),p.push(s)}),a.set(w.customFeatures,a.get(w.customFeatures).concat(p))},resetForm:function(){var e=document.getElementById("uploadNameField");c.byId("uploadNameFieldWidget")&&c.byId("uploadNameFieldWidget").destroy(),e&&d.destroy(e.id),document.getElementById("upload-form").reset()},generateDropdown:function(e,t){var n,r=document.getElementById("postUploadOptions"),a=this;d.create("div",{id:"uploadNameField",innerHTML:'<div id="uploadNameFieldWidget"></div>'},r,"last"),n=new u({data:e}),new p({id:"uploadNameFieldWidget",value:"-- Choose name field --",store:n,searchAttr:"name",onChange:function(e){a.resetForm(),a.toggle(),t(e)}},"uploadNameFieldWidget")}};return E}),define("components/alertsForm/AlertsForm",["react","lodash","analysis/WizardStore","components/alertsForm/config","components/featureList/FeatureList","map/config","map/MapModel","map/Uploader","map/Symbols","utils/GeoHelper","esri/graphic","esri/geometry/Polygon","esri/toolbars/draw","dojo/topic","dojo/dom","dojo/query","dojo/dom-class","dojo/Deferred","dojo/promise/all","dojo/request/xhr","dojox/validate/web"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g,v,y,b,_){var C,w,E,S,I=r.TEXT,L=r.STORE_KEYS;return S=function(){return{features:n.get(L.customFeatures),selectedFeatures:n.get(L.selectedCustomFeatures)}},C=e.createClass({getInitialState:S,componentDidMount:function(){w=new p(app.map),w.on("draw-end",this._drawComplete),n.registerCallback(L.customFeatures,function(){this.setState({features:n.get(L.customFeatures)})}.bind(this)),n.registerCallback(L.selectedCustomFeatures,function(){this.setState({selectedFeatures:n.get(L.selectedCustomFeatures)})}.bind(this)),this.setState(S())},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(S()),this._deactivateToolbar(),this._removeActiveClass())},render:function(){var t=n.get(L.selectedCustomFeatures),i=t.length>0?t.map(function(e){return e.attributes.WRI_label}).join(", "):I.noSelection;return e.DOM.div({className:"relative fill"},e.DOM.div({className:"alerts-form__header"},e.DOM.div({className:"alerts-form__header__title inline-block fill__long border-box padding__long vertical-middle"},I.title),e.DOM.button({onClick:this._toggle,className:"alerts-form__header__exit back-white absolute no-top no-right no-padding fill__long pointer"},e.DOM.img({className:"vertical-middle",src:"app/css/images/close_symbol.png"}))),e.DOM.div({className:"alerts-form__body"},e.DOM.div({className:"padding__wide padding__top"},e.DOM.div({className:"margin__bottom"},r.customArea.instructions),e.DOM.div({className:"text-center margin__bottom"},e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:this._activateToolbar,"data-geometry-type":p.FREEHAND_POLYGON},r.customArea.freehandLabel),e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:this._activateToolbar,"data-geometry-type":p.POLYGON},r.customArea.polyLabel),e.DOM.button({className:"alerts-form__drawing-tool no-border border-radius margin padding pointer",onClick:s.toggle.bind(s),id:"alerts-draw-upload"},r.customArea.uploadLabel))),new a({features:this.state.features,selectedFeatures:this.state.selectedFeatures})),e.DOM.div({className:"alerts-form__footer"},e.DOM.div({className:"inline-block padding__left"},I.selection),e.DOM.div({className:"alerts-form__footer__selection absolute inline-block padding__wide text-gold ellipsis border-box",title:i},i),e.DOM.button({className:"text-white back-orange no-border fill__long pointer absolute no-right no-top",onClick:this._subscribeToAlerts,disabled:0===this.state.selectedFeatures.length},I.subscribe)))},_toggle:function(){f.publish("toggleAlerts")},_activateToolbar:function(e){var t;return t=e.target.dataset?e.target.dataset.geometryType:e.target.getAttribute("data-geometry-type"),this._removeActiveClass(),E===t?void this._deactivateToolbar():(E=t,w.activate(t),g.add(e.target,"active"),void o.set("drawToolsEnabled",!0))},_deactivateToolbar:function(){w.deactivate(),E=void 0,o.set("drawToolsEnabled",!1)},_drawComplete:function(e){if(this._removeActiveClass(),this._deactivateToolbar(),e.geometry){var t=c.nextCustomFeatureId(),a={WRI_ID:t},i=new u(e.geometry,l.getPolygonSymbol(),a);a[r.stepTwo.labelField]="ID - "+t+": Custom drawn feature",n.set(L.customFeatures,n.get(L.customFeatures).concat([i]))}},_removeActiveClass:function(){h(".alerts-form__body .alerts-form__drawing-tool").forEach(function(e){g.remove(e,"active")})},_subscribeToAlerts:function(){n.set(L.alertsDialogActive,!n.get(L.alertsDialogActive))}}),function(t,n){return e.renderComponent(new C(t),document.getElementById(n))}}),define("components/alertsDialog/config",["analysis/config"],function(e){return{STORE_KEYS:e.STORE_KEYS,MAX_INPUT_CHARS:70,IDS:{mount:"subscription-modal",forma:"alerts-forma",fires:"alerts-fires",buffer:"alerts-buffer",email:"alerts-email",subscription:"alerts-subscription"},TEXT:{title:"Subscribe to Alerts",forma:"Monthly Clearance Alerts",fires:"Fire Alerts",selectionLabel:"Selection:",noSelection:"No name available",subscriptionPlaceholder:"Subscription name",subscriptionDefaultLabel:"Use default name",emailPlaceholder:"your_email@example.com",subscribe:"Subscribe",bufferLabel:"Point data selected - buffer area(s) required.",bufferOptionsLabel:"Buffer radius:",bufferOptions:[["50","50km"],["40","40km"],["30","30km"],["20","20km"],["10","10km"]],messagesLabel:"Please fill in the following:\n",messages:{invalidEmail:"You must provide a valid email in the form.",noAreaSelection:"You must select at least one area from the list.",noSelection:"You must select at least one checkbox from the form.",noSelectionName:"You must provide a name for your subscription area.",formaSuccess:"Thank you for subscribing to Forma Alerts.  You should receive a confirmation email soon.",formaFail:"There was an error with your request to subscribe to Forma alerts.  Please try again later.",fireSuccess:"Thank you for subscribing to Fires Alerts.  You should receive a confirmation email soon.",fireFail:"There was an error with your request to subscribe to Fires alerts.  Please try again later."},requiredLabels:{alerts:"* Please select an alert type.",subscription:"* Please name this alert.",email:"* Please enter a valid email."}},requests:{fires:{url:"https://gfw-fires.wri.org/subscribe_by_polygon",options:{method:"POST",handleAs:"json",headers:{"X-Requested-With":null},data:{msg_type:"email",msg_addr:null,area_name:null,features:null}},successMessage:"subscription successful"},forma:{url:"http://gfw-apis.appspot.com/subscribe",options:{method:"POST",data:{topic:"updates/forma",geom:null,email:null}}}}}}),define("components/alertsDialog/alertsDialog",["react","lodash","components/alertsDialog/config","analysis/WizardStore","utils/GeoHelper","utils/Analytics","esri/geometry/Polygon","dojo/dom","dojo/dom-class","dojo/Deferred","dojo/promise/all","dojo/request/xhr","dojox/validate/web"],function(e,t,n,r,a,i,o,s,l,c,u,d,p){var f,m,h,g,v,y=n.STORE_KEYS,b=n.IDS,_=n.TEXT,C=this,w=(t.uniqueId(b.forma),t.uniqueId(b.fires)),E=t.uniqueId(b.buffer),S=t.uniqueId(b.email),I=t.uniqueId(b.subscrpition);return m=function(){return{forma:!1,fires:!1,email:"",subscriptionName:"",features:r.get(y.selectedCustomFeatures),presetFeature:r.get(y.selectedPresetFeature)}},f=e.createClass({displayName:"AlertsDialog",getInitialState:m,componentDidMount:function(){r.registerCallback(y.alertsDialogActive,function(){r.get(y.alertsDialogActive)?l.add(b.mount,"active"):l.remove(b.mount,"active")}.bind(this)),r.registerCallback(y.customFeatures,function(){this.setState({features:r.get(y.selectedCustomFeatures)})}.bind(this)),r.registerCallback(y.selectedCustomFeatures,function(){this.setState({features:r.get(y.selectedCustomFeatures)}),r.set(y.selectedPresetFeature,null)}.bind(this)),r.registerCallback(y.selectedPresetFeature,function(){this.setState({presetFeature:r.get(y.selectedPresetFeature)})}.bind(this)),r.get(y.alertsDialogActive)===!0&&l.add(b.mount,"active")},render:function(){var r,a,i,o,s,l=this.state.features,c=this.state.presetFeature;return null!==c?(a="point"===c.geometry.type,r=c.attributes.WRI_label||c.attributes.Name||c.attributes.name||c.attributes.NAME||c.attributes.Mill_name||_.noSelection):(a=!!t.find(l,function(e){return"point"===e.geometry.type}),r=l.length>0?l.map(function(e){return e.attributes.WRI_label}).join(", "):_.noSelection),a&&(s=e.createElement("div",{className:"margin__bottom"},e.createElement("div",{className:"margin--small__left"},_.bufferLabel),e.createElement("span",{className:"margin--small__left"},_.bufferOptionsLabel),e.createElement("select",{id:E,className:"margin__left"},_.bufferOptions.map(function(t){return e.createElement("option",{value:t[0]},t[1])})))),o=[r===_.noSelection],i=[0===l.length&&null===c,0===this.state.subscriptionName.trim().length,0===this.state.email.trim().length,!p.isEmailAddress(this.state.email),this.state.forma!==!0&&this.state.fires!==!0],disabled=i.indexOf(!0)>-1,g="pb_"+t.random(1,100).toString(),v="pb_"+t.random(1,100).toString(),h=h||g+v,e.createElement("div",{className:"alerts-dialog"
},e.createElement("div",{className:"close-icon",onClick:this._close}),e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"alerts-form__form no-wide border-box"},e.createElement("div",{className:"modal-header"},_.title),e.createElement("div",{className:"margin__bottom margin--small__left"},e.createElement("span",null,_.selectionLabel),e.createElement("span",{className:"padding__left"+(i[0]?" text-red":" text-gold"),title:r},r.substr(0,75),r.length>75?"...":"")),e.createElement("div",{className:"margin--small__wide"},e.createElement("div",{className:"font-12px text-red margin__top",style:{visibility:i[4]?"visible":"hidden"}},_.requiredLabels.alerts)),e.createElement("div",{className:""},e.createElement("label",{className:"margin--small__bottom vertical-middle"},e.createElement("input",{id:w,className:"vertical-middle",type:"checkbox",onChange:this._formChange,checked:this.state.fires}),_.fires)),e.createElement("div",{className:"subscribe-tree-cover-instructions"},e.createElement("span",{class:"fires-instructions"},"Tree Cover Loss Alerts: Please subscribe through the ",e.createElement("a",{href:"http://www.globalforestwatch.org/my_gfw/subscriptions/new",target:"_blank"},"Global Forest Watch Subscriptions App"),". Re-enter your areas of interest and follow the in-app instructions.")),e.createElement("div",{className:"pooh-bear text-center"},e.createElement("div",{className:"pooh-bear"},"Please leave this blank"),e.createElement("input",{id:g,className:"pooh-bear",type:"text",name:"name"})),e.createElement("div",{className:"margin--small__wide font-12px text-red margin__top",style:{visibility:i[1]?"visible":"hidden"}},_.requiredLabels.subscription),e.createElement("div",{className:"text-left margin__bottom margin--small__wide"},e.createElement("input",{id:I,className:"border-medium-gray border-radius",maxLength:toString(n.MAX_INPUT_CHARS),type:"text",onChange:this._formChange,value:this.state.subscriptionName,placeholder:_.subscriptionPlaceholder}),e.createElement("button",{className:"margin__left font-16px text-white back-orange no-border border-radius",onClick:this._setDefaultSubscriptionName,disabled:i[0],style:{display:o[0]?"none":"inline-block"}},_.subscriptionDefaultLabel)),e.createElement("div",{className:"margin--small__wide font-12px text-red margin__top",style:{visibility:i[3]?"visible":"hidden"}},_.requiredLabels.email),e.createElement("div",{className:"text-left margin__bottom margin--small__wide"},e.createElement("input",{id:S,className:"border-medium-gray border-radius",maxLength:toString(n.MAX_INPUT_CHARS),type:"text",onChange:this._formChange,value:this.state.email,placeholder:_.emailPlaceholder})),e.createElement("div",{className:"pooh-bear text-center"},e.createElement("div",{className:"pooh-bear"},"Please do not change this field"),e.createElement("input",{id:v,className:"pooh-bear",type:"text",name:"address",defaultValue:h})),s,e.createElement("div",{className:"text-center margin__bottom"},e.createElement("button",{className:"text-white back-orange no-border border-radius font-16px",onClick:this._subscribe,disabled:disabled},e.createElement("img",{className:"vertical-sub",width:"21px",height:"19px",src:"app/css/images/alert_symbol_"+(disabled?"gray":"white")+".png"}),e.createElement("span",{className:"padding__left"},_.subscribe))))))},_close:function(){r.set(y.alertsDialogActive,!r.get(y.alertsDialogActive))},_formChange:function(e){var t={fires:s.byId(w).checked,subscriptionName:s.byId(I).value,email:s.byId(S).value};this.setState(t)},_subscribeToFires:function(e,r,a){var o=new c,s=_.messages,l=n.requests.fires,u=l.url,p=t.cloneDeep(l.options);return p.data.features=JSON.stringify({rings:e.rings,spatialReference:e.spatialReference}),p.data.msg_addr=a,p.data.area_name=r,d(u,p).then(function(e){o.resolve(e.message&&e.message===l.successMessage?s.fireSuccess:s.fireFail)}),i.sendEvent("Subscribe","Fire Alerts","User is subscribing to Fire Alerts."),o.promise},_subscribeToForma:function(e,r,a){var o=new c,s=_.messages,l=n.requests.forma.url,u=t.cloneDeep(n.requests.forma.options),d=JSON.stringify({topic:u.data.topic,email:a,geom:'{"type": "'+e.type+'", "coordinates":['+JSON.stringify(e.geom)+"]}"}),p=new XMLHttpRequest;return C=this,p.onreadystatechange=function(){4===p.readyState&&o.resolve(JSON.parse(p.response).subscribe?s.formaSuccess:s.formaFail)},p.addEventListener("error",function(){o.resolve(!1)},!1),p.open(u.method,l,!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.send(d),i.sendEvent("Subscribe","Monthly Clearance Alerts","User is subscribing to Monthly Clearance Alerts."),o.promise},_subscribe:function(){if(!(null==s.byId(g)||null==s.byId(v)||s.byId(g).value.length>0||s.byId(v).value!==h)){var e,n,r,i,l=this.state.features,c=this.state.presetFeature,d=[];null!==c?(l=[c],e="point"===l[0].geometry.type):e=!!t.find(l,function(e){return"point"===e.geometry.type}),e?(i=parseInt(s.byId(E).value),r=t.filter(l,function(e){return"point"===e.geometry.type}),r=r.map(function(e){return a.preparePointAsPolygon(e,i)}),r=r.map(function(e){return new o(a.getSpatialReference()).addRing(e.geometry.rings[e.geometry.rings.length-1])}),l=t.filter(l,function(e){return"point"!==e.geometry.type}),n=l.map(function(e){var t=new o(a.getSpatialReference());return t.rings=e.geometry.rings,t}),n=n.concat(r)):n=l.map(function(e){var t=new o(a.getSpatialReference());return t.rings=e.geometry.rings,t}),a.union(n).then(function(e){this.state.fires===!0&&d.push(this._subscribeToFires(e,this.state.subscriptionName.trim(),this.state.email.trim())),u(d).then(function(e){console.log(e.join("\n"))})}.bind(this)),this._close()}},_setDefaultSubscriptionName:function(){var e=null!==this.state.presetFeature?this.state.presetFeature:this.state.features[0],t=e.attributes.WRI_label||e.attributes.Name||e.attributes.NAME||e.attributes.Mill_name||"";this.setState({subscriptionName:t.substr(0,n.MAX_INPUT_CHARS)})}}),function(){return e.render(e.createElement(f,null),s.byId(b.mount))}}),define("analysis/Query",["dojo/Deferred","dojo/_base/array","esri/tasks/query","esri/graphicsUtils","esri/tasks/QueryTask","esri/tasks/StatisticDefinition","analysis/config","map/MapModel"],function(e,t,n,r,a,i,o,s){"use strict";return{getSetupData:function(){this.getAdminUnitData()},getAdminUnitData:function(){function e(e){var n=[];n.push({label:"None",value:"NONE"}),t.forEach(e.features,function(e){n.push({label:e.attributes[l.labelValueField],value:e.attributes[l.labelValueField]})}),s.set("allCountries",n)}var r,a=new n,l=o.adminUnit.countriesQuery;r=new i,r.statisticType=l.statistic.statisticType,r.onStatisticField=l.statistic.onStatisticField,r.outStatisticFieldName=l.statistic.outStatisticFieldName,a.where=l.where,a.returnGeometry=!1,a.outFields=l.outFields,a.orderByFields=l.orderBy,a.outStatistics=[r],a.groupByFieldsForStatistics=l.groupBy,this._query(l.url,a,e,this._queryErrorHandler)},getLowLevelAdminUnitData:function(t){function r(e){e.features.length>0&&(c=l._formatData(s,e.features),a.resolve(c))}var a=new e,i=new n,s=o.adminUnit.lowLevelUnitsQuery,l=this,c=[];return i.where=s.whereField+" = '"+t+"' AND "+s.requiredField+" IS NOT NULL",i.returnGeometry=!1,i.outFields=s.outFields,i.orderByFields=s.orderBy,this._query(s.url,i,r,function(e){a.resolve([]),l._queryErrorHandler(e)}),a.promise},getFeaturesByGroupName:function(t,r){var a=new e,i=new n,o=this;return i.where=t.requiredField+" = '"+r+"'",i.geometryPrecision=0,i.returnGeometry=!0,i.outFields=["*"],this._query(t.url,i,function(e){e.features.length>0?a.resolve(e.features):a.resolve([])},function(e){a.resolve([]),o._queryErrorHandler(e)}),a.promise},getFeaturesByGroupNameAndCountry:function(t,r,a){var i=new e,o=new n,s=this;return o.where=t.requiredField+" = '"+r+"' AND NAME_0 = '"+a+"'",o.geometryPrecision=0,o.returnGeometry=!0,o.outFields=["*"],this._query(t.url,o,function(e){e.features.length>0?i.resolve(e.features):i.resolve([])},function(e){i.resolve([]),s._queryErrorHandler(e)}),i.promise},getMillByEntityId:function(t){var r=new e,a=new n,i=this;return a.where="Entity_ID = '"+t+"'",a.geometryPrecision=2,a.returnGeometry=!0,a.outFields=["*"],this._query(o.millPoints.url,a,function(e){1===e.features.length?r.resolve(e.features[0]):r.resolve(!1)},function(e){r.resolve(!1),i._queryErrorHandler(e)}),r.promise},getMillByWriId:function(t){var r=new e,a=new n,i=this;return a.where="wri_id = '"+t+"'",a.geometryPrecision=2,a.returnGeometry=!0,a.outFields=["*"],this._query(o.millPoints.url,a,function(e){1===e.features.length?r.resolve(e.features[0]):r.resolve(!1)},function(e){r.resolve(!1),i._queryErrorHandler(e)}),r.promise},getFeatureById:function(t,r){var a=new e,i=new n,o=this;return i.objectIds=[r],i.geometryPrecision=0,i.returnGeometry=!0,i.outFields=["*"],this._query(t,i,function(e){1===e.features.length&&a.resolve(e.features[0])},function(e){a.resolve(!1),o._queryErrorHandler(e)}),a.promise},getFeaturesByScheme:function(t,r){function a(e){e.features.length>0&&(u=c._formatData(i,e.features),s.resolve(u))}var i=o.certifiedArea.schemeQuery,s=new e,l=new n,c=this,u=[];return l.where=i.whereField+" = '"+t+"' AND "+i.secondaryWhereField+" = '"+r+"'",l.returnGeometry=!1,l.outFields=i.outFields,l.orderByFields=i.orderBy,this._query(i.url,l,a,function(e){s.resolve(!1),c._queryErrorHandler(e)}),s.promise},getMillPointData:function(){function t(e){e.features.length>0&&(l=s._formatData(r,e.features),a.resolve(l))}var r=o.millPoints,a=new e,i=new n,s=this,l=[];return i.where="mill_name_ <> 'Unknown'",i.returnGeometry=!1,i.outFields=r.outFields,i.orderByFields=r.orderBy,this._query(r.url,i,t,function(e){a.resolve(!1),s._queryErrorHandler(e)}),a.promise},getFeaturesByCommodity:function(t){function r(e){e.features.length>0&&(u=c._formatData(i,e.features),s.resolve(u))}var a,i=o.commercialEntity.commodityQuery,s=new e,l=new n,c=this,u=[];return a="Mining concession"===t?i.whereField+" = '"+t+"'":i.whereField+" = '"+t+"'",l.where=a,l.returnGeometry=!1,l.outFields=i.outFields,l.orderByFields=i.orderBy,this._query(i.url,l,r,function(e){s.resolve(!1),c._queryErrorHandler(e)}),s.promise},zoomToFeatures:function(e,t){var a,i=new n;i.where=e.whereField+" = '"+t+"'",i.maxAllowableOffset=3e3,i.returnGeometry=!0,i.geometryPrecision=0,this._query(e.url,i,function(e){e.features.length>0&&(a=r.graphicsExtent(e.features),app.map.setExtent(a,!0))},this._queryErrorHandler)},_formatData:function(e,n){var r,a,i={},s=[];t.forEach(n,function(t){a=t.attributes,r=a[e.requiredField]||o.noNameField,i.hasOwnProperty(r)?i[r].children.push({label:a[e.labelField],value:a[e.valueField]}):(i[r]={label:r,value:a[e.valueField],children:[]},i[r].children.push({label:a[e.labelField],value:a[e.valueField]}))});for(var l in i)l!==o.noNameField&&s.push(i[l]);return i[o.noNameField]&&s.push(i[o.noNameField]),s},_query:function(e,t,n,r){var i=new a(e);i.execute(t,n,r)},_queryErrorHandler:function(e){console.error(e)}}}),define("utils/AlertsHelper",["lodash","dojo/fx","dojo/_base/fx","dojo/Deferred","components/alertsForm/AlertsForm","components/alertsDialog/alertsDialog","analysis/WizardStore","analysis/Query","analysis/config","map/config"],function(e,t,n,r,a,i,o,s,l,c){var u,d,p,f,m=l.STORE_KEYS,h={"Logging concession":3,"Mining concession":2,"Wood fiber plantation":0,"Oil palm concession":1},g=!1,v=this;return p=function(){d=d||new i},f=function(e){app.map.extent.getCenter();return e=e||0,duration=500,n.animateProperty({node:document.getElementById("alerts-form-container"),properties:{width:e},duration:duration,onEnd:function(){g=!g}})},_toggle=function(){return o.set(m.selectedCustomFeatures,[]),f(g?0:510)},_getFeatureFromPopup=function(t){var n,a,i,o=t.target,l=o.dataset?o.dataset.type:o.getAttribute("data-type"),u=(o.dataset?o.dataset.label:o.getAttribute("data-label"),o.dataset?o.dataset.id:o.getAttribute("data-id"));if(console.log(l),console.log("layer",i),"AdminBoundary"===l||"overlays"===l?(i=c.adminUnitsLayer.layerId,a=c.adminUnitsLayer.url+"/"+i):"CertScheme"===l?(i=c.commercialEntitiesLayer.layerId,a=c.commercialEntitiesLayer.url+"/"+i):"MillPoint"===l?n=s.getMillByWriId(u):"WDPA"===l?(i=c.palHelper.layerId,a=c.palHelper.url+"/"+i):"CustomGraphic"===l?(n=new r,i=app.map.getLayer(c.customGraphicsLayer.id),n.resolve(e.find(i.graphics,function(e){return e.attributes.WRI_ID===parseInt(u)})||!1)):void 0!==h[l]&&(i=h[l],a=c.oilPerm.url+"/"+i),console.log("deferred",n),console.log("url",a),void 0===n&&void 0!==a)n=s.getFeatureById(a,u);else if(void 0===n)throw new Error("Could not identify feature from event data.");return n},o.registerCallback(m.alertsDialogActive,p),{toggleAlertsForm:function(){return u=u||new a({},"alerts-form"),_toggle()},isOpen:function(){return g},subscribeFromPopup:function(e){var t=e.target,n="CustomGraphic"===(t.dataset?t.dataset.type:t.getAttribute("data-type"));v._getFeatureFromPopup(e).then(function(e){if(!e)throw new Error("Could not identify feature from event data.");o.set(m.alertsDialogActive,!0),o.set(m.selectedCustomFeatures,n?[e]:[]),o.set(m.selectedPresetFeature,n?null:e)}),app.map.infoWindow.hide()}}}),define("actions/WizardActions",["utils/assert","analysis/config","analysis/WizardStore"],function(e,t,n){var r=t.STORE_KEYS;return{removeSelectedFeatureByField:function(t,a){e(t&&a,"Invalid Parameters for 'WizardActions.removeSelectedFeatureByField'");var i,o=n.get(r.selectedCustomFeatures);i=o.some(function(e,n){if(e.attributes[t]===a)return o.splice(n,1),!0}),i&&n.set(r.selectedCustomFeatures,o)},addSelectedFeatures:function(t){e(void 0!==t,"Invalid Parameters for 'WizardActions.addSelectedFeature'");var a=n.get(r.selectedCustomFeatures);a=a.concat(t),n.set(r.selectedCustomFeatures,a)},addCustomFeatures:function(t){e(void 0!==t,"Invalid Parameters for 'WizardActions.addCustomFeatures'");var a=n.get(r.customFeatures);a=a.concat(t),n.set(r.customFeatures,a)},clearSelectedCustomFeatures:function(){n.set(r.selectedCustomFeatures,[])},setTreeCoverDensity:function(e){n.set(r.currentTreeCoverDensity,e)},setGladConfidence:function(e){n.set(r.gladConfidence,e)},proceedToNextStep:function(){n.set(r.userStep,n.get(r.userStep)+1)},setAreaOfInterest:function(t){e(void 0!==t,"Invalid Parameters for 'WizardActions.setAreaOfInterest'."),n.set(r.areaOfInterest,t)}}}),define("components/wizard/StepOne",["react","analysis/config","utils/Analytics","analysis/WizardStore","actions/WizardActions"],function(e,t,n,r,a){function i(){return{completed:!0,selectedOption:r.get(f.areaOfInterest)||l.id,previousAreaOfInterest:void 0}}function o(e){switch(e){case l.id:return l.label;case c.id:return c.label;case u.id:return u.label;case d.id:return d.label;case p.id:return p.label}}var s=t.stepOne,l=s.option1,c=s.option2,u=s.option3,d=s.option4,p=s.option5,f=t.STORE_KEYS;return e.createClass({getInitialState:function(){return i()},componentDidMount:function(){var e=r.get(f.areaOfInterest);e||a.setAreaOfInterest(l.id),r.registerCallback(f.areaOfInterest,this.areaOfInterestUpdated)},areaOfInterestUpdated:function(){var e=r.get(f.areaOfInterest);this.setState({selectedOption:e})},componentWillReceiveProps:function(e){if(e.isResetting){var t=i();this.replaceState(t)}},render:function(){return e.createElement("div",{className:"step"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-title"},s.title),e.createElement("p",{className:"step-one-main-description"},s.description),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:l.id,checked:this.state.selectedOption===l.id}),e.createElement("label",{htmlFor:l.id},l.label),e.createElement("p",{className:"step-one-option-description"},l.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:c.id,checked:this.state.selectedOption===c.id}),e.createElement("label",{htmlFor:c.id},c.label),e.createElement("p",{className:"step-one-option-description"},c.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:u.id,checked:this.state.selectedOption===u.id}),e.createElement("label",{htmlFor:u.id},u.label),e.createElement("p",{className:"step-one-option-description"},u.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:d.id,checked:this.state.selectedOption===d.id}),e.createElement("label",{htmlFor:d.id},d.label),e.createElement("p",{className:"step-one-option-description"},d.description)),e.createElement("div",{className:"s1-radio-container"},e.createElement("input",{type:"radio",name:"first-step",onChange:this.changeSelection,id:p.id,checked:this.state.selectedOption===p.id}),e.createElement("label",{htmlFor:p.id},p.label),e.createElement("p",{className:"step-one-option-description"},p.description))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"next-button-container",onClick:this.proceed},e.createElement("span",{className:"next-button"},"Next"))))},changeSelection:function(e){a.setAreaOfInterest(e.target.id)},resetSelectedFeatures:function(){var e=this.state.previousAreaOfInterest||!1,t=r.get(f.areaOfInterest);e&&e!==t?a.clearSelectedCustomFeatures():this.setState({previousAreaOfInterest:t})},proceed:function(){this.resetSelectedFeatures(),a.proceedToNextStep();var e=r.get(f.areaOfInterest);n.sendEvent("Analysis","Area",o(e))}})}),define("map/CoordinatesModal",["map/config","map/Symbols","utils/GeoHelper","analysis/config","analysis/WizardStore","actions/WizardActions","dojo/on","dojo/dom-class"],function(e,t,n,r,a,i,o,s){var l,c={toggle:function(){s.toggle("coordinates-modal","active"),l?(l.remove(),l=void 0):l=o.once(document.querySelector("#coordinates-modal .close-icon"),"click",this.toggle)},close:function(){return l&&(l.remove(),l=void 0),s.remove("coordinates-modal","active")},resetForm:function(){document.getElementById("coordsModalLatitiude").value="",document.getElementById("coordsModalLongitude").value=""},savePoint:function(){var t,r=parseFloat(document.getElementById("coordsModalLatitiude").value),a=parseFloat(document.getElementById("coordsModalLongitude").value),o=e.coordinatesDialog.errors,s=n.nextCustomFeatureId(),l={},c=[];return(""===r||isNaN(r)||r>90||r<-90)&&c.push(o.invalidLatitude),(""===a||isNaN(a)||a>180||a<-180)&&c.push(o.invalidLongitude),c.length>0?void alert(c.join("\n")):(l[e.uploader.labelField]="ID - "+s,l.WRI_ID=s,l.isRSPO=!1,t=n.generatePointGraphicFromGeometric(a,r,l),i.addCustomFeatures([t]),app.map.centerAndZoom(t.geometry,7),this.resetForm(),void this.close())}};return c}),define("components/wizard/NestedList",["react"],function(e){function t(){return{filter:""}}var n=e.createClass({displayName:"ListItem",propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.number.isRequired,click:e.PropTypes.func.isRequired,filter:e.PropTypes.string.isRequired},render:function(){var t,n=void 0!==this.props.activeListGroupValue&&this.props.activeListGroupValue==this.props.value;return""===this.props.filter||this._searchChildrenForMatches(this.props.children,this.props.filter)?(t=n?"active":"",e.createElement("div",{className:"wizard-list-item"},e.createElement("span",{"data-value":this.props.value,"data-type":"group",onClick:this._click,className:t},this.props.label),this.props.children?this.props.children.map(this._childrenMapper.bind(this,n)):void 0)):(t="wizard-list-item"+(this.props.label.toLowerCase().search(this.props.filter)>-1?"":" hidden")+(n?" active":""),e.createElement("div",{className:t},e.createElement("span",{"data-value":this.props.value,"data-type":"group",onClick:this._click,className:t},this.props.label)))},_childrenMapper:function(t,n,r){var a=n.label.toLowerCase(),i="wizard-list-child-item"+(a.search(this.props.filter)>-1?"":" hidden");return(this.props.activeListItemValues.indexOf(n.value)!=-1||t)&&(i+=" active"),e.createElement("div",{className:i,key:r},e.createElement("span",{"data-value":n.value,"data-type":"individual",onClick:this._click},n.label))},_searchChildrenForMatches:function(e,t){return e.some(function(e){return e.label.toLowerCase().search(t)>-1})},_click:function(e){this.props.click(e.target)}}),r=e.createClass({displayName:"NestedList",getInitialState:function(){return t()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(t())},render:function(){return e.createElement("div",{className:"nested-list"},e.createElement("div",{className:"searchBox relative"+(this.props.data.length>0?"":" hidden")},e.createElement("div",{className:"nested-list-search-icon"}),e.createElement("input",{placeholder:this.props.placeholder,type:"text",value:this.state.filter,onChange:this._setFilter})),e.createElement("div",{className:"list-container"+(""!==this.state.filter?" filtered":"")},this.props.data.map(this._mapper,this)))},_mapper:function(t,r){return e.createElement(n,{key:r,label:t.label||"No Name",value:t.value,click:this.props.click,children:t.children,activeListItemValues:this.props.activeListItemValues,activeListGroupValue:this.props.activeListGroupValue,filter:this.state.filter})},_setFilter:function(e){this.setState({filter:e.target.value.toLowerCase()})}});return r}),define("components/wizard/MillPoint",["react","map/config","dojo/topic","dojo/query","map/Uploader","dojo/dom-class","dojo/_base/array","dojo/promise/all","analysis/Query","analysis/config","utils/GeoHelper","map/CoordinatesModal","analysis/WizardStore","components/wizard/NestedList","components/featureList/FeatureList"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m){var h,g=c.millPoints,v=c.STORE_KEYS,y=function(){return{nestedListData:[],activeListItemValues:[],selectedCommodity:g.commodityOptions[0].value,showCustomFeaturesList:!1,selectedCustomFeatures:p.get(v.selectedCustomFeatures),customFeatures:b()}},b=function(){var e=p.get(v.customFeatures);return e.filter(function(e){return"point"===e.geometry.type})};return e.createClass({getInitialState:function(){return y()},componentDidMount:function(){h=p.get(v.userStep),p.registerCallback(v.userStep,this.userChangedSteps),p.registerCallback(v.customFeatures,this.customFeaturesUpdated),p.registerCallback(v.selectedCustomFeatures,this.selectedCustomFeaturesUpdated)},shouldComponentUpdate:function(){return 2===p.get(v.userStep)&&p.get(v.areaOfInterest)===c.stepOne.option5.id},customFeaturesUpdated:function(){var e=b();this.setState({customFeatures:e})},selectedCustomFeaturesUpdated:function(){var e=p.get(v.selectedCustomFeatures);this.setState({selectedCustomFeatures:e})},userChangedSteps:function(){var e=p.get(v.areaOfInterest),r=p.get(v.userStep);if("millPointOption"===e&&2===r&&0===this.state.nestedListData.length&&this._loadMillPoints(),"millPointOption"===e&&1===h&&2===r){var a=app.map.getLayer(t.mill.id);a&&(a.visible||(n.publish("showMillPoints"),n.publish("toggleItemInLayerList","mill"),n.publish("toggleItemInLayerList","gfwMill"))),this.setState({activeListItemValues:[]})}h=p.get(v.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(y())},render:function(){return e.createElement("div",{className:"mill-point",id:"mill-point"},e.createElement("div",{className:"mill-list-options back-light-gray relative"},e.createElement("div",{className:"mill-list-toggle-indicator mill-"+(this.state.showCustomFeaturesList?"custom-list":"known-list")}),e.createElement("div",{className:"relative select-mill-list-button inline-block "+(this.state.showCustomFeaturesList?"":"active"),id:"selectFromList",onClick:this.toggleList},g.selectFromListButton),e.createElement("div",{className:"relative select-mill-list-button inline-block "+(this.state.showCustomFeaturesList?"active":""),id:"selectFromCustom",onClick:this.toggleList},g.selectFromCustomListButton)),e.createElement("div",{className:this.state.showCustomFeaturesList?"hidden":""},e.createElement("p",{className:"instructions"},g.selectInstructions),e.createElement("div",{className:"select-container"},e.createElement("select",{id:"mill-select",className:"mill-select",value:this.state.selectedCommodity,onChange:this._loadMillPoints},g.commodityOptions.map(this._selectMapper,this))),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")}," ",g.listInstructions," "),e.createElement(f,{data:this.state.nestedListData,click:this._millPointSelected,placeholder:"Search mill points...",activeListItemValues:this.state.activeListItemValues,isResetting:this.props.isResetting})),e.createElement("div",{className:this.state.showCustomFeaturesList?"":"hidden"},e.createElement("p",{className:"instructions"},g.instructions),e.createElement("div",{className:"drawing-tools"},e.createElement("div",{className:"drawing-tool-button",id:"enterCoords",onClick:this.drawToolClicked},g.enterCoordinatesButton),e.createElement("div",{className:"drawing-tool-button",id:"upload",onClick:this.drawToolClicked},g.uploadButton)),e.createElement(m,{features:this.state.customFeatures,selectedFeatures:this.state.selectedCustomFeatures,rspoChecks:!0,showClear:!0})))},_selectMapper:function(t){return e.createElement("option",{value:t.value}," ",t.label," ")},toggleList:function(e){var t,n=e.target.id;t="selectFromCustom"===n,t||(d.close(),a.close()),this.state.showCustomFeaturesList!==t&&(this.setState({showCustomFeaturesList:t}),this._localReset())},drawToolClicked:function(e){var t=e.target.id;switch(t){case"enterCoords":a.close(),d.toggle();break;case"upload":d.close(),a.toggle()}},_loadMillPoints:function(){this.setState({isLoading:!0});var e=this;l.getMillPointData().then(function(t){t&&e.setState({nestedListData:t,isLoading:!1})})},_millPointSelected:function(e){var n,r,a,i,d,f,m,h=e.getAttribute("data-type"),g=e.getAttribute("data-value"),y=this.state.selectedCustomFeatures,b=this,_=[],C=[];if(r=app.map.getLayer(t.wizardGraphicsLayer.id),a=app.map.getLayer(t.wizardPointGraphicsLayer.id),"group"===h){for(var w=0;w<this.state.nestedListData.length;w++)if(this.state.nestedListData[w].value===g)for(var E=0;E<this.state.nestedListData[w].children.length;E++)_.push(l.getMillByWriId(this.state.nestedListData[w].children[E].value)),C.push(this.state.nestedListData[w].children[E].label);s(_).then(function(e){for(var t=[],s=0;s<e.length;s++){var l=e[s];if(m=C[s],b.state.activeListItemValues.indexOf(l.attributes.wri_id)!=-1){var h=b.state.activeListItemValues.indexOf(l.attributes.wri_id);n=b.state.activeListItemValues.slice(0),n.splice(h,1),b.setState({activeListItemValues:n}),d=l.attributes.OBJECTID,o.forEach(y,function(e,t){d===e.attributes.OBJECTID&&(i=t)}),y.splice(i,1),o.some(r.graphics,function(e){return e.attributes.OBJECTID===d&&(r.remove(e),!0)}),o.some(a.graphics,function(e){return e.attributes.OBJECTID===d&&(a.remove(e),!0)})}else{t.push(l.attributes.wri_id),l.attributes[c.stepTwo.labelField]=m;var g=u.generatePointGraphicFromGeometric(l.attributes.longitude,l.attributes.latitude,l.attributes);f=u.preparePointAsPolygon(l),f=u.applySelectionSymbolToFeature(f),r.add(f),a.add(g),y.push(f)}}n=b.state.activeListItemValues.concat(t),b.setState({activeListItemValues:n}),y.length>0?p.set(v.selectedCustomFeatures,y):p.set(v.selectedCustomFeatures,[])})}else g&&r&&l.getMillByWriId(g).then(function(t){if(m=e.innerText||e.innerHTML,b.state.activeListItemValues.indexOf(g)!=-1){var s=b.state.activeListItemValues.indexOf(g);n=b.state.activeListItemValues.slice(0),n.splice(s,1),b.setState({activeListItemValues:n}),d=t.attributes.OBJECTID,o.forEach(y,function(e,t){d===e.attributes.OBJECTID&&(i=t)}),y.splice(i,1),o.some(r.graphics,function(e){return e.attributes.OBJECTID===d&&(r.remove(e),!0)}),o.some(a.graphics,function(e){return e.attributes.OBJECTID===d&&(a.remove(e),!0)})}else{t.attributes[c.stepTwo.labelField]=m;var l=u.generatePointGraphicFromGeometric(t.attributes.longitude,t.attributes.latitude,t.attributes);f=u.preparePointAsPolygon(t),f=u.applySelectionSymbolToFeature(f),r.add(f),a.add(l),n=b.state.activeListItemValues.concat([g]),b.setState({activeListItemValues:n}),y.push(f)}y.length>0?p.set(v.selectedCustomFeatures,y):p.set(v.selectedCustomFeatures,[])})},_localReset:function(){var e=app.map.getLayer(t.wizardGraphicsLayer.id),n=app.map.getLayer(t.wizardPointGraphicsLayer.id);p.set(v.selectedCustomFeatures,[]),e.clear(),n.clear(),this.setState({activeListItemValues:[]})}})}),define("components/wizard/AdminUnit",["react","map/config","map/Symbols","map/MapModel","analysis/Query","analysis/config","utils/GeoHelper","analysis/WizardStore","actions/WizardActions","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,a,i,o,s,l,c,u,d,p){function f(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1}}var m,h,g=i.adminUnit,v=i.STORE_KEYS,y=e.createClass({displayName:"AdminUnit",getInitialState:function(){return f()},componentDidMount:function(){r.applyTo("admin-unit"),s.registerCallback(v.userStep,this.userChangedSteps),m=s.get(v.userStep)},shouldComponentUpdate:function(){return 2===s.get(v.userStep)&&s.get(v.areaOfInterest)===i.stepOne.option2.id},userChangedSteps:function(){var e=s.get(v.areaOfInterest),t=s.get(v.userStep);if("adminUnitOption"===e&&2===t){var n=document.getElementById("country-select").value;"NONE"!==n&&1===m&&u.publish("setAdminBoundariesDefinition",n)}m=s.get(v.userStep)},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(f()),document.getElementById("country-select").value="NONE")},render:function(){return e.createElement("div",{className:"admin-unit",id:"admin-unit"},e.createElement("p",{className:"instructions"}," ",g.instructions," "),e.createElement("div",{className:"select-container"},e.createElement("select",{id:"country-select",className:"country-select",onChange:this._loadAdminUnits,"data-bind":'options: allCountries, optionsText: "label", optionsValue: "value"'}),e.createElement("span",{className:"loading-wheel"+(this.state.isLoading?"":" hidden")})),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0)?"":" hidden"},g.instructionsPartTwo),e.createElement(c,{data:this.state.nestedListData,click:this._lowLevelAdminUnitClick,placeholder:"Search administrative units...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_loadAdminUnits:function(e){var t=e.target.value,n=this;return"NONE"===t?(u.publish("setAdminBoundariesDefinition"),void this.setState({nestedListData:[]})):(this.setState({isLoading:!0}),u.publish("setAdminBoundariesDefinition",t),void a.getLowLevelAdminUnitData(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})}))},_lowLevelAdminUnitClick:function(e){var r,s,c=app.map.getLayer(t.wizardGraphicsLayer.id),u=parseInt(e.getAttribute("data-value")),d=e.getAttribute("data-type"),f=e.innerText||e.innerHTML,m=this;if(d!==h&&(l.clearSelectedCustomFeatures(),c.clear()),h=d,"group"===d)if(r=this.state.activeListGroupValue,r===u)l.removeSelectedFeatureByField(g.countryBoundaries.requiredField,f),o.removeGraphicByField(t.wizardGraphicsLayer.id,g.countryBoundaries.requiredField,f),m.setState({activeListGroupValue:void 0});else{l.clearSelectedCustomFeatures(),m.setState({activeListItemValues:[],activeListGroupValue:u}),c.clear();var v=document.getElementById("country-select").value;a.getFeaturesByGroupNameAndCountry(g.countryBoundaries,f,v).then(function(e){e&&c&&(e.forEach(function(e){e.attributes[i.stepTwo.labelField]=f,s=new p(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),c.add(s)}),l.addSelectedFeatures(e))})}else if(u){r=this.state.activeListItemValues;var y=r.indexOf(u);y>-1?(r.splice(y,1),l.removeSelectedFeatureByField("OBJECTID",u),o.removeGraphicByField(t.wizardGraphicsLayer.id,"OBJECTID",u),m.setState({activeListItemValues:r,
activeListGroupValue:void 0})):(r.push(u),m.setState({activeListItemValues:r,activeListGroupValue:null}),a.getFeatureById(g.lowLevelUnitsQuery.url,u).then(function(e){e.attributes[i.stepTwo.labelField]=f,s=new p(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),l.addSelectedFeatures([s]),c&&c.add(s)}))}}});return y}),define("components/wizard/CustomArea",["react","analysis/config","analysis/WizardStore","esri/graphic","esri/toolbars/draw","dojo/dom","dojo/query","dojo/dom-class","map/config","map/MapModel","map/CoordinatesModal","map/Uploader","map/Symbols","utils/GeoHelper","components/featureList/FeatureList"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m){function h(){return{graphics:n.get(y.customFeatures),selectedGraphics:n.get(y.selectedCustomFeatures)}}var g,v,y=t.STORE_KEYS;return e.createClass({getInitialState:function(){return h()},componentDidMount:function(){g=new a(app.map),g.on("draw-end",this._drawComplete),n.registerCallback(y.customFeatures,this.graphicsListUpdated),n.registerCallback(y.selectedCustomFeatures,function(){this.setState({selectedGraphics:n.get(y.selectedCustomFeatures)})}.bind(this)),this.setState(h())},shouldComponentUpdate:function(){return 2===n.get(y.userStep)&&n.get(y.areaOfInterest)===t.stepOne.option1.id},graphicsListUpdated:function(){var e=n.get(y.customFeatures);this.setState({graphics:e})},componentWillReceiveProps:function(e){e.isResetting&&(this.replaceState(h()),this._deactivateToolbar(),this._removeActiveClass())},render:function(){return e.createElement("div",{className:"custom-area"},e.createElement("p",{className:"drawing-instructions"}," ",t.customArea.instructions," "),e.createElement("div",{className:"drawing-tools"},e.createElement("div",{className:"drawing-tool-button",id:"draw-coordinates","data-label":t.customArea.customCoordLabel,onClick:this.drawToolClicked},t.customArea.customCoordLabel),e.createElement("div",{className:"drawing-tool-button",id:"draw-freehand","data-label":t.customArea.freehandLabel,onClick:this._activateToolbar},t.customArea.freehandLabel),e.createElement("div",{className:"drawing-tool-button",id:"draw-polygon","data-label":t.customArea.polyLabel,onClick:this._activateToolbar},t.customArea.polyLabel),e.createElement("div",{className:"drawing-tool-button",id:"draw-upload","data-label":t.customArea.uploadLabel,onClick:this.drawToolClicked},t.customArea.uploadLabel)),e.createElement("div",{className:"custom-graphics-list-container"},e.createElement("p",{className:"drawing-instructions"},t.customArea.instructionsPartTwo),e.createElement(m,{features:this.state.graphics,selectedFeatures:this.state.selectedGraphics})))},drawToolClicked:function(e){var t=e.target.id;switch(t){case"draw-coordinates":d.close(),u.toggle();break;case"draw-upload":u.close(),d.toggle()}},_activateToolbar:function(e){if(this._removeActiveClass(),this.setState({showUploadTools:!1}),v===e.target.id)return void this._deactivateToolbar();v=e.target.id;var n;switch(n=e.target.getAttribute("data-label")?e.target.getAttribute("data-label"):e.target.parentElement.getAttribute("data-label")?e.target.parentElement.getAttribute("data-label"):e.target.parentElement.parentElement.getAttribute("data-label")){case t.customArea.freehandLabel:g.activate(a.FREEHAND_POLYGON);break;case t.customArea.polyLabel:g.activate(a.POLYGON)}s.add(e.target,"active"),c.set("drawToolsEnabled",!0)},_drawComplete:function(e){if(this._removeActiveClass(),this._deactivateToolbar(),e.geometry){var a,i=f.nextCustomFeatureId(),o={WRI_ID:i};o[t.stepTwo.labelField]="ID - "+i+": Custom drawn feature",a=new r(e.geometry,p.getPolygonSymbol(),o),n.set(y.customFeatures,n.get(y.customFeatures).concat([a]))}},_deactivateToolbar:function(){g.deactivate(),v=void 0,c.set("drawToolsEnabled",!1)},_removeActiveClass:function(){o(".drawing-tools .drawing-tool-button").forEach(function(e){s.remove(e,"active")})}})}),define("components/wizard/CertifiedArea",["react","map/config","map/Symbols","analysis/Query","analysis/config","utils/GeoHelper","analysis/WizardStore","actions/WizardActions","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,a,i,o,s,l,c,u,d){function p(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:null,isLoading:!1,selectedCommodity:h.commodityOptions[0].value,selectedScheme:h.certificationOptions[1].value}}var f,m,h=a.certifiedArea,g=a.STORE_KEYS;return e.createClass({getInitialState:function(){return p()},componentDidMount:function(){o.registerCallback(g.userStep,this.userChangedSteps),m=o.get(g.userStep)},shouldComponentUpdate:function(){return 2===o.get(g.userStep)&&o.get(g.areaOfInterest)===a.stepOne.option4.id},userChangedSteps:function(){var e=o.get(g.areaOfInterest),t=o.get(g.userStep);if("certifiedAreaOption"===e&&"NONE"!==this.state.selectedScheme&&2===t&&1===m&&(c.publish("setCertificationSchemeDefinition",this.state.selectedScheme),0===this.state.nestedListData.length)){var n={target:{value:h.certificationOptions[1].value}};this._loadFeatures(n)}m=o.get(g.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(p())},render:function(){var t=o.get(g.areaOfInterest),n=o.get(g.userStep);if(2===n&&"certifiedAreaOption"===t){switch(this.state.selectedCommodity){case"Oil palm concession":c.publish("filterConcessionsLegendItems",2)}"NONE"===this.state.selectedCommodity?c.publish("hideConcessionsLegend"):c.publish("showConcessionsLegend")}return e.createElement("div",{className:"certified-area"},e.createElement("p",{className:"instructions"}," ",h.instructions," "),e.createElement("select",{className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._updateCommodity},h.commodityOptions.map(this._selectMapper,this)),e.createElement("p",{className:"instructions"}," ",h.instructionsPartTwo," "),e.createElement("select",{className:"certification-scheme-select",value:this.state.selectedScheme,onChange:this._loadFeatures},h.certificationOptions.map(this._selectMapper,this)),e.createElement("span",{className:"loading-wheel"+(this.state.isLoading?"":" hidden")}),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},h.instructionsPartThree),e.createElement(l,{data:this.state.nestedListData,click:this._schemeClicked,placeholder:"Search certified areas...",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.createElement("option",{value:t.value},t.label)},_updateCommodity:function(e){this.setState({selectedCommodity:e.target.value})},_updateScheme:function(e){this.setState({selectedScheme:e,isLoading:!0})},_loadFeatures:function(e){var t=e.target.value,n=this;return"NONE"===t?(c.publish("setCertificationSchemeDefinition"),void this.setState({nestedListData:[],selectedScheme:t})):(this._updateScheme(t),c.publish("setCertificationSchemeDefinition",t),void r.getFeaturesByScheme(t,this.state.selectedCommodity).then(function(e){n.setState({nestedListData:e,isLoading:!1})}))},_schemeClicked:function(e){var o,l,c=app.map.getLayer(t.wizardGraphicsLayer.id),u=parseInt(e.getAttribute("data-value")),p=e.getAttribute("data-type"),m=e.innerText||e.innerHTML,g=this;if(p!==f&&(s.clearSelectedCustomFeatures(),c.clear()),f=p,"group"===p)o=this.state.activeListGroupValue,o===u?(s.removeSelectedFeatureByField(h.groupQuery.requiredField,m),i.removeGraphicByField(t.wizardGraphicsLayer.id,h.groupQuery.requiredField,m),g.setState({activeListGroupValue:void 0})):(s.clearSelectedCustomFeatures(),g.setState({activeListItemValues:[],activeListGroupValue:u}),c.clear(),r.getFeaturesByGroupName(h.groupQuery,m).then(function(e){c=app.map.getLayer(t.wizardGraphicsLayer.id),e&&c&&(e.forEach(function(e){e.attributes[a.stepTwo.labelField]=m,l=new d(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),c.add(l)}),s.addSelectedFeatures(e))}));else if(u){o=this.state.activeListItemValues;var v=o.indexOf(u);v>-1?(o.splice(v,1),s.removeSelectedFeatureByField("OBJECTID",u),i.removeGraphicByField(t.wizardGraphicsLayer.id,"OBJECTID",u),g.setState({activeListItemValues:o,activeListGroupValue:void 0})):(o.push(u),g.setState({activeListItemValues:o,activeListGroupValue:null}),r.getFeatureById(h.schemeQuery.url,u).then(function(e){e.attributes[a.stepTwo.labelField]=m,l=new d(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),s.addSelectedFeatures([l]),c=app.map.getLayer(t.wizardGraphicsLayer.id),c&&c.add(l)}))}}})}),define("components/wizard/CommercialEntity",["react","map/config","map/Symbols","analysis/Query","analysis/config","utils/GeoHelper","utils/Analytics","analysis/WizardStore","actions/WizardActions","components/wizard/NestedList","dojo/topic","dojo/query","esri/graphic"],function(e,t,n,r,a,i,o,s,l,c,u,d,p){function f(){return{nestedListData:[],activeListItemValues:[],activeListGroupValue:void 0,isLoading:!1,selectedCommodity:g.commodityOptions[0].value}}var m,h,g=a.commercialEntity,v=a.STORE_KEYS;return e.createClass({getInitialState:function(){return f()},componentDidMount:function(){s.registerCallback(v.userStep,this.userChangedSteps),m=s.get(v.userStep)},shouldComponentUpdate:function(){return 2===s.get(v.userStep)&&s.get(v.areaOfInterest)===a.stepOne.option3.id},userChangedSteps:function(){var e=s.get(v.areaOfInterest),t=s.get(v.userStep);"commercialEntityOption"===e&&"NONE"!==this.state.selectedCommodity&&1===m&&2===t&&u.publish("setCommercialEntityDefinition",this.state.selectedCommodity),m=s.get(v.userStep)},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(f())},render:function(){var t=s.get(v.areaOfInterest),n=s.get(v.userStep);if(2===n&&"commercialEntityOption"===t){switch(this.state.selectedCommodity){case"Logging concession":u.publish("filterConcessionsLegendItems",0);break;case"Mining concession":u.publish("filterConcessionsLegendItems",1);break;case"Oil palm concession":u.publish("filterConcessionsLegendItems",2);break;case"Wood fiber plantation":u.publish("filterConcessionsLegendItems",3)}"NONE"===this.state.selectedCommodity?u.publish("hideConcessionsLegend"):u.publish("showConcessionsLegend")}return e.createElement("div",{className:"commercial-entity"},e.createElement("p",{className:"instructions"}," ",g.instructions," "),e.createElement("select",{ref:"commoditySelect",className:"commodity-type-select",value:this.state.selectedCommodity,onChange:this._loadFeatures},g.commodityOptions.map(this._selectMapper,this)),e.createElement("span",{className:"loading"+(this.state.isLoading?"":" hidden")}),e.createElement("p",{className:"instructions"+(this.state.nestedListData.length>0?"":" hidden")},g.instructionsPartTwo),e.createElement(c,{data:this.state.nestedListData,click:this._commodityClicked,placeholder:"Search commercial entities",activeListItemValues:this.state.activeListItemValues,activeListGroupValue:this.state.activeListGroupValue,isResetting:this.props.isResetting}))},_selectMapper:function(t){return e.createElement("option",{value:t.value},t.label)},_loadFeatures:function(e){var t=e.target.value,n=this;return"NONE"===t?(u.publish("setCommercialEntityDefinition"),void this.setState({nestedListData:[],selectedCommodity:t})):(this.setState({selectedCommodity:t,isLoading:!0}),u.publish("setCommercialEntityDefinition",t),r.getFeaturesByCommodity(t).then(function(e){n.setState({nestedListData:e,isLoading:!1})}),void("NONE"!==t&&o.sendEvent("Analysis","Commodity Type",t)))},_commodityClicked:function(e){var s,c=app.map.getLayer(t.wizardGraphicsLayer.id),u=parseInt(e.getAttribute("data-value")),d=e.getAttribute("data-type"),f=e.innerText||e.innerHTML,m=this;if(h!==d&&(l.clearSelectedCustomFeatures(),c.clear()),h=d,"group"===d){if(f===a.noNameField)return;var v=this.state.activeListGroupValue;u===v?(l.removeSelectedFeatureByField(g.groupQuery.requiredField,f),i.removeGraphicByField(t.wizardGraphicsLayer.id,g.groupQuery.requiredField,f),m.setState({activeListGroupValue:void 0})):(l.clearSelectedCustomFeatures(),m.setState({activeListItemValues:[],activeListGroupValue:u}),c.clear(),r.getFeaturesByGroupName(g.groupQuery,f).then(function(e){e&&c&&(e.forEach(function(e){e.attributes[a.stepTwo.labelField]=f,s=new p(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),c.add(s)}),l.addSelectedFeatures(e))}))}else if(u){var y=this.state.activeListItemValues,b=y.indexOf(u);b>-1?(y.splice(b,1),l.removeSelectedFeatureByField("OBJECTID",u),i.removeGraphicByField(t.wizardGraphicsLayer.id,"OBJECTID",u),m.setState({activeListItemValues:y,activeListGroupValue:void 0})):(y.push(u),m.setState({activeListItemValues:y,activeListGroupValue:void 0}),r.getFeatureById(g.commodityQuery.url,u).then(function(e){e.attributes[a.stepTwo.labelField]=f,s=new p(e.geometry,n.getHighlightPolygonSymbol(),e.attributes),l.addSelectedFeatures([s]),c&&c.add(s)}))}var _=this.refs.commoditySelect,C=_&&_.props&&_.props.value;C&&"NONE"!==C&&o.sendEvent("Analysis",C,f)}})}),define("components/wizard/StepTwo",["react","analysis/config","analysis/WizardStore","map/CoordinatesModal","actions/WizardActions","components/wizard/MillPoint","components/wizard/AdminUnit","components/wizard/CustomArea","components/wizard/CertifiedArea","components/wizard/CommercialEntity"],function(e,t,n,r,a,i,o,s,l,c){function u(){var e=n.get(b.selectedCustomFeatures);return e.length>0?e.map(function(e){return e.attributes.WRI_label}).join(","):"none"}function d(){return{completed:!1,currentSelectionLabel:u()}}var p=t.stepTwo.title,f=t.stepTwo.customArea,m=t.stepTwo.adminUnit,h=t.stepTwo.millPoint,g=t.stepTwo.certArea,v=t.stepTwo.commArea,y=(t.stepTwo.labelField,{}),b=t.STORE_KEYS;return y[f]="Create a custom area",y[m]="Administrative unit",y[h]="Mill point",y[g]="Certified area",y[v]="Commercial entity",e.createClass({getInitialState:function(){return d()},componentDidMount:function(){n.registerCallback(b.selectedCustomFeatures,this.analysisAreaUpdated)},analysisAreaUpdated:function(){var e=n.get(b.selectedCustomFeatures);e.length>0?this.setState({completed:!0,currentSelectionLabel:u()}):this.replaceState(d())},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(d())},render:function(){var r=n.get(b.areaOfInterest);return e.createElement("div",{className:"step"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-title"},p+" - "+y[r]),e.createElement("div",{className:"s2-tools "+(r!==h?"hidden":"")},e.createElement(i,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==m?"hidden":"")},e.createElement(o,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==f?"hidden":"")},e.createElement(s,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==g?"hidden":"")},e.createElement(l,e.__spread({},this.props))),e.createElement("div",{className:"s2-tools "+(r!==v?"hidden":"")},e.createElement(c,e.__spread({},this.props)))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"selected-analysis-area"},e.createElement("div",{className:"current-selection-label"},t.stepTwo.currentFeatureText),e.createElement("div",{className:"current-selection",title:this.state.currentSelectionLabel},this.state.currentSelectionLabel)),e.createElement("div",{onClick:this.checkRequirements,className:"next-button-container "+(this.state.completed?"":"disabled")},e.createElement("span",{className:"next-button"},"Next"))))},checkRequirements:function(){this.state.completed&&a.proceedToNextStep()}})}),define("map/LayerController",["map/config","map/MapModel","dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","utils/Hasher","utils/Analytics","esri/InfoTemplate","esri/graphic","esri/graphicsUtils","esri/tasks/query","esri/tasks/QueryTask","esri/layers/RasterFunction","esri/layers/LayerDrawingOptions"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g,v,y){return{toggleLayers:function(n){console.log("togsd",n.id);var r=app.map.getLayer(n.id);if(n.id===e.pal.id)return void this.updateZoomDependentLayer(n,e.palHelper,6);if("hansenLoss"===n.id){var a,i=t.get("tcdDensityValue")?t.get("tcdDensityValue"):30,o=!0;return e.hansenLoss.levels.forEach(function(e){a=app.map.getLayer(e.id),a.visible&&(o=!1)}),void(o===!0?(a=30!==i?app.map.getLayer("hansenLoss"+i):app.map.getLayer("hansenLoss"),a.show()):e.hansenLoss.levels.forEach(function(e){a=app.map.getLayer(e.id),a.hide()}))}if(n.id===e.suit.id){this.showSuitabilityLoader();var s="User toggled Custom Suitabiltiy Layer "+(r.visible?"off.":"on.");d.sendEvent("Event","Layer",s)}r&&("hansenGain"===r.id||"hansenLoss"===r.id?r.visible?r.visible&&r.hide():r.show():r.setVisibility(!r.visible),this.refreshLegendWidget())},updateLayer:function(t){var n,i,s,l,u=e[t.id],p=app.map.getLayer(u.id),f=t.filter,m=[];if(a(".gfw .filter-list ."+f).forEach(function(t){n=t.dataset?t.dataset.layer:t.getAttribute("data-layer"),i=e[n],i&&i.id===p.id&&o.contains(t,"active")&&m.push(i.layerId)}),p&&(m.length>0?(p.setVisibleLayers(m),p.show()):p.hide(),this.refreshLegendWidget()),"27"==u.layerId){var h=o.contains(r.byId("mill_checkbox").parentElement,"active"),g=o.contains(r.byId("gfwMill_checkbox").parentElement,"active"),v=[],y=[];h&&y.push(e.mill.query),g&&y.push(e.gfwMill.query),v[27]=y.join(" OR "),app.map.getLayer(u.id).setLayerDefinitions(v),app.map.getLayer(u.id).refresh()}switch(s=c.indexOf(m,u.layerId)>-1?"on.":"off.",u){case e.oilPerm:l="User toggled Oil Palm Concessions layer "+s,d.sendEvent("Event","Layer",l);break;case e.rspoPerm:l="User toggled RSPO Oil Palm Concessions layer "+s,d.sendEvent("Event","Layer",l);break;case e.mill:l="User toggled RSPO Mills layer "+s,d.sendEvent("Event","Layer",l)}},showLayer:function(e){var n=app.map.getLayer(e.id);if(console.log(e.id),void 0!==e.layerId)return void this.updateDynamicLayer(e);if(n)if("hansenLoss"===e.id){var r,a=t.get("tcdDensityValue")?t.get("tcdDensityValue"):30;r=30!==a?app.map.getLayer("hansenLoss"+a):app.map.getLayer("hansenLoss"),r.show()}else n.visible||(n.show(),this.refreshLegendWidget())},hideLayer:function(e){var n=app.map.getLayer(e.id);if(n)if("hansenLoss"===e.id){var r,a=t.get("tcdDensityValue")?t.get("tcdDensityValue"):30;r=30!==a?app.map.getLayer("hansenLoss"+a):app.map.getLayer("hansenLoss"),r.hide()}else if(n.visible){if(n.visibleLayers)if(n.visibleLayers.length>1&&e.layerId){var i=n.visibleLayers.indexOf(e.layerId);n.visibleLayers.splice(i,1),n.setVisibleLayers(n.visibleLayers)}else n.hide();else n.hide();this.refreshLegendWidget()}},updateDynamicLayer:function(e){var t=app.map.getLayer(e.id),n=[];t&&(n.push(e.layerId),t.setVisibleLayers(n),t.show(),this.refreshLegendWidget())},parseDate:function(e){var t=e.split("/");return new Date(t[2],t[0]-1,t[1])},daydiff:function(e,t){return Math.round((t-e)/864e5)+1},isLeapYear:function(e){return 0===(3&e)&&(e%100!==0||e%400===0)},updateGuyraDates:function(e){var t=e[0],n=e[1],r=app.map.getLayer("granChaco"),a=[],i="date >= '"+t.toDateString()+"' AND date <= '"+n.toDateString()+"'";a[0]=i,r.setLayerDefinitions(a)},updateGladDates:function(e){var t=app.map.getLayer("gladAlerts"),n=new Date(e[0]),r=new Date(e[1]),a=this.getJulianDate(n),i=this.getJulianDate(r);t&&t.setDateRange(a,i)},toggleGladConfidence:function(e){var t=app.map.getLayer("gladAlerts");e?t.setConfidenceLevel("all"):t.setConfidenceLevel("confirmed")},updateHansenDates:function(t){e.hansenLoss.levels.forEach(function(e){var n=app.map.getLayer(e.id);n.setDateRange(t[0],t[1])})},getJulianDate:function(e){var t=864e5,n=new Date(e),r=new Date(n.getFullYear(),0,0),a=Math.ceil((n-r)/t),i=1e3*(n.getFullYear()-2e3);return i+a},setWizardDynamicLayerDefinition:function(e,t){var n,r=app.map.getLayer(e.id),a=[];r&&(void 0!==t?(n=e.whereField+" = '"+t+"'",a[e.layerId]=n,r.setVisibleLayers([e.layerId],!0),r.setLayerDefinitions(a),r.show()):r.hide(),this.refreshLegendWidget())},setWizardMillPointsLayerDefinition:function(e){var t=app.map.getLayer(e.id);t&&(t.visible?t.hide():t.show())},setFiresLayerDefinition:function(t,n){var r,a,i,o,s=new Date,l=[];i=app.map.getLayer(e.fires.id),s.setDate(s.getDate()-1*t),a=s.getFullYear()+"-"+(s.getMonth()+1)+"-"+s.getDate()+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds(),o="7"!==t?"ACQ_DATE > date '"+a+"'":"1 = 1";for(var c=0,u=e.fires.defaultLayers.length;c<u;c++)l[c]=o;i&&(r=n?[0,1]:[0,1,2,3],i.visibleLayers.length!==r.length&&i.setVisibleLayers(r),i.setLayerDefinitions(l),this.refreshLegendWidget())},setOverlaysVisibleLayers:function(){var t,n,r=[];for(var n in app.map._simpleLegends)app.map._simpleLegends[n].hide();a(".gfw .overlays-container .overlays-checkbox.selected").forEach(function(t){n=t.dataset?t.dataset.layer:t.getAttribute("data-layer"),r.push(e[n].layerId),app.map._simpleLegends[n]&&app.map._simpleLegends[n].show()}),t=app.map.getLayer(e.overlays.id),t&&(0===r.length?(r.push(-1),t.hide()):t.show(),t.setVisibleLayers(r),this.refreshLegendWidget())},updateHansenTCD:function(t,n){var r=n[0],a=app.map.getLayer(t.id);console.log("original30Layer vis",a.visible);var i,o=a.options.minYear,s=a.options.maxYear,l=!0;e.hansenLoss.levels.forEach(function(e){var t=app.map.getLayer(e.id);t.visible&&(l=!1),t.setDateRange(o,s),e.value!==r?t.hide():i=t}),l===!1&&(i.show(),console.log(i.id))},updateLossImageServiceRasterFunction:function(e,t,n){var r,a,i=app.map.getLayer(t.id),o=[1];i&&(a=[e[0]+2001,e[1]+2001],r=this.getColormapLossRasterFunction(t.colormap,a,o,n),i.setRenderingRule(r))},updateImageServiceRasterFunction:function(e,t){var n,r,a=app.map.getLayer(t.id),i=[1];if(a){if("FormaAlerts"===t.id){var o=e[0]===e[1]?e[1]+1:e[1]+2;r=[1,1,e[0]+1,o],i=[0,1]}else r=e[0]===e[1]?[e[0]+1,e[1]+1]:[e[0]+1,e[1]+2];n=this.getColormapRasterFunction(t.colormap,r,i),a.setRenderingRule(n)}},updateTCDRenderingRule:function(t){var n,r=e.tcd,a=r.colormap,i=r.outputValue,o=[t,101];n=app.map.getLayer(r.id),n&&n.setRenderingRule(this.getColormapRasterFunction(a,o,i))},getColormapLossRasterFunction:function(e,t,n,r){return new v({rasterFunction:"ForestCover_lossyear_density",rasterFunctionArguments:{min_year:t[0],max_year:t[1],min_density:r[0],max_density:r[1]}})},getColormapRasterFunction:function(e,t,n){return new v({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:e,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:t,OutputValues:n,AllowUnmatched:!1}}},variableName:"Raster"})},updateCustomSuitabilityLayer:function(n,r){var i=app.map.getLayer(e.suit.id),o=t.get("suitabilitySettings"),s=[];switch(r){case"peat-depth-slider":o.computeBinaryRaster[1].values=this._prepareSuitabilityJSON(0,n);break;case"conservation-area-slider":o.computeBinaryRaster[3].values=n;break;case"water-resource-slider":o.computeBinaryRaster[4].values=n;break;case"slope-slider":o.computeBinaryRaster[2].values=n;break;case"elevation-slider":o.computeBinaryRaster[5].values=n;break;case"rainfall-slider":o.computeBinaryRaster[6].values=parseInt(n[0])+","+parseInt(n[1]);break;case"soil-drainage-slider":o.computeBinaryRaster[7].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"soil-depth-slider":o.computeBinaryRaster[8].values=this._prepareSuitabilityJSON(n,7,[99]);break;case"soil-acid-slider":o.computeBinaryRaster[9].values=this._prepareSuitabilityJSON(n[0],n[1],[99]);break;case"landcover-checkbox":s.push("11"),a("#environmental-criteria .suitable-checkbox input:checked").forEach(function(e){s.push(e.value)}),o.computeBinaryRaster[0].values=s.join(",");break;case"soil-type-checkbox":s.push("0"),s.push("6"),a("#environmental-criteria .suitable-checkbox-soil input:checked").forEach(function(e){s.push(e.value)}),o.computeBinaryRaster[10].values=s.join(",")}t.set("suitabilitySettings",o),i&&(i.refresh(),this.showSuitabilityLoader())},showSuitabilityLoader:function(){o.remove("suitability_loader","hidden")},hideSuitabilityLoader:function(){o.add("suitability_loader","hidden")},checkZoomDependentLayers:function(t){var n=e.pal,r=e.palHelper;this.toggleZoomDependentLayer(t,n,r,6)},toggleZoomDependentLayer:function(e,t,n,r){var a,i;a=app.map.getLayer(n.id),i=app.map.getLayer(t.id),void 0!==i&&void 0!==a&&(i.visible||a.visible)&&(app.map.getLevel()>r?(n.layerId&&a.setVisibleLayers([n.layerId]),a.show(),i.hide()):(a.hide(),i.show()))},updateZoomDependentLayer:function(e,t,n){var r,a;r=app.map.getLayer(t.id),a=app.map.getLayer(e.id),void 0!==a&&void 0!==r&&(a.visible||r.visible?(r.hide(),a.hide()):app.map.getLevel()>n?r.show():a.show(),this.refreshLegendWidget())},refreshLegendWidget:function(){var t,n,r=app.map.getLayer(e.legendLayer.id),a=e.tcd,i=e.forma,o=e.gladAlerts,s=e.hansenLoss,u=e.hansenGain,d=e.prodes,p=e.tfcs,f=e.primForest,m=e.suit,h=e.soy,g=[a,i,o,s,u,d,p,f,m,h],v=[],b=[];n=new y,n.transparency=100,c.forEach(g,function(e){t=app.map.getLayer(e.id),t&&t.visible&&(v.push(e.legendLayerId),b[e.legendLayerId]=n)}),r&&(v.length>0?(r.setVisibleLayers(v),r.setLayerDrawingOptions(b),r.visible||r.show()):r.hide(),l.byId("legend").refresh())},changeLayerTransparency:function(e,t,n){switch(t){case"image":this.setLayerOpacity(e,n);break;case"dynamic":this.setDynamicLayerTransparency(e,n);break;case"tiled":this.setLayerOpacity(e,n)}},setLayerOpacity:function(t,n){var r=app.map.getLayer(t.id);r&&(r.setOpacity(n/100),"ProtectedAreas"===r.id&&this.setDynamicLayerTransparency(e.palHelper,n))},setDynamicLayerTransparency:function(e,t){var n,r,a=app.map.getLayer(e.id);a&&(r=new y,r.transparency=100-t,n=a.layerDrawingOptions||[],void 0!==e.layerId?n[e.layerId]=r:e.defaultLayers&&c.forEach(e.defaultLayers,function(e){n[e]=r}),a.setLayerDrawingOptions(n))},setSelectedFeature:function(e){var t,n,r,a=new h,i=new g(e.url);a.objectIds=[e.objectId],a.outFields=["*"],a.returnGeometry=!0,i.execute(a).then(function(a){a.features&&a.features[0]&&(t=new f(a.features[0].geometry,null,a.features[0].attributes,null),t.layer=e.layer,n=m.graphicsExtent([t]).getCenter(),r={feature:t,value:t.attributes[a.displayFieldName]},t=e.templateFunction([r])[0],app.map.infoWindow.setFeatures([t]),app.map.infoWindow.show(n))})},_prepareSuitabilityJSON:function(e,t,n){for(var r=[],a=e;a<=t;a++)r.push(a);return n&&(r=r.concat(n)),r.join(",")}}}),define("map/TCDSlider",["dojo/on","map/MapModel","map/config","map/LayerController","actions/WizardActions","analysis/config"],function(e,t,n,r,a,i){var o,s,l=(i.STORE_KEYS,{show:function(){var t=this;void 0===o&&(o=$("#tcd-density-slider").ionRangeSlider({type:"double",values:[0,10,15,20,25,30,50,75,100],hide_min_max:!0,from_min:1,from_max:7,to_fixed:!0,grid:!0,grid_snap:!0,from:5,onFinish:t.change,prettify:function(e){return e+"%"}})),s=$("#tcd-modal"),s.addClass("active"),e.once($("#tcd-modal .close-icon")[0],"click",t.hide)},hide:function(){s&&s.removeClass("active")},change:function(e){var i=e.from_value;if(i){t.set("tcdDensityValue",e.from_value),a.setTreeCoverDensity(e.from_value);var o=[e.from_value,e.to_value];r.updateHansenTCD(n.hansenLoss,o)}}});return l}),define("components/wizard/WizardCheckbox",["react","knockout","map/TCDSlider","map/MapModel","actions/WizardActions","analysis/config","analysis/WizardStore","dojo/topic","utils/Analytics"],function(e,t,n,r,a,i,o,s,l){var c=i.STORE_KEYS;return e.createClass({propTypes:{label:e.PropTypes.string.isRequired,value:e.PropTypes.string.isRequired},componentDidMount:function(){"soy"===this.props.value&&(this.model=r.get("model")),o.registerCallback(c.currentTreeCoverDensity,this.tcdUpdated),o.registerCallback(c.gladConfidence,this.gladConfidenceUpdate)},tcdUpdated:function(){o.get(c.currentTreeCoverDensity);"soy"===this.props.value&&this.setState(this.state)},gladConfidenceUpdate:function(){if("gladAlerts"===this.props.value){var e=o.get(c.gladConfidence);this.setState({gladConfidence:e})}},render:function(){var t,n="wizard-checkbox"+(this.props.checked?" active":"");"gladAlerts"===this.props.value&&this.state&&(t=this.state.gladConfidence,this.props.childChecked=!t);var r,a="wizard-checkbox confirmed-glad"+(this.props.childChecked?" active":"");return"soy"===this.props.value&&this.model&&(r=this.model.tcdDensityValue()),e.createElement("div",{className:"wizard-checkbox-container"},e.createElement("div",{className:n,"data-value":this.props.value},e.createElement("span",{className:"custom-check",onClick:this.toggle},e.createElement("span",null)),e.createElement("a",{className:"wizard-checkbox-label",onClick:this.toggle},this.props.label),this.props.noInfoIcon?null:e.createElement("span",{onClick:this.showInfo,className:"layer-info-icon",dangerouslySetInnerHTML:{__html:"<svg class='info-icon-svg'><use xlink:href='#shape-info'></use></svg>"}})),this.props.checked&&"soy"===this.props.value?e.createElement("span",{className:"tcd-percentage-holder"},e.createElement("span",{className:"tcd-percentage-label"},"Analyze at "),e.createElement("span",{className:"tcd-percentage-button",onClick:this.showSoySlider},r),e.createElement("span",{className:"tcd-percentage-label"}," density")):null,this.props.checked&&"gladAlerts"===this.props.value?e.createElement("div",{className:a,"data-value":this.props.childValue},e.createElement("span",{className:"custom-check",onClick:this.toggleGladConfidence},e.createElement("span",null)),e.createElement("a",{className:"wizard-checkbox-label",onClick:this.toggleGladConfidence},this.props.childLabel)):null)},toggle:function(){this.props.change(this.props.value),"soy"===this.props.value&&n.hide(),l.sendEvent("Event","Analysis Toggle","User toggled analysis for the "+this.props.value+"layer.")},showSoySlider:function(){"soy"===this.props.value&&n.show(),l.sendEvent("Event","Analysis Toggle","User toggled analysis for the "+this.props.value+"layer.")},toggleGladConfidence:function(){this.props.change(this.props.childValue),a.setGladConfidence(this.props.childChecked),s.publish("toggleGladConfidence",this.props.childChecked),l.sendEvent("Event","Analysis Toggle","User toggled analysis for the "+this.props.value+"layer.")},showInfo:function(){switch(this.props.value){case"peat":this.props.infoDivClass="forest-and-land-cover-peat-lands";break;case"gladAlerts":this.props.infoDivClass="forest-change-glad-alerts";break;case"plantationsTypeLayer":this.props.infoDivClass="forest-and-land-cover-plantations";break;case"plantationsSpeciesLayer":this.props.infoDivClass="forest-and-land-cover-plantations";break;case"indonesiaMoratorium":this.props.infoDivClass="land-use-moratorium-areas";break;case"prodes":this.props.infoDivClass="forest-change-prodes-alerts";break;case"guyraAlerts":this.props.infoDivClass="forest-change-gran-chaco";break;case"treeDensity":this.props.infoDivClass="forest-and-land-cover-tree-cover-density";break;case"legal":this.props.infoDivClass="forest-and-land-cover-legal-classifications";break;case"protected":this.props.infoDivClass="conservation-protected-areas";break;case"carbon":this.props.infoDivClass="forest-and-land-cover-carbon-stocks";break;case"intact":this.props.infoDivClass="forest-and-land-cover-intact-forest-landscape";break;case"landCoverGlob":this.props.infoDivClass="forest-and-land-cover-land-cover-global";break;case"primForest":this.props.infoDivClass="forest-and-land-cover-primary-forest";break;case"biomes":this.props.infoDivClass="forest-and-land-cover-brazil-biomes";break;case"suit":this.props.infoDivClass="land-use-oil-palm";break;case"rspo":this.props.infoDivClass="land-use-rspo-consessions";break;case"landCoverIndo":this.props.infoDivClass="forest-and-land-cover-land-cover-indonesia";break;case"landCoverAsia":this.props.infoDivClass="forest-and-land-cover-land-cover-south-east-asia";break;case"treeCoverLoss":this.props.infoDivClass="forest-change-tree-cover-change";break;case"soy":this.props.infoDivClass="forest-change-soy"}document.getElementsByClassName(this.props.infoDivClass).length?s.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0]):s.publish("showInfoPanel",this.props.infoDivClass)}})}),define("components/wizard/StepThree",["react","analysis/config","analysis/WizardStore","components/wizard/WizardCheckbox"],function(e,t,n,r){
function a(){return s.checkboxes.filter(function(e){return e.checked}).map(function(e){return e.value}).concat([s.forestChange.value])}function i(){var e=n.get(d.selectedCustomFeatures);return e.length>0?e.map(function(e){return e.attributes.WRI_label}).join(","):"none"}function o(){return{completed:!1,optionsExpanded:!0,forestChangeCategory:!0,forestChangeCheckbox:a(),currentSelectionLabel:i()}}var s=t.stepThree,l='<use xlink:href="#tree-closed" />',c='<use xlink:href="#tree-open" />',u=[],d=t.STORE_KEYS;return e.createClass({getInitialState:function(){return o()},componentDidMount:function(){n.registerCallback(d.selectedCustomFeatures,this.analysisAreaUpdated),n.registerCallback(d.areaOfInterest,this.AOIupdated)},AOIupdated:function(){var e=n.get(d.areaOfInterest),t=this.state.forestChangeCheckbox.slice();s.checkboxes.some(function(n){if(e===n.label&&t.indexOf(n.value)===-1)return t.push(n.value),this.setState({forestChangeCheckbox:t}),!0},this)},analysisAreaUpdated:function(){this.setState({currentSelectionLabel:i()})},toggleOptions:function(){this.setState({optionsExpanded:!this.state.optionsExpanded})},componentDidUpdate:function(){var e=n.get(d.userStep);3===e&&this._selectionMade()},componentWillReceiveProps:function(e){e.isResetting&&this.replaceState(o())},shouldComponentUpdate:function(){return 3===n.get(d.userStep)},render:function(){var a=n.get(d.areaOfInterest),i=n.get(d.selectedCustomFeatures),o=this.state.optionsExpanded,u=this.state.forestChangeCheckbox,p=i.length>0&&i.some(function(e){return"point"===e.geometry.type});return e.createElement("div",{className:"step select-analysis"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-three-top"},e.createElement("div",{className:"step-title"},s.title),a===s.millPoint||a===s.customArea?this.createPointContent(p):null,e.createElement("div",{className:"relative forestChange-description"},e.createElement(r,{onClick:this.toggleOptions,value:s.forestChange.value,checked:u.indexOf(s.forestChange.value)>-1,change:this._selectionMade,isResetting:this.props.isResetting,label:s.forestChange.label,noInfoIcon:!0}),e.createElement("svg",{onClick:this.toggleOptions,className:"analysis-expander "+(o?"open":"closed"),dangerouslySetInnerHTML:{__html:o?c:l}}),e.createElement("p",{className:"forest-options-text layer-description"},"Choose layers here")),e.createElement("p",{className:"layer-description"},s.forestChange.description),e.createElement("div",{className:"checkbox-list "+(o===!1?"transition-hidden":"")},e.createElement("div",null,s.checkboxes.map(this._mapper,this))),e.createElement(r,{label:s.suit.label,value:s.suit.value,checked:u.indexOf(s.suit.value)>-1,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.createElement("p",{className:"layer-description"},s.suit.description),e.createElement(r,{label:s.rspo.label,value:s.rspo.value,checked:u.indexOf(s.rspo.value)>-1,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.createElement("p",{className:"layer-description"},s.rspo.description),e.createElement("div",{className:"millPointOption"===a||"commercialEntityOption"===a?"":"hidden",style:{position:"relative"}},e.createElement(r,{label:s.mill.label,value:s.mill.value,checked:u.indexOf(s.mill.value)>-1,change:this._selectionMade,isResetting:this.props.isResetting,noInfoIcon:!0}),e.createElement("p",{className:"layer-description"},s.mill.description)),e.createElement("p",{className:"layer-description palm-risk"},e.createElement("a",{href:"http://www.wri.org/publication/palmriskmethodology",target:"_blank"},"Click here")," to see the PALM Risk Assessment Methodology technical note"))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"selected-analysis-area"},e.createElement("div",{className:"current-selection-label"},t.stepTwo.currentFeatureText),e.createElement("div",{className:"current-selection",title:this.state.currentSelectionLabel},this.state.currentSelectionLabel)),e.createElement("div",{onClick:this._proceed,className:"next-button-container "+(this.state.completed?"":"disabled")},e.createElement("span",{className:"next-button"},"Perform Analysis"))))},_mapper:function(t){var n=this.state.forestChangeCheckbox;return e.createElement(r,{label:t.label,value:t.value,change:this._selectionMade,childLabel:t.childLabel,childChecked:n.indexOf(t.childValue)>-1,childChange:this._selectionMade,childValue:t.childValue,isResetting:this.props.isResetting,checked:n.indexOf(t.value)>-1,noInfoIcon:t.noInfoIcon||!1})},createPointContent:function(t){var r=n.get(d.areaOfInterest)===s.customArea;s.pointRadiusOptions.map(function(t){return e.createElement("option",{value:t.value},t.label)});return!t&&r?null:e.createElement("p",{className:"sub-title"},s.knownMillsDisclaimer)},_selectionMade:function(e){var t=this.state.forestChangeCheckbox.slice();if(e&&e===s.forestChange.value)this.toggleFca(t.indexOf(e)>-1);else if(e){var n=t.indexOf(e);n>-1?t.splice(n,1):t.push(e),this.setState({forestChangeCheckbox:t})}var r=this._checkRequirements(),a=this.state.completed;a!==r&&this.setState({completed:r})},toggleFca:function(e){var t=this.state.forestChangeCheckbox.slice();e?(u=[],s.checkboxes.forEach(function(e){t.indexOf(e.value)>-1&&u.push(e.value)}),u.forEach(function(e){t.splice(t.indexOf(e),1)}),t.splice(t.indexOf(s.forestChange.value),1)):(t=t.concat(u),t.push(s.forestChange.value)),this.setState({forestChangeCheckbox:t})},checkedOverride:function(e){var t=n.get(d.areaOfInterest);return t===e},_checkRequirements:function(){var e=!1,t=$(".select-analysis .wizard-checkbox.active");return t&&t.length>0&&(e=!0),e},_getPayload:function(){var e,t=document.querySelectorAll(".select-analysis .wizard-checkbox"),r=n.get(d.areaOfInterest),a={};return Array.prototype.forEach.call(t,function(t){e=t.dataset?t.dataset.value:t.getAttribute("data-value"),"millPointOption"!==r&&"mill"===e||(a[e]=t.className.search("active")>-1)}),a},_proceed:function(){if(this.state.completed){var e=this._getPayload();n.set(d.analysisSets,e),this.props.callback.performAnalysis()}}})}),define("components/wizard/Intro",["react","analysis/config","actions/WizardActions"],function(e,t,n){var r=t.intro;return e.createClass({render:function(){return e.createElement("div",{className:"step"},e.createElement("div",{className:"step-body"},e.createElement("div",{className:"step-title"},r.title),e.createElement("div",{className:"step-one-main-description"},e.createElement("p",null,r.beginningText),e.createElement("ul",null,r.firstList.map(this._listMapper)),e.createElement("p",null,r.secondaryText),e.createElement("ul",null,r.secondList.map(this._listMapper)))),e.createElement("div",{className:"step-footer"},e.createElement("div",{className:"next-button-container",onClick:n.proceedToNextStep},e.createElement("div",{className:"next-button"},"Next"))))},_listMapper:function(t){return e.createElement("li",null,t)}})}),define("map/LossSlider",["dojo/on","map/config","utils/Analytics","map/LayerController"],function(e,t,n,r){"use strict";var a,i,o,s={containerId:"treecover_change_toolbox",values:[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014],sliderSelector:"#loss-range-slider",baseValue:2001,playHtml:"&#9658;",pauseHtml:"&#x25A0"},l={isPlaying:!1,from:0,to:s.values.length-1},c={init:function(){var t=this;void 0===o&&($(s.sliderSelector).ionRangeSlider({type:"double",values:s.values,grid:!0,hide_min_max:!0,hide_from_to:!0,prettify_enabled:!1,onFinish:t.change,onUpdate:t.change}),o=$(s.sliderSelector).data("ionRangeSlider"),i=$("#lossPlayButton"),e(i,"click",t.playToggle))},change:function(e){var a,i=app.map.getLayer(t.tcd.id);a=i.renderingRule.functionArguments?i.renderingRule.functionArguments.Raster.rasterFunctionArguments.InputRanges:[30,100],r.updateLossImageServiceRasterFunction([e.from,e.to],t.loss,a),l.isPlaying||(e.from!==l.from?n.sendEvent("Event","Loss Timeline","Change start date"):n.sendEvent("Event","Loss Timeline","Change end date")),l.from=e.from,l.to=e.to},playToggle:function(){function e(){l.isPlaying=!1,clearInterval(a),i.html(s.playHtml)}var t,r,c;l.isPlaying?e():(l.isPlaying=!0,c=o.result.to,o.update({from:o.result.from,to:o.result.from}),a=setInterval(function(){t=o.result.from,r=o.result.to,r>=c?e():o.update({from:t,to:++r})},1250),i.html(s.pauseHtml)),n.sendEvent("Event","Loss Timeline","Play")}};return c}),define("map/FormaSlider",["dojo/on","map/config","esri/request","dojo/Deferred","utils/Analytics","map/LayerController"],function(e,t,n,r,a,i){var o,s,l,c={sliderSelector:"#forma-alert-slider",playHtml:"&#9658;",pauseHtml:"&#x25A0",baseYear:15},u={isPlaying:!1,from:0,to:0},d=function(){var e,a=new r,i=[];return e=n({url:t.forma.url,callbackParamName:"callback",content:{f:"json"},handleAs:"json"}),e.then(function(e){var t,n=e.minValues[0]||1,r=e.maxValues[0]||9;for(n;n<=r;n++)t=c.baseYear+Math.floor(n/12),i.push(n+" - "+t);a.resolve(i)},function(){a.reject()}),a},p={init:function(){var t=this;void 0===s&&d().then(function(n){$(c.sliderSelector).ionRangeSlider({type:"double",values:n,grid:!0,hide_min_max:!0,hide_from_to:!0,onFinish:t.change,onUpdate:t.change}),s=$(c.sliderSelector).data("ionRangeSlider"),l=$("#formaPlayButton"),e(l,"click",t.playToggle),u.to=n.length-1})},change:function(e){i.updateImageServiceRasterFunction([e.from,e.to],t.forma),u.isPlaying||(e.from!==u.from?a.sendEvent("Event","Forma Timeline","Change start date"):a.sendEvent("Event","Forma Timeline","Change end date")),u.from=e.from,u.to=e.to},playToggle:function(){function e(){u.isPlaying=!1,clearInterval(o),l.html(c.playHtml)}var t,n,r;u.isPlaying?e():(u.isPlaying=!0,r=s.result.to,s.update({from:s.result.from,to:s.result.from}),o=setInterval(function(){t=s.result.from,n=s.result.to,n>=r?e():s.update({from:t,to:++n})},1250),l.html(c.pauseHtml)),a.sendEvent("Event","Forma Timeline","Play")}};return p}),define("utils/DateHelper",[],function(){return{getDate:function(e){var t=this.getDayOfWeek(e),n=this.getMonth(e),r=t+", "+e.getDate()+" "+n+" "+e.getFullYear();return r},getDayOfWeek:function(e){var t;switch(e.getDay()){case 0:t="Su";break;case 1:t="Mo";break;case 2:t="Tu";break;case 3:t="We";break;case 4:t="Th";break;case 5:t="Fr";break;case 6:t="Sa"}return t},getMonth:function(e){var t;switch(e.getMonth()){case 0:t="Jan";break;case 1:t="Feb";break;case 2:t="March";break;case 3:t="April";break;case 4:t="May";break;case 5:t="June";break;case 6:t="July";break;case 7:t="August";break;case 8:t="Sept";break;case 9:t="Oct";break;case 10:t="Nov";break;case 11:t="Dec"}return t}}}),define("components/ModalWrapper",["react","dojo/dom-class"],function(e,t){var n=e.createClass({displayName:"ModalWrapper",close:function(){var n=e.findDOMNode(this).parentElement;t.add(n,"hidden")},render:function(){return e.createElement("div",{className:"modal-container"},e.createElement("div",{className:"modal-background",onClick:this.close}),e.createElement("div",{className:"modal-window"},e.createElement("div",{title:"close",className:"modal-close close-icon pointer",onClick:this.close},e.createElement("svg",{viewBox:"0 0 25 25"},e.createElement("path",{d:"M 5 19 L 19 5 L 21 7 L 7 21 L 5 19 ZM 7 5 L 21 19 L 19 21 L 5 7 L 7 5 Z"}))),e.createElement("div",{className:"modal-wrapper custom-scroll "+(this.props.children&&this.props.children[0]||!this.props.downloadData?"":"has-footer")},this.props.children,this.props.children&&this.props.children[0]||!this.props.downloadData?null:e.createElement("div",{className:"modal-footer"},e.createElement("div",{className:"m-btncontainer is-center"},e.createElement("a",{href:this.props.downloadData,onClick:this.sendDownloadAnalytics,target:"_blank",className:"btn green uppercase download-mobile-link"},"Learn more or download data"))))))}});return n}),define("components/CalendarWrapper",["react","components/ModalWrapper","dojo/dom-class"],function(e,t,n){var r=e.createClass({displayName:"CalendarWrapper",close:function(){var t=e.findDOMNode(this).parentElement;n.add(t,"hidden")},render:function(){return e.createElement("div",{className:"modal-container"},e.createElement("div",{className:"calendar-background",onClick:this.close}),e.createElement("div",{className:"calendar-window"},e.createElement("div",{title:"close",className:"modal-close close-icon pointer",onClick:this.close},e.createElement("svg",{viewBox:"0 0 25 25"},e.createElement("path",{d:"M 5 19 L 19 5 L 21 7 L 7 21 L 5 19 ZM 7 5 L 21 19 L 19 21 L 5 7 L 7 5 Z"}))),e.createElement("div",{className:"calendar-wrapper custom-scroll"},this.props.children)))}});return r}),define("components/CalendarModal",["react","components/CalendarWrapper","dojo/dom-class","dojo/topic","utils/DateHelper","utils/Analytics","map/config"],function(e,t,n,r,a,i,o){var s=o.calendars,l=e.createClass({displayName:"CalendarModal",getInitialState:function(){return{activeCalendar:"",startDate:new window.Kalendae.moment("01/01/2015"),endDate:new window.Kalendae.moment}},componentDidMount:function(){var e=this;s.forEach(function(t){var n,r=t.selectedDate;n=r?new window.Kalendae.moment(r):new window.Kalendae.moment;var a=new window.Kalendae(t.domId,{months:1,mode:"single",selected:n});a.subscribe("change",e[t.method].bind(e))})},componentWillReceiveProps:function(e){this.setState(e)},render:function(){return e.createElement(t,null,e.createElement("div",{className:"calendar-window"},s.map(this.itemMapper,this)))},itemMapper:function(t){return e.createElement("div",{className:t.domClass},e.createElement("div",{id:t.domId,className:this.state.activeCalendar===t.domId?"":" hidden"}))},setCalendar:function(e){this.setState({activeCalendar:e})},close:function(){var t=e.findDOMNode(this).parentElement;n.add(t,"hidden")},changeGladStart:function(e){e=e.format("M/D/YYYY");var t=$("#gladPlayButtonStartClick"),n=new Date(e);t.html(a.getDate(n)),this.close(),this.setState({startDate:e});var o=this.state.endDate;o.format&&(o=o.format("M/D/YYYY")),r.publish("updateGladDates",[e,o]),i.sendEvent("Event","Glad Timeline","Change start date")},changeGladEnd:function(e){e=e.format("M/D/YYYY");var t=$("#gladPlayButtonEndClick"),n=new Date(e);t.html(a.getDate(n)),this.close(),this.setState({endDate:e});var o=this.state.startDate;o.format&&(o=o.format("M/D/YYYY")),r.publish("updateGladDates",[o,e]),i.sendEvent("Event","Glad Timeline","Change end date")}});return function(t,n){return e.render(e.createElement(l,e.__spread({},t)),document.getElementById(n))}}),define("map/GladSlider",["dojo/on","dojo/dom-class","map/config","esri/request","utils/DateHelper","dojo/Deferred","components/CalendarModal"],function(e,t,n,r,a,i,o){var s,l={init:function(){if(void 0===s){var r,i,l=new o({},"calendar-modal");n.calendars.forEach(function(e){"gladCalendarStart"===e.domId?r=e.selectedDate:"gladCalendarEnd"===e.domId&&(i=e.selectedDate)});var c=$("#gladPlayButtonStartClick"),u=new window.Kalendae.moment(r).format("M/D/YYYY"),d=new Date(u);c.html(a.getDate(d)),e(c,"click",function(){var e=l.getDOMNode();l.setCalendar("gladCalendarStart"),t.remove(e.parentNode,"hidden")});var p=$("#gladPlayButtonEndClick"),f=new Date(i);p.html(a.getDate(f)),e(p,"click",function(){var e=l.getDOMNode();l.setCalendar("gladCalendarEnd"),t.remove(e.parentNode,"hidden")})}}};return l}),define("map/HansenSlider",["dojo/on","map/config","utils/Analytics","map/LayerController"],function(e,t,n,r){var a,i,o,s={containerId:"hansen_change_toolbox",values:[2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014],sliderSelector:"#hansen-range-slider",baseValue:2001,playHtml:"&#9658;",pauseHtml:"&#x25A0"},l={isPlaying:!1,from:0,to:s.values.length-1},c={init:function(){var t=this;void 0===o&&($(s.sliderSelector).ionRangeSlider({type:"double",values:s.values,grid:!0,hide_min_max:!0,hide_from_to:!0,prettify_enabled:!1,onFinish:t.change,onUpdate:t.change}),o=$(s.sliderSelector).data("ionRangeSlider"),i=$("#hansenPlayButton"),e(i,"click",t.playToggle))},change:function(e){r.updateHansenDates([e.from,e.to]),l.from=e.from,l.to=e.to},playToggle:function(){function e(){l.isPlaying=!1,clearInterval(a),i.html(s.playHtml)}var t,r,c;l.isPlaying?e():(l.isPlaying=!0,c=o.result.to,o.update({from:o.result.from,to:o.result.from}),a=setInterval(function(){t=o.result.from,r=o.result.to,r>=c?e():o.update({from:t,to:++r})},1250),i.html(s.pauseHtml)),n.sendEvent("Event","Loss Timeline","Play")}};return c}),define("map/ProdesSlider",["dojo/on","map/config","esri/request","dojo/Deferred","utils/Analytics","map/LayerController"],function(e,t,n,r,a,i){var o,s,l,c={sliderSelector:"#prodes-alert-slider",playHtml:"&#9658;",pauseHtml:"&#x25A0",baseYear:1999},u={isPlaying:!1,from:0,to:0},d=function(){var e,a=new r,i=[];return e=n({url:t.prodes.url,callbackParamName:"callback",content:{f:"json"},handleAs:"json"}),e.then(function(e){var t,n=e.minValues[0],r=e.maxValues[0];for(n;n<=r;n++)t=c.baseYear+n,i.push(t);a.resolve(i)},function(){a.reject()}),a},p={init:function(){var t=this;void 0===s&&d().then(function(n){$(c.sliderSelector).ionRangeSlider({type:"double",values:n,grid:!0,prettify_enabled:!1,hide_min_max:!0,hide_from_to:!0,onFinish:t.change,onUpdate:t.change}),s=$(c.sliderSelector).data("ionRangeSlider"),l=$("#prodesPlayButton"),e(l,"click",t.playToggle),u.to=n.length-1})},change:function(e){i.updateImageServiceRasterFunction([e.from,e.to],t.prodes),u.isPlaying||(e.from!==u.from?a.sendEvent("Event","Forma Timeline","Change start date"):a.sendEvent("Event","Forma Timeline","Change end date")),u.from=e.from,u.to=e.to},playToggle:function(){function e(){u.isPlaying=!1,clearInterval(o),l.html(c.playHtml)}var t,n,r;u.isPlaying?e():(u.isPlaying=!0,r=s.result.to,s.update({from:s.result.from,to:s.result.from}),o=setInterval(function(){t=s.result.from,n=s.result.to,n>=r?e():s.update({from:t,to:++n})},1250),l.html(c.pauseHtml)),a.sendEvent("Event","Prodes Timeline","Play")}};return p}),define("map/GuyraSlider",["dojo/on","map/config","esri/tasks/query","esri/tasks/QueryTask","dojo/Deferred","utils/Analytics","map/LayerController"],function(e,t,n,r,a,i,o){var s,l,c,u={sliderSelector:"#guyra-alert-slider",playHtml:"&#9658;",pauseHtml:"&#x25A0",baseYear:1999},d={isPlaying:!1,from:0,to:0},p=function(){var e,i,o=new a;return e=new n,e.returnGeometry=!1,e.outFields=["date"],e.returnDistinctValues=!0,e.where="1=1",i=new r(t.granChaco.url+"/"+t.granChaco.defaultLayers[0]),i.execute(e,function(e){var t,n,r,a=[];e.features.sort(function(e,t){return new Date(t.attributes.date)-new Date(e.attributes.date)}),e.features.reverse();for(var i=0;i<e.features.length;i++)t=new Date(e.features[i].attributes.date),r=t.getFullYear().toString().substr(2,2),n=("0"+(t.getMonth()+1)).slice(-2),a.push(n+"-"+r);o.resolve(a)}),o},f={init:function(){var t=this;void 0===l&&p().then(function(n){$(u.sliderSelector).ionRangeSlider({type:"double",values:n,grid:!0,prettify_enabled:!1,hide_min_max:!0,hide_from_to:!0,onFinish:t.change,onUpdate:t.change}),l=$(u.sliderSelector).data("ionRangeSlider"),c=$("#guyraPlayButton"),e(c,"click",t.playToggle),d.to=n.length-1})},change:function(e){var t=e.from_value.split("-"),n=e.to_value.split("-"),r=new Date(t[0]+"/1/20"+t[1]),a=new Date(n[0]+"/1/20"+n[1]);o.updateGuyraDates([r,a]),d.isPlaying||(e.from!==d.from?i.sendEvent("Event","Forma Timeline","Change start date"):i.sendEvent("Event","Forma Timeline","Change end date")),d.from=r,d.to=a},playToggle:function(){function e(){d.isPlaying=!1,clearInterval(s),c.html(u.playHtml)}var t,n,r;d.isPlaying?e():(d.isPlaying=!0,r=l.result.to,l.update({from:l.result.from,to:l.result.from}),s=setInterval(function(){t=l.result.from,n=l.result.to,n>=r?e():l.update({from:t,to:++n})},1e3),c.html(u.pauseHtml)),i.sendEvent("Event","Guyra Timeline","Play")}};return f}),define("map/Controls",["dojo/dom","dojo/query","dojo/Deferred","dojo/_base/fx","dojo/_base/array","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/dom-construct","utils/Hasher","map/config","map/MapModel","map/LossSlider","map/FormaSlider","map/GladSlider","map/HansenSlider","map/ProdesSlider","map/GuyraSlider","map/LayerController","esri/request","esri/TimeExtent","esri/dijit/TimeSlider","dijit/form/CheckBox"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g,v,y,b,_,C,w){var E=jQuery.noConflict();return{toggleToolbox:function(e,t){if("CustomSuitability"===e.id){var n="show"===t?"block":"none";o.set(e.toolsNode,"display",n),this.resizeRangeSliders()}else this.hideAllToolboxes(),"show"===t&&o.set(e.toolsNode,"display","block")},hideAllToolboxes:function(){t(".gfw .layer-controls-container .toolbox").forEach(function(e){"block"===o.get(e,"display")&&o.set(e,"display","none")})},createDialogBox:function(e){require(["dijit/Dialog"],function(t){var n=new t({title:e,style:"height: 600px; width: 600px; overflow-y: auto;",draggable:!1,hide:function(){n.destroy()}});n.onClose(function(){}),n.show(),$("body").on("click",function(e){e.target.classList.contains("dijitDialogUnderlay")&&(n.hide(),$("body").off("click"))})})},showFiresConfidenceInfo:function(){require(["dijit/Dialog"],function(e){var t="<p>"+u.firesConfidenceDialog.text+"</p>",n=new e({title:u.firesConfidenceDialog.title.toUpperCase(),style:"height: 310px; width: 415px; font-size:14px; padding: 5px;",draggable:!1,hide:function(){n.destroy()}});n.setContent(t),n.show(),$("body").on("click",function(e){e.target.classList.contains("dijitDialogUnderlay")&&(n.hide(),$("body").off("click"))})})},toggleFiresLayerOptions:function(n){var r,a=n.target?n.target:n.srcElement,o=a.dataset?a.dataset.filter:a.getAttribute("data-filter");t(".fires_toolbox .toolbox-list li").forEach(function(e){i.remove(e,"selected")}),i.add(a,"selected"),r=e.byId("high-confidence").checked,y.setFiresLayerDefinition(o,r)},toggleFiresConfidenceLevel:function(e){var n,r,a=e.target?e.target:e.srcElement,i=a.checked;n=t(".fires_toolbox .toolbox-list li.selected")[0],r=n.dataset?n.dataset.filter:n.getAttribute("data-filter"),y.setFiresLayerDefinition(r,i)},toggleOverlays:function(t,n){t?i.toggle(t.currentTarget,"selected"):n&&i.toggle(e.byId(n),"selected"),y.setOverlaysVisibleLayers()},generateTimeSliders:function(){p.init(),f.init(),m.init(),h.init(),g.init(),v.init()},toggleLegendContainer:function(){var t=e.byId("legend-container"),n=280===t.offsetHeight?30:280;r.animateProperty({node:t,properties:{height:n},duration:500,onEnd:function(){30===n?i.add("legend-title","closed"):i.remove("legend-title","closed")}}).play()},generateSuitabilitySliders:function(){this.createCheckboxDijits(),this.createRangeSliders()},createCheckboxDijits:function(){var e;a.forEach(u.checkboxItems,function(t){e=new w({name:t.name,value:t.value,checked:t.checked,onChange:function(){y.updateCustomSuitabilityLayer(null,t.name)}},t.node)})},createRangeSliders:function(){var e=u.suitabilitySliderTooltips;jQuery.browser={},function(){jQuery.browser.msie=!1,jQuery.browser.version=0,navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)}(),E("#peat-depth-slider").rangeSlider({defaultValues:{min:0,max:3},valueLabels:"change",bounds:{min:0,max:3},step:1,arrows:!1,formatter:function(t){return e.peat[t]}}),E("#peat-depth-slider").addClass("singleValueSlider reverseSlider"),E("#peat-depth-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer(t.values.min,"peat-depth-slider")}),E("#conservation-area-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"change",bounds:{min:500,max:5e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),E("#conservation-area-slider").addClass("singleValueSlider"),E("#conservation-area-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer(t.values.min,"conservation-area-slider")}),E("#water-resource-slider").rangeSlider({defaultValues:{min:100,max:1e3},valueLabels:"change",bounds:{min:50,max:1e3},step:1,arrows:!1,formatter:function(e){return e+" m"}}),E("#water-resource-slider").addClass("singleValueSlider"),E("#water-resource-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer(t.values.min,"water-resource-slider")}),E("#slope-slider").rangeSlider({defaultValues:{min:30,max:80},valueLabels:"change",bounds:{min:0,max:80},step:1,arrows:!1,formatter:function(e){return e+"%"}}),E("#slope-slider").addClass("singleValueSlider reverseSlider"),E("#slope-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer(t.values.min,"slope-slider")}),E("#elevation-slider").rangeSlider({defaultValues:{min:1e3,max:5e3},valueLabels:"hide",bounds:{min:0,max:5e3},step:1,arrows:!1,formatter:function(e){return e+"m"}}),E("#elevation-slider").addClass("singleValueSlider reverseSlider"),E("#elevation-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer(t.values.min,"elevation-slider")}),E("#rainfall-slider").rangeSlider({defaultValues:{min:1500,max:6e3},valueLabels:"hide",bounds:{min:1500,max:6e3},step:1,arrows:!1,formatter:function(t){return t+" "+e.rainfall.label}}),E("#rainfall-slider").addClass("narrowTooltips"),E("#rainfall-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer([t.values.min,t.values.max],"rainfall-slider")}),E("#soil-drainage-slider").rangeSlider({defaultValues:{min:2,max:4},valueLabels:"hide",bounds:{min:1,max:4},step:1,arrows:!1,formatter:function(t){return e.drainage[t]}}),E("#soil-drainage-slider").addClass("narrowTooltips"),E("#soil-drainage-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-drainage-slider")}),E("#soil-depth-slider").rangeSlider({defaultValues:{min:3,max:7},valueLabels:"hide",bounds:{min:1,max:7},step:1,arrows:!1,formatter:function(t){return e.depth[t]}}),E("#soil-depth-slider").addClass("singleValueSlider narrowTooltips"),E("#soil-depth-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer(t.values.min,"soil-depth-slider")}),E("#soil-acid-slider").rangeSlider({defaultValues:{min:1,max:7},valueLabels:"change",bounds:{min:1,max:8},step:1,arrows:!1,formatter:function(t){return e.acidity[t]}}),E("#soil-acid-slider").addClass("narrowTooltips"),E("#soil-acid-slider").bind("valuesChanged",function(e,t){y.updateCustomSuitabilityLayer([t.values.min,t.values.max],"soil-acid-slider")}),t(".ui-rangeSlider-innerBar").forEach(function(e){l.create("div",{class:"slider-bar-blocker"},e,"after")})},resetSuitabilitySettings:function(){E("#peat-depth-slider").rangeSlider("values",0,3),E("#conservation-area-slider").rangeSlider("values",1e3,5e3),E("#water-resource-slider").rangeSlider("values",100,1e3),E("#slope-slider").rangeSlider("values",30,80),E("#elevation-slider").rangeSlider("values",1e3,5e3),E("#rainfall-slider").rangeSlider("values",1500,6e3),E("#soil-drainage-slider").rangeSlider("values",2,4),E("#soil-depth-slider").rangeSlider("values",3,7),E("#soil-acid-slider").rangeSlider("values",1,7),this.resizeRangeSliders();var e;a.forEach(u.checkboxItems,function(t){e=s.byId(t.node),e&&e.set("checked",t.checked)})},exportSuitabilitySettings:function(){var t=this;require(["dijit/Dialog","dojo/on","dojo/_base/lang"],function(n,r,a){var i="<p>"+u.suitabilityExportDialog.instruction+"</p>";i+="<p id='export-error-message' style='color: #e50036;font-size: 12px;'></p>",i+="<div id='export-loading-now' class='submit-container' style='display: none; visibility: hidden;'><div class='loading-wheel-container'><div class='loading-wheel'></div></div></div>",i+="<div id='export-buttons-container' class='submit-container'>",i+="<button id='export-cancel-now'>Cancel</button> ",i+="<button id='export-download-now'>Download</button>",i+="</div>";var s=new n({title:u.suitabilityExportDialog.title.toUpperCase(),style:"height: 190px; width: 415px; overflow-y: none;",draggable:!1,hide:function(){s.destroy()}});s.setContent(i),s.show(),r(e.byId("export-cancel-now"),"click",function(){s.destroy()}),r(e.byId("export-download-now"),"click",function(){var n=t._getSettingsCSV(),r=new Blob([n],{type:"text/csv;charset=utf-8;"});saveAs(r,"settings.csv"),o.set(e.byId("export-buttons-container"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"visibility","visible"),o.set(e.byId("export-loading-now"),"display","block"),t._saveTIFF(function(t){console.log("**callback** (error = "+t+")"),o.set(e.byId("export-loading-now"),"visibility","hidden"),o.set(e.byId("export-loading-now"),"display","none"),""==t?s.destroy():e.byId("export-error-message").innerHTML=t})})})},_saveTIFF:function(e){var t=(app.map.extent,1460),n=854,r={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",format:"tiff",size:t+","+n,imageSR:3857,bboxSR:3857,f:"json",pixelType:"UNKNOWN"},a=function(t,n){console.log("exporter() :: url = ",t),window.open(t,"geoTiffWin"),e("")},i=u.suit.id;app.map.getLayer(i).getImageUrl(app.map.extent,t,n,a,r)},_getSettingsCSV:function(){var n,r,o,l,c,d,p=["peat-depth-slider","conservation-area-slider","water-resource-slider","slope-slider","elevation-slider","rainfall-slider","soil-drainage-slider","soil-depth-slider","soil-acid-slider"],f="";a.forEach(p,function(t){if(n=e.byId(t+"-label"),r=E("#"+t).rangeSlider("values"),o=E("#"+t).rangeSlider("bounds"),l=i.contains(t,"reverseSlider"),d=t.split("-"),"rainfall"!=d[0]&&(c=u.suitabilitySliderTooltips[d[0]],void 0==c&&("acid"==d[1]&&(d[1]="acidity"),c=u.suitabilitySliderTooltips[d[1]])),""!=f&&(f+="\n"),f+=n.innerHTML+",",l)if(void 0==c)f+=o.min+"-"+r.min;else{for(var a="",s=o.min;s<=r.min;++s)""!=a&&(a+="; "),a+=c[s].replace(",","/");f+=a}else if(void 0==c)f+=r.min+"-"+r.max;else{for(var a="",s=r.min;s<=r.max;++s)""!=a&&(a+="; "),a+=c[s].replace(",","/");f+=a}});var m,h="",g="";a.forEach(u.checkboxItems,function(e){m=s.byId(e.node),m&&m.get("checked")&&(n=t("label[for='"+e.node+"']")[0],"landcover-checkbox"==e.name?(""!=h&&(h+="; "),h+=n.innerHTML):"soil-type-checkbox"==e.name&&(""!=g&&(g+="; "),g+=n.innerHTML))});var v=["Suitability Parameter","Suitability Values"],y=v.join(",")+"\n";return y+=f+"\n",y+="Land Cover,"+h+"\n",y+="Soil Type,"+g+"\n"},resizeRangeSliders:function(){E("#peat-depth-slider").rangeSlider("option","valueLabels","hide"),E("#conservation-area-slider").rangeSlider("option","valueLabels","hide"),E("#water-resource-slider").rangeSlider("option","valueLabels","hide"),E("#slope-slider").rangeSlider("option","valueLabels","hide"),E("#elevation-slider").rangeSlider("option","valueLabels","hide"),E("#rainfall-slider").rangeSlider("option","valueLabels","hide"),E("#soil-drainage-slider").rangeSlider("option","valueLabels","hide"),E("#soil-depth-slider").rangeSlider("option","valueLabels","hide"),E("#soil-acid-slider").rangeSlider("option","valueLabels","hide"),E("#peat-depth-slider").rangeSlider("resize"),E("#conservation-area-slider").rangeSlider("resize"),E("#water-resource-slider").rangeSlider("resize"),E("#slope-slider").rangeSlider("resize"),E("#elevation-slider").rangeSlider("resize"),E("#rainfall-slider").rangeSlider("resize"),E("#soil-drainage-slider").rangeSlider("resize"),E("#soil-depth-slider").rangeSlider("resize"),E("#soil-acid-slider").rangeSlider("resize"),E("#peat-depth-slider").rangeSlider("option","valueLabels","change"),E("#conservation-area-slider").rangeSlider("option","valueLabels","change"),E("#water-resource-slider").rangeSlider("option","valueLabels","change"),E("#slope-slider").rangeSlider("option","valueLabels","change"),E("#elevation-slider").rangeSlider("option","valueLabels","change"),E("#rainfall-slider").rangeSlider("option","valueLabels","change"),E("#soil-drainage-slider").rangeSlider("option","valueLabels","change"),E("#soil-depth-slider").rangeSlider("option","valueLabels","change"),E("#soil-acid-slider").rangeSlider("option","valueLabels","change")},serializeSuitabilitySettings:function(){return{"Peat Depth":E("#peat-depth-slider").rangeSlider("values").min,"Conservation Area":E("#conservation-area-slider").rangeSlider("values").min,"Water Resource":E("#water-resource-slider").rangeSlider("values").min,Slope:E("#slope-slider").rangeSlider("values").min,
Elevation:E("#elevation-slider").rangeSlider("values").min,Rainfall:E("#rainfall-slider").rangeSlider("values"),"Soil Drainage":E("#soil-drainage-slider").rangeSlider("values"),"Soil Depth":E("#soil-depth-slider").rangeSlider("values").min,"Soil Acidity":E("#soil-acid-slider").rangeSlider("values"),Shrub:s.byId("shrub-check").checked,Bareland:s.byId("bareland-check").checked,"Secondary Forest":s.byId("secondary-forest-check").checked,"Dryland Agriculture mixed with shrub":s.byId("dryland-agro-check").checked,"Water Body":s.byId("water-check").checked,Mining:s.byId("mining-check").checked,"Plantation Forest":s.byId("plantation-forest-check").checked,"Estate Crop Plantation":s.byId("estate-crop-check").checked,"Swamp shrub":s.byId("swamp-shrub-check").checked,"Primary swamp Forest":s.byId("primary-swamp-check").checked,"Secondary swamp Forest":s.byId("secondary-swamp-check").checked,Settlement:s.byId("settlement-check").checked,Grassland:s.byId("grassland-check").checked,"Secondary mangrove forest":s.byId("secondary-mangrove-check").checked,"Dryland agriculture":s.byId("dryland-check").checked,"Rice field":s.byId("rice-check").checked,"Fish pond":s.byId("fish-check").checked,"Transmigration area":s.byId("transmigration-check").checked,Swamp:s.byId("swamp-check").checked,"Primary mangrove swamp":s.byId("primary-mangrove-check").checked,Airport:s.byId("airport-check").checked,Inceptisol:s.byId("inceptisol-check").checked,Oxisol:s.byId("oxisol-check").checked,Alfisol:s.byId("alfisol-check").checked,Ultisol:s.byId("ultisol-check").checked,Spodosol:s.byId("spodosol-check").checked,Entisol:s.byId("entisol-check").checked,Histosol:s.byId("histosol-check").checked,Mollisol:s.byId("mollisol-check").checked,Rock:s.byId("rock-check").checked}}}}),define("components/wizard/Wizard",["react","analysis/config","analysis/WizardStore","components/wizard/StepOne","components/wizard/StepTwo","components/wizard/StepThree","components/wizard/Intro","dojo/topic","dojo/_base/array","map/config","dojo/_base/lang","esri/tasks/PrintTask","map/Controls","utils/Analytics","utils/GeoHelper"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m){function h(){return{currentStep:n.get(v.userStep)||0,analysisArea:n.get(v.selectedCustomFeatures),usersAreaOfInterest:n.get(v.areaOfInterest)}}var g=t.wizard.breadcrumbs,v=t.STORE_KEYS,y=e.createClass({displayName:"Wizard",getInitialState:function(){return h()},componentDidMount:function(){n.registerCallback(v.selectedCustomFeatures,this.analysisAreaUpdated),n.registerCallback(v.userStep,this.currentUserStepUpdated),n.registerCallback(v.areaOfInterest,this.areaOfInterestUpdated),this.props.skipIntro?n.set(v.userStep,3):n.set(v.userStep,this.state.currentStep)},analysisAreaUpdated:function(){var e=n.get(v.selectedCustomFeatures);this.setState({analysisArea:e})},currentUserStepUpdated:function(){var e=n.get(v.userStep);this.setState({currentStep:e})},areaOfInterestUpdated:function(){var e=n.get(v.areaOfInterest),t=app.map.getLayer(c.adminUnitsLayer.id);"adminUnitOption"===e&&t.visible===!1?t.show():"adminUnitOption"!==e&&t.hide(),this.setState({usersAreaOfInterest:e})},componentDidUpdate:function(e,t){if(this.props.isResetting&&this.setProps({isResetting:!1}),t.currentStep>1&&1===this.state.currentStep){var n=app.map.getLayer(c.wizardGraphicsLayer.id);n&&n.clear()}},render:function(){var t=this.props;return t.callback={performAnalysis:this._performAnalysis},0===this.state.currentStep?($(".breadcrumbs").hide(),$(".gfw .wizard-header").css("height","-=45px"),$(".gfw .wizard-body").css("top","55px"),$(".gfw .wizard-header .button.reset").hide()):($(".breadcrumbs").show(),$(".gfw .wizard-header").css("height","+=45px"),$(".gfw .wizard-body").css("top",""),$(".gfw .wizard-header .button.reset").show(),$(".gfw .wizard-header .button.reset").css("top","0px")),["commercialEntityOption","certifiedAreaOption"].indexOf(this.state.usersAreaOfInterest)!==-1&&1!==this.props.currentStep||s.publish("hideConcessionsLegend"),e.createElement("div",{className:"relative wizard-root"},e.createElement("div",{className:"wizard-header"},e.createElement("div",{className:"title-section"},e.createElement("span",{className:"title"},"Analysis"),e.createElement("span",{className:"button reset",onClick:this._reset},"Reset"),e.createElement("span",{className:"button close",onClick:this._close})),e.createElement("div",{className:"breadcrumbs"},g.map(this._breadcrumbMapper,this))),e.createElement("div",{className:"wizard-body"},e.createElement("div",{className:0!==this.state.currentStep?"hidden":""},e.createElement(o,e.__spread({},t))),e.createElement("div",{className:1!==this.state.currentStep?"hidden":""},e.createElement(r,e.__spread({},t))),e.createElement("div",{className:2!==this.state.currentStep?"hidden":""},e.createElement(a,e.__spread({},t))),e.createElement("div",{className:3!==this.state.currentStep?"hidden":""},e.createElement(i,e.__spread({},t)))))},_breadcrumbMapper:function(t,n){var r=n<this.state.currentStep-1?"enabled":"";return r+=this.state.currentStep-1===n?" active":"",e.createElement("span",{className:r},e.createElement("span",{className:"piece","data-index":n,onClick:this._changeStep},t),n<g.length-1?e.createElement("span",{className:"carat"}," > "):null)},_changeStep:function(e){var t=e.target.dataset?e.target.dataset.index:e.target.getAttribute("data-index");t*=1,t<this.state.currentStep+1&&n.set(v.userStep,1*t+1)},_reset:function(){this.replaceProps({isResetting:!0}),n.set(v.areaOfInterest,t.stepOne.option1.id,!0),n.set(v.selectedCustomFeatures,[],!0),n.set(v.userStep,0,!0),this.replaceState(h());var e=app.map.getLayer(c.wizardGraphicsLayer.id);e&&e.clear();var e=app.map.getLayer(c.wizardPointGraphicsLayer.id);e&&e.clear(),e=app.map.getLayer(c.adminUnitsLayer.id),e&&e.hide()},_close:function(){s.publish("toggleWizard")},_externalSetStep:function(e){(e>=0||e<=3)&&n.set(v.userStep,e)},_performAnalysis:function(){var e,r,a,i,o,s=this,l=s._prepareGeometry(s.state.analysisArea),u=n.get(v.analysisSets),d=n.get(v.currentTreeCoverDensity)?n.get(v.currentTreeCoverDensity):30;e=t.stepTwo.labelField,r=app.map.getLayer(c.suit.id).getRenderingRule(),i={geometry:l,datasets:u,minDensity:d,title:s.state.analysisArea.map(function(e){return e.attributes.WRI_label}).join(","),suitability:{renderRule:r,csv:p._getSettingsCSV()}},o=window.open("report.html","_blank","menubar=yes,titlebar=yes,scrollbars=yes,resizable=yes"),localStorage?localStorage.setItem("payload",JSON.stringify(i)):o.payload=i,null===o||void 0===typeof o||void 0===o?alert("You need to disable your popup blocker for this feature to work."):(o.focus(),o.document.createEvent&&(a=o.document.createEvent("Event"),a.initEvent("PayloadReady",!0,!0),o.document.dispatchEvent(a))),f.sendEvent("Event","Perform Analysis","User clicked perform analysis.");var m=t.stepThree.checkboxes,h=m.filter(function(e){return u[e.value]}).map(function(e){return e.label});h.forEach(function(e){f.sendEvent("Analysis","Type of Analysis",e)})},_prepareGeometry:function(e){function t(e){var t=n.get(v.areaOfInterest),r=e.attributes.wri_id||e.attributes.WRI_ID||void 0;return"millPointOption"===t?r:void 0}var r=n.get(v.analysisPointRadius)||50,a=[];return"[object Array]"!==Object.prototype.toString.call(e)&&(e=[e]),console.log(e),e.forEach(function(e){var n;"point"===e.geometry.type&&(e=m.preparePointAsPolygon(e,r)),t(e)&&(n=m.generatePointGraphicFromGeometric(e.attributes.longitude,e.attributes.latitude,e.attributes),console.log(n)),a.push({geometry:e.geometry,type:e.geometry.radius?"circle":"polygon",isCustom:void 0!==e.attributes.WRI_ID,label:e.attributes.WRI_label||void 0,point:n,millId:t(e),isRSPO:e.attributes.isRSPO||void 0,buffer:r})}),JSON.stringify(a)},_getStepAndActiveArea:function(){return{currentStep:this.state.currentStep,selectedArea:this.state.usersAreaOfInterest||"none"}}});return function(t,n){return e.render(e.createElement(y,e.__spread({},t)),document.getElementById(n))}}),define("analysis/WizardHelper",["dojo/fx","dojo/dom","dojo/_base/fx","dojo/Deferred","dojo/dom-class","dojo/dom-style","dojo/dom-geometry","dojo/_base/array","dojo/topic","map/config","utils/Hasher","utils/GeoHelper","utils/AlertsHelper","analysis/Query","analysis/config","analysis/WizardStore","components/wizard/Wizard"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g){var v,y=m.STORE_KEYS;return{toggleWizard:function(e){var s,l,c,d,p=o.position(t.byId("map")).w,m=t.byId("wizard-container"),h=new r,y=550,b=550,_=p/2,C=500;return d=_>=b&&_<=y?_:_<b?b:y,s=app.map.extent.getCenter(),a.contains(m,"activated")&&(i.set("wizard","display","none"),d=0),a.toggle(m,"activated"),l=n.animateProperty({node:m,properties:{width:d},duration:C}),c=n.animateProperty({node:t.byId("wizard-tab"),properties:{opacity:0===d?1:0},duration:C,onEnd:function(){d>0&&i.set("wizard","display","block"),h.resolve(!0)}}),void 0===v&&(f.getSetupData(),setTimeout(function(){v=new g({skipIntro:e},"wizard")},C-100)),0===d?this.cleanupWizard():(v&&v.forceUpdate(),this.showWizardRelatedLayers()),0===d?(a.remove("treecover_change_toolbox","compressed"),a.remove("hansen_change_toolbox","compressed"),a.remove("prodes_toolbox","compressed"),a.remove("forma_toolbox","compressed"),a.remove("guyra_toolbox","compressed"),u.removeKey("wiz")):(a.add("treecover_change_toolbox","compressed"),a.add("hansen_change_toolbox","compressed"),a.add("prodes_toolbox","compressed"),a.add("forma_toolbox","compressed"),a.add("guyra_toolbox","compressed"),u.setHash("wiz","open")),[l,c]},cleanupWizard:function(){app.map.getLayer(c.adminUnitsLayer.id).hide(),app.map.getLayer(c.wizardGraphicsLayer.id).hide(),app.map.getLayer(c.wizardPointGraphicsLayer.id).hide(),app.map._simpleLegends.concessions.hide()},showWizardRelatedLayers:function(){app.map.getLayer(c.wizardGraphicsLayer.id).show(),app.map.getLayer(c.wizardPointGraphicsLayer.id).show()},analyzeAreaFromPopup:function(e){function t(e){h.set(y.areaOfInterest,p),h.set(y.selectedCustomFeatures,[e]),console.log(y),void 0===v&&(v=new g({skipIntro:!0},"wizard")),v._externalSetStep(3)}var n,r=e.target?e.target:e.srcElement,i=r.getAttribute("data-label"),o=r.getAttribute("data-type"),u=r.getAttribute("data-id"),p=m.stepOne.option3.id,b=c.oilPerm.url,_=this;switch(a.add("analysis-modal","hidden"),o){case"Logging concession":n=3;break;case"Mining concession":n=2;break;case"Wood fiber plantation":n=0;break;case"Oil palm concession":n=1;break;case"overlays":n=r.getAttribute("data-layer"),p=m.stepOne.option2.id,b=c.overlays.url;break;case"RSPO Oil palm concession":n=4,b=c.commercialEntitiesLayer.url;break;case"Plantations by Type":n=5,b=c.byType.url,p="Plantations by Type";break;case"Plantations by Species":n=8,b=c.bySpecies.url,p="Plantations by Species";break;case"Mill Points":n=27,b=c.mill.url,p=m.stepOne.option5.id;break;case"GLAD Alerts":b=c.bySpecies.gladAlerts;break;case"AdminBoundary":p=m.stepOne.option2.id,b=c.adminUnitsLayer.url,n=c.adminUnitsLayer.layerId;break;case"CertScheme":b=c.commercialEntitiesLayer.url,n=c.commercialEntitiesLayer.layerId;break;case"CustomGraphic":p=m.stepOne.option1.id;break;case"MillPoint":p=m.stepOne.option5.id;break;case"WDPA":b=c.palHelper.url,n=c.palHelper.layerId}"CustomGraphic"===o?(n=app.map.getLayer(c.customGraphicsLayer.id),s.some(n.graphics,function(e){return e.attributes.WRI_ID===parseInt(u)&&(_.isOpen()?t(e):(l.publish("toggleWizard"),t(e)),!0)})):"Mill Points"===o?f.getMillByWriId(u).then(function(e){e.attributes.WRI_label=i,e=d.preparePointAsPolygon(e),_.isOpen()?(t(e),_.addGraphicFromPopup(e)):(l.publish("toggleWizard"),t(e),_.addGraphicFromPopup(e))}):f.getFeatureById(b+"/"+n,u).then(function(e){e.attributes.WRI_label=i,_.isOpen()?(t(e),_.addGraphicFromPopup(e)):(l.publish("toggleWizard"),t(e),_.addGraphicFromPopup(e))}),app.map.infoWindow.hide()},addGraphicFromPopup:function(e){var t=app.map.getLayer(c.wizardGraphicsLayer.id);t&&(t.clear(),e=d.applySelectionSymbolToFeature(e),t.add(e))},isOpen:function(){return a.contains("wizard-container","activated")}}}),define("utils/Helper",["dojo/dom-class","dojo/dom-geometry","analysis/WizardHelper","utils/AlertsHelper","dojo/_base/window","dojo/_base/connect","dojo/_base/fx","dojo/fx","dojo/on"],function(e,t,n,r,a,i,o,s,l){"use strict";var c,u,d=500,p=510;return u=function(e,t,n){c=c||document.getElementById("map-container");var t=t||!0,r=function(){t===!0&&l.once(app.map,"resize",function(){app.map.centerAt(n)})},a=function(){t===!0&&app.map.resize(!0)},i={node:c,properties:{left:e},duration:d,beforeBegin:r,onEnd:a};return o.animateProperty(i)},{enableLayout:function(){var n=a.body(),r=t.position(n).w;r<960&&e.add(n,"mobile")},toggleWizard:function(){var e,t=app.map.extent.getCenter();r.isOpen()===!0?(e=s.combine([r.toggleAlertsForm()].concat([u(0,!1)])),i.connect(e,"onEnd",function(){s.combine(n.toggleWizard().concat(u(n.isOpen()?p:0,!0,t))).play()}),e.play()):s.combine(n.toggleWizard().concat(u(n.isOpen()?p:0,!0,t))).play()},toggleAlerts:function(){var e,t=app.map.extent.getCenter();n.isOpen()===!0?(e=s.combine(n.toggleWizard().concat([u(0,!1)])),i.connect(e,"onEnd",function(){s.combine([r.toggleAlertsForm(),u(r.isOpen()?0:p,!0,t)]).play()}),e.play()):s.combine([r.toggleAlertsForm(),u(r.isOpen()?0:p,!0,t)]).play()}}}),define("map/SuitabilityImageServiceLayer",["dojo/_base/declare","dojo/Evented","dojo/_base/lang","dojo/_base/array","esri/layers/RasterFunction","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","map/MapModel","esri/request"],function(e,t,n,r,a,i,o,s,l){return e("SuitabilityImageServiceLayer",[t,o],{constructor:function(){this.declaredClass="esri.layers.ArcGISImageServiceLayer",this.rasterFunctionArguments={},this.rasterFunctionArguments.ElevRaster="$1",this.rasterFunctionArguments.SlopeRaster="$2",this.rasterFunctionArguments.WaterRaster="$3",this.rasterFunctionArguments.ConsRaster="$4",this.rasterFunctionArguments.STypeRaster="$5",this.rasterFunctionArguments.SDepthRaster="$6",this.rasterFunctionArguments.PeatRaster="$7",this.rasterFunctionArguments.SAcidRaster="$8",this.rasterFunctionArguments.SDrainRaster="$9",this.rasterFunctionArguments.RainfallRaster="$10",this.rasterFunctionArguments.LCRaster="$11",this.rasterFunctionScalars={},this.rasterFunctionScalars.Elev=10,this.rasterFunctionScalars.Slope=1,this.rasterFunctionScalars.Water=10,this.rasterFunctionScalars.Cons=100,this.rasterFunctionScalars.SType=1,this.rasterFunctionScalars.SDepth=1,this.rasterFunctionScalars.Peat=1,this.rasterFunctionScalars.SAcid=1,this.rasterFunctionScalars.SDrain=1,this.rasterFunctionScalars.Rainfall=10,this.rasterFunctionScalars.LC=1,this.renderingRule={};var e=new a;e.functionName="RemapColormap2Prashant",e.arguments=this.rasterFunctionArguments;var t=new i;t.noData=0,t.renderingRule=e,this.imageServiceParameters=t},getExportUrl:function(e,t,n,r,a){},getRenderingRule:function(){var e=this,t=e.returnRasterSettingsAsObject(),r={};n.mixin(r,this.rasterFunctionArguments),e.addThresholdArgument(t,r,"Elev",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Slope",e.rasterFunctionScalars,"MAX"),e.addThresholdArgument(t,r,"Water",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Cons",e.rasterFunctionScalars,"MIN"),e.addThresholdArgument(t,r,"Rainfall",e.rasterFunctionScalars,"BETWEEN"),e.addMembershipArgument(t,r,"SDepth",[0,1,2,3,4,5,6,7,99]),e.addMembershipArgument(t,r,"Peat",[0,1,2,3,4,5,6]),e.addMembershipArgument(t,r,"SAcid",[0,1,2,3,4,5,6,7,8,99]),e.addMembershipArgument(t,r,"SDrain",[0,1,2,3,4,99]),e.addMembershipArgument(t,r,"LC",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]),e.addMembershipArgument(t,r,"SType",[0,1,2,3,4,5,6,7,8,9,10]);var i=new a;return i.rasterFunction="PalmOilSuitabilityNew",i.rasterFunctionArguments=r,i},getImageUrl:function(e,t,n,r,a){var i=this;e=e._normalize();var o,s,c=[e.xmin,e.ymin,e.xmax,e.ymax],u=i.getRenderingRule();a?(o=a,o.renderingRule=JSON.stringify(u),o.bbox=c.join(","),o.f="json",i.renderingRule=u,s=l({url:i.url+"/exportImage",content:o,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),s.then(function(e){try{r(e.href),i.emit("image-ready",{})}catch(e){i.refresh()}},function(e){console.dir(e),i.emit("image-ready",{})})):(o={noData:0,noDataInterpretation:"esriNoDataMatchAny",interpolation:"RSP_BilinearInterpolation",renderingRule:JSON.stringify(u),format:"png8",size:t+","+n,imageSR:3857,bboxSR:3857,f:"json",pixelType:"U8",bbox:c.join(",")},i.renderingRule=u,i.renderingRule.toJson=function(){return i.getRenderingRule()},s=l({url:i.url+"/exportImage",content:o,handleAs:"json",callbackParamName:"callback"},{usePost:!0}),s.then(function(e){try{r(e.href),i.emit("image-ready",{})}catch(e){i.refresh()}},function(e){console.dir(e),i.emit("image-ready",{})}))},returnRasterSettingsAsObject:function(){var e={},t=s.get("suitabilitySettings").computeBinaryRaster;return r.forEach(t,function(t){e[t.name]=t.values}),e},returnNumericArray:function(e){var t=e.split(","),n=[];return r.forEach(t,function(e){n.push(parseInt(e,10))}),n},addThresholdArgument:function(e,t,n,r,a){var i=this;if(scalar=r[n],"BETWEEN"===a){var o=i.returnNumericArray(e[n+"InpR"]),s=o[0],l=o[o.length-1];t[n+"InpR"]=[0,s/scalar,s/scalar,l/scalar,l/scalar,1e6],t[n+"OutV"]=[1,1,0]}else{var c=parseInt(e[n+"InpR"],10);t[n+"InpR"]=[0,c/scalar,c/scalar,1e6],t[n+"OutV"]="MIN"===a?[0,1]:[1,0]}},addMembershipArgument:function(e,t,n,r){var a,i,o=this,s=o.returnNumericArray(e[n+"InpR"]),l=[],c=[],u=["SDepth","SAcid","SDrain","LC"];for(u.indexOf(n)>-1&&0!==s[0]&&s.unshift(0),i=0;i<r.length;i++)a=r[i],l.push(a,a),s.indexOf(a)===-1?c.push(0):c.push(1);t[n+"InpR"]=l,t[n+"OutV"]=c}})}),define("map/SimpleLegend",[],function(){return SimpleLegend=function(e){return this.config=e,this.CLASS_NAME="simple-legend",this.onHide=function(){},this.onShow=function(){},this.items=[],this},SimpleLegend.prototype.init=function(e){var t,n,r,a=new XMLHttpRequest,i=0,o="",s=this.config,l=this;a.onreadystatechange=function(c){4===a.readyState&&(200===a.status?(n=JSON.parse(a.response),o+='<div id="'+s.id+'" class="'+l.CLASS_NAME+'">',s.title&&(o+='<div id="'+s.id+'-title" class="simple-legend-title">'+s.title+"</div>"),t=s.layers.map(function(e){return e.id}),r=n.layers.filter(function(e){return t.indexOf(e.layerId)>-1}),r.forEach(function(e){e.config=s.layers.filter(function(t){return t.id===e.layerId},this)[0],e.legend.forEach(function(e,t){var n=s.id+"-layer-"+i+"-"+t,r=e.label;l.items.push(n),void 0!==s.layers[i].labels&&s.layers[i].labels[t]&&(r=s.layers[i].labels[t]),o+='<div id="'+n+'" class="simple-legend-layer"><img class="simple-legend-image" src="data:image/png;base64,'+e.imageData+'" height="'+e.height+'px" width="'+e.width+'px"><span class="simple-legend-label">'+r+"</span></div>"}),i+=1}),s.title&&(o+="</div>"),o+="</div>",document.getElementById(s.parentId).insertAdjacentHTML("afterbegin",o),e&&e.bind(l)()):console.log("Error"))},a.addEventListener("error",function(e){e&&console.log(e)},!1),a.open("GET",s.url,!0),a.send()},SimpleLegend.prototype.show=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="block"),this.onShow(),this},SimpleLegend.prototype.hide=function(){var e=document.getElementById(this.config.id);return e&&(e.style.display="none"),this.onHide(),this},SimpleLegend.prototype.filterItem=function(e){return this.items.forEach(function(t,n){n===e?document.getElementById(t).style.display="block":document.getElementById(t).style.display="none"}),this},SimpleLegend}),define("layers/EsriTileCanvasBase",["dojo/_base/declare","esri/geometry/Point","esri/layers/layer"],function(e,t,n){function r(e){return"translate3d("+e.x+"px, "+e.y+"px, 0)"}function a(e,t){var n=u.rows*t;return Math.floor((u.origin.y-e)/n)}function i(e,t){var n=u.cols*t;return Math.floor((e-u.origin.x)/n)}function o(e,t,n,r,a){var i,o,s=[];for(o=t;o<=r;o++)for(i=e;i<=n;i++)s.push({x:o,y:i,z:a});return s}function s(e,t){return e/Math.pow(2,t)*360-180}function l(e,t){var n=Math.PI-2*Math.PI*e/Math.pow(2,t);return 180/Math.PI*Math.atan(.5*(Math.exp(n)-Math.exp(-n)))}var c={tileSize:256,maxZoom:12},u={rows:256,cols:256,origin:{x:-20037508.34,y:20037508.34}},d=function(){var e=document.createElement("canvas");return e&&e.getContext};return e("EsriTileCanvasBase",[n],{constructor:function(e){if(this.options=e,this.options.tileSize=c.tileSize,this.options.maxZoom=c.maxZoom,this.visible=void 0===this.options.visible||this.options.visible,this.loaded=!0,this.options.id&&(this.id=this.options.id),this.tiles={},this.tileRequests=[],this.position={x:0,y:0},this._handles=[],this._levelChanged=!1,!d())throw new Error("Canvas is not supported in this browser.");if(!this.options.url)throw new Error("You must provide a 'url' in your options.");this.onLoad(this)},_setMap:function(e){var t=this;return this._map=e,this._container=document.createElement("div"),this._container.style.display=this.visible?"block":"none",this._container.style.transform=r(this.position),this._container.style.position="absolute",this._container.style.height="100%",this._container.style.width="100%",this._container.style.left=0,this._container.style.top=0,this._handles.push(this._map.on("extent-change",t._extentChanged.bind(this))),this._handles.push(this._map.on("zoom-start",t._onZoomStart.bind(this))),this._handles.push(this._map.on("pan-end",t._onPanEnd.bind(this))),this._handles.push(this._map.on("pan",t._onPan.bind(this))),this._container},_unsetMap:function(){this._handles.forEach(function(e){e.remove&&e.remove()}),this._map=null},_extentChanged:function(){if(this.visible){for(var e=this._map.getResolution(),t=this._map.getLevel(),n=this._map.extent,r=0;r<this.tiles.length;r++)this.tiles[r].z!==t&&(this.tiles[r].canvas.remove(),delete this.tiles[r]);var s=a(n.ymax,e),l=a(n.ymin,e),c=i(n.xmin,e),u=i(n.xmax,e),d=o(s,c,l,u,t),p=this;d.forEach(function(e){e.z===t&&p._fetchTile(e)});for(var f=[],m=0;m<this._container.children.length;m++){var h=this._container.children[m].id;h=h.split("_"),h.length>0&&(h=h[2],h&&(h=parseInt(h),h!==t&&f.push(this._container.children[m])))}f.forEach(function(e){e.remove()})}},_onZoomStart:function(){this._levelChanged===!1&&(this._levelChanged=!0);for(var e=0;e<this.tiles.length;e++)this.tiles[e].canvas.remove(),delete this.tiles[e];this.position={x:0,y:0},this._container.innerHTML="",this._container.style.transform=r(this.position);for(var t=0;t<this.tileRequests.length;t++)this.tileRequests[t].abort();this.tileRequests=[]},_onPanEnd:function(e){var t=e.delta;this.position={x:this.position.x+t.x,y:this.position.y+t.y}},_onPan:function(e){var t=e.delta;this._container.style.transform=r({x:this.position.x+t.x,y:this.position.y+t.y})},_fetchTile:function(e){var t,n=this._getId(e);if(this.tiles[n])return void this._drawTile(this.tiles[n]);if(e.z>this.options.maxZoom){var r=this._getZoomSteps(e.z),a=Math.floor(e.x/Math.pow(2,r)),i=Math.floor(e.y/Math.pow(2,r));t=this._getUrl({x:a,y:i,z:this.options.maxZoom})}else t=this._getUrl(e);var o=this;this._fetchImage(t,function(r){var a=document.createElement("canvas");a.height=o.options.tileSize,a.width=o.options.tileSize,a.style.position="absolute",a.setAttribute("id",n),a.className=n;var i={x:e.x,y:e.y,z:e.z,canvas:a,image:r,id:n,url:t};o.tiles[n]=i,o._drawTile(i)})},_drawTile:function e(n){"use asm";var a=s(n.x,n.z),i=l(n.y,n.z),o=this._map.toScreen(new t(a,i)),c=this.options.tileSize,u=n.canvas;if(!u.parentElement){var d=u.getContext("2d");var p=Math.abs(this.position.y)+o.y;if(this.position.y>0){p=o.y-this.position.y}var f=Math.abs(this.position.x)+o.x;if(this.position.x>0){f=o.x-this.position.x}u.style.transform=r({x:f,y:p});if(this.id==="hansenGain"){var m="url("+n.url+")";d.canvas.style.background=m}else{if(n.z>this.options.maxZoom){var h=this._getSubrectangleInfo(n);d.imageSmoothingEnabled=false;d.mozImageSmoothingEnabled=false;d.drawImage(n.image,h.sX,h.sY,h.sWidth,h.sHeight,0,0,c,c)}else{d.drawImage(n.image,0,0)}const g=d.getImageData(0,0,c,c);g.data.set(this.filter(g.data));d.putImageData(g,0,0)}var v=this._map.getLevel();if(n.z===v){this._container.appendChild(u)}}},_fetchImage:function(e,t){var n=new XMLHttpRequest,r=this;n.onload=function(){var n=URL.createObjectURL(this.response),a=new Image;a.onload=function(){t(a),URL.revokeObjectURL(n)},a.src=n;for(var i,o=0;o<r.tileRequests.length;o++)r.tileRequests[o].responseURL===e&&(i=o);i&&r.tileRequests.splice(i,1)},n.open("GET",e,!0),n.responseType="blob",n.send(),this.tileRequests.push(n)},_getUrl:function(e){return this.options.url.replace("{x}",e.x).replace("{y}",e.y).replace("{z}",e.z)},_getId:function(e){return e.x+"_"+e.y+"_"+e.z},_getZoomSteps:function(e){return e-this.options.maxZoom},_getSubrectangleInfo:function(e){var t=this._getZoomSteps(e.z),n=this.options.tileSize;return{sX:n/Math.pow(2,t)*(e.x%Math.pow(2,t)),sY:n/Math.pow(2,t)*(e.y%Math.pow(2,t)),sWidth:n/Math.pow(2,t),sHeight:n/Math.pow(2,t)}},refresh:function(){var e=this,t=[];Object.keys(this.tiles).forEach(function(n){var r=e.tiles[n],a=r.canvas.getContext("2d"),i=e.options.tileSize;if(t.push(e.tiles[n].id),r.z>e.options.maxZoom){var o=e._getSubrectangleInfo(r);a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.drawImage(r.image,o.sX,o.sY,o.sWidth,o.sHeight,0,0,i,i)}else a.drawImage(r.image,0,0,i,i);var s=a.getImageData(0,0,i,i);s.data.set(e.filter(s.data)),a.putImageData(s,0,0)}),t.length>0&&e._levelChanged===!1&&(t.forEach(function(e){if(e){var t=document.getElementsByClassName(e);if(t.length>1){var n=document.getElementById(e);n&&n.parentElement.removeChild(n)}}}),e._levelChanged=!0)},show:function(){this.visible=!0,this._container.style.display="block",this._extentChanged()},hide:function(){this.visible=!1,this._container.style.display="none"},setOpacity:function(e){this._container.style.opacity=e},filter:function(){throw new Error("The filter method must be implemented. It filters image data from context.getImageData().data. and must return an array.")}})}),define("layers/GladLayer",["dojo/_base/declare","./EsriTileCanvasBase"],function(e,t){function n(e){var t="00"+e;return t.slice(t.length-3)}return e("GladLayer",[t],{filter:function(e){for(var t=0;t<e.length;t+=4){var n=[e[t],e[t+1],e[t+2]],r=this.decodeDate(n);r.date>=this.options.minDateValue&&r.date<=this.options.maxDateValue&&this.options.confidence.indexOf(r.confidence)>-1?(e[t+3]=r.intensity,e[t]=220,e[t+1]=102,e[t+2]=153):e[t+3]=0}return e},decodeDate:function(e){var t=255*e[0]+e[1],r=parseInt(t/365)+15,a=1e3*r,i=t%365,o=a+i,s=n(e[2]),l=parseInt(s[0])-1,c=parseInt(s.slice(1,3)),u=50*c;return u>255&&(u=255),{confidence:l,intensity:u,date:o}},setDateRange:function(e,t){this.options.minDateValue=parseInt(e),this.options.maxDateValue=parseInt(t),this.refresh()},setConfidenceLevel:function(e){this.options.confidence="all"===e?[0,1]:[1],this.refresh()}})}),define("layers/HansenLayer",["dojo/_base/declare","./EsriTileCanvasBase"],function(e,t){return e("HansenLayer",[t],{filter:function(e){for(var t=2;t<e.length+2;t+=4){var n=[e[t],e[t+1],e[t+2]],r=this.decodeDate(n);r.year>=this.options.minYear&&r.year<=this.options.maxYear?(e[t]=153,e[t+1]=r.intensity,e[t+2]=220,e[t+3]=0):(e[t+3]=0,e[t+2]=0,e[t+1]=0,e[t]=0)}return e},decodeDate:function(e){var t=e[0],n=e[2];return{intensity:n,year:t}},setDateRange:function(e,t){this.options.minYear=parseInt(e),this.options.maxYear=parseInt(t),this.refresh()},setConfidenceLevel:function(e){this.options.confidence="all"===e?[0,1]:[1],this.refresh()}})}),define("layers/GainLayer",["dojo/_base/declare","./EsriTileCanvasBase"],function(e,t){return e("GainLayer",[t],{filter:function(e){for(var t=0;t<e.length;t+=4){var n=[e[t],e[t+1],e[t+2]],r=this.decodeDate(n);e[t+3]>0?(e[t]=0,e[t+1]=0,e[t+2]=255,e[t+3]=r.intensity):(e[t]=0,e[t+1]=0,e[t+2]=0,e[t+3]=0)}return e},decodeDate:function(e){var t=e[2];return{intensity:t}}})}),define("map/Map",["dojo/Evented","dojo/_base/declare","dojo/on","dojo/dom","dojo/topic","dijit/registry","dojo/_base/array","dojo/dom-construct","map/config","analysis/WizardHelper","map/SuitabilityImageServiceLayer","map/SimpleLegend","layers/GladLayer","layers/HansenLayer","layers/GainLayer","esri/map","esri/config","esri/InfoTemplate","esri/layers/GraphicsLayer","esri/layers/FeatureLayer","esri/layers/RasterFunction","esri/layers/ImageParameters","esri/layers/ImageServiceParameters","esri/layers/ArcGISImageServiceLayer","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/dijit/Legend","esri/dijit/Geocoder","esri/dijit/Scalebar","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/dijit/BasemapGallery"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g,v,y,b,_,C,w,E,S,I,L,x,T,k,N,D){var A=t([e],{element:"map",constructor:function(e){t.safeMixin(this,e),this.addConfigurations(),this.createMap()},addConfigurations:function(){},createMap:function(){var e=this;e.map=new h(this.element,{basemap:this.basemap,center:[this.centerX,this.centerY],sliderPosition:this.sliderPosition,isScrollWheelZoom:!0,zoom:this.zoom}),e.map.on("load",function(){e.mapLoaded(),e.map.resize(),e.map.enableScrollWheelZoom(),e.emit("map-ready",{})})},mapLoaded:function(){this.map.graphics.clear(),this.addWidgets(),this.addLayers()},addWidgets:function(){var e,t,n,r,a,i,o,c,u,p,f={};s.create("div",{id:"home-button",class:"home-button"},document.querySelector(".esriSimpleSliderIncrementButton"),"after"),e=new k({map:this.map},"home-button"),e.startup(),a=new D({map:this.map,showArcGISBasemaps:!0},"basemap-gallery"),a.startup(),n=new N({map:this.map,highlightLocation:!1},"location-widget"),n.startup(),r=new x({map:this.map,autoComplete:!0,arcgisGeocoder:{placeholder:"Enter address or region"}},"simple-geocoder"),r.startup(),t=new L({map:this.map,layerInfos:[],autoUpdate:!0},"legend"),t.startup(),i=new T({map:this.map,scalebarUnit:"metric"}),c=new d(l.simpleLegends.settle),c.init(c.hide),o=new d(l.simpleLegends.road),o.init(o.hide),u=new d(l.simpleLegends.poBounds),u.init(u.hide),p=new d(l.simpleLegends.concessions),p.init(p.hide),f.road=o,f.settle=c,f.poBounds=u,f.concessions=p,this.map._simpleLegends=f},addLayers:function(){var e,t,r,s,c,d,h,g,v,b,L,x,T,k,N,D,A,O,M,P,F,R,j,B,U,z,V,W,G,H,q,$,Y,K,Q,J,X,Z,ee,te,ne,re,ae,ie,oe,se,le,ce,ue,de,pe,fe,me={},he={},ge={},ve={},ye={},be={},_e={},Ce={},we={},Ee=this;t=new C,t.layerOption=C.LAYER_OPTION_SHOW,t.layerIds=l.fires.defaultLayers,t.format="png32",e=new I(l.fires.url,{imageParameters:t,id:l.fires.id,visible:!1}),s=new C,s.layerOption=C.LAYER_OPTION_SHOW,s.layerIds=l.granChaco.defaultLayers,s.format="png32",r=new I(l.granChaco.url,{imageParameters:s,id:l.granChaco.id,visible:!1}),d=new C,d.layerOption=C.LAYER_OPTION_SHOW,d.layerIds=l.byType.defaultLayers,d.format="png32",c=new I(l.byType.url,{imageParameters:d,id:l.byType.id,visible:!1}),g=new C,g.layerOption=C.LAYER_OPTION_SHOW,g.layerIds=l.bySpecies.defaultLayers,g.format="png32",h=new I(l.bySpecies.url,{imageParameters:g,id:l.bySpecies.id,visible:!1}),b=new C,b.layerOption=C.LAYER_OPTION_SHOW,b.layerIds=l.soy.defaultLayers,b.format="png32",v=new E(l.soy.url,{id:l.soy.id,visible:!1}),x=new C,x.layerOption=C.LAYER_OPTION_SHOW,x.layerIds=[],x.format="png32",L=new I(l.legendLayer.url,{imageParameters:x,id:l.legendLayer.id,visible:!1}),k=new w,k.renderingRule=new _({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:l.forma.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:l.forma.defaultRange,OutputValues:[1],AllowUnmatched:!1}}},variableName:"Raster"}),T=new E(l.forma.url,{imageServiceParameters:k,id:l.forma.id,visible:!1,opacity:1}),D=new w,D.renderingRule=new _({rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:l.prodes.colormap,Raster:{rasterFunction:"Colormap",rasterFunctionArguments:{Colormap:l.prodes.colormap,Raster:{rasterFunction:"Remap",rasterFunctionArguments:{InputRanges:l.prodes.defaultRange,OutputValues:[1],AllowUnmatched:!1}}}}}}),N=new E(l.prodes.url,{imageServiceParameters:D,id:l.prodes.id,visible:!1,opacity:1}),me.id=l.gladAlerts.id,me.url=l.gladAlerts.url,me.minDateValue=l.gladAlerts.minDateValue,
me.maxDateValue=l.gladAlerts.maxDateValue,me.confidence=l.gladAlerts.confidence,me.visible=!1,A=new p(me),he.id=l.hansenLoss.id,he.url=l.hansenLoss.url,he.minYear=l.hansenLoss.minYear,he.maxYear=l.hansenLoss.maxYear,he.confidence=l.hansenLoss.confidence,he.visible=!1,ge.id=l.hansenLoss.levels[0].id,ge.url=l.hansenLoss.levels[0].url,ge.minYear=l.hansenLoss.minYear,ge.maxYear=l.hansenLoss.maxYear,ge.confidence=l.hansenLoss.confidence,ge.visible=!1,ve.id=l.hansenLoss.levels[1].id,ve.url=l.hansenLoss.levels[1].url,ve.minYear=l.hansenLoss.minYear,ve.maxYear=l.hansenLoss.maxYear,ve.confidence=l.hansenLoss.confidence,ve.visible=!1,ye.id=l.hansenLoss.levels[2].id,ye.url=l.hansenLoss.levels[2].url,ye.minYear=l.hansenLoss.minYear,ye.maxYear=l.hansenLoss.maxYear,ye.confidence=l.hansenLoss.confidence,ye.visible=!1,be.id=l.hansenLoss.levels[3].id,be.url=l.hansenLoss.levels[3].url,be.minYear=l.hansenLoss.minYear,be.maxYear=l.hansenLoss.maxYear,be.confidence=l.hansenLoss.confidence,be.visible=!1,_e.id=l.hansenLoss.levels[5].id,_e.url=l.hansenLoss.levels[5].url,_e.minYear=l.hansenLoss.minYear,_e.maxYear=l.hansenLoss.maxYear,_e.confidence=l.hansenLoss.confidence,_e.visible=!1,Ce.id=l.hansenLoss.levels[6].id,Ce.url=l.hansenLoss.levels[6].url,Ce.minYear=l.hansenLoss.minYear,Ce.maxYear=l.hansenLoss.maxYear,Ce.confidence=l.hansenLoss.confidence,Ce.visible=!1,P=new f(he),F=new f(ge),R=new f(ve),j=new f(ye),B=new f(be),U=new f(_e),z=new f(Ce),we.id=l.hansenGain.id,we.url=l.hansenGain.url,we.visible=!1,V=new m(we),G=new w,G.interpolation="RSP_NearestNeighbor",G.renderingRule=new _({rasterFunction:"ForestCover_lossyear_density",rasterFunctionArguments:{min_year:l.loss.defaultRange[0]+2e3,max_year:l.loss.defaultRange[1]+2e3,min_density:30,max_density:100}}),M=new C,M.layerOption=C.LAYER_OPTION_SHOW,M.layerIds=[l.gladFootprints.layerId],M.format="png32",O=new I(l.gladFootprints.url,{imageParameters:M,id:l.gladFootprints.id,visible:!1}),W=new E(l.loss.url,{imageServiceParameters:G,id:l.loss.id,visible:!1,opacity:1}),H=new E(l.tcd.url,{id:l.tcd.id,visible:!1}),q=new C,q.layerOption=C.LAYER_OPTION_SHOW,q.layerIds=[],q.format="png32",$=new I(l.ifl.url,{imageParameters:q,id:"forestCover_forestCover",visible:!1}),K=new w,K.renderingRule=new _({rasterFunction:"Stretched"}),Y=new E(l.tfcs.url,{imageServiceParameters:K,id:l.tfcs.id,visible:!1,opacity:1}),Q=new I(l.ldcover.url,{imageParameters:q,id:"forestCover_landCover",visible:!1}),Q=new I(l.ldcover.url,{imageParameters:q,id:"forestCover_landCover",visible:!1}),Q=new I(l.ldcover.url,{imageParameters:q,id:"forestCover_landCover",visible:!1}),X=new I(l.peat.url,{imageParameters:q,id:"forestCover_commodities",visible:!1}),J=new I(l.minePerm.url,{imageParameters:q,id:"forestUse_landUse",visible:!1}),Z=new I(l.mill.url,{imageParameters:q,id:"forestUse_commodities",visible:!1}),ee=new I(l.opsd.url,{imageParameters:q,id:"productionSuitability",visible:!1}),ae=new u(l.suit.url,{id:l.suit.id,visible:!1}),te=new S(l.pal.url,{id:l.pal.id,visible:!1}),ne=new C,ne.layerOption=C.LAYER_OPTION_SHOW,ne.layerIds=[l.palHelper.layerId],ne.format="png32",re=new I(l.palHelper.url,{imageParameters:ne,id:l.palHelper.id,maxScale:0,minScale:0,visible:!1}),ue=new C,ue.layerOption=C.LAYER_OPTION_SHOW,ue.layerIds=[l.biodiversity.layerId],ue.format="png32",de=new I(l.biodiversity.url,{imageParameters:ue,id:l.biodiversity.id,visible:!1}),oe=new C,oe.layerOption=C.LAYER_OPTION_SHOW,oe.layerIds=l.overlays.defaultLayers,oe.format="png32",ie=new I(l.overlays.url,{imageParameters:oe,id:l.overlays.id,visible:!1}),le=new C,le.layerOption=C.LAYER_OPTION_SHOW,le.layerIds=[],le.format="png32",ce=new I(l.adminUnitsLayer.url,{imageParameters:le,id:l.adminUnitsLayer.id,visible:!1}),pe=new y({id:l.wizardGraphicsLayer.id}),fe=new y({id:l.wizardPointGraphicsLayer.id}),se=new y({id:l.customGraphicsLayer.id}),app.map.addLayers([L,H,ae,$,Y,Q,J,X,Z,ee,te,re,de,T,N,A,O,P,F,R,j,B,U,z,V,W,r,v,e,c,h,ce,ie,se,pe,fe]),n.once(app.map,"layers-add-result",function(e){Ee.emit("layers-loaded",{response:e});var t=o.map(e.layers,function(e){return{layer:e.layer}});t=o.filter(t,function(e){return!!e.layer.url&&(e.layer.url.search("ImageServer")<0&&e.layer.id.search("Gain")<0&&e.layer.id!==l.adminUnitsLayer.id)}),i.byId("legend").refresh(t)}),e.on("error",this.addLayerError),r.on("error",this.addLayerError),c.on("error",this.addLayerError),h.on("error",this.addLayerError),v.on("error",this.addLayerError),T.on("error",this.addLayerError),N.on("error",this.addLayerError),A.on("error",this.addLayerError),O.on("error",this.addLayerError),P.on("error",this.addLayerError),F.on("error",this.addLayerError),R.on("error",this.addLayerError),j.on("error",this.addLayerError),B.on("error",this.addLayerError),U.on("error",this.addLayerError),z.on("error",this.addLayerError),V.on("error",this.addLayerError),W.on("error",this.addLayerError),H.on("error",this.addLayerError),ae.on("error",this.addLayerError),te.on("error",this.addLayerError),re.on("error",this.addLayerError),$.on("error",this.addLayerError),Y.on("error",this.addLayerError),Q.on("error",this.addLayerError),J.on("error",this.addLayerError),X.on("error",this.addLayerError),Z.on("error",this.addLayerError),ee.on("error",this.addLayerError),ce.on("error",this.addLayerError),ie.on("error",this.addLayerError),se.on("error",this.addLayerError),de.on("error",this.addLayerError),ae.on("image-ready",function(){a.publish("customSuitabilityImageReady")})},addLayerError:function(e){console.error(e)}});return A}),define("map/Finder",["dojo/on","dojo/dom","dojo/Deferred","dojo/promise/all","map/config","map/MapModel","analysis/WizardHelper","utils/AlertsHelper","utils/GeoHelper","esri/graphic","dojo/_base/array","esri/InfoTemplate","esri/geometry/Point","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/geometry/webMercatorUtils","esri/symbols/PictureMarkerSymbol"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g){"use strict";return{searchAreaByCoordinates:function(){var e,n,r,a={},o=!1,s="You did not enter a valid value.  Please check that your location values are all filled in and nubmers only.",c=(new g("app/css/images/RedStickpin.png",32,32),{}),u=function(e){return o||(o=isNaN(parseFloat(e))),isNaN(parseFloat(e))?0:parseFloat(e)};i.get("showDMSInputs")?(a.dlat=u(t.byId("degreesLatInput").value),a.mlat=u(t.byId("minutesLatInput").value),a.slat=u(t.byId("secondsLatInput").value),a.dlon=u(t.byId("degreesLonInput").value),a.mlon=u(t.byId("minutesLonInput").value),a.slon=u(t.byId("secondsLonInput").value),e=a.dlat+a.mlat/60+a.slat/3600,n=a.dlon+a.mlon/60+a.slon/3600):(e=u(t.byId("latitudeInput").value),n=u(t.byId("longitudeInput").value)),o?alert(s):(c.locatorValue=l.nextCustomFeatureId(),c.id="LOCATOR_"+c.locatorValue,r=l.generatePointGraphicFromGeometric(n,e,c),app.map.graphics.add(r),app.map.centerAndZoom(r.geometry,7),i.set("showClearPinsOption",!0))},performIdentify:function(e){var t,n,o=e.mapPoint,s=[],l=[],c=this;app.map.infoWindow.clearFeatures(),n=app.map.getLayer(a.fires.id),n&&n.visible&&s.push(c.identifyFires(o)),n=app.map.getLayer(a.rspoPerm.id),n&&n.visible&&s.push(c.identifyforestUseCommodities(o)),n=app.map.getLayer(a.oilPerm.id),n&&n.visible&&s.push(c.identifyforestUseLandUse(o)),t=app.map.getLayer(a.palHelper.id),n=app.map.getLayer(a.pal.id),n&&t&&(n.visible||t.visible)&&s.push(c.identifyWDPA(o)),n=app.map.getLayer(a.adminUnitsLayer.id),n&&n.visible&&s.push(c.identifyWizardDynamicLayer(o)),n=app.map.getLayer(a.biomes.id),n&&n.visible&&s.push(c.identifyBiomesLayer(o)),n=app.map.getLayer(a.byType.id),n&&n.visible&&s.push(c.identifyPlantationsTypeLayer(o)),n=app.map.getLayer(a.bySpecies.id),n&&n.visible&&s.push(c.identifyPlantationsSpeciesLayer(o)),n=app.map.getLayer(a.mill.id),n&&n.visible&&s.push(c.identifyMillPoints(o)),n=app.map.getLayer(a.overlays.id),n&&n.visible&&s.push(c.identifyOverlaysLayer(o)),n=app.map.getLayer(a.customGraphicsLayer.id),n&&n.visible&&s.push(c.getCustomGraphics(e)),0!==s.length&&(i.get("drawToolsEnabled")||r(s).then(function(e){u.forEach(e,function(e){switch(e.layer){case"Fires":l=l.concat(c.setFireTemplates(e.features));break;case"MillPoints":l=l.concat(c.setMillPointTemplates(e.features));break;case"forestUseCommodities":l=l.concat(c.setForestUseCommoditiesTemplates(e.features));break;case"forestUseLandUse":l=l.concat(c.setForestUseLandUseTemplates(e.features));break;case"WDPA":l=l.concat(c.setWDPATemplates(e.features));break;case"byType":l=l.concat(c.setPlantationsTypeTemplates(e.features));break;case"bySpecies":l=l.concat(c.setPlantationsSpeciesTemplates(e.features));break;case"overlays":l=l.concat(c.setOverlaysTemplates(e.features));break;case"WizardDynamic":l=l.concat(c.setWizardTemplates(e.features));break;case"CustomGraphics":l.push(c.setCustomGraphicTemplates(e.feature));break;case"Biomes":l=l.concat(c.setBiomesTemplates(e.features))}}),l.length>0&&(app.map.infoWindow.setFeatures(l),app.map.infoWindow.show(o))}))},identifyFires:function(e){var t=new n,r=new f(a.fires.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[0,1,2,3],i.layerOption=m.LAYER_OPTION_VISIBLE,r.execute(i,function(e){e.length>0?t.resolve({layer:"Fires",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setFireTemplates:function(e){var t,n=[];return u.forEach(e,function(e){t=new d(e.layerName,a.fires.infoTemplate.content),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyWDPA:function(e){var t=new n,r=new f(a.palHelper.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[a.palHelper.id],i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.forEach(function(e){e.feature.layer="WDPA"}),e.length>0?t.resolve({layer:"WDPA",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWDPATemplates:function(e){var t,n,r=[];return u.forEach(e,function(e){n=a.pal.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='WDPA' data-id='${objectid}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='WDPA' data-id='${objectid}'>Subscribe</button></div>",t=new d(e.value,n),e.feature.setInfoTemplate(t),r.push(e.feature)}),r},setOverlaysTemplates:function(e){var t,n,r=[];return u.forEach(e,function(e){n=a.overlays.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-layer="+e.layerId+" data-label='"+e.value+"' data-type='overlays' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-layer="+e.layerId+" data-label='"+e.value+"' data-type='overlays' data-id='${OBJECTID}'>Subscribe</button></div>",t=new d(e.value,n),e.feature.setInfoTemplate(t),r.push(e.feature)}),r},identifyforestUseCommodities:function(e){var t=new n,r=new f(a.rspoPerm.url),i=new m;return app.map.getLayer(a.rspoPerm.id).visibleLayers.indexOf(0)!==-1&&(i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[0],i.layerOption=m.LAYER_OPTION_VISIBLE,i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="forestUseCommodities"}),t.resolve({layer:"forestUseCommodities",features:e})):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise)},identifyforestUseLandUse:function(e){var t=new n,r=new f(a.oilPerm.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=app.map.getLayer(a.oilPerm.id).visibleLayers,i.layerOption=m.LAYER_OPTION_VISIBLE,i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="forestUseLandUse-"+e.layerId}),t.resolve({layer:"forestUseLandUse",features:e})):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},identifyOverlaysLayer:function(e){var t=new n,r=new f(a.overlays.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[5],i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.forEach(function(e){e.feature.layer="overlays"}),e.length>0?t.resolve({layer:"overlays",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},identifyBiomesLayer:function(e){var t=new n,r=new f(a.biomes.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[a.biomes.layerId],i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="Biomes"}),t.resolve({layer:"Biomes",features:e})):t.resolve(!1)}),t},setBiomesTemplates:function(e){var t,n=[];return e.forEach(function(e){t=a.biomes.infoTemplate.content,e.feature.setInfoTemplate(new d(e.value,t)),n.push(e.feature)}),n},identifyPlantationsTypeLayer:function(e){var t=new n,r=new f(a.byType.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[a.byType.layerId],i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="byType"}),t.resolve({layer:"byType",features:e})):t.resolve(!1)}),t},identifyPlantationsSpeciesLayer:function(e){var t=new n,r=new f(a.bySpecies.url),i=new m;return i.tolerance=3,i.returnGeometry=!0,i.width=app.map.width,i.height=app.map.height,i.geometry=e,i.mapExtent=app.map.extent,i.layerIds=[a.bySpecies.layerId],console.log(i),i.maxAllowableOffset=Math.floor(app.map.extent.getWidth()/app.map.width),r.execute(i,function(e){e.length>0?(e.forEach(function(e){e.feature.layer="bySpecies"}),t.resolve({layer:"bySpecies",features:e})):t.resolve(!1)}),t},setPlantationsTypeTemplates:function(e){var t,n=[];return e.forEach(function(e){t=a.bySpecies.infoTemplate.content,e.feature.setInfoTemplate(new d("Plantations by Type",t+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Plantations by Type' data-id='${objectid}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Plantations by Type' data-id='${objectid}'>Subscribe</button></div>")),n.push(e.feature)}),n},setPlantationsSpeciesTemplates:function(e){var t,n=[];return e.forEach(function(e){t=a.bySpecies.infoTemplate.content,e.feature.setInfoTemplate(new d("Plantations by Species",t+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Plantations by Species' data-id='${objectid}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Plantations by Species' data-id='${objectid}'>Subscribe</button></div>")),n.push(e.feature)}),n},setForestUseCommoditiesTemplates:function(e){var t,n=[];return u.forEach(e,function(e){console.log("layerId",e.layerId),t=new d(e.value,a.rspoPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${objectid}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='RSPO Oil palm concession' data-id='${objectid}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},setMillPointTemplates:function(e){var t,n=[];return u.forEach(e,function(e){console.log("feature",e),t=new d(e.value,a.mill.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Mill Points' data-id='${wri_id}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Mill Points' data-id='${wri_id}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},setForestUseLandUseTemplates:function(e){var t,n=[];return u.forEach(e,function(e){console.log(e.layerId),0===e.layerId?(t=new d(e.value,a.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Wood fiber plantation' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Wood fiber plantation' data-id='${OBJECTID}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):1===e.layerId?(t=new d(e.value,a.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Oil palm concession' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Oil palm concession' data-id='${OBJECTID}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):2===e.layerId?(t=new d(e.feature.attributes.Company,a.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Mining concession' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Mining concession' data-id='${OBJECTID}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)):3===e.layerId&&(t=new d(e.value,a.oilPerm.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='Logging concession' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='Logging concession' data-id='${OBJECTID}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature))}),n},identifyWizardDynamicLayer:function(e){var t=new n,r=new f(a.adminUnitsLayer.url),i=app.map.getLayer(a.adminUnitsLayer.id),o=new m,s=[];return s[7]="1 = 1",s[13]=i.layerDefinitions[13],o.tolerance=3,o.returnGeometry=!1,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=i.visibleLayers,o.layerDefinitions=s,o.layerOption=m.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.length>0?t.resolve({layer:"WizardDynamic",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},setWizardTemplates:function(e){var t,n=[];return u.forEach(e,function(e){t=7===e.layerId?new d(e.value,a.adminUnitsLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='${NAME_2}' data-type='AdminBoundary' data-id='${OBJECTID}'>Subscribe</button></div>"):new d(e.value,a.certificationSchemeLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+e.value+"' data-type='CertScheme' data-id='${OBJECTID}'>Subscribe</button></div>"),e.feature.setInfoTemplate(t),n.push(e.feature)}),n},identifyMillPoints:function(e){var t=new n,r=new f(a.mill.url),i=app.map.getLayer(a.mill.id),o=new m,s=[];return s[0]="1 = 1",o.tolerance=3,o.returnGeometry=!0,o.width=app.map.width,o.height=app.map.height,o.geometry=e,o.mapExtent=app.map.extent,o.layerIds=i.visibleLayers,o.layerDefinitions=s,o.layerOption=m.LAYER_OPTION_VISIBLE,r.execute(o,function(e){e.forEach(function(e){e.feature.layer="MillPoints"}),e.length>0?t.resolve({layer:"MillPoints",features:e}):t.resolve(!1)},function(e){t.resolve(!1)}),t.promise},getCustomGraphics:function(e){var t=new n;return e.graphic&&e.graphic._layer.id===a.customGraphicsLayer.id?t.resolve({layer:"CustomGraphics",feature:e.graphic}):t.resolve(!1),t.promise},setCustomGraphicTemplates:function(e){var t,n=e.attributes.WRI_label;return t=new d(n,a.customGraphicsLayer.infoTemplate.content+"<div><button id='popup-analyze-area' class='popupAnalyzeButton' data-label='"+n+"' data-type='CustomGraphic' data-id='${WRI_ID}'>Analyze</button><button id='subscribe-area' class='popupSubscribeButton float-right' data-label='"+n+"' data-type='CustomGraphic' data-id='${WRI_ID}'>Subscribe</button></div>"),e.setInfoTemplate(t),e},createFormattingFunctions:function(){window.checkAvailable=function(e,t,n){return void 0===n[t]||"Null"===n[t]?"N/A":n[t]}},setupInfowindowListeners:function(){var n,r;e(app.map.infoWindow,"selection-change",function(){setTimeout(function(){t.byId("popup-analyze-area")&&(n&&n.remove(),n=e(t.byId("popup-analyze-area"),"click",o.analyzeAreaFromPopup.bind(o))),t.byId("subscribe-area")&&(r&&r.remove(),r=e(t.byId("subscribe-area"),"click",s.subscribeFromPopup))},0)}),e(app.map.infoWindow,"hide",function(){n&&n.remove(),r&&r.remove()})}}}),function(e,t){e.requestAnimationFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var n={},r=1e3/60;n.fadeIn=function(t,n,a){function i(){s.style.opacity=1*s.style.opacity+l,s.style.opacity<1?e.requestAnimationFrame(i):(o=t.shift(),s=document.getElementById(o),s?e.requestAnimationFrame(i):"function"==typeof a&&a())}"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var o=t.shift(),s=document.getElementById(o),l=r/(n.duration||500);e.requestAnimationFrame(i)},"function"==typeof define&&define.amd?define("utils/Animator",[],function(){return n}):"object"==typeof module&&module.exports?module.exports=n:e.animator=n}(window,document,define),define("components/Check",["react","knockout","dojo/topic","dojo/dom-class","map/TCDSlider","map/MapModel","utils/Hasher","dijit/form/HorizontalSlider"],function(e,t,n,r,a,i,o,s){return e.createClass({getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=o.getLayers(),r=e.indexOf(this.props.id)>-1,a=this;r&&(this.setState({active:r}),this.props.useRadioCallback||"suit"===this.props.id||"soy"===this.props.id?n.publish("toggleLayer",this.props.id):requestAnimationFrame(function(){n.publish("updateLayer",a.props)})),this.props.kids||document.getElementById(this.props.id+"_slider")&&new s({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){n.publish("changeLayerTransparency",a.props.id,a.props.layerType,e)}},this.props.id+"_slider").startup(),"loss"===this.props.id&&t.applyBindings(i.get("model"),document.querySelector(".loss-button-container"))},toggle:function(e){!r.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(){document.getElementsByClassName(this.props.infoDivClass).length?n.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0],this.props.id):n.publish("showInfoPanel",this.props.infoDivClass,this.props.id)},showTCDSlider:function(e){a.show(),e.stopPropagation()},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.parent?" indented":"")+(this.props.kids?" newList":"")+(this.props.visible?"":" hidden");return e.createElement("li",{className:t,"data-layer":this.props.id},e.createElement("div",{id:this.props.id+"_checkbox",onClick:this.props.kids?null:this.toggle},this.props.kids?null:e.createElement("span",{className:"custom-check"},e.createElement("span",null)),void 0!==this.props.infoDivClass?e.createElement("span",{onClick:this.showInfo,className:"layer-info-icon",dangerouslySetInnerHTML:{__html:"<svg class='info-icon-svg'><use xlink:href='#shape-info'></use></svg>"}}):null,e.createElement("a",{className:"layer-title"},this.props.title),e.createElement("p",{className:"layer-sub-title"},this.props.subtitle),this.props.kids||"gladConfidence"===this.props.id?null:e.createElement("div",{title:"Layer Transparency",className:"sliderContainer"+(this.state.active?"":" hidden")},e.createElement("div",{id:this.props.id+"_slider"})),"loss"===this.props.id?e.createElement("div",{className:"loss-button-container"+(this.state.active?"":" hidden")},e.createElement("span",{className:"loss-percentage-label"},"Displaying at "),e.createElement("span",{className:"loss-percentage-button",onClick:this.showTCDSlider,"data-bind":"text: tcdDensityValue"}),e.createElement("span",{className:"loss-percentage-label"}," density")):null))}})}),define("components/RadioButton",["react","knockout","dojo/topic","dojo/dom-class","utils/Hasher","map/MapModel","map/TCDSlider","components/Check","dijit/form/HorizontalSlider"],function(e,t,n,r,a,i,o,s,l){var c=e.createClass({displayName:"RadioButton",getInitialState:function(){return{active:this.props.active||!1}},componentDidMount:function(){this.props.postCreate(this);var e=a.getLayers(),r=e.indexOf(this.props.id)>-1,o=this;r&&(n.publish("showLayer",this.props.id),this.setState({active:r})),document.getElementById(this.props.id+"_slider")&&!this.props.noSlider&&new l({value:100,minimum:0,maximum:100,discreteValues:100,showButtons:!1,intermediateChanges:!1,onChange:function(e){n.publish("changeLayerTransparency",o.props.id,o.props.layerType,e)}},this.props.id+"_slider").startup(),"tcd"===this.props.id&&t.applyBindings(i.get("model"),document.querySelector(".tcd-button-container"))},toggle:function(e){!r.contains(e.target,"layer-info-icon")&&e.target.className.search("dijit")<0&&this.props.handle(this)},showInfo:function(){document.getElementsByClassName(this.props.infoDivClass).length?n.publish("showInfoPanel",document.getElementsByClassName(this.props.infoDivClass)[0],this.props.id):n.publish("showInfoPanel",this.props.infoDivClass,this.props.id)},showTCDSlider:function(){o.show()},render:function(){var t="layer-list-item "+this.props.filter+(this.state.active?" active":"")+(this.props.parent?" indented":"")+(this.props.forceUnderline?" newList":"")+(this.props.visible?"":" hidden");return"forest-change"===this.props.filter,e.createElement("li",{className:t,"data-layer":this.props.id,"data-name":this.props.filter},e.createElement("div",{onClick:this.toggle},e.createElement("span",{className:"radio-icon"},e.createElement("span",null)),"None"===this.props.title||"tcc"===this.props.id||this.props.noSlider?null:e.createElement("span",{onClick:this.showInfo,className:"layer-info-icon",dangerouslySetInnerHTML:{__html:"<svg class='info-icon-svg'><use xlink:href='#shape-info'></use></svg>"}}),e.createElement("a",{className:"layer-title"},this.props.title),e.createElement("p",{className:"layer-sub-title"},this.props.subtitle)),this.props.children?e.createElement("ul",null," ",this.props.children.map(this._mapper)," "):"none"===this.props.layerType||this.props.noSlider?null:e.createElement("div",{title:"Layer Transparency",className:"sliderContainer"+(this.state.active?"":" hidden")},e.createElement("div",{id:this.props.id+"_slider"})),"tcd"===this.props.id||"hansenLoss"===this.props.id?e.createElement("div",{className:"tcd-button-container"+(this.state.active?"":" hidden")},e.createElement("span",{className:"tcd-percentage-label"},"Displaying at "),e.createElement("span",{className:"tcd-percentage-button",onClick:this.showTCDSlider,"data-bind":"text: tcdDensityValue"}),e.createElement("span",{className:"tcd-percentage-label"}," density")):null)},_mapper:function(t){return t.visible=this.state.active,t.handle=this.props.handle,t.postCreate=this.props.postCreate,t.useRadioCallback=!0,"radio"===t.type?e.createElement(c,e.__spread({},t)):e.createElement(s,e.__spread({},t))}});return c}),define("components/LayerList",["react","dojo/topic","utils/Hasher","actions/WizardActions","components/RadioButton","components/Check"],function(e,t,n,r,a,i){var o=[],s=e.createClass({displayName:"List",getInitialState:function(){return{title:this.props.title,filter:this.props.filter}},componentWillReceiveProps:function(e,t){this.setState(e)},render:function(){return e.createElement("div",{className:"smart-list"},e.createElement("div",{className:this.props.title},e.createElement("div",{className:"category-icon"})),e.createElement("div",{className:"filter-list-title"},this.props.title),e.createElement("div",{className:"layer-line"}),e.createElement("ul",{className:"filter-list"},this.props.items.map(this._mapper,this)))},_mapper:function(t){return t.visible=this.state.filter===t.filter,t.handle=this._handle,t.postCreate=this._postCreate,"radio"===t.type?e.createElement(a,e.__spread({},t)):e.createElement(i,e.__spread({},t))},_handle:function(e){"radio"===e.props.type?this._radio(e):this._check(e)},_check:function(e){var a=!e.state.active;e.setState({active:a}),"none"!==e.props.layerType&&n.toggleLayers(e.props.id),e.props.useRadioCallback||"suit"===e.props.id||"soy"===e.props.id?"gladConfidence"===e.props.id?(t.publish("toggleGladConfidence",e.state.active),r.setGladConfidence(e.state.active)):t.publish("toggleLayer",e.props.id):requestAnimationFrame(function(){t.publish("updateLayer",e.props)})},_radio:function(e){var r,a;o.forEach(function(t){t.props.filter===e.props.filter&&t.state.active&&"gladFootprints"!==t.props.id&&"gladConfidence"!==t.props.id&&(r=t)}),r?(a=r.props.id!==e.props.id,a?("check"!==r.props.type&&(r.setState({active:!1}),n.toggleLayers(r.props.id),t.publish("hideLayer",r.props.id),this._toggleChildren(r,"remove")),e.props.id.search("none_")===-1&&(n.toggleLayers(e.props.id),t.publish("showLayer",e.props.id))):(e.setState({active:!1}),this._toggleChildren(e,"remove"),n.removeLayers(e.props.id),t.publish("hideLayer",e.props.id))):e.props.id.search("none_")===-1&&(n.toggleLayers(e.props.id),t.publish("showLayer",e.props.id)),a!==!1&&(e.setState({active:!0}),this._toggleChildren(e,"add"))},_toggleChildren:function(e,r){var a=[];e.props.children&&(e.props.children.forEach(function(e){o.forEach(function(t){t.props.id===e.id&&"gladConfidence"!==t.props.id&&a.push(t)})}),"remove"===r?a.forEach(function(e){e.state.active&&(t.publish("hideLayer",e.props.id),n.removeLayers(e.props.id))}):a.forEach(function(e){e.state.active&&(t.publish("showLayer",e.props.id),n.toggleLayers(e.props.id))}))},_postCreate:function(e){o.push(e)},toggleFormElement:function(e){o.forEach(function(t){t.props.id===e&&t.props.handle(t)})}});return function(t,n){return e.render(e.createElement(s,e.__spread({},t)),document.getElementById(n))}}),define("components/LayerModal",["react","components/ModalWrapper","main/config"],function(e,t,n){var r=(n.layerModal,e.createClass({displayName:"LayerModal",getInitialState:function(){return{layerInfo:{}}},componentWillReceiveProps:function(e){this.setState(e)},render:function(){var n,r=[];for(var a in this.state.layerInfo)r.push(this.state.layerInfo[a]);return this.state.layerInfo&&this.state.layerInfo.download_data&&(n=this.state.layerInfo.download_data),e.createElement(t,{downloadData:n},this.state.layerInfo.title?e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-source"},e.createElement("h2",{className:"modal-title"},this.state.layerInfo.title),e.createElement("h3",{className:"modal-subtitle"},this.state.layerInfo.subtitle),e.createElement("div",{className:"modal-table"},this.state.layerInfo.function?this.tableMap(this.state.layerInfo.function,"function"):null,this.state.layerInfo.resolution?this.tableMap(this.state.layerInfo.resolution,"RESOLUTION/SCALE"):null,this.state.layerInfo.geographic_coverage?this.tableMap(this.state.layerInfo.geographic_coverage,"GEOGRAPHIC COVERAGE"):null,this.state.layerInfo.source?this.tableMap(this.state.layerInfo.source,"source data"):null,this.state.layerInfo.frequency_of_updates?this.tableMap(this.state.layerInfo.frequency_of_updates,"FREQUENCY OF UPDATES"):null,this.state.layerInfo.date_of_content?this.tableMap(this.state.layerInfo.date_of_content,"DATE OF CONTENT"):null,this.state.layerInfo.cautions?this.tableMap(this.state.layerInfo.cautions,"cautions"):null,this.state.layerInfo.other?this.tableMap(this.state.layerInfo.other,"other"):null,this.state.layerInfo.license?this.tableMap(this.state.layerInfo.license,"license"):null),e.createElement("div",{
className:"modal-overview"},e.createElement("h3",null,"Overview"),this.state.layerInfo.overview?this.summaryMap(this.state.layerInfo.overview):null),this.state.layerInfo.citation?e.createElement("div",{className:"modal-credits"},e.createElement("h3",null,"Citation"),this.summaryMap(this.state.layerInfo.citation)):null)):e.createElement("div",{className:"no-info-available"},"No information available"))},setData:function(e){this.setState({layerInfo:e})},tableMap:function(t,n){return e.createElement("dl",{className:"source-row"},e.createElement("dt",null,n),e.createElement("dd",{dangerouslySetInnerHTML:{__html:t}}))},summaryMap:function(t){return e.createElement("div",{dangerouslySetInnerHTML:{__html:t}})}}));return function(t,n){return e.render(e.createElement(r,e.__spread({},t)),document.getElementById(n))}}),define("components/AnalysisModal",["react","components/ModalWrapper","dojo/cookie","dojo/on","dojo/dom-class"],function(e,t,n,r,a){var i=e.createClass({displayName:"AnalysisModal",getInitialState:function(){return{checked:!1}},toggleChecked:function(){this.setState({checked:!this.state.checked})},close:function(){this.state.checked===!0&&n("hideAnalysisModal",this.state.checked,{expires:31}),a.add("analysis-modal","hidden")},show:function(){var e=n("hideAnalysisModal");e||a.remove("analysis-modal","hidden")},render:function(){return e.createElement("div",{className:"analysis-modal-window"},e.createElement("div",{className:"tooltipmap"}),e.createElement("div",{title:"close",className:"modal-close close-icon pointer",onClick:this.close},e.createElement("svg",{viewBox:"0 0 25 25"},e.createElement("path",{d:"M 5 19 L 19 5 L 21 7 L 7 21 L 5 19 ZM 7 5 L 21 19 L 19 21 L 5 7 L 7 5 Z"}))),e.createElement("div",{className:"modal-wrapper custom-scroll"},e.createElement("div",{className:"modal-content"},e.createElement("div",{className:"modal-source"},e.createElement("h2",{className:"analysis-modal-title"},"Analysis"),e.createElement("div",{className:"modal-overview"},e.createElement("p",null,"Create custom analysis of your area of interest, such as a commodity concession, a jurisdiction, the sourcing area around a palm mill, or a custom area of your choice."),e.createElement("div",{className:"analysis-modal-hide"},"Don't show this again",e.createElement("input",{checked:this.state.checked,onChange:this.toggleChecked,type:"checkbox"})))))))}});return function(t,n){return e.render(e.createElement(i,e.__spread({},t)),document.getElementById(n))}}),define("utils/Loader",["dojo/Deferred","esri/urlUtils","esri/request"],function(e,t,n){return{getTemplate:function(t){var n,r=new e,a="./app/templates/"+t+".html?v=2.4.79";return n=new XMLHttpRequest,n.onreadystatechange=function(){4===n.readyState&&200===n.status&&r.resolve(n.responseText)},n.open("GET",a,!0),n.send(),r.promise},getWRITemplate:function(){var e="http://api.globalforestwatch.org/metadata";esri.config.defaults.io.corsEnabledServers.push("api.globalforestwatch.org");var t=n({url:e,handleAs:"json",callbackParamName:"callback"},{usePost:!1});return t},loadCSS:function(e){var t=doc.createElement("link"),n=doc.getElementsByTagName("head")[0];t.rel="stylesheet",t.type="text/css",t.href=e,n.appendChild(t)}}}),define("controllers/MapController",["dojo/on","dojo/dom","dojo/query","dojo/topic","dojo/dom-class","dojo/dom-style","dijit/registry","dojo/_base/array","dojo/dom-geometry","dojo/number","map/config","map/Map","map/Finder","map/MapModel","utils/Hasher","utils/Animator","utils/Helper","utils/GeoHelper","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/graphicsUtils","map/Controls","map/LayerController","analysis/WizardStore","components/LayerList","components/LayerModal","components/AnalysisModal","utils/Loader","map/Uploader","map/CoordinatesModal","utils/Analytics"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h,g,v,y,b,_,C,w,E,S,I,L,x,T,k,N){var D,A,O,M,P,F,R=!1,j=!1;document.createElement("infoDiv");return{init:function(a){var i=this,s=[];if(R)return o.byId("stackContainer").selectChild("mapView"),void N.sendPageview("/#v=map","Map");R=!0,o.byId("mapView").set("content",a),o.byId("stackContainer").selectChild("mapView");var l=m.getHash("x"),v=m.getHash("y"),b=m.getHash("l"),_={};for(var C in u.mapOptions)_[C]=u.mapOptions[C];void 0!==l&&""!==l&&(_.centerX=l),void 0!==l&&""!==l&&(_.centerY=v),void 0!==l&&""!==l&&(_.zoom=b),F=new d(_),app.map=F.map,F.on("layers-loaded",function(){var e,t,n,r=m.getHash("f");if(void 0!==r)switch(e=r.split("-"),t=e[0]){case"WDPA":n={layer:t,url:u.pal.url+"/0",objectId:e[1],templateFunction:p.setWDPATemplates},w.setSelectedFeature(n);break;case"MillPoints":n={layer:t,url:u.mill.url+"/0",objectId:e[1],templateFunction:p.setMillPointTemplates},w.setSelectedFeature(n);break;case"Concessions":n={layer:t+"-"+e[1],url:u.concession.url+"/"+e[1],objectId:e[2],templateFunction:p.setConcessionTemplates},w.setSelectedFeature(n)}var a=F.map.getLayer("forestUse_commodities");a&&F.map.reorderLayer(a,F.map.layerIds.length+1)}),F.on("map-ready",function(){var e=y.webMercatorToGeographic(F.map.extent);c.round(e.getCenter().x,2),c.round(e.getCenter().y,2),F.map.getZoom();D=f.initialize("map-container"),i.renderComponents(),i.bindUIEvents(),i.registerStoreCallbacks();var t=m.getHash("wiz");void 0!==t&&"open"===t?g.toggleWizard():M.show(),r.subscribe("changeView",function(e){"map"!==e&&M.close()})}),app.map.on("zoom-end",w.checkZoomDependentLayers.bind(w)),app.map.on("click",p.performIdentify.bind(p)),p.createFormattingFunctions(),p.setupInfowindowListeners(),n(".gfw .map-layer-controls li").forEach(function(e){s.push(e.id)}),h.fadeIn(s,{duration:100});try{addthis.init()}catch(e){t.byId("sharing-modal").innerHTML="Sorry. AddThis is temporarily down."}e(app.map.infoWindow,"hide",function(){m.removeKey("f")});var E,S=["attributes","geometry","infoTemplate","symbol"],I=e.pausable(app.map.infoWindow,"selection-change",function(){if(this.features){if(JSON.stringify(this.features,S)!=JSON.stringify(E,S)){var e,t,n=[],r=this;r.features.forEach(function(r){t=void 0!==r.attributes.Mill_name,t?(e=!0,n.unshift(r)):n.push(r)}),e&&(I.pause(),r.hide(),r.clearFeatures(),r.setFeatures(n),E=n,r.show(r.location,{closestFirst:!1}),I.resume())}m.setHash("f",this.getSelectedFeature().layer+"-"+this.getSelectedFeature().attributes.OBJECTID)}else m.removeKey("f")});N.sendPageview("/#v=map","Map")},bindUIEvents:function(){var r=this;e(app.map,"mouse-move",function(e){f.set("currentLatitude",e.mapPoint.getLatitude().toFixed(4)),f.set("currentLongitude",e.mapPoint.getLongitude().toFixed(4))}),e(app.map,"extent-change",function(e){var t=(e.delta,y.webMercatorToGeographic(e.extent)),n=(e.levelChange,e.lod),r=(e.target,c.round(t.getCenter().x,2)),a=c.round(t.getCenter().y,2);m.setHash("x",r),m.setHash("y",a),m.setHash("l",n.level)}),e(t.byId("locator-widget-button"),"click",function(){f.set("showBasemapGallery",!1),f.set("showSharingOptions",!1),f.set("showLocatorOptions",!f.get("showLocatorOptions"))}),e(t.byId("basemap-gallery-button"),"click",function(){f.set("showLocatorOptions",!1),f.set("showSharingOptions",!1),f.set("showBasemapGallery",!f.get("showBasemapGallery"))}),e(t.byId("share-button"),"click",function(){f.set("showLocatorOptions",!1),f.set("showBasemapGallery",!1),f.set("showSharingOptions",!f.get("showSharingOptions")),N.sendEvent("Event","Share Button","User clicked the share button.")}),e(t.byId("dms-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(f.set("showDMSInputs",!0),f.set("showLatLongInputs",!1))}),e(t.byId("lat-long-search"),"change",function(e){var t=e.target?e.target.checked:e.srcElement.checked;t&&(f.set("showDMSInputs",!1),f.set("showLatLongInputs",!0))}),e(t.byId("search-option-go-button"),"click",function(){p.searchAreaByCoordinates()}),e(t.byId("clear-search-pins"),"click",function(){F.map.graphics.clear(),f.set("showClearPinsOption",!1)}),n(".map-layer-controls li").forEach(function(e){e.addEventListener("mouseenter",function(){r.toggleLayerList(e)})}),e(t.byId("master-layer-list"),"mouseleave",function(){i.set("master-layer-list","opacity",0),i.set("master-layer-list","left","-1000px")}),n(".fires_toolbox .toolbox-list li").forEach(function(t){e(t,"click",C.toggleFiresLayerOptions)}),e(t.byId("high-confidence"),"change",C.toggleFiresConfidenceLevel),e(t.byId("high-confidence-info"),"click",C.showFiresConfidenceInfo),n(".gfw .overlays-container .overlays-checkbox").forEach(function(t){e(t,"click",C.toggleOverlays)}),e(t.byId("legend-title"),"click",function(){C.toggleLegendContainer()}),e(t.byId("reset-suitability"),"click",function(){C.resetSuitabilitySettings()}),e(t.byId("export-suitability"),"click",function(){C.exportSuitabilitySettings()}),e(t.byId("close-suitability"),"click",function(){r.toggleItemInLayerList("suit")}),e(t.byId("wizard-tab"),"click",function(){M.close(),g.toggleWizard()}),n(".suitability-accordion .slider-name .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),n(".suitability-accordion .criteria-separator .layer-info-icon").forEach(function(t){e(t,"click",function(e){var t=e.target?e.target:e.srcElement,n=t.dataset?t.dataset.class:t.getAttribute("data-class");r.showInfoPanel(n)})}),e(t.byId("upload-form"),"change",T.beginUpload.bind(T)),e(document.querySelector(".coordinates-modal-enter-button"),"click",k.savePoint.bind(k))},registerStoreCallbacks:function(){E.set("customFeatures",[]),E.set("removedCustomFeatures",[]),E.set("selectedCustomFeatures",[]),E.set("selectedPresetFeature",null),E.registerCallback("customFeatures",function(){var e,t,n=F.map.getLayer(u.customGraphicsLayer.id),r=E.get("customFeatures"),a=n.graphics.length-r.length;e=function(){r.slice(n.graphics.length-r.length).forEach(function(e){if("point"===e.geometry.type){var t=v.preparePointAsPolygon(e,50);n.add(t)}else n.add(e)})},t=function(){E.get("removedCustomFeatures").forEach(function(e){if("point"===e.geometry.type){var t="WRI_ID";v.removeGraphicByField(n.id,t,e.attributes[t])}else n.remove(e)})},r.length>0&&a<0?e():a>0?t():0===r.length&&n.clear()}),E.registerCallback("selectedCustomFeatures",function(){var e=E.get("selectedCustomFeatures");e.length>0&&F.map.setExtent(_.graphicsExtent(e),!0)})},toggleLayerList:function(e){var t,n=e.dataset?e.dataset.filter:e.getAttribute("data-filter"),r=e.dataset?e.dataset.class:e.getAttribute("data-class"),o=l.position(e,!0),s=180;t=(o.w-s)/2,i.set("master-layer-list","left",o.x+t+"px"),h.fadeIn("master-layer-list",{duration:100}),a.remove("master-layer-list"),a.add("master-layer-list",r),A&&A.setProps({title:e.children[0].innerHTML,filter:n})},renderComponents:function(){var e=m.getHash();void 0===e.lyrs&&(m.toggleLayers("tcc"),m.toggleLayers("hansenLoss")),C.generateSuitabilitySliders(),A=new S({items:u.layersUI},"master-layer-list"),O=new I({},"layer-modal"),M=new L({},"analysis-modal"),C.generateTimeSliders()},toggleItemInLayerList:function(e){A.toggleFormElement(e)},toggleItemInLayerListOff:function(){var e=F.map.getLayer("forestUse_landUse");e.visible===!0&&(e.visibleLayers.indexOf(0)>-1&&A.toggleFormElement("logPerm"),e.visibleLayers.indexOf(2)>-1&&A.toggleFormElement("minePerm"),e.visibleLayers.indexOf(1)>-1&&A.toggleFormElement("oilPerm"),e.visibleLayers.indexOf(3)>-1&&A.toggleFormElement("woodPerm"))},updateLayerModalData:function(e){O.setData(e)},centerChange:function(e,t,n){if(R){var r,a;F.map.extent?(r=y.webMercatorToGeographic(F.map.extent),e=c.round(r.getCenter().x,2),t=c.round(r.getCenter().y,2),a=F.map.getLevel()):(e=0,t=0,a=1);var i=m.getHash(),o=parseFloat(i.x)!==e||parseFloat(i.y)!==t||parseInt(i.l)!==a;if(o){var s=y.geographicToWebMercator(new b(parseFloat(i.x),parseFloat(i.y)));F.map.centerAndZoom(s,parseInt(i.l))}}},showInfoPanel:function(e,t){var n,r,i=[],o="";if("object"==typeof e)o=e,C.createDialogBox(o);else if(e=u.metadataIds[e],j)r=P[e],r?(O.setData(r),n=O.getDOMNode(),a.remove(n.parentNode,"hidden")):(u.layersUI.forEach(function(e){e.children&&e.children.forEach(function(e){e.id===t&&i.push(e)}),e.id===t&&i.push(e)}),r=i[0]&&i[0].metadata?i[0].metadata:{title:"Cannot find layer information",overview:"Please check again later for more information on this layer"},O.setData(r),n=O.getDOMNode(),a.remove(n.parentNode,"hidden"));else{var s=x.getWRITemplate();s.then(function(o){j=!0,P=o,r=o[e],r?(O.setData(r),n=O.getDOMNode(),a.remove(n.parentNode,"hidden")):(u.layersUI.forEach(function(e){e.children&&e.children.forEach(function(e){e.id===t&&i.push(e)}),e.id===t&&i.push(e)}),r=i[0]&&i[0].metadata?i[0].metadata:{title:"Cannot find layer information",overview:"Please check again later for more information on this layer"},O.setData(r),n=O.getDOMNode(),a.remove(n.parentNode,"hidden"))})}}}}),define("controllers/Header",["dojo/on","dojo/dom","dojo/dom-style","dojo/query","dojo/hash","dojo/dom-class","dojo/io-query","dijit/Dialog","utils/Hasher","utils/Helper","main/config","utils/Analytics"],function(e,t,n,r,a,i,o,s,l,c,u,d){"use strict";var p="large",f=!1;return{init:function(e){f||(t.byId("app-header").innerHTML=t.byId("app-header").innerHTML+e,this.bindEvents(),f=!0)},setState:function(e){i.remove("app-header",p),i.add("app-header",e),p=e},bindEvents:function(){var t=this;r(".header .nav-link").forEach(function(n){e(n,"click",function(e){var n=e.target?e.target:e.srcElement,r=n.dataset?n.dataset.view:n.getAttribute("data-view"),a=n.dataset?n.dataset.external:n.getAttribute("data-external");t.updateView(r,a,f)})}),r("#dijit_Dialog_0 > div.dijitDialogPaneContent > p > a").forEach(function(n){e(n,"click",function(e){var n=(e.target?e.target:e.srcElement,"map"),r=!1;$("#dijit_Dialog_0 > div.dijitDialogTitleBar > span.dijitDialogCloseIcon").click(),t.updateView(n,r,f)})}),r(".nav-link-more").forEach(function(e){e.onclick=function(){t.changeNavItemAbout(e,"about")}});var n=function(){$("#learn-more-dropdown").removeClass("hidden")},a=function(){$("#learn-more-dropdown").addClass("hidden")};$("#learnMoreItem").mouseenter(n).mouseleave(a),setTimeout(function(){$("#footerSelecter").click(function(){t.addSubscriptionDialog()}),$(".arrow-down-icon").click(function(){$("html body").animate({scrollTop:$(".arrow-down-icon").offset().top},1500)}),$("#get-started__button").click(function(){$("#tooltip-getstarted").toggleClass("display")})},200)},changeNavItemAbout:function(e,t){r(".nav-item-a.selected ").forEach(function(e){e.parentElement.id.indexOf(t)>-1&&(i.remove(e,"selected"),n.set(e.parentElement.id.match(/(.*)Nav/)[1],"display","none"),i.remove(e.parentElement.id.match(/(.*)Nav/)[1],"selected"))});var s=o.queryToObject(a());"about"!=s.v?(l.setHash("v","about"),l.setHash("n",e.dataset.src)):l.setHash("n",e.dataset.src);var c;switch(e.dataset.src){case"GFW":c=$("#aboutGFWNav");break;case"History":c=$("#aboutHistoryNav");break;case"Partners":c=$("#aboutPartnersNav");break;case"Videos":c=$("#aboutVideosNav");break;case"Users":c=$("#aboutUsersNav");break;default:c=$("#aboutGFWNav")}c[0]&&e.dataset.src===c[0].id.replace("Nav","").replace(t,"")&&(i.add(c[0].children[0],"selected"),n.set(c[0].id.match(/(.*)Nav/)[1],"display","block"),i.add(c[0].id.match(/(.*)Nav/)[1],"selected"))},updateView:function(e,t,n){if("true"===t)return d.sendEvent("Event","Home Page Carousel Item Clicked","User clicked on INITIATIVE LAUNCHED.",1),void this.redirectPage(e);if(e&&"home"!==e){var a;switch(e){case"map-wizard":a="PALM OIL RISK TOOL";break;case"map-analysis":a="ANALYSIS";break;case"map-supplier":a="SUPPLIER MONITORING";break;case"map-palm":a="COMMODITIES";break;case"map":a="COMMODITIES MAP"}d.sendEvent("Event","Home Page Carousel Item Clicked","User clicked on "+a+".",1)}return"map-wizard"===e?void window.open(window.location.pathname+"#v=map&lyrs=tcc%2ChansenLoss%2Cmill%2CgfwMill&x=143.48&y=1.66&l=3&wiz=open","_self"):"map-analysis"===e?void window.open(window.location.pathname+"#v=map&lyrs=oilPerm%2CrspoPerm%2ClogPerm%2CminePerm%2CwoodPerm&x=143.48&y=1.66&l=3&wiz=open","_self"):"map-supplier"===e?void window.open(window.location.pathname+"#v=map&x=104.27&y=1.96&l=5&lyrs=tcc%2ChansenLoss%2Cmill%2CgfwMill&wiz=open","_self"):"map-palm"===e?void window.open(window.location.pathname+"#v=map&lyrs=rspoPerm&x=-150.13&y=-1.9&l=3","_self"):(r(".header .nav-link.selected").forEach(function(e){i.remove(e,"selected")}),r('.nav-link-list [data-view="'+e+'"]').forEach(function(e){i.add(e,"selected")}),void(n&&l.setHash("v",e)))},toggleForView:function(e){"map"===e?this.setForMap():"home"===e?this.setForHome():this.setForGenericView()},setForMap:function(){i.add("nav-content","outer"),i.remove("nav-content","inner"),i.add("app-header","mapView"),i.remove("app-header","generalView")},setForGenericView:function(){this.setForHome(),i.remove("app-header","mapView"),i.add("app-header","generalView"),$(".footerModesContainer").hide()},setForHome:function(){i.add("nav-content","inner"),i.remove("nav-content","outer"),i.remove("app-header","mapView"),i.remove("app-header","generalView"),$(".footerModesContainer").show()},redirectPage:function(e){window.open(u.urls[e],"_blank")},addSubscriptionDialog:function(){this.dialog2=new s({style:"width: 300px; text-align: center;"});var e=this,t='<p>To sign up for fire alerts go to the <span id="goToMapFromDialog">Map</span>, turn on a data layer from the Forest Use or Conservation drop-down tabs, select an area on the map, and click "Subscribe".</p>';this.dialog2.setContent(t),$("#goToMapFromDialog").css("color","#e98300"),$("#goToMapFromDialog").css("cursor","pointer"),$("#goToMapFromDialog").css("font-weight","bold"),$("#goToMapFromDialog").click(function(){e.dialog2.destroy(),e.updateView("map",!1,!0)}),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-top","-30px"),$("#dijit_Dialog_0 > div.dijitDialogPaneContent").css("margin-bottom","-10px"),this.dialog2.show()}}}),define("controllers/Footer",["dojo/query","dojo/dom","dojo/dom-style"],function(e,t,n){var r=!1;return{init:function(e){if(!r){r=!0,t.byId("app-footer").innerHTML=e+t.byId("app-footer").innerHTML;var n=document.createElement("script"),a=document.getElementsByTagName("head")[0];n.src="http://gfw-assets.s3.amazonaws.com/static/gfw-assets.latest.js",n.async=!0,n.setAttribute("id","loader-gfw"),n.setAttribute("data-current",".shape-commodities"),a.appendChild(n)}},toggle:function(e){e?n.set("app-footer","display","none"):n.set("app-footer","display","block")}}}),define("models/HomeModel",["dojo/_base/declare","main/config","knockout"],function(e,t,n){var r=e(null,{constructor:function(e){r.vm={},r.root=e,r.vm.homeModeOptions=n.observableArray(t.homeModeOptions),r.vm.dataSubmit=function(e,t){console.log("dataSubmit")},r.vm.modeSelect=function(e,t){var n=e.eventName;console.log(e),require(["controllers/HomeController"],function(e){e.handleModeClick(n)})},r.vm.dotSelect=function(e,t){require(["controllers/HomeController"],function(t){t.handleDotClick(e)})},n.applyBindings(r.vm,document.getElementById(e))}});return r.get=function(e){return"model"===e?r.vm:r.vm[e]()},r.set=function(e,t){r.vm[e](t)},r.applyTo=function(e){n.applyBindings(r.vm,document.getElementById(e))},r.initialize=function(e){return r.instance||(r.instance=new r(e)),r.instance},r}),define("controllers/HomeController",["main/config","dojo/dom","dojo/cookie","dijit/Dialog","dijit/registry","dojo/_base/array","models/HomeModel"],function(e,t,n,r,a,i,o){"use strict";var s={},l=!1,c=!1;return s.startModeAnim=function(){var e=0,t=function(e){var t=o.vm.homeModeOptions(),n=i.map(t,function(t,n){return n===e?t.display=!0:t.display=!1,t});o.vm.homeModeOptions([]),o.vm.homeModeOptions(n)};t(e),require(["dojo/fx","dojo/_base/fx","dojo/query"],function(n,r,a){var i=function(o){var s=a(".modeGroup"),l=s.length,u=n.chain([r.animateProperty({node:s[o],properties:{marginLeft:{start:0,end:-350},opacity:{start:1,end:0}},onEnd:function(){var n;e<l-1?(n=e+1,e++):(n=0,e=0),setTimeout(function(){c||(t(n),setTimeout(function(){c||i(n)},1e3))},250)},units:"px",duration:1e3,delay:2e3})]);u.play()};i(e)})},s.stopModeAnim=function(e){if(c=!0,e){var t=e.id,n=o.vm.homeModeOptions();o.vm.homeModeOptions([]);i.map(n,function(e,n){return t==n?e.display=!0:e.display=!1,o.vm.homeModeOptions.push(e),e})}},{init:function(e){return l?void a.byId("stackContainer").selectChild("homeView"):(l=!0,a.byId("stackContainer").selectChild("homeView"),a.byId("homeView").set("content",e),o.initialize("homeView"),void s.startModeAnim())},handleModeClick:function(e){require(["controllers/Header"],function(t){"goToMap"==e?t.updateView("map",!1,!0):"goToWizard"==e?t.updateView("map-wizard",!1,!0):"goToAnalysis"==e?t.updateView("map-analysis",!1,!0):"goToSupplier"==e?t.updateView("map-supplier",!1,!0):"goToPalm"==e?t.updateView("map-palm",!1,!0):"goToPartnership"==e?t.updateView("partnership","true",!0):"goToBlogs"==e?t.updateView("blog","true",!0):"goToZSL"==e&&t.updateView("SPOTT","true",!0)})},handleDotClick:function(e){s.stopModeAnim(e)},showSplashScreen:function(){var t,a,i,o=n("hideSplashScreen");o||(t="<label><input id='hideSplashScreen' type='checkbox' />&nbsp;&nbsp;Don't ask me again.</label>",a=new r({id:"splashDialog",title:"Welcome to GFW Commodities Analyzer",style:"width: 510px;",content:e.homeDialog.html+t}),a.show(),a.on("cancel",function(){i=document.getElementById("hideSplashScreen").checked,i&&n("hideSplashScreen",i,{expires:31})}))}}}),define("utils/NavListController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dojo/hash","dojo/io-query","utils/Hasher","utils/Analytics"],function(e,t,n,r,a,i,o,s){function l(e){return e.replace(/\w*/g,function(e){return"GFW"===e?e:e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}return{loadNavControl:function(e){function a(e,a){t(".nav-item-a.selected ").forEach(function(e){e.parentElement.id.indexOf(a)>-1&&(n.remove(e,"selected"),r.set(e.parentElement.id.match(/(.*)Nav/)[1],"display","none"),n.remove(e.parentElement.id.match(/(.*)Nav/)[1],"selected"))}),n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block");var i=e.id;i=i.replace("Nav","").replace(a,""),o.setHash("n",i);var c=l(a)+" - "+l(e.children[0].innerHTML),u="/#v="+a+"&n="+i;s.sendPageview(u,c)}t(".nav-item").forEach(function(t){t.id.indexOf(e)>-1&&(t.onclick=function(){a(t,e)})})},loadNavView:function(o){var c,u=i.queryToObject(a()),d=!0;if(u.hasOwnProperty("n")?t(".nav-item").forEach(function(e){e.id.indexOf(o)>-1&&u.n===e.id.replace("Nav","").replace(o,"")&&(n.add(e.children[0],"selected"),r.set(e.id.match(/(.*)Nav/)[1],"display","block"),n.add(e.id.match(/(.*)Nav/)[1],"selected"),d=!1,c=e.children[0]),c||(t(".nav-item-a.default-selection").forEach(function(e){e.parentElement.id.indexOf(o)>-1&&(n.add(e,"selected"),c=e)}),t(".nav-subpage.default-selection").forEach(function(e){e.id.indexOf(o)>-1&&r.set(e,"display","block")}))}):(t(".nav-item-a.default-selection").forEach(function(e){e.parentElement.id.indexOf(o)>-1&&(n.add(e,"selected"),c=e)}),t(".nav-subpage.default-selection").forEach(function(e){e.id.indexOf(o)>-1&&r.set(e,"display","block")})),u.hasOwnProperty("s")&&e.byId(u.s)&&(e.byId(u.s).checked=!0),c){var p=l(o)+" - "+l(c.innerHTML),f=c.parentElement.id.replace("Nav","").replace(o,""),m="/#v="+o+"&n="+f;s.sendPageview(m,p)}},urlControl:function(e){var n,r,a={};a.v=e;var i=t(".nav-item-a.selected");for(i.length>0?i.forEach(function(t){t.parentElement.id.indexOf(e)>-1&&(a.n=t.parentElement.id.replace("Nav","").replace(e,""))}):a.n&&delete a.n,n=document.getElementsByTagName("input"),r=0;r<n.length;r++)n[r].checked?a.s=n[r].id:a.s&&delete a.s;var s=!0;for(n=document.getElementsByTagName("input"),r=0;r<n.length;r++)n[r].checked&&(a.s=n[r].id,s=!1);var l=e.indexOf("data")>-1;!s&&l||a.s&&delete a.s,o.setHashFromState(a)}}}),define("controllers/AboutController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/Hasher","utils/NavListController"],function(e,t,n,r,a,i,o){var s=!1;return{init:function(e){if(s)return void a.byId("stackContainer").selectChild("aboutView");s=!0,a.byId("stackContainer").selectChild("aboutView"),a.byId("aboutView").set("content",e);var t="about";o.loadNavControl(t),o.loadNavView(t)}}}),define("controllers/DataController",["dijit/registry","utils/NavListController","utils/Hasher","dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style"],function(e,t,n,r,a,i,o){"use strict";var s=!1;return{init:function(r){if(s)return void e.byId("stackContainer").selectChild("dataView");s=!0,e.byId("stackContainer").selectChild("dataView"),e.byId("dataView").set("content",r);var a="data";t.loadNavControl(a),t.loadNavView(a);for(var i=document.getElementsByTagName("input"),o=0;o<i.length;o+=1)i[o].onclick=function(){this.checked?n.setHash("s",this.id):n.removeKey("s");for(var e=0;e<i.length;e++)i[e]!==this&&(i[e].checked=!1)};this.initializeCountryDropdowns()},initializeCountryDropdowns:function(){var e=document.getElementsByClassName("source_download_container"),t=document.getElementsByClassName("source_dropdown_body");e.length>0&&[].map.call(e,function(e){e.onchange=function(){[].map.call(t,function(e){"none"!==e.value&&(e.className="source_dropdown_body")});var n=e.options[e.selectedIndex].value;if("none"!==n){var r=document.getElementById(n);r.className=r.className+" active"}}})}}}),define("controllers/MethodsController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","utils/NavListController"],function(e,t,n,r,a,i){"use strict";var o=!1;return{init:function(e){if(o)return void a.byId("stackContainer").selectChild("methodsView");o=!0,a.byId("stackContainer").selectChild("methodsView"),a.byId("methodsView").set("content",e);var t="methods";i.loadNavControl(t),i.loadNavView(t)}}}),define("controllers/PublicationsController",["dojo/dom","dijit/registry"],function(e,t){"use strict";var n=!1;return{init:function(e){return n?void t.byId("stackContainer").selectChild("publicationsView"):(n=!0,t.byId("stackContainer").selectChild("publicationsView"),void t.byId("publicationsView").set("content",e))}}}),define("components/SubmitWrapper",["react","dojo/dom-class"],function(e,t){var n=e.createClass({displayName:"SubmitWrapper",close:function(){var n=e.findDOMNode(this).parentElement;t.add(n,"hidden")},render:function(){return e.createElement("div",{className:"modal-container"},e.createElement("div",{className:"submit-background",onClick:this.close}),e.createElement("div",{className:"modal-window"},e.createElement("div",{title:"close",className:"modal-close close-icon pointer",onClick:this.close},e.createElement("svg",{viewBox:"0 0 25 25"},e.createElement("path",{d:"M 5 19 L 19 5 L 21 7 L 7 21 L 5 19 ZM 7 5 L 21 19 L 19 21 L 5 7 L 7 5 Z"}))),e.createElement("div",{className:"modal-wrapper custom-scroll"},this.props.children)))}});return n}),define("components/SubmitModal",["react","components/SubmitWrapper","dojo/dom-class","map/config"],function(e,t,n,r){var a=r.submitMessages,i=e.createClass({displayName:"SubmitModal",getInitialState:function(){return{activeMessage:""}},render:function(){return e.createElement(t,null,e.createElement("div",{className:"submit-window"},a.map(this.itemMapper,this)))},itemMapper:function(t){return e.createElement("div",{className:t.domClass},e.createElement("div",{id:t.domId,className:this.state.activeMessage===t.domId?"":" hidden"},t.message))},close:function(){var t=e.findDOMNode(this).parentElement;n.add(t,"hidden")},addError:function(e){this.setState({activeMessage:e})},changeGladEnd:function(e){var t=$("#gladPlayButtonEndClick");t.html("aa"),this.close(),this.setState({endDate:e})}});return function(t,n){return e.render(e.createElement(i,e.__spread({},t)),document.getElementById(n))}}),define("models/SubmissionModel",["dojo/_base/declare","map/config","knockout"],function(e,t,n){var r=e(null,{constructor:function(e){r.vm={},r.root=e,r.vm.storyNameData=n.observable(),r.vm.storyCompanyData=n.observable(),r.vm.storyTitleData=n.observable(),r.vm.storyEmailData=n.observable(),r.vm.storyDetailsData=n.observable(),r.vm.concessionFileName=n.observable(),r.vm.concessionFileType=n.observable(),r.vm.facilityFileName=n.observable(),r.vm.facilityFileType=n.observable(),r.vm.otherFileName=n.observable(),r.vm.otherFileType=n.observable(),r.vm.submissionModalHeader=n.observable(t.submissionDialog.submissionModalHeader),r.vm.submissionEnterButton=n.observable(t.submissionDialog.submissionEnterButton),r.vm.submissionPlaceholder=n.observable(t.submissionDialog.submissionPlaceholder),r.vm.mediaChange=function(e,t){require(["controllers/SubmissionController"],function(n){n.handleFileChange(e,t)})},r.vm.dataSubmit=function(e){require(["controllers/SubmissionController"],function(t){t.handleDataSubmit(e)})},n.applyBindings(r.vm,document.getElementById(e))}});return r.get=function(e){return"model"===e?r.vm:r.vm[e]()},r.set=function(e,t){r.vm[e](t)},r.applyTo=function(e){n.applyBindings(r.vm,document.getElementById(e))},r.initialize=function(e){return r.instance||(r.instance=new r(e)),r.instance},r}),define("controllers/SubmissionController",["dojo/dom","dojo/query","dojo/dom-class","dojo/dom-style","dijit/registry","esri/graphic","esri/request","components/SubmitModal","utils/NavListController","models/SubmissionModel"],function(e,t,n,r,a,i,o,s,l,c){var u,d,p=!1;return{init:function(e){return p?void a.byId("stackContainer").selectChild("submissionView"):(u=this,p=!0,a.byId("stackContainer").selectChild("submissionView"),a.byId("submissionView").set("content",e),c.initialize("submissionView"),void(d=new s({},"submit-modal")))},handleDataSubmit:function(e){u.model=e,$("#storyNameInput").css("border-color","#c0c0c0"),$("#storyCompanyInput").css("border-color","#c0c0c0"),$("#storyTitleInput").css("border-color","#@c0c0c0"),$("#storyEmailInput").css("border-color","#c0c0c0"),$("#concessionInput").css("border-color","#c0c0c0"),$("#facilityInput").css("border-color","#c0c0c0"),$("#otherInput").css("border-color","#c0c0c0");var t,r=e.concessionFileName(),a=e.concessionFileType(),i=e.facilityFileName(),o=e.facilityFileType(),s=e.otherFileName(),l=e.otherFileType();if(!e.storyNameData())return $("#storyNameInput").css("border-color","red"),d.addError("storyName"),t=d.getDOMNode(),void n.remove(t.parentNode,"hidden");if(!e.storyCompanyData())return $("#storyCompanyInput").css("border-color","red"),d.addError("storyCompany"),t=d.getDOMNode(),void n.remove(t.parentNode,"hidden");if(!e.storyTitleData())return $("#storyTitleInput").css("border-color","red"),d.addError("storyPosition"),t=d.getDOMNode(),void n.remove(t.parentNode,"hidden");if(!e.storyEmailData())return $("#storyEmailInput").css("border-color","red"),d.addError("storyEmail"),t=d.getDOMNode(),void n.remove(t.parentNode,"hidden");if(!e.concessionFileName())return $("#concessionInput").css("border-color","red"),d.addError("storyData"),t=d.getDOMNode(),void n.remove(t.parentNode,"hidden");var c=$("#concessionInput")[0].files[0],p=$("#facilityInput")[0].files[0],f=$("#otherInput")[0].files[0];if(c||p||f){var m=new FormData;c&&(m.append("concessionFile",c),m.append("concessionFileName",r),m.append("concessionFileType",a)),p&&(m.append("facilityFile",p),m.append("facilityFileName",i),m.append("facilityFileType",o)),f&&(m.append("otherFile",f),m.append("otherFileName",s),m.append("otherFileType",l)),m.append("storyEmail",e.storyEmailData()),m.append("storyTitle",e.storyTitleData()),m.append("storyCompany",e.storyCompanyData()),m.append("storyUserName",e.storyNameData());var h=new Date,g=h.getDate()+"_"+(h.getMonth()+1)+"_"+h.getFullYear();m.append("datestring",g),$.ajax({url:"app/php/post_file_to_s3.php",dataType:"text",cache:!1,contentType:!1,processData:!1,data:m,type:"post",success:function(){console.log(arguments),d.addError("submissionSuccess");var e=d.getDOMNode();n.remove(e.parentNode,"hidden"),$("#storyForm")[0].reset()},error:function(){console.log(arguments),d.addError("s3Error"),t=d.getDOMNode(),n.remove(t.parentNode,"hidden")}})}},handleFileChange:function(e,t){
if(0!==t.target.files.length){var n=t.target.files[0].name,r=/\..+$/,a=(n.match(r),t.target.files[0].type);"concessionInput"===t.target.id?(e.concessionFileName(n),e.concessionFileType(a)):"facilityInput"===t.target.id?(e.facilityFileName(n),e.facilityFileType(a)):"otherInput"===t.target.id&&(e.facilityFileName(n),e.facilityFileType(a))}},uploadToAGOL:function(e){var t,r,a=e.split(";"),i=a[0];a.length>1&&(r=a[1]);var s={};s.name=u.model.storyNameData(),s.company=u.model.storyCompanyData(),s.title=u.model.storyTitleData(),s.email=u.model.storyEmailData(),u.model.storyDetailsData()&&(s.notes=u.model.storyDetailsData()),s.data_file_name=u.model.dataFileName(),u.model.facilityFileName()&&(s.att_file_name=u.model.facilityFileName()),s.data_url=i,r&&(s.attribute_url=r);var l=[{attributes:s}],c="./app/php/proxy.php";esri.config.defaults.io.proxyUrl=c,esri.config.defaults.io.alwaysUseProxy=!1;var p="http://services.arcgis.com/hBEMHCkbQdfV906F/arcgis/rest/services/data_submission_form/FeatureServer/0/addFeatures",f=o({url:p,content:{f:"json",features:JSON.stringify(l)},handleAs:"json",callbackParamName:"callback"},{usePost:!0,useProxy:!0});f.then(function(){d.addError("submissionSuccess"),t=d.getDOMNode(),n.remove(t.parentNode,"hidden"),$("#storyForm")[0].reset()},function(){d.addError("layersRequestError"),t=d.getDOMNode(),n.remove(t.parentNode,"hidden")})}}}),define("controllers/ViewController",["dojo/dom-class","dojo/query","dojo/io-query","dijit/registry","utils/Loader","controllers/Header","controllers/Footer","controllers/MapController","controllers/HomeController","controllers/AboutController","controllers/DataController","controllers/MethodsController","controllers/PublicationsController","controllers/SubmissionController","utils/Hasher","utils/NavListController"],function(e,t,n,r,a,i,o,s,l,c,u,d,p,f,m,h){"use strict";var g={};return{init:function(e){var t=this;t.load("header",function(n){i.init(n),i.updateView(e,!1),t.load(e)}),t.load("footer",o.init)},load:function(e,t){if(e){var n=this;t||(t=this.getCallback(e)),g[e]?(t||(t=this.getCallback(e)),t(),n.viewLoaded(e),r.byId("stackContainer").resize()):(g[e]=!0,a.getTemplate(e).then(function(a){t(a),n.viewLoaded(e),r.byId("stackContainer").resize()}))}},viewLoaded:function(t){"header"!==t&&"footer"!==t&&(o.toggle("map"===t),i.toggleForView(t),e.remove("app-body"),e.add("app-body",t+"View"),h.urlControl(t))},getCallback:function(e){switch(e){case"home":return l.init.bind(l);case"map":return s.init.bind(s);case"data":return u.init.bind(u);case"methods":return d.init.bind(d);case"about":return c.init.bind(c);case"publications":return p.init.bind(p);case"submission":return f.init.bind(f);default:return}}}}),define("utils/Delegator",["dojo/topic","map/config","map/Controls","map/MapModel","analysis/Query","analysis/config","utils/Helper","map/LayerController","controllers/MapController","controllers/ViewController"],function(e,t,n,r,a,i,o,s,l,c){"use strict";return{startListening:function(){e.subscribe("changeView",function(e){c.load(e)}),e.subscribe("toggleWizard",function(){o.toggleWizard()}),e.subscribe("toggleAlerts",function(){o.toggleAlerts()}),e.subscribe("setAdminBoundariesDefinition",function(n){s.setWizardDynamicLayerDefinition(t.adminUnitsLayer,n),n&&a.zoomToFeatures(i.adminUnit.countryBoundaries,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(s.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCertificationSchemeDefinition",function(n){s.setWizardDynamicLayerDefinition(t.certificationSchemeLayer,n),n&&a.zoomToFeatures(i.certifiedArea.schemeQuery,n);var r=app.map.getLayer(t.mill.id);r&&r.visible&&(s.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("setCommercialEntityDefinition",function(n){"Logging concession"===n?e.publish("toggleItemInLayerList","logPerm"):"Oil palm concession"===n?e.publish("toggleItemInLayerList","oilPerm"):"Mining concession"===n?e.publish("toggleItemInLayerList","minePerm"):"Wood fiber plantation"===n?e.publish("toggleItemInLayerList","woodPerm"):n||e.publish("toggleItemInLayerListOff");var r=app.map.getLayer(t.mill.id);r&&r.visible&&(s.setWizardMillPointsLayerDefinition(t.mill),e.publish("toggleItemInLayerList","mill"))}),e.subscribe("showMillPoints",function(){s.setWizardDynamicLayerDefinition(t.certificationSchemeLayer),s.setWizardMillPointsLayerDefinition(t.mill),s.setWizardMillPointsLayerDefinition(t.gfwMill)}),e.subscribe("toggleLayer",function(e){var r=t[e];if(r){if(r.toolsNode){var a=app.map.getLayer(r.id).visible?"hide":"show";n.toggleToolbox(r,a)}s.toggleLayers(r)}}),e.subscribe("showLayer",function(e){var r=t[e];r&&(s.showLayer(r),r.toolsNode&&n.toggleToolbox(r,"show"))}),e.subscribe("hideLayer",function(e){var r=t[e];r&&(s.hideLayer(r),r.toolsNode&&n.toggleToolbox(r,"hide"))}),e.subscribe("updateLayer",function(e){if("tiled"===e.layerType){var n=t[e.id];n&&s.toggleLayers(n)}else"dynamic"===e.layerType&&s.updateLayer(e)}),e.subscribe("toggleGladConfidence",function(e){s.toggleGladConfidence(e)}),e.subscribe("updateGladDates",function(e){s.updateGladDates(e)}),e.subscribe("changeLayerTransparency",function(e,n,r){var a=t[e];a&&s.changeLayerTransparency(a,n,r)}),e.subscribe("customSuitabilityImageReady",function(){s.hideSuitabilityLoader()}),e.subscribe("showInfoPanel",l.showInfoPanel),e.subscribe("toggleItemInLayerList",l.toggleItemInLayerList),e.subscribe("toggleItemInLayerListOff",l.toggleItemInLayerListOff),e.subscribe("centerChange",function(e,t,n){l.centerChange(e,t,n)}),e.subscribe("showConcessionsLegend",function(){app.map._simpleLegends.concessions.show()}),e.subscribe("hideConcessionsLegend",function(){app.map._simpleLegends.concessions.hide()}),e.subscribe("filterConcessionsLegendItems",function(e){app.map._simpleLegends.concessions.filterItem(e)})}}}),define("main/Main",["dojox/mobile/parser","main/config","esri/config","dojo/_base/array","dojo/has","utils/Hasher","utils/Helper","utils/Delegator","controllers/ViewController","esri/urlUtils","dijit/layout/ContentPane","dijit/layout/StackContainer"],function(e,t,n,r,a,i,o,s,l,c){"use strict";return{init:function(){c.addProxyRule({urlPrefix:"http://gis-gfw.wri.org/arcgis/rest/services/protected_services/MapServer",proxyUrl:"/app/php/proxy.php"}),c.addProxyRule({urlPrefix:"http://gis-gfw.wri.org/arcgis/rest/services/cached/wdpa_protected_areas/MapServer",proxyUrl:"/app/php/proxy.php"});var t,n,r=navigator.userAgent,i=/\(.*?(\d+\.\d+).*?\)/;r.search("Windows NT")>-1&&(n=i.exec(r),t=n?parseFloat(n[1]):void 0,t>=6.2?document.body.className+=" windows_8":document.body.className+=" windows_7"),a("trident")&&(document.documentElement.className+=" dj_ie"),e.parse(),window.app={},this.applyConfigurations(),this.launchApp()},applyConfigurations:function(){r.forEach(t.corsEnabledServers,function(e){n.defaults.io.corsEnabledServers.push(e)})},launchApp:function(){var e=i.init();o.enableLayout(),s.startListening(),l.init(e)}}}),function(){require(["main/Main"],function(e){e.init()})}(),define("app/js/bundle",function(){});